function yH(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _l(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function _H(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var z2={exports:{}},Zy={},H2={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp=Symbol.for("react.element"),xH=Symbol.for("react.portal"),wH=Symbol.for("react.fragment"),SH=Symbol.for("react.strict_mode"),AH=Symbol.for("react.profiler"),EH=Symbol.for("react.provider"),MH=Symbol.for("react.context"),bH=Symbol.for("react.forward_ref"),CH=Symbol.for("react.suspense"),TH=Symbol.for("react.memo"),RH=Symbol.for("react.lazy"),fT=Symbol.iterator;function PH(n){return n===null||typeof n!="object"?null:(n=fT&&n[fT]||n["@@iterator"],typeof n=="function"?n:null)}var G2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V2=Object.assign,W2={};function jf(n,e,t){this.props=n,this.context=e,this.refs=W2,this.updater=t||G2}jf.prototype.isReactComponent={};jf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};jf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function j2(){}j2.prototype=jf.prototype;function QA(n,e,t){this.props=n,this.context=e,this.refs=W2,this.updater=t||G2}var ZA=QA.prototype=new j2;ZA.constructor=QA;V2(ZA,jf.prototype);ZA.isPureReactComponent=!0;var hT=Array.isArray,$2=Object.prototype.hasOwnProperty,eE={current:null},X2={key:!0,ref:!0,__self:!0,__source:!0};function J2(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$2.call(e,r)&&!X2.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Tp,type:n,key:s,ref:o,props:i,_owner:eE.current}}function IH(n,e){return{$$typeof:Tp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function tE(n){return typeof n=="object"&&n!==null&&n.$$typeof===Tp}function BH(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var dT=/\/+/g;function vx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?BH(""+n.key):e.toString(36)}function Cv(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Tp:case xH:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+vx(o,0):r,hT(i)?(t="",n!=null&&(t=n.replace(dT,"$&/")+"/"),Cv(i,e,t,"",function(c){return c})):i!=null&&(tE(i)&&(i=IH(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dT,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hT(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+vx(s,a);o+=Cv(s,e,t,l,i)}else if(l=PH(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+vx(s,a++),o+=Cv(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qm(n,e,t){if(n==null)return n;var r=[],i=0;return Cv(n,r,"","",function(s){return e.call(t,s,i++)}),r}function DH(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var pi={current:null},Tv={transition:null},LH={ReactCurrentDispatcher:pi,ReactCurrentBatchConfig:Tv,ReactCurrentOwner:eE};function K2(){throw Error("act(...) is not supported in production builds of React.")}Jt.Children={map:Qm,forEach:function(n,e,t){Qm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Qm(n,function(){e++}),e},toArray:function(n){return Qm(n,function(e){return e})||[]},only:function(n){if(!tE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Jt.Component=jf;Jt.Fragment=wH;Jt.Profiler=AH;Jt.PureComponent=QA;Jt.StrictMode=SH;Jt.Suspense=CH;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LH;Jt.act=K2;Jt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=V2({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=eE.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)$2.call(e,l)&&!X2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Tp,type:n.type,key:i,ref:s,props:r,_owner:o}};Jt.createContext=function(n){return n={$$typeof:MH,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:EH,_context:n},n.Consumer=n};Jt.createElement=J2;Jt.createFactory=function(n){var e=J2.bind(null,n);return e.type=n,e};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(n){return{$$typeof:bH,render:n}};Jt.isValidElement=tE;Jt.lazy=function(n){return{$$typeof:RH,_payload:{_status:-1,_result:n},_init:DH}};Jt.memo=function(n,e){return{$$typeof:TH,type:n,compare:e===void 0?null:e}};Jt.startTransition=function(n){var e=Tv.transition;Tv.transition={};try{n()}finally{Tv.transition=e}};Jt.unstable_act=K2;Jt.useCallback=function(n,e){return pi.current.useCallback(n,e)};Jt.useContext=function(n){return pi.current.useContext(n)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(n){return pi.current.useDeferredValue(n)};Jt.useEffect=function(n,e){return pi.current.useEffect(n,e)};Jt.useId=function(){return pi.current.useId()};Jt.useImperativeHandle=function(n,e,t){return pi.current.useImperativeHandle(n,e,t)};Jt.useInsertionEffect=function(n,e){return pi.current.useInsertionEffect(n,e)};Jt.useLayoutEffect=function(n,e){return pi.current.useLayoutEffect(n,e)};Jt.useMemo=function(n,e){return pi.current.useMemo(n,e)};Jt.useReducer=function(n,e,t){return pi.current.useReducer(n,e,t)};Jt.useRef=function(n){return pi.current.useRef(n)};Jt.useState=function(n){return pi.current.useState(n)};Jt.useSyncExternalStore=function(n,e,t){return pi.current.useSyncExternalStore(n,e,t)};Jt.useTransition=function(){return pi.current.useTransition()};Jt.version="18.3.1";H2.exports=Jt;var B=H2.exports;const ne=_l(B),Y2=yH({__proto__:null,default:ne},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OH=B,NH=Symbol.for("react.element"),kH=Symbol.for("react.fragment"),FH=Object.prototype.hasOwnProperty,UH=OH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zH={key:!0,ref:!0,__self:!0,__source:!0};function q2(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FH.call(e,r)&&!zH.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:NH,type:n,key:s,ref:o,props:i,_owner:UH.current}}Zy.Fragment=kH;Zy.jsx=q2;Zy.jsxs=q2;z2.exports=Zy;var F=z2.exports,yS={},Q2={exports:{}},qi={},Z2={exports:{}},eD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,Y){var Z=k.length;k.push(Y);e:for(;0<Z;){var ae=Z-1>>>1,ye=k[ae];if(0<i(ye,Y))k[ae]=Y,k[Z]=ye,Z=ae;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var Y=k[0],Z=k.pop();if(Z!==Y){k[0]=Z;e:for(var ae=0,ye=k.length,Ue=ye>>>1;ae<Ue;){var he=2*(ae+1)-1,Te=k[he],Me=he+1,Be=k[Me];if(0>i(Te,Z))Me<ye&&0>i(Be,Te)?(k[ae]=Be,k[Me]=Z,ae=Me):(k[ae]=Te,k[he]=Z,ae=he);else if(Me<ye&&0>i(Be,Z))k[ae]=Be,k[Me]=Z,ae=Me;else break e}}return Y}function i(k,Y){var Z=k.sortIndex-Y.sortIndex;return Z!==0?Z:k.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=k)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function E(k){if(_=!1,S(k),!v)if(t(l)!==null)v=!0,ee(P);else{var Y=t(c);Y!==null&&fe(E,Y.startTime-k)}}function P(k,Y){v=!1,_&&(_=!1,g(L),L=-1),m=!0;var Z=p;try{for(S(Y),f=t(l);f!==null&&(!(f.expirationTime>Y)||k&&!O());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var ye=ae(f.expirationTime<=Y);Y=n.unstable_now(),typeof ye=="function"?f.callback=ye:f===t(l)&&r(l),S(Y)}else r(l);f=t(l)}if(f!==null)var Ue=!0;else{var he=t(c);he!==null&&fe(E,he.startTime-Y),Ue=!1}return Ue}finally{f=null,p=Z,m=!1}}var b=!1,R=null,L=-1,I=5,C=-1;function O(){return!(n.unstable_now()-C<I)}function V(){if(R!==null){var k=n.unstable_now();C=k;var Y=!0;try{Y=R(!0,k)}finally{Y?$():(b=!1,R=null)}}else b=!1}var $;if(typeof w=="function")$=function(){w(V)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ie=Q.port2;Q.port1.onmessage=V,$=function(){ie.postMessage(null)}}else $=function(){y(V,0)};function ee(k){R=k,b||(b=!0,$())}function fe(k,Y){L=y(function(){k(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(P))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return k()}finally{p=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,Y){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=p;p=k;try{return Y()}finally{p=Z}},n.unstable_scheduleCallback=function(k,Y,Z){var ae=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ae+Z:ae):Z=ae,k){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Z+ye,k={id:u++,callback:Y,priorityLevel:k,startTime:Z,expirationTime:ye,sortIndex:-1},Z>ae?(k.sortIndex=Z,e(c,k),t(l)===null&&k===t(c)&&(_?(g(L),L=-1):_=!0,fe(E,Z-ae))):(k.sortIndex=ye,e(l,k),v||m||(v=!0,ee(P))),k},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(k){var Y=p;return function(){var Z=p;p=Y;try{return k.apply(this,arguments)}finally{p=Z}}}})(eD);Z2.exports=eD;var HH=Z2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GH=B,Ji=HH;function Ge(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tD=new Set,Ud={};function jc(n,e){Ef(n,e),Ef(n+"Capture",e)}function Ef(n,e){for(Ud[n]=e,n=0;n<e.length;n++)tD.add(e[n])}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_S=Object.prototype.hasOwnProperty,VH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pT={},mT={};function WH(n){return _S.call(mT,n)?!0:_S.call(pT,n)?!1:VH.test(n)?mT[n]=!0:(pT[n]=!0,!1)}function jH(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $H(n,e,t,r){if(e===null||typeof e>"u"||jH(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Lr[n]=new mi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Lr[e]=new mi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Lr[n]=new mi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Lr[n]=new mi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Lr[n]=new mi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Lr[n]=new mi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Lr[n]=new mi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Lr[n]=new mi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Lr[n]=new mi(n,5,!1,n.toLowerCase(),null,!1,!1)});var nE=/[\-:]([a-z])/g;function rE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(nE,rE);Lr[e]=new mi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(nE,rE);Lr[e]=new mi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(nE,rE);Lr[e]=new mi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Lr[n]=new mi(n,1,!1,n.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new mi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Lr[n]=new mi(n,1,!1,n.toLowerCase(),null,!0,!0)});function iE(n,e,t,r){var i=Lr.hasOwnProperty(e)?Lr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($H(e,t,i,r)&&(t=null),r||i===null?WH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ga=GH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zm=Symbol.for("react.element"),Ju=Symbol.for("react.portal"),Ku=Symbol.for("react.fragment"),sE=Symbol.for("react.strict_mode"),xS=Symbol.for("react.profiler"),nD=Symbol.for("react.provider"),rD=Symbol.for("react.context"),oE=Symbol.for("react.forward_ref"),wS=Symbol.for("react.suspense"),SS=Symbol.for("react.suspense_list"),aE=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),iD=Symbol.for("react.offscreen"),gT=Symbol.iterator;function Bh(n){return n===null||typeof n!="object"?null:(n=gT&&n[gT]||n["@@iterator"],typeof n=="function"?n:null)}var Fn=Object.assign,yx;function ud(n){if(yx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);yx=e&&e[1]||""}return`
`+yx+n}var _x=!1;function xx(n,e){if(!n||_x)return"";_x=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{_x=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ud(n):""}function XH(n){switch(n.tag){case 5:return ud(n.type);case 16:return ud("Lazy");case 13:return ud("Suspense");case 19:return ud("SuspenseList");case 0:case 2:case 15:return n=xx(n.type,!1),n;case 11:return n=xx(n.type.render,!1),n;case 1:return n=xx(n.type,!0),n;default:return""}}function AS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ku:return"Fragment";case Ju:return"Portal";case xS:return"Profiler";case sE:return"StrictMode";case wS:return"Suspense";case SS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rD:return(n.displayName||"Context")+".Consumer";case nD:return(n._context.displayName||"Context")+".Provider";case oE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case aE:return e=n.displayName||null,e!==null?e:AS(n.type)||"Memo";case za:e=n._payload,n=n._init;try{return AS(n(e))}catch{}}return null}function JH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AS(e);case 8:return e===sE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ol(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function sD(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KH(n){var e=sD(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function eg(n){n._valueTracker||(n._valueTracker=KH(n))}function oD(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=sD(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ry(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ES(n,e){var t=e.checked;return Fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function vT(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ol(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aD(n,e){e=e.checked,e!=null&&iE(n,"checked",e,!1)}function MS(n,e){aD(n,e);var t=ol(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?bS(n,e.type,t):e.hasOwnProperty("defaultValue")&&bS(n,e.type,ol(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function yT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function bS(n,e,t){(e!=="number"||ry(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var fd=Array.isArray;function hf(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ol(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function CS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return Fn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function _T(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ge(92));if(fd(t)){if(1<t.length)throw Error(Ge(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ol(t)}}function lD(n,e){var t=ol(e.value),r=ol(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function xT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function cD(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?cD(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var tg,uD=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function zd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YH=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(n){YH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),xd[e]=xd[n]})});function fD(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||xd.hasOwnProperty(n)&&xd[n]?(""+e).trim():e+"px"}function hD(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=fD(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var qH=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RS(n,e){if(e){if(qH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ge(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ge(62))}}function PS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IS=null;function lE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var BS=null,df=null,pf=null;function wT(n){if(n=Ip(n)){if(typeof BS!="function")throw Error(Ge(280));var e=n.stateNode;e&&(e=i0(e),BS(n.stateNode,n.type,e))}}function dD(n){df?pf?pf.push(n):pf=[n]:df=n}function pD(){if(df){var n=df,e=pf;if(pf=df=null,wT(n),e)for(n=0;n<e.length;n++)wT(e[n])}}function mD(n,e){return n(e)}function gD(){}var wx=!1;function vD(n,e,t){if(wx)return n(e,t);wx=!0;try{return mD(n,e,t)}finally{wx=!1,(df!==null||pf!==null)&&(gD(),pD())}}function Hd(n,e){var t=n.stateNode;if(t===null)return null;var r=i0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ge(231,e,typeof t));return t}var DS=!1;if(ca)try{var Dh={};Object.defineProperty(Dh,"passive",{get:function(){DS=!0}}),window.addEventListener("test",Dh,Dh),window.removeEventListener("test",Dh,Dh)}catch{DS=!1}function QH(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var wd=!1,iy=null,sy=!1,LS=null,ZH={onError:function(n){wd=!0,iy=n}};function e4(n,e,t,r,i,s,o,a,l){wd=!1,iy=null,QH.apply(ZH,arguments)}function t4(n,e,t,r,i,s,o,a,l){if(e4.apply(this,arguments),wd){if(wd){var c=iy;wd=!1,iy=null}else throw Error(Ge(198));sy||(sy=!0,LS=c)}}function $c(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function yD(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function ST(n){if($c(n)!==n)throw Error(Ge(188))}function n4(n){var e=n.alternate;if(!e){if(e=$c(n),e===null)throw Error(Ge(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return ST(i),n;if(s===r)return ST(i),e;s=s.sibling}throw Error(Ge(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ge(189))}}if(t.alternate!==r)throw Error(Ge(190))}if(t.tag!==3)throw Error(Ge(188));return t.stateNode.current===t?n:e}function _D(n){return n=n4(n),n!==null?xD(n):null}function xD(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=xD(n);if(e!==null)return e;n=n.sibling}return null}var wD=Ji.unstable_scheduleCallback,AT=Ji.unstable_cancelCallback,r4=Ji.unstable_shouldYield,i4=Ji.unstable_requestPaint,Zn=Ji.unstable_now,s4=Ji.unstable_getCurrentPriorityLevel,cE=Ji.unstable_ImmediatePriority,SD=Ji.unstable_UserBlockingPriority,oy=Ji.unstable_NormalPriority,o4=Ji.unstable_LowPriority,AD=Ji.unstable_IdlePriority,e0=null,_o=null;function a4(n){if(_o&&typeof _o.onCommitFiberRoot=="function")try{_o.onCommitFiberRoot(e0,n,void 0,(n.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:u4,l4=Math.log,c4=Math.LN2;function u4(n){return n>>>=0,n===0?32:31-(l4(n)/c4|0)|0}var ng=64,rg=4194304;function hd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ay(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=hd(a):(s&=o,s!==0&&(r=hd(s)))}else o=t&~i,o!==0?r=hd(o):s!==0&&(r=hd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Vs(e),i=1<<t,r|=n[t],e&=~i;return r}function f4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h4(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Vs(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=f4(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function OS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ED(){var n=ng;return ng<<=1,!(ng&4194240)&&(ng=64),n}function Sx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Rp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Vs(e),n[e]=t}function d4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Vs(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function uE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Vs(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var hn=0;function MD(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var bD,fE,CD,TD,RD,NS=!1,ig=[],Ya=null,qa=null,Qa=null,Gd=new Map,Vd=new Map,Va=[],p4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ET(n,e){switch(n){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vd.delete(e.pointerId)}}function Lh(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ip(e),e!==null&&fE(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function m4(n,e,t,r,i){switch(e){case"focusin":return Ya=Lh(Ya,n,e,t,r,i),!0;case"dragenter":return qa=Lh(qa,n,e,t,r,i),!0;case"mouseover":return Qa=Lh(Qa,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Gd.set(s,Lh(Gd.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vd.set(s,Lh(Vd.get(s)||null,n,e,t,r,i)),!0}return!1}function PD(n){var e=lc(n.target);if(e!==null){var t=$c(e);if(t!==null){if(e=t.tag,e===13){if(e=yD(t),e!==null){n.blockedOn=e,RD(n.priority,function(){CD(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=kS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);IS=r,t.target.dispatchEvent(r),IS=null}else return e=Ip(t),e!==null&&fE(e),n.blockedOn=t,!1;e.shift()}return!0}function MT(n,e,t){Rv(n)&&t.delete(e)}function g4(){NS=!1,Ya!==null&&Rv(Ya)&&(Ya=null),qa!==null&&Rv(qa)&&(qa=null),Qa!==null&&Rv(Qa)&&(Qa=null),Gd.forEach(MT),Vd.forEach(MT)}function Oh(n,e){n.blockedOn===e&&(n.blockedOn=null,NS||(NS=!0,Ji.unstable_scheduleCallback(Ji.unstable_NormalPriority,g4)))}function Wd(n){function e(i){return Oh(i,n)}if(0<ig.length){Oh(ig[0],n);for(var t=1;t<ig.length;t++){var r=ig[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ya!==null&&Oh(Ya,n),qa!==null&&Oh(qa,n),Qa!==null&&Oh(Qa,n),Gd.forEach(e),Vd.forEach(e),t=0;t<Va.length;t++)r=Va[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Va.length&&(t=Va[0],t.blockedOn===null);)PD(t),t.blockedOn===null&&Va.shift()}var mf=ga.ReactCurrentBatchConfig,ly=!0;function v4(n,e,t,r){var i=hn,s=mf.transition;mf.transition=null;try{hn=1,hE(n,e,t,r)}finally{hn=i,mf.transition=s}}function y4(n,e,t,r){var i=hn,s=mf.transition;mf.transition=null;try{hn=4,hE(n,e,t,r)}finally{hn=i,mf.transition=s}}function hE(n,e,t,r){if(ly){var i=kS(n,e,t,r);if(i===null)Bx(n,e,r,cy,t),ET(n,r);else if(m4(i,n,e,t,r))r.stopPropagation();else if(ET(n,r),e&4&&-1<p4.indexOf(n)){for(;i!==null;){var s=Ip(i);if(s!==null&&bD(s),s=kS(n,e,t,r),s===null&&Bx(n,e,r,cy,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Bx(n,e,r,null,t)}}var cy=null;function kS(n,e,t,r){if(cy=null,n=lE(r),n=lc(n),n!==null)if(e=$c(n),e===null)n=null;else if(t=e.tag,t===13){if(n=yD(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return cy=n,null}function ID(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s4()){case cE:return 1;case SD:return 4;case oy:case o4:return 16;case AD:return 536870912;default:return 16}default:return 16}}var $a=null,dE=null,Pv=null;function BD(){if(Pv)return Pv;var n,e=dE,t=e.length,r,i="value"in $a?$a.value:$a.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Pv=i.slice(n,1<r?1-r:void 0)}function Iv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function sg(){return!0}function bT(){return!1}function Qi(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sg:bT,this.isPropagationStopped=bT,this}return Fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=sg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=sg)},persist:function(){},isPersistent:sg}),e}var $f={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pE=Qi($f),Pp=Fn({},$f,{view:0,detail:0}),_4=Qi(Pp),Ax,Ex,Nh,t0=Fn({},Pp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nh&&(Nh&&n.type==="mousemove"?(Ax=n.screenX-Nh.screenX,Ex=n.screenY-Nh.screenY):Ex=Ax=0,Nh=n),Ax)},movementY:function(n){return"movementY"in n?n.movementY:Ex}}),CT=Qi(t0),x4=Fn({},t0,{dataTransfer:0}),w4=Qi(x4),S4=Fn({},Pp,{relatedTarget:0}),Mx=Qi(S4),A4=Fn({},$f,{animationName:0,elapsedTime:0,pseudoElement:0}),E4=Qi(A4),M4=Fn({},$f,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),b4=Qi(M4),C4=Fn({},$f,{data:0}),TT=Qi(C4),T4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=P4[n])?!!e[n]:!1}function mE(){return I4}var B4=Fn({},Pp,{key:function(n){if(n.key){var e=T4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Iv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?R4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mE,charCode:function(n){return n.type==="keypress"?Iv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Iv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),D4=Qi(B4),L4=Fn({},t0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RT=Qi(L4),O4=Fn({},Pp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mE}),N4=Qi(O4),k4=Fn({},$f,{propertyName:0,elapsedTime:0,pseudoElement:0}),F4=Qi(k4),U4=Fn({},t0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),z4=Qi(U4),H4=[9,13,27,32],gE=ca&&"CompositionEvent"in window,Sd=null;ca&&"documentMode"in document&&(Sd=document.documentMode);var G4=ca&&"TextEvent"in window&&!Sd,DD=ca&&(!gE||Sd&&8<Sd&&11>=Sd),PT=" ",IT=!1;function LD(n,e){switch(n){case"keyup":return H4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OD(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yu=!1;function V4(n,e){switch(n){case"compositionend":return OD(e);case"keypress":return e.which!==32?null:(IT=!0,PT);case"textInput":return n=e.data,n===PT&&IT?null:n;default:return null}}function W4(n,e){if(Yu)return n==="compositionend"||!gE&&LD(n,e)?(n=BD(),Pv=dE=$a=null,Yu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DD&&e.locale!=="ko"?null:e.data;default:return null}}var j4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!j4[n.type]:e==="textarea"}function ND(n,e,t,r){dD(r),e=uy(e,"onChange"),0<e.length&&(t=new pE("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Ad=null,jd=null;function $4(n){XD(n,0)}function n0(n){var e=Zu(n);if(oD(e))return n}function X4(n,e){if(n==="change")return e}var kD=!1;if(ca){var bx;if(ca){var Cx="oninput"in document;if(!Cx){var DT=document.createElement("div");DT.setAttribute("oninput","return;"),Cx=typeof DT.oninput=="function"}bx=Cx}else bx=!1;kD=bx&&(!document.documentMode||9<document.documentMode)}function LT(){Ad&&(Ad.detachEvent("onpropertychange",FD),jd=Ad=null)}function FD(n){if(n.propertyName==="value"&&n0(jd)){var e=[];ND(e,jd,n,lE(n)),vD($4,e)}}function J4(n,e,t){n==="focusin"?(LT(),Ad=e,jd=t,Ad.attachEvent("onpropertychange",FD)):n==="focusout"&&LT()}function K4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return n0(jd)}function Y4(n,e){if(n==="click")return n0(e)}function q4(n,e){if(n==="input"||n==="change")return n0(e)}function Q4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xs=typeof Object.is=="function"?Object.is:Q4;function $d(n,e){if(Xs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!_S.call(e,i)||!Xs(n[i],e[i]))return!1}return!0}function OT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function NT(n,e){var t=OT(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=OT(t)}}function UD(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?UD(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function zD(){for(var n=window,e=ry();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ry(n.document)}return e}function vE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Z4(n){var e=zD(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&UD(t.ownerDocument.documentElement,t)){if(r!==null&&vE(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=NT(t,s);var o=NT(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var eG=ca&&"documentMode"in document&&11>=document.documentMode,qu=null,FS=null,Ed=null,US=!1;function kT(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;US||qu==null||qu!==ry(r)||(r=qu,"selectionStart"in r&&vE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ed&&$d(Ed,r)||(Ed=r,r=uy(FS,"onSelect"),0<r.length&&(e=new pE("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=qu)))}function og(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Qu={animationend:og("Animation","AnimationEnd"),animationiteration:og("Animation","AnimationIteration"),animationstart:og("Animation","AnimationStart"),transitionend:og("Transition","TransitionEnd")},Tx={},HD={};ca&&(HD=document.createElement("div").style,"AnimationEvent"in window||(delete Qu.animationend.animation,delete Qu.animationiteration.animation,delete Qu.animationstart.animation),"TransitionEvent"in window||delete Qu.transitionend.transition);function r0(n){if(Tx[n])return Tx[n];if(!Qu[n])return n;var e=Qu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in HD)return Tx[n]=e[t];return n}var GD=r0("animationend"),VD=r0("animationiteration"),WD=r0("animationstart"),jD=r0("transitionend"),$D=new Map,FT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xl(n,e){$D.set(n,e),jc(e,[n])}for(var Rx=0;Rx<FT.length;Rx++){var Px=FT[Rx],tG=Px.toLowerCase(),nG=Px[0].toUpperCase()+Px.slice(1);xl(tG,"on"+nG)}xl(GD,"onAnimationEnd");xl(VD,"onAnimationIteration");xl(WD,"onAnimationStart");xl("dblclick","onDoubleClick");xl("focusin","onFocus");xl("focusout","onBlur");xl(jD,"onTransitionEnd");Ef("onMouseEnter",["mouseout","mouseover"]);Ef("onMouseLeave",["mouseout","mouseover"]);Ef("onPointerEnter",["pointerout","pointerover"]);Ef("onPointerLeave",["pointerout","pointerover"]);jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rG=new Set("cancel close invalid load scroll toggle".split(" ").concat(dd));function UT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,t4(r,e,void 0,n),n.currentTarget=null}function XD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;UT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;UT(i,a,c),s=l}}}if(sy)throw n=LS,sy=!1,LS=null,n}function An(n,e){var t=e[WS];t===void 0&&(t=e[WS]=new Set);var r=n+"__bubble";t.has(r)||(JD(e,n,2,!1),t.add(r))}function Ix(n,e,t){var r=0;e&&(r|=4),JD(t,n,r,e)}var ag="_reactListening"+Math.random().toString(36).slice(2);function Xd(n){if(!n[ag]){n[ag]=!0,tD.forEach(function(t){t!=="selectionchange"&&(rG.has(t)||Ix(t,!1,n),Ix(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ag]||(e[ag]=!0,Ix("selectionchange",!1,e))}}function JD(n,e,t,r){switch(ID(e)){case 1:var i=v4;break;case 4:i=y4;break;default:i=hE}t=i.bind(null,e,t,n),i=void 0,!DS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Bx(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=lc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vD(function(){var c=s,u=lE(t),f=[];e:{var p=$D.get(n);if(p!==void 0){var m=pE,v=n;switch(n){case"keypress":if(Iv(t)===0)break e;case"keydown":case"keyup":m=D4;break;case"focusin":v="focus",m=Mx;break;case"focusout":v="blur",m=Mx;break;case"beforeblur":case"afterblur":m=Mx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=CT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=w4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=N4;break;case GD:case VD:case WD:m=E4;break;case jD:m=F4;break;case"scroll":m=_4;break;case"wheel":m=z4;break;case"copy":case"cut":case"paste":m=b4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=RT}var _=(e&4)!==0,y=!_&&n==="scroll",g=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,S;w!==null;){S=w;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=Hd(w,g),E!=null&&_.push(Jd(w,E,S)))),y)break;w=w.return}0<_.length&&(p=new m(p,v,null,t,u),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==IS&&(v=t.relatedTarget||t.fromElement)&&(lc(v)||v[ua]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?lc(v):null,v!==null&&(y=$c(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(_=CT,E="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(_=RT,E="onPointerLeave",g="onPointerEnter",w="pointer"),y=m==null?p:Zu(m),S=v==null?p:Zu(v),p=new _(E,w+"leave",m,t,u),p.target=y,p.relatedTarget=S,E=null,lc(u)===c&&(_=new _(g,w+"enter",v,t,u),_.target=S,_.relatedTarget=y,E=_),y=E,m&&v)t:{for(_=m,g=v,w=0,S=_;S;S=pu(S))w++;for(S=0,E=g;E;E=pu(E))S++;for(;0<w-S;)_=pu(_),w--;for(;0<S-w;)g=pu(g),S--;for(;w--;){if(_===g||g!==null&&_===g.alternate)break t;_=pu(_),g=pu(g)}_=null}else _=null;m!==null&&zT(f,p,m,_,!1),v!==null&&y!==null&&zT(f,y,v,_,!0)}}e:{if(p=c?Zu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=X4;else if(BT(p))if(kD)P=q4;else{P=K4;var b=J4}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=Y4);if(P&&(P=P(n,c))){ND(f,P,t,u);break e}b&&b(n,p,c),n==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&bS(p,"number",p.value)}switch(b=c?Zu(c):window,n){case"focusin":(BT(b)||b.contentEditable==="true")&&(qu=b,FS=c,Ed=null);break;case"focusout":Ed=FS=qu=null;break;case"mousedown":US=!0;break;case"contextmenu":case"mouseup":case"dragend":US=!1,kT(f,t,u);break;case"selectionchange":if(eG)break;case"keydown":case"keyup":kT(f,t,u)}var R;if(gE)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Yu?LD(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(DD&&t.locale!=="ko"&&(Yu||L!=="onCompositionStart"?L==="onCompositionEnd"&&Yu&&(R=BD()):($a=u,dE="value"in $a?$a.value:$a.textContent,Yu=!0)),b=uy(c,L),0<b.length&&(L=new TT(L,n,null,t,u),f.push({event:L,listeners:b}),R?L.data=R:(R=OD(t),R!==null&&(L.data=R)))),(R=G4?V4(n,t):W4(n,t))&&(c=uy(c,"onBeforeInput"),0<c.length&&(u=new TT("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=R))}XD(f,e)})}function Jd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function uy(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hd(n,t),s!=null&&r.unshift(Jd(n,s,i)),s=Hd(n,e),s!=null&&r.push(Jd(n,s,i))),n=n.return}return r}function pu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zT(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Hd(t,s),l!=null&&o.unshift(Jd(t,l,a))):i||(l=Hd(t,s),l!=null&&o.push(Jd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var iG=/\r\n?/g,sG=/\u0000|\uFFFD/g;function HT(n){return(typeof n=="string"?n:""+n).replace(iG,`
`).replace(sG,"")}function lg(n,e,t){if(e=HT(e),HT(n)!==e&&t)throw Error(Ge(425))}function fy(){}var zS=null,HS=null;function GS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var VS=typeof setTimeout=="function"?setTimeout:void 0,oG=typeof clearTimeout=="function"?clearTimeout:void 0,GT=typeof Promise=="function"?Promise:void 0,aG=typeof queueMicrotask=="function"?queueMicrotask:typeof GT<"u"?function(n){return GT.resolve(null).then(n).catch(lG)}:VS;function lG(n){setTimeout(function(){throw n})}function Dx(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Wd(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Wd(e)}function Za(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function VT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Xf=Math.random().toString(36).slice(2),go="__reactFiber$"+Xf,Kd="__reactProps$"+Xf,ua="__reactContainer$"+Xf,WS="__reactEvents$"+Xf,cG="__reactListeners$"+Xf,uG="__reactHandles$"+Xf;function lc(n){var e=n[go];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ua]||t[go]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=VT(n);n!==null;){if(t=n[go])return t;n=VT(n)}return e}n=t,t=n.parentNode}return null}function Ip(n){return n=n[go]||n[ua],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ge(33))}function i0(n){return n[Kd]||null}var jS=[],ef=-1;function wl(n){return{current:n}}function Mn(n){0>ef||(n.current=jS[ef],jS[ef]=null,ef--)}function Sn(n,e){ef++,jS[ef]=n.current,n.current=e}var al={},qr=wl(al),Ti=wl(!1),Pc=al;function Mf(n,e){var t=n.type.contextTypes;if(!t)return al;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ri(n){return n=n.childContextTypes,n!=null}function hy(){Mn(Ti),Mn(qr)}function WT(n,e,t){if(qr.current!==al)throw Error(Ge(168));Sn(qr,e),Sn(Ti,t)}function KD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ge(108,JH(n)||"Unknown",i));return Fn({},t,r)}function dy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||al,Pc=qr.current,Sn(qr,n),Sn(Ti,Ti.current),!0}function jT(n,e,t){var r=n.stateNode;if(!r)throw Error(Ge(169));t?(n=KD(n,e,Pc),r.__reactInternalMemoizedMergedChildContext=n,Mn(Ti),Mn(qr),Sn(qr,n)):Mn(Ti),Sn(Ti,t)}var Yo=null,s0=!1,Lx=!1;function YD(n){Yo===null?Yo=[n]:Yo.push(n)}function fG(n){s0=!0,YD(n)}function Sl(){if(!Lx&&Yo!==null){Lx=!0;var n=0,e=hn;try{var t=Yo;for(hn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Yo=null,s0=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(n+1)),wD(cE,Sl),i}finally{hn=e,Lx=!1}}return null}var tf=[],nf=0,py=null,my=0,cs=[],us=0,Ic=null,na=1,ra="";function Zl(n,e){tf[nf++]=my,tf[nf++]=py,py=n,my=e}function qD(n,e,t){cs[us++]=na,cs[us++]=ra,cs[us++]=Ic,Ic=n;var r=na;n=ra;var i=32-Vs(r)-1;r&=~(1<<i),t+=1;var s=32-Vs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,na=1<<32-Vs(e)+i|t<<i|r,ra=s+n}else na=1<<s|t<<i|r,ra=n}function yE(n){n.return!==null&&(Zl(n,1),qD(n,1,0))}function _E(n){for(;n===py;)py=tf[--nf],tf[nf]=null,my=tf[--nf],tf[nf]=null;for(;n===Ic;)Ic=cs[--us],cs[us]=null,ra=cs[--us],cs[us]=null,na=cs[--us],cs[us]=null}var ji=null,Wi=null,Tn=!1,zs=null;function QD(n,e){var t=ms(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function $T(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ji=n,Wi=Za(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ji=n,Wi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ic!==null?{id:na,overflow:ra}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ms(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ji=n,Wi=null,!0):!1;default:return!1}}function $S(n){return(n.mode&1)!==0&&(n.flags&128)===0}function XS(n){if(Tn){var e=Wi;if(e){var t=e;if(!$T(n,e)){if($S(n))throw Error(Ge(418));e=Za(t.nextSibling);var r=ji;e&&$T(n,e)?QD(r,t):(n.flags=n.flags&-4097|2,Tn=!1,ji=n)}}else{if($S(n))throw Error(Ge(418));n.flags=n.flags&-4097|2,Tn=!1,ji=n}}}function XT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ji=n}function cg(n){if(n!==ji)return!1;if(!Tn)return XT(n),Tn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!GS(n.type,n.memoizedProps)),e&&(e=Wi)){if($S(n))throw ZD(),Error(Ge(418));for(;e;)QD(n,e),e=Za(e.nextSibling)}if(XT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ge(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Wi=Za(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Wi=null}}else Wi=ji?Za(n.stateNode.nextSibling):null;return!0}function ZD(){for(var n=Wi;n;)n=Za(n.nextSibling)}function bf(){Wi=ji=null,Tn=!1}function xE(n){zs===null?zs=[n]:zs.push(n)}var hG=ga.ReactCurrentBatchConfig;function kh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ge(309));var r=t.stateNode}if(!r)throw Error(Ge(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ge(284));if(!t._owner)throw Error(Ge(290,n))}return n}function ug(n,e){throw n=Object.prototype.toString.call(e),Error(Ge(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function JT(n){var e=n._init;return e(n._payload)}function eL(n){function e(g,w){if(n){var S=g.deletions;S===null?(g.deletions=[w],g.flags|=16):S.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=rl(g,w),g.index=0,g.sibling=null,g}function s(g,w,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<w?(g.flags|=2,w):S):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,w,S,E){return w===null||w.tag!==6?(w=Hx(S,g.mode,E),w.return=g,w):(w=i(w,S),w.return=g,w)}function l(g,w,S,E){var P=S.type;return P===Ku?u(g,w,S.props.children,E,S.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===za&&JT(P)===w.type)?(E=i(w,S.props),E.ref=kh(g,w,S),E.return=g,E):(E=Fv(S.type,S.key,S.props,null,g.mode,E),E.ref=kh(g,w,S),E.return=g,E)}function c(g,w,S,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Gx(S,g.mode,E),w.return=g,w):(w=i(w,S.children||[]),w.return=g,w)}function u(g,w,S,E,P){return w===null||w.tag!==7?(w=wc(S,g.mode,E,P),w.return=g,w):(w=i(w,S),w.return=g,w)}function f(g,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Hx(""+w,g.mode,S),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zm:return S=Fv(w.type,w.key,w.props,null,g.mode,S),S.ref=kh(g,null,w),S.return=g,S;case Ju:return w=Gx(w,g.mode,S),w.return=g,w;case za:var E=w._init;return f(g,E(w._payload),S)}if(fd(w)||Bh(w))return w=wc(w,g.mode,S,null),w.return=g,w;ug(g,w)}return null}function p(g,w,S,E){var P=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:a(g,w,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zm:return S.key===P?l(g,w,S,E):null;case Ju:return S.key===P?c(g,w,S,E):null;case za:return P=S._init,p(g,w,P(S._payload),E)}if(fd(S)||Bh(S))return P!==null?null:u(g,w,S,E,null);ug(g,S)}return null}function m(g,w,S,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(w,g,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zm:return g=g.get(E.key===null?S:E.key)||null,l(w,g,E,P);case Ju:return g=g.get(E.key===null?S:E.key)||null,c(w,g,E,P);case za:var b=E._init;return m(g,w,S,b(E._payload),P)}if(fd(E)||Bh(E))return g=g.get(S)||null,u(w,g,E,P,null);ug(w,E)}return null}function v(g,w,S,E){for(var P=null,b=null,R=w,L=w=0,I=null;R!==null&&L<S.length;L++){R.index>L?(I=R,R=null):I=R.sibling;var C=p(g,R,S[L],E);if(C===null){R===null&&(R=I);break}n&&R&&C.alternate===null&&e(g,R),w=s(C,w,L),b===null?P=C:b.sibling=C,b=C,R=I}if(L===S.length)return t(g,R),Tn&&Zl(g,L),P;if(R===null){for(;L<S.length;L++)R=f(g,S[L],E),R!==null&&(w=s(R,w,L),b===null?P=R:b.sibling=R,b=R);return Tn&&Zl(g,L),P}for(R=r(g,R);L<S.length;L++)I=m(R,g,L,S[L],E),I!==null&&(n&&I.alternate!==null&&R.delete(I.key===null?L:I.key),w=s(I,w,L),b===null?P=I:b.sibling=I,b=I);return n&&R.forEach(function(O){return e(g,O)}),Tn&&Zl(g,L),P}function _(g,w,S,E){var P=Bh(S);if(typeof P!="function")throw Error(Ge(150));if(S=P.call(S),S==null)throw Error(Ge(151));for(var b=P=null,R=w,L=w=0,I=null,C=S.next();R!==null&&!C.done;L++,C=S.next()){R.index>L?(I=R,R=null):I=R.sibling;var O=p(g,R,C.value,E);if(O===null){R===null&&(R=I);break}n&&R&&O.alternate===null&&e(g,R),w=s(O,w,L),b===null?P=O:b.sibling=O,b=O,R=I}if(C.done)return t(g,R),Tn&&Zl(g,L),P;if(R===null){for(;!C.done;L++,C=S.next())C=f(g,C.value,E),C!==null&&(w=s(C,w,L),b===null?P=C:b.sibling=C,b=C);return Tn&&Zl(g,L),P}for(R=r(g,R);!C.done;L++,C=S.next())C=m(R,g,L,C.value,E),C!==null&&(n&&C.alternate!==null&&R.delete(C.key===null?L:C.key),w=s(C,w,L),b===null?P=C:b.sibling=C,b=C);return n&&R.forEach(function(V){return e(g,V)}),Tn&&Zl(g,L),P}function y(g,w,S,E){if(typeof S=="object"&&S!==null&&S.type===Ku&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Zm:e:{for(var P=S.key,b=w;b!==null;){if(b.key===P){if(P=S.type,P===Ku){if(b.tag===7){t(g,b.sibling),w=i(b,S.props.children),w.return=g,g=w;break e}}else if(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===za&&JT(P)===b.type){t(g,b.sibling),w=i(b,S.props),w.ref=kh(g,b,S),w.return=g,g=w;break e}t(g,b);break}else e(g,b);b=b.sibling}S.type===Ku?(w=wc(S.props.children,g.mode,E,S.key),w.return=g,g=w):(E=Fv(S.type,S.key,S.props,null,g.mode,E),E.ref=kh(g,w,S),E.return=g,g=E)}return o(g);case Ju:e:{for(b=S.key;w!==null;){if(w.key===b)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(g,w.sibling),w=i(w,S.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=Gx(S,g.mode,E),w.return=g,g=w}return o(g);case za:return b=S._init,y(g,w,b(S._payload),E)}if(fd(S))return v(g,w,S,E);if(Bh(S))return _(g,w,S,E);ug(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(g,w.sibling),w=i(w,S),w.return=g,g=w):(t(g,w),w=Hx(S,g.mode,E),w.return=g,g=w),o(g)):t(g,w)}return y}var Cf=eL(!0),tL=eL(!1),gy=wl(null),vy=null,rf=null,wE=null;function SE(){wE=rf=vy=null}function AE(n){var e=gy.current;Mn(gy),n._currentValue=e}function JS(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function gf(n,e){vy=n,wE=rf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Mi=!0),n.firstContext=null)}function ws(n){var e=n._currentValue;if(wE!==n)if(n={context:n,memoizedValue:e,next:null},rf===null){if(vy===null)throw Error(Ge(308));rf=n,vy.dependencies={lanes:0,firstContext:n}}else rf=rf.next=n;return e}var cc=null;function EE(n){cc===null?cc=[n]:cc.push(n)}function nL(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,EE(e)):(t.next=i.next,i.next=t),e.interleaved=t,fa(n,r)}function fa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ha=!1;function ME(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rL(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function sa(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function el(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,sn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fa(n,t)}return i=r.interleaved,i===null?(e.next=e,EE(r)):(e.next=i.next,i.next=e),r.interleaved=e,fa(n,t)}function Bv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uE(n,t)}}function KT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function yy(n,e,t,r){var i=n.updateQueue;Ha=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,_=a;switch(p=e,m=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Fn({},f,p);break e;case 2:Ha=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Dc|=o,n.lanes=o,n.memoizedState=f}}function YT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ge(191,i));i.call(r)}}}var Bp={},xo=wl(Bp),Yd=wl(Bp),qd=wl(Bp);function uc(n){if(n===Bp)throw Error(Ge(174));return n}function bE(n,e){switch(Sn(qd,e),Sn(Yd,n),Sn(xo,Bp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:TS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=TS(e,n)}Mn(xo),Sn(xo,e)}function Tf(){Mn(xo),Mn(Yd),Mn(qd)}function iL(n){uc(qd.current);var e=uc(xo.current),t=TS(e,n.type);e!==t&&(Sn(Yd,n),Sn(xo,t))}function CE(n){Yd.current===n&&(Mn(xo),Mn(Yd))}var Dn=wl(0);function _y(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ox=[];function TE(){for(var n=0;n<Ox.length;n++)Ox[n]._workInProgressVersionPrimary=null;Ox.length=0}var Dv=ga.ReactCurrentDispatcher,Nx=ga.ReactCurrentBatchConfig,Bc=0,kn=null,hr=null,wr=null,xy=!1,Md=!1,Qd=0,dG=0;function Hr(){throw Error(Ge(321))}function RE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Xs(n[t],e[t]))return!1;return!0}function PE(n,e,t,r,i,s){if(Bc=s,kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dv.current=n===null||n.memoizedState===null?vG:yG,n=t(r,i),Md){s=0;do{if(Md=!1,Qd=0,25<=s)throw Error(Ge(301));s+=1,wr=hr=null,e.updateQueue=null,Dv.current=_G,n=t(r,i)}while(Md)}if(Dv.current=wy,e=hr!==null&&hr.next!==null,Bc=0,wr=hr=kn=null,xy=!1,e)throw Error(Ge(300));return n}function IE(){var n=Qd!==0;return Qd=0,n}function mo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?kn.memoizedState=wr=n:wr=wr.next=n,wr}function Ss(){if(hr===null){var n=kn.alternate;n=n!==null?n.memoizedState:null}else n=hr.next;var e=wr===null?kn.memoizedState:wr.next;if(e!==null)wr=e,hr=n;else{if(n===null)throw Error(Ge(310));hr=n,n={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},wr===null?kn.memoizedState=wr=n:wr=wr.next=n}return wr}function Zd(n,e){return typeof e=="function"?e(n):e}function kx(n){var e=Ss(),t=e.queue;if(t===null)throw Error(Ge(311));t.lastRenderedReducer=n;var r=hr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Bc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,kn.lanes|=u,Dc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Xs(r,e.memoizedState)||(Mi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,kn.lanes|=s,Dc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Fx(n){var e=Ss(),t=e.queue;if(t===null)throw Error(Ge(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Xs(s,e.memoizedState)||(Mi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function sL(){}function oL(n,e){var t=kn,r=Ss(),i=e(),s=!Xs(r.memoizedState,i);if(s&&(r.memoizedState=i,Mi=!0),r=r.queue,BE(cL.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||wr!==null&&wr.memoizedState.tag&1){if(t.flags|=2048,ep(9,lL.bind(null,t,r,i,e),void 0,null),Er===null)throw Error(Ge(349));Bc&30||aL(t,e,i)}return i}function aL(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function lL(n,e,t,r){e.value=t,e.getSnapshot=r,uL(e)&&fL(n)}function cL(n,e,t){return t(function(){uL(e)&&fL(n)})}function uL(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Xs(n,t)}catch{return!0}}function fL(n){var e=fa(n,1);e!==null&&Ws(e,n,1,-1)}function qT(n){var e=mo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:n},e.queue=n,n=n.dispatch=gG.bind(null,kn,n),[e.memoizedState,n]}function ep(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function hL(){return Ss().memoizedState}function Lv(n,e,t,r){var i=mo();kn.flags|=n,i.memoizedState=ep(1|e,t,void 0,r===void 0?null:r)}function o0(n,e,t,r){var i=Ss();r=r===void 0?null:r;var s=void 0;if(hr!==null){var o=hr.memoizedState;if(s=o.destroy,r!==null&&RE(r,o.deps)){i.memoizedState=ep(e,t,s,r);return}}kn.flags|=n,i.memoizedState=ep(1|e,t,s,r)}function QT(n,e){return Lv(8390656,8,n,e)}function BE(n,e){return o0(2048,8,n,e)}function dL(n,e){return o0(4,2,n,e)}function pL(n,e){return o0(4,4,n,e)}function mL(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function gL(n,e,t){return t=t!=null?t.concat([n]):null,o0(4,4,mL.bind(null,e,n),t)}function DE(){}function vL(n,e){var t=Ss();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&RE(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function yL(n,e){var t=Ss();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&RE(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function _L(n,e,t){return Bc&21?(Xs(t,e)||(t=ED(),kn.lanes|=t,Dc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Mi=!0),n.memoizedState=t)}function pG(n,e){var t=hn;hn=t!==0&&4>t?t:4,n(!0);var r=Nx.transition;Nx.transition={};try{n(!1),e()}finally{hn=t,Nx.transition=r}}function xL(){return Ss().memoizedState}function mG(n,e,t){var r=nl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},wL(n))SL(e,t);else if(t=nL(n,e,t,r),t!==null){var i=hi();Ws(t,n,r,i),AL(t,e,r)}}function gG(n,e,t){var r=nl(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(wL(n))SL(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Xs(a,o)){var l=e.interleaved;l===null?(i.next=i,EE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=nL(n,e,i,r),t!==null&&(i=hi(),Ws(t,n,r,i),AL(t,e,r))}}function wL(n){var e=n.alternate;return n===kn||e!==null&&e===kn}function SL(n,e){Md=xy=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function AL(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uE(n,t)}}var wy={readContext:ws,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},vG={readContext:ws,useCallback:function(n,e){return mo().memoizedState=[n,e===void 0?null:e],n},useContext:ws,useEffect:QT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Lv(4194308,4,mL.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Lv(4194308,4,n,e)},useInsertionEffect:function(n,e){return Lv(4,2,n,e)},useMemo:function(n,e){var t=mo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=mo();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=mG.bind(null,kn,n),[r.memoizedState,n]},useRef:function(n){var e=mo();return n={current:n},e.memoizedState=n},useState:qT,useDebugValue:DE,useDeferredValue:function(n){return mo().memoizedState=n},useTransition:function(){var n=qT(!1),e=n[0];return n=pG.bind(null,n[1]),mo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=kn,i=mo();if(Tn){if(t===void 0)throw Error(Ge(407));t=t()}else{if(t=e(),Er===null)throw Error(Ge(349));Bc&30||aL(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,QT(cL.bind(null,r,s,n),[n]),r.flags|=2048,ep(9,lL.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=mo(),e=Er.identifierPrefix;if(Tn){var t=ra,r=na;t=(r&~(1<<32-Vs(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Qd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=dG++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},yG={readContext:ws,useCallback:vL,useContext:ws,useEffect:BE,useImperativeHandle:gL,useInsertionEffect:dL,useLayoutEffect:pL,useMemo:yL,useReducer:kx,useRef:hL,useState:function(){return kx(Zd)},useDebugValue:DE,useDeferredValue:function(n){var e=Ss();return _L(e,hr.memoizedState,n)},useTransition:function(){var n=kx(Zd)[0],e=Ss().memoizedState;return[n,e]},useMutableSource:sL,useSyncExternalStore:oL,useId:xL,unstable_isNewReconciler:!1},_G={readContext:ws,useCallback:vL,useContext:ws,useEffect:BE,useImperativeHandle:gL,useInsertionEffect:dL,useLayoutEffect:pL,useMemo:yL,useReducer:Fx,useRef:hL,useState:function(){return Fx(Zd)},useDebugValue:DE,useDeferredValue:function(n){var e=Ss();return hr===null?e.memoizedState=n:_L(e,hr.memoizedState,n)},useTransition:function(){var n=Fx(Zd)[0],e=Ss().memoizedState;return[n,e]},useMutableSource:sL,useSyncExternalStore:oL,useId:xL,unstable_isNewReconciler:!1};function Ns(n,e){if(n&&n.defaultProps){e=Fn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function KS(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Fn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var a0={isMounted:function(n){return(n=n._reactInternals)?$c(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=hi(),i=nl(n),s=sa(r,i);s.payload=e,t!=null&&(s.callback=t),e=el(n,s,i),e!==null&&(Ws(e,n,i,r),Bv(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=hi(),i=nl(n),s=sa(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=el(n,s,i),e!==null&&(Ws(e,n,i,r),Bv(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=hi(),r=nl(n),i=sa(t,r);i.tag=2,e!=null&&(i.callback=e),e=el(n,i,r),e!==null&&(Ws(e,n,r,t),Bv(e,n,r))}};function ZT(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$d(t,r)||!$d(i,s):!0}function EL(n,e,t){var r=!1,i=al,s=e.contextType;return typeof s=="object"&&s!==null?s=ws(s):(i=Ri(e)?Pc:qr.current,r=e.contextTypes,s=(r=r!=null)?Mf(n,i):al),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=a0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function eR(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&a0.enqueueReplaceState(e,e.state,null)}function YS(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},ME(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ws(s):(s=Ri(e)?Pc:qr.current,i.context=Mf(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(KS(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&a0.enqueueReplaceState(i,i.state,null),yy(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Rf(n,e){try{var t="",r=e;do t+=XH(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Ux(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function qS(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var xG=typeof WeakMap=="function"?WeakMap:Map;function ML(n,e,t){t=sa(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Ay||(Ay=!0,a1=r),qS(n,e)},t}function bL(n,e,t){t=sa(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){qS(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){qS(n,e),typeof r!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function tR(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new xG;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=LG.bind(null,n,e,t),e.then(n,n))}function nR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function rR(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=sa(-1,1),e.tag=2,el(t,e,1))),t.lanes|=1),n)}var wG=ga.ReactCurrentOwner,Mi=!1;function ai(n,e,t,r){e.child=n===null?tL(e,null,t,r):Cf(e,n.child,t,r)}function iR(n,e,t,r,i){t=t.render;var s=e.ref;return gf(e,i),r=PE(n,e,t,r,s,i),t=IE(),n!==null&&!Mi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ha(n,e,i)):(Tn&&t&&yE(e),e.flags|=1,ai(n,e,r,i),e.child)}function sR(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!HE(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,CL(n,e,s,r,i)):(n=Fv(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:$d,t(o,r)&&n.ref===e.ref)return ha(n,e,i)}return e.flags|=1,n=rl(s,r),n.ref=e.ref,n.return=e,e.child=n}function CL(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if($d(s,r)&&n.ref===e.ref)if(Mi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Mi=!0);else return e.lanes=n.lanes,ha(n,e,i)}return QS(n,e,t,r,i)}function TL(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(of,zi),zi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Sn(of,zi),zi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Sn(of,zi),zi|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Sn(of,zi),zi|=r;return ai(n,e,i,t),e.child}function RL(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function QS(n,e,t,r,i){var s=Ri(t)?Pc:qr.current;return s=Mf(e,s),gf(e,i),t=PE(n,e,t,r,s,i),r=IE(),n!==null&&!Mi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ha(n,e,i)):(Tn&&r&&yE(e),e.flags|=1,ai(n,e,t,i),e.child)}function oR(n,e,t,r,i){if(Ri(t)){var s=!0;dy(e)}else s=!1;if(gf(e,i),e.stateNode===null)Ov(n,e),EL(e,t,r),YS(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ws(c):(c=Ri(t)?Pc:qr.current,c=Mf(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&eR(e,o,r,c),Ha=!1;var p=e.memoizedState;o.state=p,yy(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ti.current||Ha?(typeof u=="function"&&(KS(e,t,u,r),l=e.memoizedState),(a=Ha||ZT(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rL(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ns(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ws(l):(l=Ri(t)?Pc:qr.current,l=Mf(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&eR(e,o,r,l),Ha=!1,p=e.memoizedState,o.state=p,yy(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||Ti.current||Ha?(typeof m=="function"&&(KS(e,t,m,r),v=e.memoizedState),(c=Ha||ZT(e,t,c,r,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return ZS(n,e,t,r,s,i)}function ZS(n,e,t,r,i,s){RL(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&jT(e,t,!1),ha(n,e,s);r=e.stateNode,wG.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Cf(e,n.child,null,s),e.child=Cf(e,null,a,s)):ai(n,e,a,s),e.memoizedState=r.state,i&&jT(e,t,!0),e.child}function PL(n){var e=n.stateNode;e.pendingContext?WT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&WT(n,e.context,!1),bE(n,e.containerInfo)}function aR(n,e,t,r,i){return bf(),xE(i),e.flags|=256,ai(n,e,t,r),e.child}var e1={dehydrated:null,treeContext:null,retryLane:0};function t1(n){return{baseLanes:n,cachePool:null,transitions:null}}function IL(n,e,t){var r=e.pendingProps,i=Dn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Sn(Dn,i&1),n===null)return XS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=u0(o,r,0,null),n=wc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=t1(t),e.memoizedState=e1,n):LE(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return SG(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=rl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=rl(a,s):(s=wc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?t1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=e1,r}return s=n.child,n=s.sibling,r=rl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function LE(n,e){return e=u0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function fg(n,e,t,r){return r!==null&&xE(r),Cf(e,n.child,null,t),n=LE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function SG(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Ux(Error(Ge(422))),fg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=u0({mode:"visible",children:r.children},i,0,null),s=wc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Cf(e,n.child,null,o),e.child.memoizedState=t1(o),e.memoizedState=e1,s);if(!(e.mode&1))return fg(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ge(419)),r=Ux(s,r,void 0),fg(n,e,o,r)}if(a=(o&n.childLanes)!==0,Mi||a){if(r=Er,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fa(n,i),Ws(r,n,i,-1))}return zE(),r=Ux(Error(Ge(421))),fg(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=OG.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Wi=Za(i.nextSibling),ji=e,Tn=!0,zs=null,n!==null&&(cs[us++]=na,cs[us++]=ra,cs[us++]=Ic,na=n.id,ra=n.overflow,Ic=e),e=LE(e,r.children),e.flags|=4096,e)}function lR(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),JS(n.return,e,t)}function zx(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function BL(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ai(n,e,r.children,t),r=Dn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lR(n,t,e);else if(n.tag===19)lR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Sn(Dn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&_y(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),zx(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&_y(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}zx(e,!0,t,null,s);break;case"together":zx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ov(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ha(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Dc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ge(153));if(e.child!==null){for(n=e.child,t=rl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=rl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function AG(n,e,t){switch(e.tag){case 3:PL(e),bf();break;case 5:iL(e);break;case 1:Ri(e.type)&&dy(e);break;case 4:bE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Sn(gy,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Sn(Dn,Dn.current&1),e.flags|=128,null):t&e.child.childLanes?IL(n,e,t):(Sn(Dn,Dn.current&1),n=ha(n,e,t),n!==null?n.sibling:null);Sn(Dn,Dn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return BL(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Sn(Dn,Dn.current),r)break;return null;case 22:case 23:return e.lanes=0,TL(n,e,t)}return ha(n,e,t)}var DL,n1,LL,OL;DL=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};n1=function(){};LL=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,uc(xo.current);var s=null;switch(t){case"input":i=ES(n,i),r=ES(n,r),s=[];break;case"select":i=Fn({},i,{value:void 0}),r=Fn({},r,{value:void 0}),s=[];break;case"textarea":i=CS(n,i),r=CS(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=fy)}RS(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ud.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ud.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&An("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};OL=function(n,e,t,r){t!==r&&(e.flags|=4)};function Fh(n,e){if(!Tn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Gr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function EG(n,e,t){var r=e.pendingProps;switch(_E(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(e),null;case 1:return Ri(e.type)&&hy(),Gr(e),null;case 3:return r=e.stateNode,Tf(),Mn(Ti),Mn(qr),TE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(cg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zs!==null&&(u1(zs),zs=null))),n1(n,e),Gr(e),null;case 5:CE(e);var i=uc(qd.current);if(t=e.type,n!==null&&e.stateNode!=null)LL(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ge(166));return Gr(e),null}if(n=uc(xo.current),cg(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[go]=e,r[Kd]=s,n=(e.mode&1)!==0,t){case"dialog":An("cancel",r),An("close",r);break;case"iframe":case"object":case"embed":An("load",r);break;case"video":case"audio":for(i=0;i<dd.length;i++)An(dd[i],r);break;case"source":An("error",r);break;case"img":case"image":case"link":An("error",r),An("load",r);break;case"details":An("toggle",r);break;case"input":vT(r,s),An("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},An("invalid",r);break;case"textarea":_T(r,s),An("invalid",r)}RS(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&lg(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lg(r.textContent,a,n),i=["children",""+a]):Ud.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&An("scroll",r)}switch(t){case"input":eg(r),yT(r,s,!0);break;case"textarea":eg(r),xT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=fy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=cD(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[go]=e,n[Kd]=r,DL(n,e,!1,!1),e.stateNode=n;e:{switch(o=PS(t,r),t){case"dialog":An("cancel",n),An("close",n),i=r;break;case"iframe":case"object":case"embed":An("load",n),i=r;break;case"video":case"audio":for(i=0;i<dd.length;i++)An(dd[i],n);i=r;break;case"source":An("error",n),i=r;break;case"img":case"image":case"link":An("error",n),An("load",n),i=r;break;case"details":An("toggle",n),i=r;break;case"input":vT(n,r),i=ES(n,r),An("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Fn({},r,{value:void 0}),An("invalid",n);break;case"textarea":_T(n,r),i=CS(n,r),An("invalid",n);break;default:i=r}RS(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?hD(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uD(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&zd(n,l):typeof l=="number"&&zd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ud.hasOwnProperty(s)?l!=null&&s==="onScroll"&&An("scroll",n):l!=null&&iE(n,s,l,o))}switch(t){case"input":eg(n),yT(n,r,!1);break;case"textarea":eg(n),xT(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ol(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?hf(n,!!r.multiple,s,!1):r.defaultValue!=null&&hf(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=fy)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gr(e),null;case 6:if(n&&e.stateNode!=null)OL(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ge(166));if(t=uc(qd.current),uc(xo.current),cg(e)){if(r=e.stateNode,t=e.memoizedProps,r[go]=e,(s=r.nodeValue!==t)&&(n=ji,n!==null))switch(n.tag){case 3:lg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&lg(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[go]=e,e.stateNode=r}return Gr(e),null;case 13:if(Mn(Dn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Tn&&Wi!==null&&e.mode&1&&!(e.flags&128))ZD(),bf(),e.flags|=98560,s=!1;else if(s=cg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ge(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ge(317));s[go]=e}else bf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gr(e),s=!1}else zs!==null&&(u1(zs),zs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Dn.current&1?dr===0&&(dr=3):zE())),e.updateQueue!==null&&(e.flags|=4),Gr(e),null);case 4:return Tf(),n1(n,e),n===null&&Xd(e.stateNode.containerInfo),Gr(e),null;case 10:return AE(e.type._context),Gr(e),null;case 17:return Ri(e.type)&&hy(),Gr(e),null;case 19:if(Mn(Dn),s=e.memoizedState,s===null)return Gr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fh(s,!1);else{if(dr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=_y(n),o!==null){for(e.flags|=128,Fh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Sn(Dn,Dn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Zn()>Pf&&(e.flags|=128,r=!0,Fh(s,!1),e.lanes=4194304)}else{if(!r)if(n=_y(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Fh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Tn)return Gr(e),null}else 2*Zn()-s.renderingStartTime>Pf&&t!==1073741824&&(e.flags|=128,r=!0,Fh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zn(),e.sibling=null,t=Dn.current,Sn(Dn,r?t&1|2:t&1),e):(Gr(e),null);case 22:case 23:return UE(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zi&1073741824&&(Gr(e),e.subtreeFlags&6&&(e.flags|=8192)):Gr(e),null;case 24:return null;case 25:return null}throw Error(Ge(156,e.tag))}function MG(n,e){switch(_E(e),e.tag){case 1:return Ri(e.type)&&hy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Tf(),Mn(Ti),Mn(qr),TE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return CE(e),null;case 13:if(Mn(Dn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ge(340));bf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Mn(Dn),null;case 4:return Tf(),null;case 10:return AE(e.type._context),null;case 22:case 23:return UE(),null;case 24:return null;default:return null}}var hg=!1,Xr=!1,bG=typeof WeakSet=="function"?WeakSet:Set,lt=null;function sf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Hn(n,e,r)}else t.current=null}function r1(n,e,t){try{t()}catch(r){Hn(n,e,r)}}var cR=!1;function CG(n,e){if(zS=ly,n=zD(),vE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(HS={focusedElem:n,selectionRange:t},ly=!1,lt=e;lt!==null;)if(e=lt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,lt=n;else for(;lt!==null;){e=lt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,y=v.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ns(e.type,_),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(E){Hn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,lt=n;break}lt=e.return}return v=cR,cR=!1,v}function bd(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&r1(e,t,s)}i=i.next}while(i!==r)}}function l0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function i1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function NL(n){var e=n.alternate;e!==null&&(n.alternate=null,NL(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[go],delete e[Kd],delete e[WS],delete e[cG],delete e[uG])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function kL(n){return n.tag===5||n.tag===3||n.tag===4}function uR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kL(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function s1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=fy));else if(r!==4&&(n=n.child,n!==null))for(s1(n,e,t),n=n.sibling;n!==null;)s1(n,e,t),n=n.sibling}function o1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(o1(n,e,t),n=n.sibling;n!==null;)o1(n,e,t),n=n.sibling}var Pr=null,Fs=!1;function Ca(n,e,t){for(t=t.child;t!==null;)FL(n,e,t),t=t.sibling}function FL(n,e,t){if(_o&&typeof _o.onCommitFiberUnmount=="function")try{_o.onCommitFiberUnmount(e0,t)}catch{}switch(t.tag){case 5:Xr||sf(t,e);case 6:var r=Pr,i=Fs;Pr=null,Ca(n,e,t),Pr=r,Fs=i,Pr!==null&&(Fs?(n=Pr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Pr.removeChild(t.stateNode));break;case 18:Pr!==null&&(Fs?(n=Pr,t=t.stateNode,n.nodeType===8?Dx(n.parentNode,t):n.nodeType===1&&Dx(n,t),Wd(n)):Dx(Pr,t.stateNode));break;case 4:r=Pr,i=Fs,Pr=t.stateNode.containerInfo,Fs=!0,Ca(n,e,t),Pr=r,Fs=i;break;case 0:case 11:case 14:case 15:if(!Xr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&r1(t,e,o),i=i.next}while(i!==r)}Ca(n,e,t);break;case 1:if(!Xr&&(sf(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Hn(t,e,a)}Ca(n,e,t);break;case 21:Ca(n,e,t);break;case 22:t.mode&1?(Xr=(r=Xr)||t.memoizedState!==null,Ca(n,e,t),Xr=r):Ca(n,e,t);break;default:Ca(n,e,t)}}function fR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new bG),e.forEach(function(r){var i=NG.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Is(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pr=a.stateNode,Fs=!1;break e;case 3:Pr=a.stateNode.containerInfo,Fs=!0;break e;case 4:Pr=a.stateNode.containerInfo,Fs=!0;break e}a=a.return}if(Pr===null)throw Error(Ge(160));FL(s,o,i),Pr=null,Fs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Hn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UL(e,n),e=e.sibling}function UL(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Is(e,n),ho(n),r&4){try{bd(3,n,n.return),l0(3,n)}catch(_){Hn(n,n.return,_)}try{bd(5,n,n.return)}catch(_){Hn(n,n.return,_)}}break;case 1:Is(e,n),ho(n),r&512&&t!==null&&sf(t,t.return);break;case 5:if(Is(e,n),ho(n),r&512&&t!==null&&sf(t,t.return),n.flags&32){var i=n.stateNode;try{zd(i,"")}catch(_){Hn(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aD(i,s),PS(a,o);var c=PS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?hD(i,f):u==="dangerouslySetInnerHTML"?uD(i,f):u==="children"?zd(i,f):iE(i,u,f,c)}switch(a){case"input":MS(i,s);break;case"textarea":lD(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?hf(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?hf(i,!!s.multiple,s.defaultValue,!0):hf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Kd]=s}catch(_){Hn(n,n.return,_)}}break;case 6:if(Is(e,n),ho(n),r&4){if(n.stateNode===null)throw Error(Ge(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(_){Hn(n,n.return,_)}}break;case 3:if(Is(e,n),ho(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Wd(e.containerInfo)}catch(_){Hn(n,n.return,_)}break;case 4:Is(e,n),ho(n);break;case 13:Is(e,n),ho(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kE=Zn())),r&4&&fR(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Xr=(c=Xr)||u,Is(e,n),Xr=c):Is(e,n),ho(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(lt=n,u=n.child;u!==null;){for(f=lt=u;lt!==null;){switch(p=lt,m=p.child,p.tag){case 0:case 11:case 14:case 15:bd(4,p,p.return);break;case 1:sf(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Hn(r,t,_)}}break;case 5:sf(p,p.return);break;case 22:if(p.memoizedState!==null){dR(f);continue}}m!==null?(m.return=p,lt=m):dR(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fD("display",o))}catch(_){Hn(n,n.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){Hn(n,n.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Is(e,n),ho(n),r&4&&fR(n);break;case 21:break;default:Is(e,n),ho(n)}}function ho(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(kL(t)){var r=t;break e}t=t.return}throw Error(Ge(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zd(i,""),r.flags&=-33);var s=uR(n);o1(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uR(n);s1(n,a,o);break;default:throw Error(Ge(161))}}catch(l){Hn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function TG(n,e,t){lt=n,zL(n)}function zL(n,e,t){for(var r=(n.mode&1)!==0;lt!==null;){var i=lt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Xr;a=hg;var c=Xr;if(hg=o,(Xr=l)&&!c)for(lt=i;lt!==null;)o=lt,l=o.child,o.tag===22&&o.memoizedState!==null?pR(i):l!==null?(l.return=o,lt=l):pR(i);for(;s!==null;)lt=s,zL(s),s=s.sibling;lt=i,hg=a,Xr=c}hR(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,lt=s):hR(n)}}function hR(n){for(;lt!==null;){var e=lt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xr||l0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ns(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&YT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}YT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Wd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}Xr||e.flags&512&&i1(e)}catch(p){Hn(e,e.return,p)}}if(e===n){lt=null;break}if(t=e.sibling,t!==null){t.return=e.return,lt=t;break}lt=e.return}}function dR(n){for(;lt!==null;){var e=lt;if(e===n){lt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,lt=t;break}lt=e.return}}function pR(n){for(;lt!==null;){var e=lt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{l0(4,e)}catch(l){Hn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Hn(e,i,l)}}var s=e.return;try{i1(e)}catch(l){Hn(e,s,l)}break;case 5:var o=e.return;try{i1(e)}catch(l){Hn(e,o,l)}}}catch(l){Hn(e,e.return,l)}if(e===n){lt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,lt=a;break}lt=e.return}}var RG=Math.ceil,Sy=ga.ReactCurrentDispatcher,OE=ga.ReactCurrentOwner,_s=ga.ReactCurrentBatchConfig,sn=0,Er=null,sr=null,Br=0,zi=0,of=wl(0),dr=0,tp=null,Dc=0,c0=0,NE=0,Cd=null,Ei=null,kE=0,Pf=1/0,Jo=null,Ay=!1,a1=null,tl=null,dg=!1,Xa=null,Ey=0,Td=0,l1=null,Nv=-1,kv=0;function hi(){return sn&6?Zn():Nv!==-1?Nv:Nv=Zn()}function nl(n){return n.mode&1?sn&2&&Br!==0?Br&-Br:hG.transition!==null?(kv===0&&(kv=ED()),kv):(n=hn,n!==0||(n=window.event,n=n===void 0?16:ID(n.type)),n):1}function Ws(n,e,t,r){if(50<Td)throw Td=0,l1=null,Error(Ge(185));Rp(n,t,r),(!(sn&2)||n!==Er)&&(n===Er&&(!(sn&2)&&(c0|=t),dr===4&&Wa(n,Br)),Pi(n,r),t===1&&sn===0&&!(e.mode&1)&&(Pf=Zn()+500,s0&&Sl()))}function Pi(n,e){var t=n.callbackNode;h4(n,e);var r=ay(n,n===Er?Br:0);if(r===0)t!==null&&AT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&AT(t),e===1)n.tag===0?fG(mR.bind(null,n)):YD(mR.bind(null,n)),aG(function(){!(sn&6)&&Sl()}),t=null;else{switch(MD(r)){case 1:t=cE;break;case 4:t=SD;break;case 16:t=oy;break;case 536870912:t=AD;break;default:t=oy}t=JL(t,HL.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function HL(n,e){if(Nv=-1,kv=0,sn&6)throw Error(Ge(327));var t=n.callbackNode;if(vf()&&n.callbackNode!==t)return null;var r=ay(n,n===Er?Br:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=My(n,r);else{e=r;var i=sn;sn|=2;var s=VL();(Er!==n||Br!==e)&&(Jo=null,Pf=Zn()+500,xc(n,e));do try{BG();break}catch(a){GL(n,a)}while(!0);SE(),Sy.current=s,sn=i,sr!==null?e=0:(Er=null,Br=0,e=dr)}if(e!==0){if(e===2&&(i=OS(n),i!==0&&(r=i,e=c1(n,i))),e===1)throw t=tp,xc(n,0),Wa(n,r),Pi(n,Zn()),t;if(e===6)Wa(n,r);else{if(i=n.current.alternate,!(r&30)&&!PG(i)&&(e=My(n,r),e===2&&(s=OS(n),s!==0&&(r=s,e=c1(n,s))),e===1))throw t=tp,xc(n,0),Wa(n,r),Pi(n,Zn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ge(345));case 2:ec(n,Ei,Jo);break;case 3:if(Wa(n,r),(r&130023424)===r&&(e=kE+500-Zn(),10<e)){if(ay(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){hi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=VS(ec.bind(null,n,Ei,Jo),e);break}ec(n,Ei,Jo);break;case 4:if(Wa(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Vs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RG(r/1960))-r,10<r){n.timeoutHandle=VS(ec.bind(null,n,Ei,Jo),r);break}ec(n,Ei,Jo);break;case 5:ec(n,Ei,Jo);break;default:throw Error(Ge(329))}}}return Pi(n,Zn()),n.callbackNode===t?HL.bind(null,n):null}function c1(n,e){var t=Cd;return n.current.memoizedState.isDehydrated&&(xc(n,e).flags|=256),n=My(n,e),n!==2&&(e=Ei,Ei=t,e!==null&&u1(e)),n}function u1(n){Ei===null?Ei=n:Ei.push.apply(Ei,n)}function PG(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Xs(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wa(n,e){for(e&=~NE,e&=~c0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Vs(e),r=1<<t;n[t]=-1,e&=~r}}function mR(n){if(sn&6)throw Error(Ge(327));vf();var e=ay(n,0);if(!(e&1))return Pi(n,Zn()),null;var t=My(n,e);if(n.tag!==0&&t===2){var r=OS(n);r!==0&&(e=r,t=c1(n,r))}if(t===1)throw t=tp,xc(n,0),Wa(n,e),Pi(n,Zn()),t;if(t===6)throw Error(Ge(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ec(n,Ei,Jo),Pi(n,Zn()),null}function FE(n,e){var t=sn;sn|=1;try{return n(e)}finally{sn=t,sn===0&&(Pf=Zn()+500,s0&&Sl())}}function Lc(n){Xa!==null&&Xa.tag===0&&!(sn&6)&&vf();var e=sn;sn|=1;var t=_s.transition,r=hn;try{if(_s.transition=null,hn=1,n)return n()}finally{hn=r,_s.transition=t,sn=e,!(sn&6)&&Sl()}}function UE(){zi=of.current,Mn(of)}function xc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,oG(t)),sr!==null)for(t=sr.return;t!==null;){var r=t;switch(_E(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hy();break;case 3:Tf(),Mn(Ti),Mn(qr),TE();break;case 5:CE(r);break;case 4:Tf();break;case 13:Mn(Dn);break;case 19:Mn(Dn);break;case 10:AE(r.type._context);break;case 22:case 23:UE()}t=t.return}if(Er=n,sr=n=rl(n.current,null),Br=zi=e,dr=0,tp=null,NE=c0=Dc=0,Ei=Cd=null,cc!==null){for(e=0;e<cc.length;e++)if(t=cc[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}cc=null}return n}function GL(n,e){do{var t=sr;try{if(SE(),Dv.current=wy,xy){for(var r=kn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xy=!1}if(Bc=0,wr=hr=kn=null,Md=!1,Qd=0,OE.current=null,t===null||t.return===null){dr=1,tp=e,sr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Br,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=nR(o);if(m!==null){m.flags&=-257,rR(m,o,a,s,e),m.mode&1&&tR(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){tR(s,c,e),zE();break e}l=Error(Ge(426))}}else if(Tn&&a.mode&1){var y=nR(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),rR(y,o,a,s,e),xE(Rf(l,a));break e}}s=l=Rf(l,a),dr!==4&&(dr=2),Cd===null?Cd=[s]:Cd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=ML(s,l,e);KT(s,g);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(tl===null||!tl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=bL(s,a,e);KT(s,E);break e}}s=s.return}while(s!==null)}jL(t)}catch(P){e=P,sr===t&&t!==null&&(sr=t=t.return);continue}break}while(!0)}function VL(){var n=Sy.current;return Sy.current=wy,n===null?wy:n}function zE(){(dr===0||dr===3||dr===2)&&(dr=4),Er===null||!(Dc&268435455)&&!(c0&268435455)||Wa(Er,Br)}function My(n,e){var t=sn;sn|=2;var r=VL();(Er!==n||Br!==e)&&(Jo=null,xc(n,e));do try{IG();break}catch(i){GL(n,i)}while(!0);if(SE(),sn=t,Sy.current=r,sr!==null)throw Error(Ge(261));return Er=null,Br=0,dr}function IG(){for(;sr!==null;)WL(sr)}function BG(){for(;sr!==null&&!r4();)WL(sr)}function WL(n){var e=XL(n.alternate,n,zi);n.memoizedProps=n.pendingProps,e===null?jL(n):sr=e,OE.current=null}function jL(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=MG(t,e),t!==null){t.flags&=32767,sr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{dr=6,sr=null;return}}else if(t=EG(t,e,zi),t!==null){sr=t;return}if(e=e.sibling,e!==null){sr=e;return}sr=e=n}while(e!==null);dr===0&&(dr=5)}function ec(n,e,t){var r=hn,i=_s.transition;try{_s.transition=null,hn=1,DG(n,e,t,r)}finally{_s.transition=i,hn=r}return null}function DG(n,e,t,r){do vf();while(Xa!==null);if(sn&6)throw Error(Ge(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ge(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(d4(n,s),n===Er&&(sr=Er=null,Br=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||dg||(dg=!0,JL(oy,function(){return vf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=_s.transition,_s.transition=null;var o=hn;hn=1;var a=sn;sn|=4,OE.current=null,CG(n,t),UL(t,n),Z4(HS),ly=!!zS,HS=zS=null,n.current=t,TG(t),i4(),sn=a,hn=o,_s.transition=s}else n.current=t;if(dg&&(dg=!1,Xa=n,Ey=i),s=n.pendingLanes,s===0&&(tl=null),a4(t.stateNode),Pi(n,Zn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ay)throw Ay=!1,n=a1,a1=null,n;return Ey&1&&n.tag!==0&&vf(),s=n.pendingLanes,s&1?n===l1?Td++:(Td=0,l1=n):Td=0,Sl(),null}function vf(){if(Xa!==null){var n=MD(Ey),e=_s.transition,t=hn;try{if(_s.transition=null,hn=16>n?16:n,Xa===null)var r=!1;else{if(n=Xa,Xa=null,Ey=0,sn&6)throw Error(Ge(331));var i=sn;for(sn|=4,lt=n.current;lt!==null;){var s=lt,o=s.child;if(lt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(lt=c;lt!==null;){var u=lt;switch(u.tag){case 0:case 11:case 15:bd(8,u,s)}var f=u.child;if(f!==null)f.return=u,lt=f;else for(;lt!==null;){u=lt;var p=u.sibling,m=u.return;if(NL(u),u===c){lt=null;break}if(p!==null){p.return=m,lt=p;break}lt=m}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var y=_.sibling;_.sibling=null,_=y}while(_!==null)}}lt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,lt=o;else e:for(;lt!==null;){if(s=lt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,lt=g;break e}lt=s.return}}var w=n.current;for(lt=w;lt!==null;){o=lt;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,lt=S;else e:for(o=w;lt!==null;){if(a=lt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:l0(9,a)}}catch(P){Hn(a,a.return,P)}if(a===o){lt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,lt=E;break e}lt=a.return}}if(sn=i,Sl(),_o&&typeof _o.onPostCommitFiberRoot=="function")try{_o.onPostCommitFiberRoot(e0,n)}catch{}r=!0}return r}finally{hn=t,_s.transition=e}}return!1}function gR(n,e,t){e=Rf(t,e),e=ML(n,e,1),n=el(n,e,1),e=hi(),n!==null&&(Rp(n,1,e),Pi(n,e))}function Hn(n,e,t){if(n.tag===3)gR(n,n,t);else for(;e!==null;){if(e.tag===3){gR(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tl===null||!tl.has(r))){n=Rf(t,n),n=bL(e,n,1),e=el(e,n,1),n=hi(),e!==null&&(Rp(e,1,n),Pi(e,n));break}}e=e.return}}function LG(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=hi(),n.pingedLanes|=n.suspendedLanes&t,Er===n&&(Br&t)===t&&(dr===4||dr===3&&(Br&130023424)===Br&&500>Zn()-kE?xc(n,0):NE|=t),Pi(n,e)}function $L(n,e){e===0&&(n.mode&1?(e=rg,rg<<=1,!(rg&130023424)&&(rg=4194304)):e=1);var t=hi();n=fa(n,e),n!==null&&(Rp(n,e,t),Pi(n,t))}function OG(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),$L(n,t)}function NG(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ge(314))}r!==null&&r.delete(e),$L(n,t)}var XL;XL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ti.current)Mi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Mi=!1,AG(n,e,t);Mi=!!(n.flags&131072)}else Mi=!1,Tn&&e.flags&1048576&&qD(e,my,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ov(n,e),n=e.pendingProps;var i=Mf(e,qr.current);gf(e,t),i=PE(null,e,r,n,i,t);var s=IE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ri(r)?(s=!0,dy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ME(e),i.updater=a0,e.stateNode=i,i._reactInternals=e,YS(e,r,n,t),e=ZS(null,e,r,!0,s,t)):(e.tag=0,Tn&&s&&yE(e),ai(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Ov(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=FG(r),n=Ns(r,n),i){case 0:e=QS(null,e,r,n,t);break e;case 1:e=oR(null,e,r,n,t);break e;case 11:e=iR(null,e,r,n,t);break e;case 14:e=sR(null,e,r,Ns(r.type,n),t);break e}throw Error(Ge(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),QS(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),oR(n,e,r,i,t);case 3:e:{if(PL(e),n===null)throw Error(Ge(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rL(n,e),yy(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Rf(Error(Ge(423)),e),e=aR(n,e,r,t,i);break e}else if(r!==i){i=Rf(Error(Ge(424)),e),e=aR(n,e,r,t,i);break e}else for(Wi=Za(e.stateNode.containerInfo.firstChild),ji=e,Tn=!0,zs=null,t=tL(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(bf(),r===i){e=ha(n,e,t);break e}ai(n,e,r,t)}e=e.child}return e;case 5:return iL(e),n===null&&XS(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,GS(r,i)?o=null:s!==null&&GS(r,s)&&(e.flags|=32),RL(n,e),ai(n,e,o,t),e.child;case 6:return n===null&&XS(e),null;case 13:return IL(n,e,t);case 4:return bE(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Cf(e,null,r,t):ai(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),iR(n,e,r,i,t);case 7:return ai(n,e,e.pendingProps,t),e.child;case 8:return ai(n,e,e.pendingProps.children,t),e.child;case 12:return ai(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Sn(gy,r._currentValue),r._currentValue=o,s!==null)if(Xs(s.value,o)){if(s.children===i.children&&!Ti.current){e=ha(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=sa(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),JS(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ge(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),JS(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ai(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,gf(e,t),i=ws(i),r=r(i),e.flags|=1,ai(n,e,r,t),e.child;case 14:return r=e.type,i=Ns(r,e.pendingProps),i=Ns(r.type,i),sR(n,e,r,i,t);case 15:return CL(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),Ov(n,e),e.tag=1,Ri(r)?(n=!0,dy(e)):n=!1,gf(e,t),EL(e,r,i),YS(e,r,i,t),ZS(null,e,r,!0,n,t);case 19:return BL(n,e,t);case 22:return TL(n,e,t)}throw Error(Ge(156,e.tag))};function JL(n,e){return wD(n,e)}function kG(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,e,t,r){return new kG(n,e,t,r)}function HE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function FG(n){if(typeof n=="function")return HE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===oE)return 11;if(n===aE)return 14}return 2}function rl(n,e){var t=n.alternate;return t===null?(t=ms(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Fv(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")HE(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ku:return wc(t.children,i,s,e);case sE:o=8,i|=8;break;case xS:return n=ms(12,t,e,i|2),n.elementType=xS,n.lanes=s,n;case wS:return n=ms(13,t,e,i),n.elementType=wS,n.lanes=s,n;case SS:return n=ms(19,t,e,i),n.elementType=SS,n.lanes=s,n;case iD:return u0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nD:o=10;break e;case rD:o=9;break e;case oE:o=11;break e;case aE:o=14;break e;case za:o=16,r=null;break e}throw Error(Ge(130,n==null?n:typeof n,""))}return e=ms(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function wc(n,e,t,r){return n=ms(7,n,r,e),n.lanes=t,n}function u0(n,e,t,r){return n=ms(22,n,r,e),n.elementType=iD,n.lanes=t,n.stateNode={isHidden:!1},n}function Hx(n,e,t){return n=ms(6,n,null,e),n.lanes=t,n}function Gx(n,e,t){return e=ms(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function UG(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sx(0),this.expirationTimes=Sx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function GE(n,e,t,r,i,s,o,a,l){return n=new UG(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ms(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},ME(s),n}function zG(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ju,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function KL(n){if(!n)return al;n=n._reactInternals;e:{if($c(n)!==n||n.tag!==1)throw Error(Ge(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ri(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ge(171))}if(n.tag===1){var t=n.type;if(Ri(t))return KD(n,t,e)}return e}function YL(n,e,t,r,i,s,o,a,l){return n=GE(t,r,!0,n,i,s,o,a,l),n.context=KL(null),t=n.current,r=hi(),i=nl(t),s=sa(r,i),s.callback=e??null,el(t,s,i),n.current.lanes=i,Rp(n,i,r),Pi(n,r),n}function f0(n,e,t,r){var i=e.current,s=hi(),o=nl(i);return t=KL(t),e.context===null?e.context=t:e.pendingContext=t,e=sa(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=el(i,e,o),n!==null&&(Ws(n,i,o,s),Bv(n,i,o)),o}function by(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function vR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function VE(n,e){vR(n,e),(n=n.alternate)&&vR(n,e)}function HG(){return null}var qL=typeof reportError=="function"?reportError:function(n){console.error(n)};function WE(n){this._internalRoot=n}h0.prototype.render=WE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ge(409));f0(n,e,null,null)};h0.prototype.unmount=WE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Lc(function(){f0(null,n,null,null)}),e[ua]=null}};function h0(n){this._internalRoot=n}h0.prototype.unstable_scheduleHydration=function(n){if(n){var e=TD();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Va.length&&e!==0&&e<Va[t].priority;t++);Va.splice(t,0,n),t===0&&PD(n)}};function jE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function d0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yR(){}function GG(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=by(o);s.call(c)}}var o=YL(e,r,n,0,null,!1,!1,"",yR);return n._reactRootContainer=o,n[ua]=o.current,Xd(n.nodeType===8?n.parentNode:n),Lc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=by(l);a.call(c)}}var l=GE(n,0,!1,null,null,!1,!1,"",yR);return n._reactRootContainer=l,n[ua]=l.current,Xd(n.nodeType===8?n.parentNode:n),Lc(function(){f0(e,l,t,r)}),l}function p0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=by(o);a.call(l)}}f0(e,o,n,i)}else o=GG(t,e,n,i,r);return by(o)}bD=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=hd(e.pendingLanes);t!==0&&(uE(e,t|1),Pi(e,Zn()),!(sn&6)&&(Pf=Zn()+500,Sl()))}break;case 13:Lc(function(){var r=fa(n,1);if(r!==null){var i=hi();Ws(r,n,1,i)}}),VE(n,1)}};fE=function(n){if(n.tag===13){var e=fa(n,134217728);if(e!==null){var t=hi();Ws(e,n,134217728,t)}VE(n,134217728)}};CD=function(n){if(n.tag===13){var e=nl(n),t=fa(n,e);if(t!==null){var r=hi();Ws(t,n,e,r)}VE(n,e)}};TD=function(){return hn};RD=function(n,e){var t=hn;try{return hn=n,e()}finally{hn=t}};BS=function(n,e,t){switch(e){case"input":if(MS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=i0(r);if(!i)throw Error(Ge(90));oD(r),MS(r,i)}}}break;case"textarea":lD(n,t);break;case"select":e=t.value,e!=null&&hf(n,!!t.multiple,e,!1)}};mD=FE;gD=Lc;var VG={usingClientEntryPoint:!1,Events:[Ip,Zu,i0,dD,pD,FE]},Uh={findFiberByHostInstance:lc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WG={bundleType:Uh.bundleType,version:Uh.version,rendererPackageName:Uh.rendererPackageName,rendererConfig:Uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_D(n),n===null?null:n.stateNode},findFiberByHostInstance:Uh.findFiberByHostInstance||HG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pg.isDisabled&&pg.supportsFiber)try{e0=pg.inject(WG),_o=pg}catch{}}qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VG;qi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jE(e))throw Error(Ge(200));return zG(n,e,null,t)};qi.createRoot=function(n,e){if(!jE(n))throw Error(Ge(299));var t=!1,r="",i=qL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=GE(n,1,!1,null,null,t,!1,r,i),n[ua]=e.current,Xd(n.nodeType===8?n.parentNode:n),new WE(e)};qi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ge(188)):(n=Object.keys(n).join(","),Error(Ge(268,n)));return n=_D(e),n=n===null?null:n.stateNode,n};qi.flushSync=function(n){return Lc(n)};qi.hydrate=function(n,e,t){if(!d0(e))throw Error(Ge(200));return p0(null,n,e,!0,t)};qi.hydrateRoot=function(n,e,t){if(!jE(n))throw Error(Ge(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=qL;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=YL(e,null,n,1,t??null,i,!1,s,o),n[ua]=e.current,Xd(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new h0(e)};qi.render=function(n,e,t){if(!d0(e))throw Error(Ge(200));return p0(null,n,e,!1,t)};qi.unmountComponentAtNode=function(n){if(!d0(n))throw Error(Ge(40));return n._reactRootContainer?(Lc(function(){p0(null,null,n,!1,function(){n._reactRootContainer=null,n[ua]=null})}),!0):!1};qi.unstable_batchedUpdates=FE;qi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!d0(t))throw Error(Ge(200));if(n==null||n._reactInternals===void 0)throw Error(Ge(38));return p0(n,e,t,!1,r)};qi.version="18.3.1-next-f1338f8080-20240426";function QL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QL)}catch(n){console.error(n)}}QL(),Q2.exports=qi;var Dp=Q2.exports;const ZL=_l(Dp);var _R=Dp;yS.createRoot=_R.createRoot,yS.hydrateRoot=_R.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function np(){return np=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},np.apply(this,arguments)}var Ja;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ja||(Ja={}));const xR="popstate";function jG(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return f1("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Cy(i)}return XG(e,t,null,n)}function lr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function eO(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $G(){return Math.random().toString(36).substr(2,8)}function wR(n,e){return{usr:n.state,key:n.key,idx:e}}function f1(n,e,t,r){return t===void 0&&(t=null),np({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Jf(e):e,{state:t,key:e&&e.key||r||$G()})}function Cy(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Jf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function XG(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ja.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(np({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Ja.Pop;let y=u(),g=y==null?null:y-c;c=y,l&&l({action:a,location:_.location,delta:g})}function p(y,g){a=Ja.Push;let w=f1(_.location,y,g);c=u()+1;let S=wR(w,c),E=_.createHref(w);try{o.pushState(S,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(E)}s&&l&&l({action:a,location:_.location,delta:1})}function m(y,g){a=Ja.Replace;let w=f1(_.location,y,g);c=u();let S=wR(w,c),E=_.createHref(w);o.replaceState(S,"",E),s&&l&&l({action:a,location:_.location,delta:0})}function v(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof y=="string"?y:Cy(y);return w=w.replace(/ $/,"%20"),lr(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let _={get action(){return a},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(xR,f),l=y,()=>{i.removeEventListener(xR,f),l=null}},createHref(y){return e(i,y)},createURL:v,encodeLocation(y){let g=v(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(y){return o.go(y)}};return _}var SR;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(SR||(SR={}));function JG(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?Jf(e):e,i=$E(r.pathname||"/",t);if(i==null)return null;let s=tO(n);KG(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=a5(i);o=i5(s[a],l)}return o}function tO(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(lr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=il([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(lr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),tO(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:n5(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of nO(s.path))i(s,o,l)}),e}function nO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=nO(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function KG(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:r5(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const YG=/^:[\w-]+$/,qG=3,QG=2,ZG=1,e5=10,t5=-2,AR=n=>n==="*";function n5(n,e){let t=n.split("/"),r=t.length;return t.some(AR)&&(r+=t5),e&&(r+=QG),t.filter(i=>!AR(i)).reduce((i,s)=>i+(YG.test(s)?qG:s===""?ZG:e5),r)}function r5(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function i5(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=s5({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let f=a.route;s.push({params:r,pathname:il([i,u.pathname]),pathnameBase:f5(il([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=il([i,u.pathnameBase]))}return s}function s5(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=o5(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function o5(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),eO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function a5(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function $E(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function l5(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Jf(n):n;return{pathname:t?t.startsWith("/")?t:c5(t,e):e,search:h5(r),hash:d5(i)}}function c5(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Vx(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function u5(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rO(n,e){let t=u5(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function iO(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Jf(n):(i=np({},n),lr(!i.pathname||!i.pathname.includes("?"),Vx("?","pathname","search",i)),lr(!i.pathname||!i.pathname.includes("#"),Vx("#","pathname","hash",i)),lr(!i.search||!i.search.includes("#"),Vx("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=l5(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const il=n=>n.join("/").replace(/\/\/+/g,"/"),f5=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),h5=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,d5=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function p5(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const sO=["post","put","patch","delete"];new Set(sO);const m5=["get",...sO];new Set(m5);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rp(){return rp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rp.apply(this,arguments)}const XE=B.createContext(null),g5=B.createContext(null),Xc=B.createContext(null),m0=B.createContext(null),Jc=B.createContext({outlet:null,matches:[],isDataRoute:!1}),oO=B.createContext(null);function v5(n,e){let{relative:t}=e===void 0?{}:e;Lp()||lr(!1);let{basename:r,navigator:i}=B.useContext(Xc),{hash:s,pathname:o,search:a}=lO(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:il([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Lp(){return B.useContext(m0)!=null}function Op(){return Lp()||lr(!1),B.useContext(m0).location}function aO(n){B.useContext(Xc).static||B.useLayoutEffect(n)}function y5(){let{isDataRoute:n}=B.useContext(Jc);return n?I5():_5()}function _5(){Lp()||lr(!1);let n=B.useContext(XE),{basename:e,future:t,navigator:r}=B.useContext(Xc),{matches:i}=B.useContext(Jc),{pathname:s}=Op(),o=JSON.stringify(rO(i,t.v7_relativeSplatPath)),a=B.useRef(!1);return aO(()=>{a.current=!0}),B.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=iO(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:il([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,n])}function lO(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=B.useContext(Xc),{matches:i}=B.useContext(Jc),{pathname:s}=Op(),o=JSON.stringify(rO(i,r.v7_relativeSplatPath));return B.useMemo(()=>iO(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function x5(n,e){return w5(n,e)}function w5(n,e,t,r){Lp()||lr(!1);let{navigator:i}=B.useContext(Xc),{matches:s}=B.useContext(Jc),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Op(),u;if(e){var f;let y=typeof e=="string"?Jf(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||lr(!1),u=y}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=JG(n,{pathname:m}),_=b5(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:il([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:il([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,r);return e&&_?B.createElement(m0.Provider,{value:{location:rp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ja.Pop}},_):_}function S5(){let n=P5(),e=p5(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:i},t):null,null)}const A5=B.createElement(S5,null);class E5 extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(Jc.Provider,{value:this.props.routeContext},B.createElement(oO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M5(n){let{routeContext:e,match:t,children:r}=n,i=B.useContext(XE);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(Jc.Provider,{value:e},r)}function b5(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||lr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,v=!1,_=null,y=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||A5,l&&(c<0&&p===0?(v=!0,y=null):c===p&&(v=!0,y=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),w=()=>{let S;return m?S=_:v?S=y:f.route.Component?S=B.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,B.createElement(M5,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?B.createElement(E5,{location:t.location,revalidation:t.revalidation,component:_,error:m,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var cO=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(cO||{}),Ty=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Ty||{});function C5(n){let e=B.useContext(XE);return e||lr(!1),e}function T5(n){let e=B.useContext(g5);return e||lr(!1),e}function R5(n){let e=B.useContext(Jc);return e||lr(!1),e}function uO(n){let e=R5(),t=e.matches[e.matches.length-1];return t.route.id||lr(!1),t.route.id}function P5(){var n;let e=B.useContext(oO),t=T5(Ty.UseRouteError),r=uO(Ty.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function I5(){let{router:n}=C5(cO.UseNavigateStable),e=uO(Ty.UseNavigateStable),t=B.useRef(!1);return aO(()=>{t.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,rp({fromRouteId:e},s)))},[n,e])}function tc(n){lr(!1)}function B5(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Ja.Pop,navigator:s,static:o=!1,future:a}=n;Lp()&&lr(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:rp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Jf(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:v="default"}=r,_=B.useMemo(()=>{let y=$E(u,l);return y==null?null:{location:{pathname:y,search:f,hash:p,state:m,key:v},navigationType:i}},[l,u,f,p,m,v,i]);return _==null?null:B.createElement(Xc.Provider,{value:c},B.createElement(m0.Provider,{children:t,value:_}))}function D5(n){let{children:e,location:t}=n;return x5(h1(e),t)}new Promise(()=>{});function h1(n,e){e===void 0&&(e=[]);let t=[];return B.Children.forEach(n,(r,i)=>{if(!B.isValidElement(r))return;let s=[...e,i];if(r.type===B.Fragment){t.push.apply(t,h1(r.props.children,s));return}r.type!==tc&&lr(!1),!r.props.index||!r.props.children||lr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=h1(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d1(){return d1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},d1.apply(this,arguments)}function L5(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function O5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function N5(n,e){return n.button===0&&(!e||e==="_self")&&!O5(n)}const k5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],F5="6";try{window.__reactRouterVersion=F5}catch{}const U5="startTransition",ER=Y2[U5];function z5(n){let{basename:e,children:t,future:r,window:i}=n,s=B.useRef();s.current==null&&(s.current=jG({window:i,v5Compat:!0}));let o=s.current,[a,l]=B.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=B.useCallback(f=>{c&&ER?ER(()=>l(f)):l(f)},[l,c]);return B.useLayoutEffect(()=>o.listen(u),[o,u]),B.createElement(B5,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const H5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",G5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rd=B.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:f}=e,p=L5(e,k5),{basename:m}=B.useContext(Xc),v,_=!1;if(typeof c=="string"&&G5.test(c)&&(v=c,H5))try{let S=new URL(window.location.href),E=c.startsWith("//")?new URL(S.protocol+c):new URL(c),P=$E(E.pathname,m);E.origin===S.origin&&P!=null?c=P+E.search+E.hash:_=!0}catch{}let y=v5(c,{relative:i}),g=V5(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:f});function w(S){r&&r(S),S.defaultPrevented||g(S)}return B.createElement("a",d1({},p,{href:v||y,onClick:_||s?r:w,ref:t,target:l}))});var MR;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(MR||(MR={}));var bR;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(bR||(bR={}));function V5(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=y5(),c=Op(),u=lO(n,{relative:o});return B.useCallback(f=>{if(N5(f,t)){f.preventDefault();let p=r!==void 0?r:Cy(c)===Cy(u);l(n,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,t,n,s,o,a])}const W5=()=>F.jsxs("header",{className:"header",children:[F.jsx("div",{className:"logo",children:"AI Interview Practice"}),F.jsx("nav",{children:F.jsxs("ul",{children:[F.jsx("li",{children:F.jsx("a",{href:"#about",children:"About"})}),F.jsx("li",{children:F.jsx("a",{href:"#contact",children:"Contact"})}),F.jsx("li",{children:F.jsx("a",{href:"#blog",children:"Blog"})}),F.jsx("li",{children:F.jsx("a",{href:"#signin",children:"Sign In"})})]})})]}),j5=()=>F.jsx("footer",{className:"footer",children:F.jsxs("div",{className:"footer__container",children:[F.jsxs("div",{className:"footer__content",children:[F.jsx("h3",{className:"footer__title",children:"Our Services"}),F.jsxs("ul",{className:"footer__links",children:[F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Support"})}),F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Donate"})}),F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Report a bug"})}),F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Terms of Service"})})]})]}),F.jsxs("div",{className:"footer__content",children:[F.jsx("h3",{className:"footer__title",children:"Our Company"}),F.jsxs("ul",{className:"footer__links",children:[F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Blog"})}),F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Our mission"})}),F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Get in touch"})})]})]}),F.jsxs("div",{className:"footer__content",children:[F.jsx("h3",{className:"footer__title",children:"Community"}),F.jsxs("ul",{className:"footer__links",children:[F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Support"})}),F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Questions"})}),F.jsx("li",{children:F.jsx("a",{href:"#",className:"footer__link",children:"Usage help"})})]})]}),F.jsxs("div",{className:"footer__social",children:[F.jsx("a",{href:"#",className:"footer__social-link",children:F.jsx("i",{className:"bx bxl-facebook-circle"})}),F.jsx("a",{href:"#",className:"footer__social-link",children:F.jsx("i",{className:"bx bxl-github"})}),F.jsx("a",{href:"#",className:"footer__social-link",children:F.jsx("i",{className:"bx bxl-instagram"})})]})]})}),$5=()=>F.jsxs("main",{className:"homepage",children:[F.jsxs("section",{className:"main-banner",children:[F.jsx("h1",{children:"Master Your Interviews with AI"}),F.jsx("p",{children:"Practice live interviews tailored to your skill level."})]}),F.jsxs("section",{className:"cards",children:[F.jsx("h2",{children:"Choose Your "}),F.jsxs("div",{className:"card beginner",children:[F.jsx("h3",{children:"SKILLS"}),F.jsx("p",{children:"Start with fundamental questions and build a strong foundation."}),F.jsx(Rd,{to:"/skills",children:F.jsx("button",{children:"Start Practicing"})})]}),F.jsxs("div",{className:"card beginner",children:[F.jsx("h3",{children:"LIVE INTERVIEW"}),F.jsx("p",{children:"Utilize AI for live interview face-to-text conversion to enhance knowledge."}),F.jsx(Rd,{to:"/advance",children:F.jsx("button",{children:"Start Interview"})})]})]})]});function mg(n){return F.jsx(F.Fragment,{children:F.jsx("div",{children:F.jsxs("figure",{children:[F.jsx("img",{src:n.img,alt:"Mountains"}),F.jsx("figcaption",{children:n.name})]})})})}const X5="/assets/read-CA2UuPT9.png",J5="/assets/write-CpzZcXvh.png",K5="/assets/listen-Cjl9fcS9.png",Y5="/assets/speak-Cloz0rcE.png";function q5(){return F.jsx(F.Fragment,{children:F.jsxs("div",{className:"row",children:[F.jsx("div",{className:"col-5 p-5-m",style:{marginLeft:"250px"},children:F.jsx(Rd,{to:"/listen",children:F.jsx(mg,{img:K5,name:"Listen"})})}),F.jsx("div",{className:"col-5 p-5-m",children:F.jsx(mg,{img:Y5,name:"Speak"})}),F.jsx("div",{className:"col-5 p-5-m ",style:{marginLeft:"250px"},children:F.jsx(Rd,{to:"/read",children:F.jsx(mg,{img:X5,name:"Read"})})}),F.jsx("div",{className:"col-5 p-5-m ",children:F.jsx(Rd,{to:"/write",children:F.jsx(mg,{img:J5,name:"Write"})})})]})})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Kf="165",nc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},rc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},fO=0,p1=1,hO=2,Q5=3,dO=0,g0=1,Pd=2,ks=3,Mo=0,di=1,ds=2,wo=0,Sc=1,m1=2,g1=3,v1=4,pO=5,ja=100,mO=101,gO=102,vO=103,yO=104,_O=200,xO=201,wO=202,SO=203,Ry=204,Py=205,AO=206,EO=207,MO=208,bO=209,CO=210,TO=211,RO=212,PO=213,IO=214,BO=0,DO=1,LO=2,ip=3,OO=4,NO=5,kO=6,FO=7,Np=0,UO=1,zO=2,So=0,HO=1,GO=2,VO=3,JE=4,WO=5,jO=6,$O=7,y1="attached",XO="detached",ll=300,bo=301,cl=302,Oc=303,sp=304,Yf=306,Co=1e3,On=1001,If=1002,pr=1003,v0=1004,Z5=1004,fc=1005,e8=1005,un=1006,yf=1007,t8=1007,gs=1008,_1=1008,Ki=1009,KE=1010,YE=1011,op=1012,y0=1013,ul=1014,Vn=1015,Ir=1016,qE=1017,QE=1018,Nc=1020,JO=35902,KO=1021,YO=1022,or=1023,qO=1024,QO=1025,Ac=1026,kc=1027,_0=1028,ZE=1029,ZO=1030,eM=1031,tM=1033,Uv=33776,zv=33777,Hv=33778,Gv=33779,x1=35840,w1=35841,S1=35842,A1=35843,E1=36196,M1=37492,b1=37496,C1=37808,T1=37809,R1=37810,P1=37811,I1=37812,B1=37813,D1=37814,L1=37815,O1=37816,N1=37817,k1=37818,F1=37819,U1=37820,z1=37821,Vv=36492,H1=36494,G1=36495,e3=36283,V1=36284,W1=36285,j1=36286,t3=2200,n3=2201,r3=2202,Bf=2300,Df=2301,Wv=2302,hc=2400,dc=2401,ap=2402,x0=2500,nM=2501,i3=0,rM=1,Iy=2,s3=3200,o3=3201,Al=0,a3=1,Zo="",Hi="srgb",As="srgb-linear",w0="display-p3",kp="display-p3-linear",lp="linear",xn="srgb",cp="rec709",up="p3",n8=0,ic=7680,r8=7681,i8=7682,s8=7683,o8=34055,a8=34056,l8=5386,c8=512,u8=513,f8=514,h8=515,d8=516,p8=517,m8=518,$1=519,l3=512,c3=513,u3=514,iM=515,f3=516,h3=517,d3=518,p3=519,fp=35044,g8=35048,v8=35040,y8=35045,_8=35049,x8=35041,w8=35046,S8=35050,A8=35042,E8="100",X1="300 es",vo=2e3,hp=2001;class Do{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let CR=1234567;const Ec=Math.PI/180,Lf=180/Math.PI;function $i(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[e&255]+Vr[e>>8&255]+"-"+Vr[e>>16&15|64]+Vr[e>>24&255]+"-"+Vr[t&63|128]+Vr[t>>8&255]+"-"+Vr[t>>16&255]+Vr[t>>24&255]+Vr[r&255]+Vr[r>>8&255]+Vr[r>>16&255]+Vr[r>>24&255]).toLowerCase()}function Gn(n,e,t){return Math.max(e,Math.min(t,n))}function sM(n,e){return(n%e+e)%e}function M8(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function b8(n,e,t){return n!==e?(t-n)/(e-n):0}function Id(n,e,t){return(1-t)*n+t*e}function C8(n,e,t,r){return Id(n,e,1-Math.exp(-t*r))}function T8(n,e=1){return e-Math.abs(sM(n,e*2)-e)}function R8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function P8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function I8(n,e){return n+Math.floor(Math.random()*(e-n+1))}function B8(n,e){return n+Math.random()*(e-n)}function D8(n){return n*(.5-Math.random())}function L8(n){n!==void 0&&(CR=n);let e=CR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function O8(n){return n*Ec}function N8(n){return n*Lf}function k8(n){return(n&n-1)===0&&n!==0}function F8(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function U8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function z8(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ui(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ot(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Jr={DEG2RAD:Ec,RAD2DEG:Lf,generateUUID:$i,clamp:Gn,euclideanModulo:sM,mapLinear:M8,inverseLerp:b8,lerp:Id,damp:C8,pingpong:T8,smoothstep:R8,smootherstep:P8,randInt:I8,randFloat:B8,randFloatSpread:D8,seededRandom:L8,degToRad:O8,radToDeg:N8,isPowerOfTwo:k8,ceilPowerOfTwo:F8,floorPowerOfTwo:U8,setQuaternionFromProperEuler:z8,normalize:Ot,denormalize:ui};class Ce{constructor(e=0,t=0){Ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Gn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lt{constructor(e,t,r,i,s,o,a,l,c){Lt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],f=r[7],p=r[2],m=r[5],v=r[8],_=i[0],y=i[3],g=i[6],w=i[1],S=i[4],E=i[7],P=i[2],b=i[5],R=i[8];return s[0]=o*_+a*w+l*P,s[3]=o*y+a*S+l*b,s[6]=o*g+a*E+l*R,s[1]=c*_+u*w+f*P,s[4]=c*y+u*S+f*b,s[7]=c*g+u*E+f*R,s[2]=p*_+m*w+v*P,s[5]=p*y+m*S+v*b,s[8]=p*g+m*E+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,p=a*l-u*s,m=c*s-o*l,v=t*f+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=f*_,e[1]=(i*c-u*r)*_,e[2]=(a*r-i*o)*_,e[3]=p*_,e[4]=(u*t-i*l)*_,e[5]=(i*s-a*t)*_,e[6]=m*_,e[7]=(r*l-c*t)*_,e[8]=(o*t-r*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Wx.makeScale(e,t)),this}rotate(e){return this.premultiply(Wx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Wx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Wx=new Lt;function m3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const H8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function af(n,e){return new H8[n](e)}function dp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function g3(){const n=dp("canvas");return n.style.display="block",n}const TR={};function oM(n){n in TR||(TR[n]=!0,console.warn(n))}function G8(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}const RR=new Lt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),PR=new Lt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),gg={[As]:{transfer:lp,primaries:cp,toReference:n=>n,fromReference:n=>n},[Hi]:{transfer:xn,primaries:cp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[kp]:{transfer:lp,primaries:up,toReference:n=>n.applyMatrix3(PR),fromReference:n=>n.applyMatrix3(RR)},[w0]:{transfer:xn,primaries:up,toReference:n=>n.convertSRGBToLinear().applyMatrix3(PR),fromReference:n=>n.applyMatrix3(RR).convertLinearToSRGB()}},V8=new Set([As,kp]),fn={enabled:!0,_workingColorSpace:As,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!V8.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=gg[e].toReference,i=gg[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return gg[n].primaries},getTransfer:function(n){return n===Zo?lp:gg[n].transfer}};function _f(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function jx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let mu;class v3{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{mu===void 0&&(mu=dp("canvas")),mu.width=e.width,mu.height=e.height;const r=mu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=mu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=dp("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=_f(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(_f(t[r]/255)*255):t[r]=_f(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let W8=0;class pc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:W8++}),this.uuid=$i(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push($x(i[o].image)):s.push($x(i[o]))}else s=$x(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function $x(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?v3.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let j8=0;class Yt extends Do{constructor(e=Yt.DEFAULT_IMAGE,t=Yt.DEFAULT_MAPPING,r=On,i=On,s=un,o=gs,a=or,l=Ki,c=Yt.DEFAULT_ANISOTROPY,u=Zo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:j8++}),this.uuid=$i(),this.name="",this.source=new pc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ll)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Co:e.x=e.x-Math.floor(e.x);break;case On:e.x=e.x<0?0:1;break;case If:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Co:e.y=e.y-Math.floor(e.y);break;case On:e.y=e.y<0?0:1;break;case If:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Yt.DEFAULT_IMAGE=null;Yt.DEFAULT_MAPPING=ll;Yt.DEFAULT_ANISOTROPY=1;class rn{constructor(e=0,t=0,r=0,i=1){rn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],p=l[1],m=l[5],v=l[9],_=l[2],y=l[6],g=l[10];if(Math.abs(u-p)<.01&&Math.abs(f-_)<.01&&Math.abs(v-y)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+_)<.1&&Math.abs(v+y)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,E=(m+1)/2,P=(g+1)/2,b=(u+p)/4,R=(f+_)/4,L=(v+y)/4;return S>E&&S>P?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=b/r,s=R/r):E>P?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=b/i,s=L/i):P<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(P),r=R/s,i=L/s),this.set(r,i,s,t),this}let w=Math.sqrt((y-v)*(y-v)+(f-_)*(f-_)+(p-u)*(p-u));return Math.abs(w)<.001&&(w=1),this.x=(y-v)/w,this.y=(f-_)/w,this.z=(p-u)/w,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class y3 extends Do{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new rn(0,0,e,t),this.scissorTest=!1,this.viewport=new rn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:un,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Yt(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new pc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yi extends y3{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class S0 extends Yt{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=pr,this.minFilter=pr,this.wrapR=On,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $8 extends Yi{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new S0(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class aM extends Yt{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=pr,this.minFilter=pr,this.wrapR=On,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class X8 extends Yi{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new aM(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Wn{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=_;return}if(f!==_||l!==p||c!==m||u!==v){let y=1-a;const g=l*p+c*m+u*v+f*_,w=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const P=Math.sqrt(S),b=Math.atan2(P,g*w);y=Math.sin(y*b)/P,a=Math.sin(a*b)/P}const E=a*w;if(l=l*y+p*E,c=c*y+m*E,u=u*y+v*E,f=f*y+_*E,y===1-a){const P=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=P,c*=P,u*=P,f*=P}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+u*f+l*m-c*p,e[t+1]=l*v+u*p+c*f-a*m,e[t+2]=c*v+u*m+a*p-l*f,e[t+3]=u*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*u*f+c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f-p*m*v;break;case"YXZ":this._x=p*u*f+c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f+p*m*v;break;case"ZXY":this._x=p*u*f-c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f-p*m*v;break;case"ZYX":this._x=p*u*f-c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f+p*m*v;break;case"YZX":this._x=p*u*f+c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f-p*m*v;break;case"XZY":this._x=p*u*f-c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class G{constructor(e=0,t=0,r=0){G.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(IR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(IR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+l*c+o*f-a*u,this.y=r+l*u+a*c-s*f,this.z=i+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Xx.copy(this).projectOnVector(e),this.sub(Xx)}reflect(e){return this.sub(Xx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Gn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Xx=new G,IR=new Wn;class Yr{constructor(e=new G(1/0,1/0,1/0),t=new G(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Bs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Bs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Bs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Bs):Bs.fromBufferAttribute(s,o),Bs.applyMatrix4(e.matrixWorld),this.expandByPoint(Bs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),vg.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),vg.copy(r.boundingBox)),vg.applyMatrix4(e.matrixWorld),this.union(vg)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bs),Bs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zh),yg.subVectors(this.max,zh),gu.subVectors(e.a,zh),vu.subVectors(e.b,zh),yu.subVectors(e.c,zh),Ta.subVectors(vu,gu),Ra.subVectors(yu,vu),Ul.subVectors(gu,yu);let t=[0,-Ta.z,Ta.y,0,-Ra.z,Ra.y,0,-Ul.z,Ul.y,Ta.z,0,-Ta.x,Ra.z,0,-Ra.x,Ul.z,0,-Ul.x,-Ta.y,Ta.x,0,-Ra.y,Ra.x,0,-Ul.y,Ul.x,0];return!Jx(t,gu,vu,yu,yg)||(t=[1,0,0,0,1,0,0,0,1],!Jx(t,gu,vu,yu,yg))?!1:(_g.crossVectors(Ta,Ra),t=[_g.x,_g.y,_g.z],Jx(t,gu,vu,yu,yg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Bs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Bs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ho[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ho[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ho[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ho[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ho[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ho[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ho[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ho[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ho),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ho=[new G,new G,new G,new G,new G,new G,new G,new G],Bs=new G,vg=new Yr,gu=new G,vu=new G,yu=new G,Ta=new G,Ra=new G,Ul=new G,zh=new G,yg=new G,_g=new G,zl=new G;function Jx(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){zl.fromArray(n,s);const a=i.x*Math.abs(zl.x)+i.y*Math.abs(zl.y)+i.z*Math.abs(zl.z),l=e.dot(zl),c=t.dot(zl),u=r.dot(zl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const J8=new Yr,Hh=new G,Kx=new G;class Dr{constructor(e=new G,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):J8.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hh.subVectors(e,this.center);const t=Hh.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Hh,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Kx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hh.copy(e.center).add(Kx)),this.expandByPoint(Hh.copy(e.center).sub(Kx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Go=new G,Yx=new G,xg=new G,Pa=new G,qx=new G,wg=new G,Qx=new G;class Kc{constructor(e=new G,t=new G(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Go)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Go.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Go.copy(this.origin).addScaledVector(this.direction,t),Go.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Yx.copy(e).add(t).multiplyScalar(.5),xg.copy(t).sub(e).normalize(),Pa.copy(this.origin).sub(Yx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(xg),a=Pa.dot(this.direction),l=-Pa.dot(xg),c=Pa.lengthSq(),u=Math.abs(1-o*o);let f,p,m,v;if(u>0)if(f=o*l-a,p=o*a-l,v=s*u,f>=0)if(p>=-v)if(p<=v){const _=1/u;f*=_,p*=_,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(Yx).addScaledVector(xg,p),m}intersectSphere(e,t){Go.subVectors(e.center,this.origin);const r=Go.dot(this.direction),i=Go.dot(Go)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Go)!==null}intersectTriangle(e,t,r,i,s){qx.subVectors(t,e),wg.subVectors(r,e),Qx.crossVectors(qx,wg);let o=this.direction.dot(Qx),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Pa.subVectors(this.origin,e);const l=a*this.direction.dot(wg.crossVectors(Pa,wg));if(l<0)return null;const c=a*this.direction.dot(qx.cross(Pa));if(c<0||l+c>o)return null;const u=-a*Pa.dot(Qx);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class tt{constructor(e,t,r,i,s,o,a,l,c,u,f,p,m,v,_,y){tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,f,p,m,v,_,y)}set(e,t,r,i,s,o,a,l,c,u,f,p,m,v,_,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=_,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/_u.setFromMatrixColumn(e,0).length(),s=1/_u.setFromMatrixColumn(e,1).length(),o=1/_u.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*f,v=a*u,_=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-_*c,t[9]=-a*l,t[2]=_-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*f,v=c*u,_=c*f;t[0]=p+_*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=m*a-v,t[6]=_+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*f,v=c*u,_=c*f;t[0]=p-_*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*u,t[9]=_-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*f,v=a*u,_=a*f;t[0]=l*u,t[4]=v*c-m,t[8]=p*c+_,t[1]=l*f,t[5]=_*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=_-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*f+v,t[10]=p-_*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=p*f+_,t[5]=o*u,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*u,t[10]=_*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(K8,e,Y8)}lookAt(e,t,r){const i=this.elements;return ki.subVectors(e,t),ki.lengthSq()===0&&(ki.z=1),ki.normalize(),Ia.crossVectors(r,ki),Ia.lengthSq()===0&&(Math.abs(r.z)===1?ki.x+=1e-4:ki.z+=1e-4,ki.normalize(),Ia.crossVectors(r,ki)),Ia.normalize(),Sg.crossVectors(ki,Ia),i[0]=Ia.x,i[4]=Sg.x,i[8]=ki.x,i[1]=Ia.y,i[5]=Sg.y,i[9]=ki.y,i[2]=Ia.z,i[6]=Sg.z,i[10]=ki.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],f=r[5],p=r[9],m=r[13],v=r[2],_=r[6],y=r[10],g=r[14],w=r[3],S=r[7],E=r[11],P=r[15],b=i[0],R=i[4],L=i[8],I=i[12],C=i[1],O=i[5],V=i[9],$=i[13],Q=i[2],ie=i[6],ee=i[10],fe=i[14],k=i[3],Y=i[7],Z=i[11],ae=i[15];return s[0]=o*b+a*C+l*Q+c*k,s[4]=o*R+a*O+l*ie+c*Y,s[8]=o*L+a*V+l*ee+c*Z,s[12]=o*I+a*$+l*fe+c*ae,s[1]=u*b+f*C+p*Q+m*k,s[5]=u*R+f*O+p*ie+m*Y,s[9]=u*L+f*V+p*ee+m*Z,s[13]=u*I+f*$+p*fe+m*ae,s[2]=v*b+_*C+y*Q+g*k,s[6]=v*R+_*O+y*ie+g*Y,s[10]=v*L+_*V+y*ee+g*Z,s[14]=v*I+_*$+y*fe+g*ae,s[3]=w*b+S*C+E*Q+P*k,s[7]=w*R+S*O+E*ie+P*Y,s[11]=w*L+S*V+E*ee+P*Z,s[15]=w*I+S*$+E*fe+P*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],p=e[10],m=e[14],v=e[3],_=e[7],y=e[11],g=e[15];return v*(+s*l*f-i*c*f-s*a*p+r*c*p+i*a*m-r*l*m)+_*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+y*(+t*c*f-t*a*m-s*o*f+r*o*m+s*a*u-r*c*u)+g*(-i*a*u-t*l*f+t*a*p+i*o*f-r*o*p+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],m=e[11],v=e[12],_=e[13],y=e[14],g=e[15],w=f*y*c-_*p*c+_*l*m-a*y*m-f*l*g+a*p*g,S=v*p*c-u*y*c-v*l*m+o*y*m+u*l*g-o*p*g,E=u*_*c-v*f*c+v*a*m-o*_*m-u*a*g+o*f*g,P=v*f*l-u*_*l-v*a*p+o*_*p+u*a*y-o*f*y,b=t*w+r*S+i*E+s*P;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/b;return e[0]=w*R,e[1]=(_*p*s-f*y*s-_*i*m+r*y*m+f*i*g-r*p*g)*R,e[2]=(a*y*s-_*l*s+_*i*c-r*y*c-a*i*g+r*l*g)*R,e[3]=(f*l*s-a*p*s-f*i*c+r*p*c+a*i*m-r*l*m)*R,e[4]=S*R,e[5]=(u*y*s-v*p*s+v*i*m-t*y*m-u*i*g+t*p*g)*R,e[6]=(v*l*s-o*y*s-v*i*c+t*y*c+o*i*g-t*l*g)*R,e[7]=(o*p*s-u*l*s+u*i*c-t*p*c-o*i*m+t*l*m)*R,e[8]=E*R,e[9]=(v*f*s-u*_*s-v*r*m+t*_*m+u*r*g-t*f*g)*R,e[10]=(o*_*s-v*a*s+v*r*c-t*_*c-o*r*g+t*a*g)*R,e[11]=(u*a*s-o*f*s-u*r*c+t*f*c+o*r*m-t*a*m)*R,e[12]=P*R,e[13]=(u*_*i-v*f*i+v*r*p-t*_*p-u*r*y+t*f*y)*R,e[14]=(v*a*i-o*_*i-v*r*l+t*_*l+o*r*y-t*a*y)*R,e[15]=(o*f*i-u*a*i+u*r*l-t*f*l-o*r*p+t*a*p)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,p=s*c,m=s*u,v=s*f,_=o*u,y=o*f,g=a*f,w=l*c,S=l*u,E=l*f,P=r.x,b=r.y,R=r.z;return i[0]=(1-(_+g))*P,i[1]=(m+E)*P,i[2]=(v-S)*P,i[3]=0,i[4]=(m-E)*b,i[5]=(1-(p+g))*b,i[6]=(y+w)*b,i[7]=0,i[8]=(v+S)*R,i[9]=(y-w)*R,i[10]=(1-(p+_))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=_u.set(i[0],i[1],i[2]).length();const o=_u.set(i[4],i[5],i[6]).length(),a=_u.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ds.copy(this);const c=1/s,u=1/o,f=1/a;return Ds.elements[0]*=c,Ds.elements[1]*=c,Ds.elements[2]*=c,Ds.elements[4]*=u,Ds.elements[5]*=u,Ds.elements[6]*=u,Ds.elements[8]*=f,Ds.elements[9]*=f,Ds.elements[10]*=f,t.setFromRotationMatrix(Ds),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=vo){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===vo)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===hp)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=vo){const l=this.elements,c=1/(t-e),u=1/(r-i),f=1/(o-s),p=(t+e)*c,m=(r+i)*u;let v,_;if(a===vo)v=(o+s)*f,_=-2*f;else if(a===hp)v=s*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const _u=new G,Ds=new tt,K8=new G(0,0,0),Y8=new G(1,1,1),Ia=new G,Sg=new G,ki=new G,BR=new tt,DR=new Wn;class Ar{constructor(e=0,t=0,r=0,i=Ar.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],f=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Gn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Gn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Gn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return BR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(BR,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return DR.setFromEuler(this),this.setFromQuaternion(DR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ar.DEFAULT_ORDER="XYZ";class Mc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let q8=0;const LR=new G,xu=new Wn,Vo=new tt,Ag=new G,Gh=new G,Q8=new G,Z8=new Wn,OR=new G(1,0,0),NR=new G(0,1,0),kR=new G(0,0,1),FR={type:"added"},eV={type:"removed"},wu={type:"childadded",child:null},Zx={type:"childremoved",child:null};class Vt extends Do{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:q8++}),this.uuid=$i(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vt.DEFAULT_UP.clone();const e=new G,t=new Ar,r=new Wn,i=new G(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new tt},normalMatrix:{value:new Lt}}),this.matrix=new tt,this.matrixWorld=new tt,this.matrixAutoUpdate=Vt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Vt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return xu.setFromAxisAngle(e,t),this.quaternion.multiply(xu),this}rotateOnWorldAxis(e,t){return xu.setFromAxisAngle(e,t),this.quaternion.premultiply(xu),this}rotateX(e){return this.rotateOnAxis(OR,e)}rotateY(e){return this.rotateOnAxis(NR,e)}rotateZ(e){return this.rotateOnAxis(kR,e)}translateOnAxis(e,t){return LR.copy(e).applyQuaternion(this.quaternion),this.position.add(LR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(OR,e)}translateY(e){return this.translateOnAxis(NR,e)}translateZ(e){return this.translateOnAxis(kR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vo.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Ag.copy(e):Ag.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Gh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vo.lookAt(Gh,Ag,this.up):Vo.lookAt(Ag,Gh,this.up),this.quaternion.setFromRotationMatrix(Vo),i&&(Vo.extractRotation(i.matrixWorld),xu.setFromRotationMatrix(Vo),this.quaternion.premultiply(xu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(FR),wu.child=e,this.dispatchEvent(wu),wu.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(eV),Zx.child=e,this.dispatchEvent(Zx),Zx.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Vo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Vo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(FR),wu.child=e,this.dispatchEvent(wu),wu.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gh,e,Q8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gh,Z8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Vt.DEFAULT_UP=new G(0,1,0);Vt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Vt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ls=new G,Wo=new G,ew=new G,jo=new G,Su=new G,Au=new G,UR=new G,tw=new G,nw=new G,rw=new G;class Vi{constructor(e=new G,t=new G,r=new G){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ls.subVectors(e,t),i.cross(Ls);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ls.subVectors(i,t),Wo.subVectors(r,t),ew.subVectors(e,t);const o=Ls.dot(Ls),a=Ls.dot(Wo),l=Ls.dot(ew),c=Wo.dot(Wo),u=Wo.dot(ew),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*u)*p,v=(o*u-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,jo)===null?!1:jo.x>=0&&jo.y>=0&&jo.x+jo.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,jo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,jo.x),l.addScaledVector(o,jo.y),l.addScaledVector(a,jo.z),l)}static isFrontFacing(e,t,r,i){return Ls.subVectors(r,t),Wo.subVectors(e,t),Ls.cross(Wo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ls.subVectors(this.c,this.b),Wo.subVectors(this.a,this.b),Ls.cross(Wo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Vi.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Vi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Su.subVectors(i,r),Au.subVectors(s,r),tw.subVectors(e,r);const l=Su.dot(tw),c=Au.dot(tw);if(l<=0&&c<=0)return t.copy(r);nw.subVectors(e,i);const u=Su.dot(nw),f=Au.dot(nw);if(u>=0&&f<=u)return t.copy(i);const p=l*f-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Su,o);rw.subVectors(e,s);const m=Su.dot(rw),v=Au.dot(rw);if(v>=0&&m<=v)return t.copy(s);const _=m*c-l*v;if(_<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(Au,a);const y=u*v-m*f;if(y<=0&&f-u>=0&&m-v>=0)return UR.subVectors(s,i),a=(f-u)/(f-u+(m-v)),t.copy(i).addScaledVector(UR,a);const g=1/(y+_+p);return o=_*g,a=p*g,t.copy(r).addScaledVector(Su,o).addScaledVector(Au,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ba={h:0,s:0,l:0},Eg={h:0,s:0,l:0};function iw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Xe=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Hi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=fn.workingColorSpace){return this.r=e,this.g=t,this.b=r,fn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=fn.workingColorSpace){if(e=sM(e,1),t=Gn(t,0,1),r=Gn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=iw(o,s,e+1/3),this.g=iw(o,s,e),this.b=iw(o,s,e-1/3)}return fn.toWorkingColorSpace(this,i),this}setStyle(e,t=Hi){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Hi){const r=_3[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=_f(e.r),this.g=_f(e.g),this.b=_f(e.b),this}copyLinearToSRGB(e){return this.r=jx(e.r),this.g=jx(e.g),this.b=jx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Hi){return fn.fromWorkingColorSpace(Wr.copy(this),e),Math.round(Gn(Wr.r*255,0,255))*65536+Math.round(Gn(Wr.g*255,0,255))*256+Math.round(Gn(Wr.b*255,0,255))}getHexString(e=Hi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fn.workingColorSpace){fn.fromWorkingColorSpace(Wr.copy(this),t);const r=Wr.r,i=Wr.g,s=Wr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=fn.workingColorSpace){return fn.fromWorkingColorSpace(Wr.copy(this),t),e.r=Wr.r,e.g=Wr.g,e.b=Wr.b,e}getStyle(e=Hi){fn.fromWorkingColorSpace(Wr.copy(this),e);const t=Wr.r,r=Wr.g,i=Wr.b;return e!==Hi?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Ba),this.setHSL(Ba.h+e,Ba.s+t,Ba.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ba),e.getHSL(Eg);const r=Id(Ba.h,Eg.h,t),i=Id(Ba.s,Eg.s,t),s=Id(Ba.l,Eg.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Wr=new Xe;Xe.NAMES=_3;let tV=0;class cr extends Do{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:tV++}),this.uuid=$i(),this.name="",this.type="Material",this.blending=Sc,this.side=Mo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ry,this.blendDst=Py,this.blendEquation=ja,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Xe(0,0,0),this.blendAlpha=0,this.depthFunc=ip,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ic,this.stencilZFail=ic,this.stencilZPass=ic,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Sc&&(r.blending=this.blending),this.side!==Mo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Ry&&(r.blendSrc=this.blendSrc),this.blendDst!==Py&&(r.blendDst=this.blendDst),this.blendEquation!==ja&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==ip&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$1&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ic&&(r.stencilFail=this.stencilFail),this.stencilZFail!==ic&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==ic&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class bi extends cr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ar,this.combine=Np,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ea=nV();function nV(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function xi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Gn(n,-65504,65504),ea.floatView[0]=n;const e=ea.uint32View[0],t=e>>23&511;return ea.baseTable[t]+((e&8388607)>>ea.shiftTable[t])}function pd(n){const e=n>>10;return ea.uint32View[0]=ea.mantissaTable[ea.offsetTable[e]+(n&1023)]+ea.exponentTable[e],ea.floatView[0]}const mc={toHalfFloat:xi,fromHalfFloat:pd},ir=new G,Mg=new Ce;class tn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=fp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Vn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return oM("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Mg.fromBufferAttribute(this,t),Mg.applyMatrix3(e),this.setXY(t,Mg.x,Mg.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ir.fromBufferAttribute(this,t),ir.applyMatrix3(e),this.setXYZ(t,ir.x,ir.y,ir.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ir.fromBufferAttribute(this,t),ir.applyMatrix4(e),this.setXYZ(t,ir.x,ir.y,ir.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ir.fromBufferAttribute(this,t),ir.applyNormalMatrix(e),this.setXYZ(t,ir.x,ir.y,ir.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ir.fromBufferAttribute(this,t),ir.transformDirection(e),this.setXYZ(t,ir.x,ir.y,ir.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ui(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Ot(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ui(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ui(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ui(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ui(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array),i=Ot(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array),i=Ot(i,this.array),s=Ot(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fp&&(e.usage=this.usage),e}}class rV extends tn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class iV extends tn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class sV extends tn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class oV extends tn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class A0 extends tn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class aV extends tn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class lM extends tn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class lV extends tn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=pd(this.array[e*this.itemSize]);return this.normalized&&(t=ui(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize]=xi(t),this}getY(e){let t=pd(this.array[e*this.itemSize+1]);return this.normalized&&(t=ui(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize+1]=xi(t),this}getZ(e){let t=pd(this.array[e*this.itemSize+2]);return this.normalized&&(t=ui(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize+2]=xi(t),this}getW(e){let t=pd(this.array[e*this.itemSize+3]);return this.normalized&&(t=ui(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ot(t,this.array)),this.array[e*this.itemSize+3]=xi(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array),i=Ot(i,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(r),this.array[e+2]=xi(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array),i=Ot(i,this.array),s=Ot(s,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(r),this.array[e+2]=xi(i),this.array[e+3]=xi(s),this}}class ot extends tn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let cV=0;const as=new tt,sw=new Vt,Eu=new G,Fi=new Yr,Vh=new Yr,xr=new G;class Tt extends Do{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cV++}),this.uuid=$i(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(m3(e)?lM:A0)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Lt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return as.makeRotationFromQuaternion(e),this.applyMatrix4(as),this}rotateX(e){return as.makeRotationX(e),this.applyMatrix4(as),this}rotateY(e){return as.makeRotationY(e),this.applyMatrix4(as),this}rotateZ(e){return as.makeRotationZ(e),this.applyMatrix4(as),this}translate(e,t,r){return as.makeTranslation(e,t,r),this.applyMatrix4(as),this}scale(e,t,r){return as.makeScale(e,t,r),this.applyMatrix4(as),this}lookAt(e){return sw.lookAt(e),sw.updateMatrix(),this.applyMatrix4(sw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Eu).negate(),this.translate(Eu.x,Eu.y,Eu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new G(-1/0,-1/0,-1/0),new G(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Fi.setFromBufferAttribute(s),this.morphTargetsRelative?(xr.addVectors(this.boundingBox.min,Fi.min),this.boundingBox.expandByPoint(xr),xr.addVectors(this.boundingBox.max,Fi.max),this.boundingBox.expandByPoint(xr)):(this.boundingBox.expandByPoint(Fi.min),this.boundingBox.expandByPoint(Fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new G,1/0);return}if(e){const r=this.boundingSphere.center;if(Fi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Vh.setFromBufferAttribute(a),this.morphTargetsRelative?(xr.addVectors(Fi.min,Vh.min),Fi.expandByPoint(xr),xr.addVectors(Fi.max,Vh.max),Fi.expandByPoint(xr)):(Fi.expandByPoint(Vh.min),Fi.expandByPoint(Vh.max))}Fi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xr.fromBufferAttribute(a,c),l&&(Eu.fromBufferAttribute(e,c),xr.add(Eu)),i=Math.max(i,r.distanceToSquared(xr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new tn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<r.count;L++)a[L]=new G,l[L]=new G;const c=new G,u=new G,f=new G,p=new Ce,m=new Ce,v=new Ce,_=new G,y=new G;function g(L,I,C){c.fromBufferAttribute(r,L),u.fromBufferAttribute(r,I),f.fromBufferAttribute(r,C),p.fromBufferAttribute(s,L),m.fromBufferAttribute(s,I),v.fromBufferAttribute(s,C),u.sub(c),f.sub(c),m.sub(p),v.sub(p);const O=1/(m.x*v.y-v.x*m.y);isFinite(O)&&(_.copy(u).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(O),y.copy(f).multiplyScalar(m.x).addScaledVector(u,-v.x).multiplyScalar(O),a[L].add(_),a[I].add(_),a[C].add(_),l[L].add(y),l[I].add(y),l[C].add(y))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let L=0,I=w.length;L<I;++L){const C=w[L],O=C.start,V=C.count;for(let $=O,Q=O+V;$<Q;$+=3)g(e.getX($+0),e.getX($+1),e.getX($+2))}const S=new G,E=new G,P=new G,b=new G;function R(L){P.fromBufferAttribute(i,L),b.copy(P);const I=a[L];S.copy(I),S.sub(P.multiplyScalar(P.dot(I))).normalize(),E.crossVectors(b,I);const O=E.dot(l[L])<0?-1:1;o.setXYZW(L,S.x,S.y,S.z,O)}for(let L=0,I=w.length;L<I;++L){const C=w[L],O=C.start,V=C.count;for(let $=O,Q=O+V;$<Q;$+=3)R(e.getX($+0)),R(e.getX($+1)),R(e.getX($+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new tn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new G,s=new G,o=new G,a=new G,l=new G,c=new G,u=new G,f=new G;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),_=e.getX(p+1),y=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,y),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,_),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)xr.fromBufferAttribute(e,t),xr.normalize(),e.setXYZ(t,xr.x,xr.y,xr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,p=new c.constructor(l.length*u);let m=0,v=0;for(let _=0,y=l.length;_<y;_++){a.isInterleavedBufferAttribute?m=l[_]*a.data.stride+a.offset:m=l[_]*u;for(let g=0;g<u;g++)p[v++]=c[m++]}return new tn(p,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const p=c[u],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let p=0,m=f.length;p<m;p++)u.push(f[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const zR=new tt,Hl=new Kc,bg=new Dr,HR=new G,Mu=new G,bu=new G,Cu=new G,ow=new G,Cg=new G,Tg=new Ce,Rg=new Ce,Pg=new Ce,GR=new G,VR=new G,WR=new G,Ig=new G,Bg=new G;class bn extends Vt{constructor(e=new Tt,t=new bi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Cg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(ow.fromBufferAttribute(f,e),o?Cg.addScaledVector(ow,u):Cg.addScaledVector(ow.sub(t),u))}t.add(Cg)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),bg.copy(r.boundingSphere),bg.applyMatrix4(s),Hl.copy(e.ray).recast(e.near),!(bg.containsPoint(Hl.origin)===!1&&(Hl.intersectSphere(bg,HR)===null||Hl.origin.distanceToSquared(HR)>(e.far-e.near)**2))&&(zR.copy(s).invert(),Hl.copy(e.ray).applyMatrix4(zR),!(r.boundingBox!==null&&Hl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Hl)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,_=p.length;v<_;v++){const y=p[v],g=o[y.materialIndex],w=Math.max(y.start,m.start),S=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let E=w,P=S;E<P;E+=3){const b=a.getX(E),R=a.getX(E+1),L=a.getX(E+2);i=Dg(this,g,e,r,c,u,f,b,R,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const w=a.getX(y),S=a.getX(y+1),E=a.getX(y+2);i=Dg(this,o,e,r,c,u,f,w,S,E),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,_=p.length;v<_;v++){const y=p[v],g=o[y.materialIndex],w=Math.max(y.start,m.start),S=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let E=w,P=S;E<P;E+=3){const b=E,R=E+1,L=E+2;i=Dg(this,g,e,r,c,u,f,b,R,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const w=y,S=y+1,E=y+2;i=Dg(this,o,e,r,c,u,f,w,S,E),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function uV(n,e,t,r,i,s,o,a){let l;if(e.side===di?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Mo,a),l===null)return null;Bg.copy(a),Bg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Bg);return c<t.near||c>t.far?null:{distance:c,point:Bg.clone(),object:n}}function Dg(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,Mu),n.getVertexPosition(l,bu),n.getVertexPosition(c,Cu);const u=uV(n,e,t,r,Mu,bu,Cu,Ig);if(u){i&&(Tg.fromBufferAttribute(i,a),Rg.fromBufferAttribute(i,l),Pg.fromBufferAttribute(i,c),u.uv=Vi.getInterpolation(Ig,Mu,bu,Cu,Tg,Rg,Pg,new Ce)),s&&(Tg.fromBufferAttribute(s,a),Rg.fromBufferAttribute(s,l),Pg.fromBufferAttribute(s,c),u.uv1=Vi.getInterpolation(Ig,Mu,bu,Cu,Tg,Rg,Pg,new Ce)),o&&(GR.fromBufferAttribute(o,a),VR.fromBufferAttribute(o,l),WR.fromBufferAttribute(o,c),u.normal=Vi.getInterpolation(Ig,Mu,bu,Cu,GR,VR,WR,new G),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new G,materialIndex:0};Vi.getNormal(Mu,bu,Cu,f.normal),u.face=f}return u}class Yc extends Tt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new ot(c,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(f,2));function v(_,y,g,w,S,E,P,b,R,L,I){const C=E/R,O=P/L,V=E/2,$=P/2,Q=b/2,ie=R+1,ee=L+1;let fe=0,k=0;const Y=new G;for(let Z=0;Z<ee;Z++){const ae=Z*O-$;for(let ye=0;ye<ie;ye++){const Ue=ye*C-V;Y[_]=Ue*w,Y[y]=ae*S,Y[g]=Q,c.push(Y.x,Y.y,Y.z),Y[_]=0,Y[y]=0,Y[g]=b>0?1:-1,u.push(Y.x,Y.y,Y.z),f.push(ye/R),f.push(1-Z/L),fe+=1}}for(let Z=0;Z<L;Z++)for(let ae=0;ae<R;ae++){const ye=p+ae+ie*Z,Ue=p+ae+ie*(Z+1),he=p+(ae+1)+ie*(Z+1),Te=p+(ae+1)+ie*Z;l.push(ye,Ue,Te),l.push(Ue,he,Te),k+=6}a.addGroup(m,k,I),m+=k,p+=fe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Of(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function oi(n){const e={};for(let t=0;t<n.length;t++){const r=Of(n[t]);for(const i in r)e[i]=r[i]}return e}function fV(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function x3(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const w3={clone:Of,merge:oi};var hV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,dV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Bi extends cr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=hV,this.fragmentShader=dV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Of(e.uniforms),this.uniformsGroups=fV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Fp extends Vt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tt,this.projectionMatrix=new tt,this.projectionMatrixInverse=new tt,this.coordinateSystem=vo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Da=new G,jR=new Ce,$R=new Ce;class Rn extends Fp{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Lf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ec*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Lf*2*Math.atan(Math.tan(Ec*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Da.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Da.x,Da.y).multiplyScalar(-e/Da.z),Da.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Da.x,Da.y).multiplyScalar(-e/Da.z)}getViewSize(e,t){return this.getViewBounds(e,jR,$R),t.subVectors($R,jR)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ec*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tu=-90,Ru=1;class S3 extends Vt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Rn(Tu,Ru,e,t);i.layers=this.layers,this.add(i);const s=new Rn(Tu,Ru,e,t);s.layers=this.layers,this.add(s);const o=new Rn(Tu,Ru,e,t);o.layers=this.layers,this.add(o);const a=new Rn(Tu,Ru,e,t);a.layers=this.layers,this.add(a);const l=new Rn(Tu,Ru,e,t);l.layers=this.layers,this.add(l);const c=new Rn(Tu,Ru,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===vo)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===hp)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=_,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(f,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Up extends Yt{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:bo,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cM extends Yi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Up(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:un}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Yc(5,5,5),s=new Bi({name:"CubemapFromEquirect",uniforms:Of(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:di,blending:wo});s.uniforms.tEquirect.value=t;const o=new bn(i,s),a=t.minFilter;return t.minFilter===gs&&(t.minFilter=un),new S3(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const aw=new G,pV=new G,mV=new Lt;class qo{constructor(e=new G(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=aw.subVectors(r,t).cross(pV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(aw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||mV.getNormalMatrix(e),i=this.coplanarPoint(aw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Gl=new Dr,Lg=new G;class zp{constructor(e=new qo,t=new qo,r=new qo,i=new qo,s=new qo,o=new qo){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=vo){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],p=i[7],m=i[8],v=i[9],_=i[10],y=i[11],g=i[12],w=i[13],S=i[14],E=i[15];if(r[0].setComponents(l-s,p-c,y-m,E-g).normalize(),r[1].setComponents(l+s,p+c,y+m,E+g).normalize(),r[2].setComponents(l+o,p+u,y+v,E+w).normalize(),r[3].setComponents(l-o,p-u,y-v,E-w).normalize(),r[4].setComponents(l-a,p-f,y-_,E-S).normalize(),t===vo)r[5].setComponents(l+a,p+f,y+_,E+S).normalize();else if(t===hp)r[5].setComponents(a,f,_,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Gl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Gl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Gl)}intersectsSprite(e){return Gl.center.set(0,0,0),Gl.radius=.7071067811865476,Gl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gl)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Lg.x=i.normal.x>0?e.max.x:e.min.x,Lg.y=i.normal.y>0?e.max.y:e.min.y,Lg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Lg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function A3(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function gV(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,f=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function r(a,l,c){const u=l.array,f=l._updateRange,p=l.updateRanges;if(n.bindBuffer(c,a),f.count===-1&&p.length===0&&n.bufferSubData(c,0,u),p.length!==0){for(let m=0,v=p.length;m<v;m++){const _=p[m];n.bufferSubData(c,_.start*u.BYTES_PER_ELEMENT,u,_.start,_.count)}l.clearUpdateRanges()}f.count!==-1&&(n.bufferSubData(c,f.offset*u.BYTES_PER_ELEMENT,u,f.offset,f.count),f.count=-1),l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}class El extends Tt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,f=e/a,p=t/l,m=[],v=[],_=[],y=[];for(let g=0;g<u;g++){const w=g*p-o;for(let S=0;S<c;S++){const E=S*f-s;v.push(E,-w,0),_.push(0,0,1),y.push(S/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let w=0;w<a;w++){const S=w+c*g,E=w+c*(g+1),P=w+1+c*(g+1),b=w+1+c*g;m.push(S,E,b),m.push(E,P,b)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(_,3)),this.setAttribute("uv",new ot(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new El(e.width,e.height,e.widthSegments,e.heightSegments)}}var vV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,yV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,_V=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,xV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,SV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,AV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,EV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,MV=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,bV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,CV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,TV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,RV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,PV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,IV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,BV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,DV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,OV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,NV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,FV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,UV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,zV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,HV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,GV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,VV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,WV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,jV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$V=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,XV="gl_FragColor = linearToOutputTexel( gl_FragColor );",JV=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,KV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,YV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,qV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,QV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ZV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,e9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,t9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,n9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,r9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,i9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,s9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,o9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,a9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,l9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,c9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,u9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,f9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,h9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,d9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,p9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,m9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,g9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,v9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,y9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,_9=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,x9=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,w9=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,S9=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,A9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,E9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,M9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,b9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,T9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,R9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,P9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,I9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,B9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,D9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,L9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,O9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,N9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,k9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,F9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,U9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,z9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,H9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,G9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,V9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,W9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,j9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,$9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,X9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,J9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,K9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Y9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,q9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Q9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,Z9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,e6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,t6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,n6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,r6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,i6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,s6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,o6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,a6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,l6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,c6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,u6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,f6=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,h6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,d6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,p6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,m6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const g6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,v6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,y6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,x6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,w6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,A6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,E6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,M6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,b6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,C6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,T6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,R6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,P6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,I6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B6=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,D6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,O6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N6=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,k6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,F6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,z6=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,H6=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G6=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V6=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W6=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,j6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$6=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X6=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,J6=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,K6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,kt={alphahash_fragment:vV,alphahash_pars_fragment:yV,alphamap_fragment:_V,alphamap_pars_fragment:xV,alphatest_fragment:wV,alphatest_pars_fragment:SV,aomap_fragment:AV,aomap_pars_fragment:EV,batching_pars_vertex:MV,batching_vertex:bV,begin_vertex:CV,beginnormal_vertex:TV,bsdfs:RV,iridescence_fragment:PV,bumpmap_pars_fragment:IV,clipping_planes_fragment:BV,clipping_planes_pars_fragment:DV,clipping_planes_pars_vertex:LV,clipping_planes_vertex:OV,color_fragment:NV,color_pars_fragment:kV,color_pars_vertex:FV,color_vertex:UV,common:zV,cube_uv_reflection_fragment:HV,defaultnormal_vertex:GV,displacementmap_pars_vertex:VV,displacementmap_vertex:WV,emissivemap_fragment:jV,emissivemap_pars_fragment:$V,colorspace_fragment:XV,colorspace_pars_fragment:JV,envmap_fragment:KV,envmap_common_pars_fragment:YV,envmap_pars_fragment:qV,envmap_pars_vertex:QV,envmap_physical_pars_fragment:c9,envmap_vertex:ZV,fog_vertex:e9,fog_pars_vertex:t9,fog_fragment:n9,fog_pars_fragment:r9,gradientmap_pars_fragment:i9,lightmap_pars_fragment:s9,lights_lambert_fragment:o9,lights_lambert_pars_fragment:a9,lights_pars_begin:l9,lights_toon_fragment:u9,lights_toon_pars_fragment:f9,lights_phong_fragment:h9,lights_phong_pars_fragment:d9,lights_physical_fragment:p9,lights_physical_pars_fragment:m9,lights_fragment_begin:g9,lights_fragment_maps:v9,lights_fragment_end:y9,logdepthbuf_fragment:_9,logdepthbuf_pars_fragment:x9,logdepthbuf_pars_vertex:w9,logdepthbuf_vertex:S9,map_fragment:A9,map_pars_fragment:E9,map_particle_fragment:M9,map_particle_pars_fragment:b9,metalnessmap_fragment:C9,metalnessmap_pars_fragment:T9,morphinstance_vertex:R9,morphcolor_vertex:P9,morphnormal_vertex:I9,morphtarget_pars_vertex:B9,morphtarget_vertex:D9,normal_fragment_begin:L9,normal_fragment_maps:O9,normal_pars_fragment:N9,normal_pars_vertex:k9,normal_vertex:F9,normalmap_pars_fragment:U9,clearcoat_normal_fragment_begin:z9,clearcoat_normal_fragment_maps:H9,clearcoat_pars_fragment:G9,iridescence_pars_fragment:V9,opaque_fragment:W9,packing:j9,premultiplied_alpha_fragment:$9,project_vertex:X9,dithering_fragment:J9,dithering_pars_fragment:K9,roughnessmap_fragment:Y9,roughnessmap_pars_fragment:q9,shadowmap_pars_fragment:Q9,shadowmap_pars_vertex:Z9,shadowmap_vertex:e6,shadowmask_pars_fragment:t6,skinbase_vertex:n6,skinning_pars_vertex:r6,skinning_vertex:i6,skinnormal_vertex:s6,specularmap_fragment:o6,specularmap_pars_fragment:a6,tonemapping_fragment:l6,tonemapping_pars_fragment:c6,transmission_fragment:u6,transmission_pars_fragment:f6,uv_pars_fragment:h6,uv_pars_vertex:d6,uv_vertex:p6,worldpos_vertex:m6,background_vert:g6,background_frag:v6,backgroundCube_vert:y6,backgroundCube_frag:_6,cube_vert:x6,cube_frag:w6,depth_vert:S6,depth_frag:A6,distanceRGBA_vert:E6,distanceRGBA_frag:M6,equirect_vert:b6,equirect_frag:C6,linedashed_vert:T6,linedashed_frag:R6,meshbasic_vert:P6,meshbasic_frag:I6,meshlambert_vert:B6,meshlambert_frag:D6,meshmatcap_vert:L6,meshmatcap_frag:O6,meshnormal_vert:N6,meshnormal_frag:k6,meshphong_vert:F6,meshphong_frag:U6,meshphysical_vert:z6,meshphysical_frag:H6,meshtoon_vert:G6,meshtoon_frag:V6,points_vert:W6,points_frag:j6,shadow_vert:$6,shadow_frag:X6,sprite_vert:J6,sprite_frag:K6},et={common:{diffuse:{value:new Xe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Lt}},envmap:{envMap:{value:null},envMapRotation:{value:new Lt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Lt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Lt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Lt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Lt},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Lt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Lt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Lt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Lt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0},uvTransform:{value:new Lt}},sprite:{diffuse:{value:new Xe(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}}},Hs={basic:{uniforms:oi([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.fog]),vertexShader:kt.meshbasic_vert,fragmentShader:kt.meshbasic_frag},lambert:{uniforms:oi([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new Xe(0)}}]),vertexShader:kt.meshlambert_vert,fragmentShader:kt.meshlambert_frag},phong:{uniforms:oi([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new Xe(0)},specular:{value:new Xe(1118481)},shininess:{value:30}}]),vertexShader:kt.meshphong_vert,fragmentShader:kt.meshphong_frag},standard:{uniforms:oi([et.common,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.roughnessmap,et.metalnessmap,et.fog,et.lights,{emissive:{value:new Xe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:kt.meshphysical_vert,fragmentShader:kt.meshphysical_frag},toon:{uniforms:oi([et.common,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.gradientmap,et.fog,et.lights,{emissive:{value:new Xe(0)}}]),vertexShader:kt.meshtoon_vert,fragmentShader:kt.meshtoon_frag},matcap:{uniforms:oi([et.common,et.bumpmap,et.normalmap,et.displacementmap,et.fog,{matcap:{value:null}}]),vertexShader:kt.meshmatcap_vert,fragmentShader:kt.meshmatcap_frag},points:{uniforms:oi([et.points,et.fog]),vertexShader:kt.points_vert,fragmentShader:kt.points_frag},dashed:{uniforms:oi([et.common,et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:kt.linedashed_vert,fragmentShader:kt.linedashed_frag},depth:{uniforms:oi([et.common,et.displacementmap]),vertexShader:kt.depth_vert,fragmentShader:kt.depth_frag},normal:{uniforms:oi([et.common,et.bumpmap,et.normalmap,et.displacementmap,{opacity:{value:1}}]),vertexShader:kt.meshnormal_vert,fragmentShader:kt.meshnormal_frag},sprite:{uniforms:oi([et.sprite,et.fog]),vertexShader:kt.sprite_vert,fragmentShader:kt.sprite_frag},background:{uniforms:{uvTransform:{value:new Lt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:kt.background_vert,fragmentShader:kt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Lt}},vertexShader:kt.backgroundCube_vert,fragmentShader:kt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:kt.cube_vert,fragmentShader:kt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:kt.equirect_vert,fragmentShader:kt.equirect_frag},distanceRGBA:{uniforms:oi([et.common,et.displacementmap,{referencePosition:{value:new G},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:kt.distanceRGBA_vert,fragmentShader:kt.distanceRGBA_frag},shadow:{uniforms:oi([et.lights,et.fog,{color:{value:new Xe(0)},opacity:{value:1}}]),vertexShader:kt.shadow_vert,fragmentShader:kt.shadow_frag}};Hs.physical={uniforms:oi([Hs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Lt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Lt},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Lt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Lt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Lt},sheen:{value:0},sheenColor:{value:new Xe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Lt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Lt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Lt},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Lt},attenuationDistance:{value:0},attenuationColor:{value:new Xe(0)},specularColor:{value:new Xe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Lt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Lt},anisotropyVector:{value:new Ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Lt}}]),vertexShader:kt.meshphysical_vert,fragmentShader:kt.meshphysical_frag};const Og={r:0,b:0,g:0},Vl=new Ar,Y6=new tt;function q6(n,e,t,r,i,s,o){const a=new Xe(0);let l=s===!0?0:1,c,u,f=null,p=0,m=null;function v(w){let S=w.isScene===!0?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?t:e).get(S)),S}function _(w){let S=!1;const E=v(w);E===null?g(a,l):E&&E.isColor&&(g(E,1),S=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?r.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(w,S){const E=v(S);E&&(E.isCubeTexture||E.mapping===Yf)?(u===void 0&&(u=new bn(new Yc(1,1,1),new Bi({name:"BackgroundCubeMaterial",uniforms:Of(Hs.backgroundCube.uniforms),vertexShader:Hs.backgroundCube.vertexShader,fragmentShader:Hs.backgroundCube.fragmentShader,side:di,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(P,b,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Vl.copy(S.backgroundRotation),Vl.x*=-1,Vl.y*=-1,Vl.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Vl.y*=-1,Vl.z*=-1),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Y6.makeRotationFromEuler(Vl)),u.material.toneMapped=fn.getTransfer(E.colorSpace)!==xn,(f!==E||p!==E.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=E,p=E.version,m=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new bn(new El(2,2),new Bi({name:"BackgroundMaterial",uniforms:Of(Hs.background.uniforms),vertexShader:Hs.background.vertexShader,fragmentShader:Hs.background.fragmentShader,side:Mo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=fn.getTransfer(E.colorSpace)!==xn,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(f!==E||p!==E.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=E,p=E.version,m=n.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function g(w,S){w.getRGB(Og,x3(n)),r.buffers.color.setClear(Og.r,Og.g,Og.b,S,o)}return{getClearColor:function(){return a},setClearColor:function(w,S=1){a.set(w),l=S,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,g(a,l)},render:_,addToRenderList:y}}function Q6(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(C,O,V,$,Q){let ie=!1;const ee=f($,V,O);s!==ee&&(s=ee,c(s.object)),ie=m(C,$,V,Q),ie&&v(C,$,V,Q),Q!==null&&e.update(Q,n.ELEMENT_ARRAY_BUFFER),(ie||o)&&(o=!1,E(C,O,V,$),Q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Q).buffer))}function l(){return n.createVertexArray()}function c(C){return n.bindVertexArray(C)}function u(C){return n.deleteVertexArray(C)}function f(C,O,V){const $=V.wireframe===!0;let Q=r[C.id];Q===void 0&&(Q={},r[C.id]=Q);let ie=Q[O.id];ie===void 0&&(ie={},Q[O.id]=ie);let ee=ie[$];return ee===void 0&&(ee=p(l()),ie[$]=ee),ee}function p(C){const O=[],V=[],$=[];for(let Q=0;Q<t;Q++)O[Q]=0,V[Q]=0,$[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:V,attributeDivisors:$,object:C,attributes:{},index:null}}function m(C,O,V,$){const Q=s.attributes,ie=O.attributes;let ee=0;const fe=V.getAttributes();for(const k in fe)if(fe[k].location>=0){const Z=Q[k];let ae=ie[k];if(ae===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(ae=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(ae=C.instanceColor)),Z===void 0||Z.attribute!==ae||ae&&Z.data!==ae.data)return!0;ee++}return s.attributesNum!==ee||s.index!==$}function v(C,O,V,$){const Q={},ie=O.attributes;let ee=0;const fe=V.getAttributes();for(const k in fe)if(fe[k].location>=0){let Z=ie[k];Z===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(Z=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(Z=C.instanceColor));const ae={};ae.attribute=Z,Z&&Z.data&&(ae.data=Z.data),Q[k]=ae,ee++}s.attributes=Q,s.attributesNum=ee,s.index=$}function _(){const C=s.newAttributes;for(let O=0,V=C.length;O<V;O++)C[O]=0}function y(C){g(C,0)}function g(C,O){const V=s.newAttributes,$=s.enabledAttributes,Q=s.attributeDivisors;V[C]=1,$[C]===0&&(n.enableVertexAttribArray(C),$[C]=1),Q[C]!==O&&(n.vertexAttribDivisor(C,O),Q[C]=O)}function w(){const C=s.newAttributes,O=s.enabledAttributes;for(let V=0,$=O.length;V<$;V++)O[V]!==C[V]&&(n.disableVertexAttribArray(V),O[V]=0)}function S(C,O,V,$,Q,ie,ee){ee===!0?n.vertexAttribIPointer(C,O,V,Q,ie):n.vertexAttribPointer(C,O,V,$,Q,ie)}function E(C,O,V,$){_();const Q=$.attributes,ie=V.getAttributes(),ee=O.defaultAttributeValues;for(const fe in ie){const k=ie[fe];if(k.location>=0){let Y=Q[fe];if(Y===void 0&&(fe==="instanceMatrix"&&C.instanceMatrix&&(Y=C.instanceMatrix),fe==="instanceColor"&&C.instanceColor&&(Y=C.instanceColor)),Y!==void 0){const Z=Y.normalized,ae=Y.itemSize,ye=e.get(Y);if(ye===void 0)continue;const Ue=ye.buffer,he=ye.type,Te=ye.bytesPerElement,Me=he===n.INT||he===n.UNSIGNED_INT||Y.gpuType===y0;if(Y.isInterleavedBufferAttribute){const Be=Y.data,at=Be.stride,wt=Y.offset;if(Be.isInstancedInterleavedBuffer){for(let mt=0;mt<k.locationSize;mt++)g(k.location+mt,Be.meshPerAttribute);C.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Be.meshPerAttribute*Be.count)}else for(let mt=0;mt<k.locationSize;mt++)y(k.location+mt);n.bindBuffer(n.ARRAY_BUFFER,Ue);for(let mt=0;mt<k.locationSize;mt++)S(k.location+mt,ae/k.locationSize,he,Z,at*Te,(wt+ae/k.locationSize*mt)*Te,Me)}else{if(Y.isInstancedBufferAttribute){for(let Be=0;Be<k.locationSize;Be++)g(k.location+Be,Y.meshPerAttribute);C.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let Be=0;Be<k.locationSize;Be++)y(k.location+Be);n.bindBuffer(n.ARRAY_BUFFER,Ue);for(let Be=0;Be<k.locationSize;Be++)S(k.location+Be,ae/k.locationSize,he,Z,ae*Te,ae/k.locationSize*Be*Te,Me)}}else if(ee!==void 0){const Z=ee[fe];if(Z!==void 0)switch(Z.length){case 2:n.vertexAttrib2fv(k.location,Z);break;case 3:n.vertexAttrib3fv(k.location,Z);break;case 4:n.vertexAttrib4fv(k.location,Z);break;default:n.vertexAttrib1fv(k.location,Z)}}}}w()}function P(){L();for(const C in r){const O=r[C];for(const V in O){const $=O[V];for(const Q in $)u($[Q].object),delete $[Q];delete O[V]}delete r[C]}}function b(C){if(r[C.id]===void 0)return;const O=r[C.id];for(const V in O){const $=O[V];for(const Q in $)u($[Q].object),delete $[Q];delete O[V]}delete r[C.id]}function R(C){for(const O in r){const V=r[O];if(V[C.id]===void 0)continue;const $=V[C.id];for(const Q in $)u($[Q].object),delete $[Q];delete V[C.id]}}function L(){I(),o=!0,s!==i&&(s=i,c(s.object))}function I(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:L,resetDefaultState:I,dispose:P,releaseStatesOfGeometry:b,releaseStatesOfProgram:R,initAttributes:_,enableAttribute:y,disableUnusedAttributes:w}}function Z6(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,f){f!==0&&(n.drawArraysInstanced(r,c,u,f),t.update(u,r,f))}function a(c,u,f){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<f;m++)this.render(c[m],u[m]);else{p.multiDrawArraysWEBGL(r,c,0,u,0,f);let m=0;for(let v=0;v<f;v++)m+=u[v];t.update(m,r,1)}}function l(c,u,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],u[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,f);let v=0;for(let _=0;_<f;_++)v+=u[_];for(let _=0;_<p.length;_++)t.update(v,r,p[_])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function eW(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(b){return!(b!==or&&r.convert(b)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(b){const R=b===Ir&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(b!==Ki&&r.convert(b)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&b!==Vn&&!R)}function l(b){if(b==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=m>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:_,maxAttributes:y,maxVertexUniforms:g,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:E,maxSamples:P}}function tW(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new qo,a=new Lt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=u(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,_=f.clipIntersection,y=f.clipShadows,g=n.get(f);if(!i||v===null||v.length===0||s&&!y)s?u(null):c();else{const w=s?0:r,S=w*4;let E=g.clippingState||null;l.value=E,E=u(v,p,S,m);for(let P=0;P!==S;++P)E[P]=t[P];g.clippingState=E,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,p,m,v){const _=f!==null?f.length:0;let y=null;if(_!==0){if(y=l.value,v!==!0||y===null){const g=m+_*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(y===null||y.length<g)&&(y=new Float32Array(g));for(let S=0,E=m;S!==_;++S,E+=4)o.copy(f[S]).applyMatrix4(w,a),o.normal.toArray(y,E),y[E+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,y}}function nW(n){let e=new WeakMap;function t(o,a){return a===Oc?o.mapping=bo:a===sp&&(o.mapping=cl),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Oc||a===sp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new cM(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class vs extends Fp{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const lf=4,XR=[.125,.215,.35,.446,.526,.582],oc=20,lw=new vs,JR=new Xe;let cw=null,uw=0,fw=0,hw=!1;const sc=(1+Math.sqrt(5))/2,Pu=1/sc,KR=[new G(-sc,Pu,0),new G(sc,Pu,0),new G(-Pu,0,sc),new G(Pu,0,sc),new G(0,sc,-Pu),new G(0,sc,Pu),new G(-1,1,-1),new G(1,1,-1),new G(-1,1,1),new G(1,1,1)];class J1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){cw=this._renderer.getRenderTarget(),uw=this._renderer.getActiveCubeFace(),fw=this._renderer.getActiveMipmapLevel(),hw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=QR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cw,uw,fw),this._renderer.xr.enabled=hw,e.scissorTest=!1,Ng(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===bo||e.mapping===cl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cw=this._renderer.getRenderTarget(),uw=this._renderer.getActiveCubeFace(),fw=this._renderer.getActiveMipmapLevel(),hw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:un,minFilter:un,generateMipmaps:!1,type:Ir,format:or,colorSpace:As,depthBuffer:!1},i=YR(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=YR(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rW(s)),this._blurMaterial=iW(s,e,t)}return i}_compileMaterial(e){const t=new bn(this._lodPlanes[0],e);this._renderer.compile(t,lw)}_sceneToCubeUV(e,t,r,i){const a=new Rn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(JR),u.toneMapping=So,u.autoClear=!1;const m=new bi({name:"PMREM.Background",side:di,depthWrite:!1,depthTest:!1}),v=new bn(new Yc,m);let _=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,_=!0):(m.color.copy(JR),_=!0);for(let g=0;g<6;g++){const w=g%3;w===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):w===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;Ng(i,w*S,g>2?S:0,S,S),u.setRenderTarget(i),_&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===bo||e.mapping===cl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=QR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qR());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new bn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Ng(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,lw)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=KR[(i-s-1)%KR.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new bn(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*oc-1),_=s/v,y=isFinite(s)?1+Math.floor(u*_):oc;y>oc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${oc}`);const g=[];let w=0;for(let R=0;R<oc;++R){const L=R/_,I=Math.exp(-L*L/2);g.push(I),R===0?w+=I:R<y&&(w+=2*I)}for(let R=0;R<g.length;R++)g[R]=g[R]/w;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-r;const E=this._sizeLods[i],P=3*E*(i>S-lf?i-S+lf:0),b=4*(this._cubeSize-E);Ng(t,P,b,3*E,2*E),l.setRenderTarget(t),l.render(f,lw)}}function rW(n){const e=[],t=[],r=[];let i=n;const s=n-lf+1+XR.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-lf?l=XR[o-n+lf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,v=6,_=3,y=2,g=1,w=new Float32Array(_*v*m),S=new Float32Array(y*v*m),E=new Float32Array(g*v*m);for(let b=0;b<m;b++){const R=b%3*2/3-1,L=b>2?0:-1,I=[R,L,0,R+2/3,L,0,R+2/3,L+1,0,R,L,0,R+2/3,L+1,0,R,L+1,0];w.set(I,_*v*b),S.set(p,y*v*b);const C=[b,b,b,b,b,b];E.set(C,g*v*b)}const P=new Tt;P.setAttribute("position",new tn(w,_)),P.setAttribute("uv",new tn(S,y)),P.setAttribute("faceIndex",new tn(E,g)),e.push(P),i>lf&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function YR(n,e,t){const r=new Yi(n,e,t);return r.texture.mapping=Yf,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ng(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function iW(n,e,t){const r=new Float32Array(oc),i=new G(0,1,0);return new Bi({name:"SphericalGaussianBlur",defines:{n:oc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:uM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:wo,depthTest:!1,depthWrite:!1})}function qR(){return new Bi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:uM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:wo,depthTest:!1,depthWrite:!1})}function QR(){return new Bi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:uM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:wo,depthTest:!1,depthWrite:!1})}function uM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sW(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Oc||l===sp,u=l===bo||l===cl;if(c||u){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new J1(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(t===null&&(t=new J1(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function oW(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&oM("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function aW(n,e,t,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const _=p.morphAttributes[v];for(let y=0,g=_.length;y<g;y++)e.remove(_[y])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const _=m[v];for(let y=0,g=_.length;y<g;y++)e.update(_[y],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let _=0;if(m!==null){const w=m.array;_=m.version;for(let S=0,E=w.length;S<E;S+=3){const P=w[S+0],b=w[S+1],R=w[S+2];p.push(P,b,b,R,R,P)}}else if(v!==void 0){const w=v.array;_=v.version;for(let S=0,E=w.length/3-1;S<E;S+=3){const P=S+0,b=S+1,R=S+2;p.push(P,b,b,R,R,P)}}else return;const y=new(m3(p)?lM:A0)(p,1);y.version=_;const g=s.get(f);g&&e.remove(g),s.set(f,y)}function u(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function lW(n,e,t){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(r,m,s,p*o),t.update(m,r,1)}function c(p,m,v){v!==0&&(n.drawElementsInstanced(r,m,s,p*o,v),t.update(m,r,v))}function u(p,m,v){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let y=0;y<v;y++)this.render(p[y]/o,m[y]);else{_.multiDrawElementsWEBGL(r,m,0,s,p,0,v);let y=0;for(let g=0;g<v;g++)y+=m[g];t.update(y,r,1)}}function f(p,m,v,_){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],_[g]);else{y.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,_,0,v);let g=0;for(let w=0;w<v;w++)g+=m[w];for(let w=0;w<_.length;w++)t.update(g,r,_[w])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function cW(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function uW(n,e,t){const r=new WeakMap,i=new rn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==f){let I=function(){R.dispose(),r.delete(a),a.removeEventListener("dispose",I)};p!==void 0&&p.texture.dispose();const m=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let S=0;m===!0&&(S=1),v===!0&&(S=2),_===!0&&(S=3);let E=a.attributes.position.count*S,P=1;E>e.maxTextureSize&&(P=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const b=new Float32Array(E*P*4*f),R=new S0(b,E,P,f);R.type=Vn,R.needsUpdate=!0;const L=S*4;for(let C=0;C<f;C++){const O=y[C],V=g[C],$=w[C],Q=E*P*4*C;for(let ie=0;ie<O.count;ie++){const ee=ie*L;m===!0&&(i.fromBufferAttribute(O,ie),b[Q+ee+0]=i.x,b[Q+ee+1]=i.y,b[Q+ee+2]=i.z,b[Q+ee+3]=0),v===!0&&(i.fromBufferAttribute(V,ie),b[Q+ee+4]=i.x,b[Q+ee+5]=i.y,b[Q+ee+6]=i.z,b[Q+ee+7]=0),_===!0&&(i.fromBufferAttribute($,ie),b[Q+ee+8]=i.x,b[Q+ee+9]=i.y,b[Q+ee+10]=i.z,b[Q+ee+11]=$.itemSize===4?i.w:1)}}p={count:f,texture:R,size:new Ce(E,P)},r.set(a,p),a.addEventListener("dispose",I)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let m=0;for(let _=0;_<c.length;_++)m+=c[_];const v=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function fW(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class fM extends Yt{constructor(e,t,r,i,s,o,a,l,c,u=Ac){if(u!==Ac&&u!==kc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Ac&&(r=ul),r===void 0&&u===kc&&(r=Nc),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:pr,this.minFilter=l!==void 0?l:pr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const E3=new Yt,M3=new fM(1,1);M3.compareFunction=iM;const b3=new S0,C3=new aM,T3=new Up,ZR=[],eP=[],tP=new Float32Array(16),nP=new Float32Array(9),rP=new Float32Array(4);function qf(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=ZR[i];if(s===void 0&&(s=new Float32Array(i),ZR[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function mr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function gr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function E0(n,e){let t=eP[e];t===void 0&&(t=new Int32Array(e),eP[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function hW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function dW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mr(t,e))return;n.uniform2fv(this.addr,e),gr(t,e)}}function pW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(mr(t,e))return;n.uniform3fv(this.addr,e),gr(t,e)}}function mW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mr(t,e))return;n.uniform4fv(this.addr,e),gr(t,e)}}function gW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(mr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),gr(t,e)}else{if(mr(t,r))return;rP.set(r),n.uniformMatrix2fv(this.addr,!1,rP),gr(t,r)}}function vW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(mr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),gr(t,e)}else{if(mr(t,r))return;nP.set(r),n.uniformMatrix3fv(this.addr,!1,nP),gr(t,r)}}function yW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(mr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),gr(t,e)}else{if(mr(t,r))return;tP.set(r),n.uniformMatrix4fv(this.addr,!1,tP),gr(t,r)}}function _W(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function xW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mr(t,e))return;n.uniform2iv(this.addr,e),gr(t,e)}}function wW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mr(t,e))return;n.uniform3iv(this.addr,e),gr(t,e)}}function SW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mr(t,e))return;n.uniform4iv(this.addr,e),gr(t,e)}}function AW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function EW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mr(t,e))return;n.uniform2uiv(this.addr,e),gr(t,e)}}function MW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mr(t,e))return;n.uniform3uiv(this.addr,e),gr(t,e)}}function bW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mr(t,e))return;n.uniform4uiv(this.addr,e),gr(t,e)}}function CW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?M3:E3;t.setTexture2D(e||s,i)}function TW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||C3,i)}function RW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||T3,i)}function PW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||b3,i)}function IW(n){switch(n){case 5126:return hW;case 35664:return dW;case 35665:return pW;case 35666:return mW;case 35674:return gW;case 35675:return vW;case 35676:return yW;case 5124:case 35670:return _W;case 35667:case 35671:return xW;case 35668:case 35672:return wW;case 35669:case 35673:return SW;case 5125:return AW;case 36294:return EW;case 36295:return MW;case 36296:return bW;case 35678:case 36198:case 36298:case 36306:case 35682:return CW;case 35679:case 36299:case 36307:return TW;case 35680:case 36300:case 36308:case 36293:return RW;case 36289:case 36303:case 36311:case 36292:return PW}}function BW(n,e){n.uniform1fv(this.addr,e)}function DW(n,e){const t=qf(e,this.size,2);n.uniform2fv(this.addr,t)}function LW(n,e){const t=qf(e,this.size,3);n.uniform3fv(this.addr,t)}function OW(n,e){const t=qf(e,this.size,4);n.uniform4fv(this.addr,t)}function NW(n,e){const t=qf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function kW(n,e){const t=qf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function FW(n,e){const t=qf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function UW(n,e){n.uniform1iv(this.addr,e)}function zW(n,e){n.uniform2iv(this.addr,e)}function HW(n,e){n.uniform3iv(this.addr,e)}function GW(n,e){n.uniform4iv(this.addr,e)}function VW(n,e){n.uniform1uiv(this.addr,e)}function WW(n,e){n.uniform2uiv(this.addr,e)}function jW(n,e){n.uniform3uiv(this.addr,e)}function $W(n,e){n.uniform4uiv(this.addr,e)}function XW(n,e,t){const r=this.cache,i=e.length,s=E0(t,i);mr(r,s)||(n.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||E3,s[o])}function JW(n,e,t){const r=this.cache,i=e.length,s=E0(t,i);mr(r,s)||(n.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||C3,s[o])}function KW(n,e,t){const r=this.cache,i=e.length,s=E0(t,i);mr(r,s)||(n.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||T3,s[o])}function YW(n,e,t){const r=this.cache,i=e.length,s=E0(t,i);mr(r,s)||(n.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||b3,s[o])}function qW(n){switch(n){case 5126:return BW;case 35664:return DW;case 35665:return LW;case 35666:return OW;case 35674:return NW;case 35675:return kW;case 35676:return FW;case 5124:case 35670:return UW;case 35667:case 35671:return zW;case 35668:case 35672:return HW;case 35669:case 35673:return GW;case 5125:return VW;case 36294:return WW;case 36295:return jW;case 36296:return $W;case 35678:case 36198:case 36298:case 36306:case 35682:return XW;case 35679:case 36299:case 36307:return JW;case 35680:case 36300:case 36308:case 36293:return KW;case 36289:case 36303:case 36311:case 36292:return YW}}class QW{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=IW(t.type)}}class ZW{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=qW(t.type)}}class ej{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const dw=/(\w+)(\])?(\[|\.)?/g;function iP(n,e){n.seq.push(e),n.map[e.id]=e}function tj(n,e,t){const r=n.name,i=r.length;for(dw.lastIndex=0;;){const s=dw.exec(r),o=dw.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){iP(t,c===void 0?new QW(a,n,e):new ZW(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new ej(a),iP(t,f)),t=f}}}class jv{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);tj(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function sP(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const nj=37297;let rj=0;function ij(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function sj(n){const e=fn.getPrimaries(fn.workingColorSpace),t=fn.getPrimaries(n);let r;switch(e===t?r="":e===up&&t===cp?r="LinearDisplayP3ToLinearSRGB":e===cp&&t===up&&(r="LinearSRGBToLinearDisplayP3"),n){case As:case kp:return[r,"LinearTransferOETF"];case Hi:case w0:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function oP(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+ij(n.getShaderSource(e),o)}else return i}function oj(n,e){const t=sj(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function aj(n,e){let t;switch(e){case HO:t="Linear";break;case GO:t="Reinhard";break;case VO:t="OptimizedCineon";break;case JE:t="ACESFilmic";break;case jO:t="AgX";break;case $O:t="Neutral";break;case WO:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function lj(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(md).join(`
`)}function cj(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function uj(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function md(n){return n!==""}function aP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function lP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fj=/^[ \t]*#include +<([\w\d./]+)>/gm;function K1(n){return n.replace(fj,dj)}const hj=new Map;function dj(n,e){let t=kt[e];if(t===void 0){const r=hj.get(e);if(r!==void 0)t=kt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return K1(t)}const pj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cP(n){return n.replace(pj,mj)}function mj(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function uP(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===g0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Pd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ks&&(e="SHADOWMAP_TYPE_VSM"),e}function vj(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case bo:case cl:e="ENVMAP_TYPE_CUBE";break;case Yf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yj(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case cl:e="ENVMAP_MODE_REFRACTION";break}return e}function _j(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Np:e="ENVMAP_BLENDING_MULTIPLY";break;case UO:e="ENVMAP_BLENDING_MIX";break;case zO:e="ENVMAP_BLENDING_ADD";break}return e}function xj(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function wj(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=gj(t),c=vj(t),u=yj(t),f=_j(t),p=xj(t),m=lj(t),v=cj(s),_=i.createProgram();let y,g,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(md).join(`
`),y.length>0&&(y+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(md).join(`
`),g.length>0&&(g+=`
`)):(y=[uP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(md).join(`
`),g=[uP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==So?"#define TONE_MAPPING":"",t.toneMapping!==So?kt.tonemapping_pars_fragment:"",t.toneMapping!==So?aj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",kt.colorspace_pars_fragment,oj("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(md).join(`
`)),o=K1(o),o=aP(o,t),o=lP(o,t),a=K1(a),a=aP(a,t),a=lP(a,t),o=cP(o),a=cP(a),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,y=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",t.glslVersion===X1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===X1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=w+y+o,E=w+g+a,P=sP(i,i.VERTEX_SHADER,S),b=sP(i,i.FRAGMENT_SHADER,E);i.attachShader(_,P),i.attachShader(_,b),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function R(O){if(n.debug.checkShaderErrors){const V=i.getProgramInfoLog(_).trim(),$=i.getShaderInfoLog(P).trim(),Q=i.getShaderInfoLog(b).trim();let ie=!0,ee=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(ie=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,P,b);else{const fe=oP(i,P,"vertex"),k=oP(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+V+`
`+fe+`
`+k)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):($===""||Q==="")&&(ee=!1);ee&&(O.diagnostics={runnable:ie,programLog:V,vertexShader:{log:$,prefix:y},fragmentShader:{log:Q,prefix:g}})}i.deleteShader(P),i.deleteShader(b),L=new jv(i,_),I=uj(i,_)}let L;this.getUniforms=function(){return L===void 0&&R(this),L};let I;this.getAttributes=function(){return I===void 0&&R(this),I};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=i.getProgramParameter(_,nj)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=rj++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=P,this.fragmentShader=b,this}let Sj=0;class Aj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Ej(e),t.set(e,r)),r}}class Ej{constructor(e){this.id=Sj++,this.code=e,this.usedTimes=0}}function Mj(n,e,t,r,i,s,o){const a=new Mc,l=new Aj,c=new Set,u=[],f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(I){return c.add(I),I===0?"uv":`uv${I}`}function y(I,C,O,V,$){const Q=V.fog,ie=$.geometry,ee=I.isMeshStandardMaterial?V.environment:null,fe=(I.isMeshStandardMaterial?t:e).get(I.envMap||ee),k=fe&&fe.mapping===Yf?fe.image.height:null,Y=v[I.type];I.precision!==null&&(m=i.getMaxPrecision(I.precision),m!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",m,"instead."));const Z=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,ae=Z!==void 0?Z.length:0;let ye=0;ie.morphAttributes.position!==void 0&&(ye=1),ie.morphAttributes.normal!==void 0&&(ye=2),ie.morphAttributes.color!==void 0&&(ye=3);let Ue,he,Te,Me;if(Y){const zt=Hs[Y];Ue=zt.vertexShader,he=zt.fragmentShader}else Ue=I.vertexShader,he=I.fragmentShader,l.update(I),Te=l.getVertexShaderID(I),Me=l.getFragmentShaderID(I);const Be=n.getRenderTarget(),at=$.isInstancedMesh===!0,wt=$.isBatchedMesh===!0,mt=!!I.map,te=!!I.matcap,Ie=!!fe,Se=!!I.aoMap,Ne=!!I.lightMap,Le=!!I.bumpMap,Oe=!!I.normalMap,qe=!!I.displacementMap,Ye=!!I.emissiveMap,xt=!!I.metalnessMap,J=!!I.roughnessMap,U=I.anisotropy>0,pe=I.clearcoat>0,le=I.dispersion>0,de=I.iridescence>0,Re=I.sheen>0,Qe=I.transmission>0,ze=U&&!!I.anisotropyMap,Je=pe&&!!I.clearcoatMap,yt=pe&&!!I.clearcoatNormalMap,Fe=pe&&!!I.clearcoatRoughnessMap,it=de&&!!I.iridescenceMap,Rt=de&&!!I.iridescenceThicknessMap,pt=Re&&!!I.sheenColorMap,He=Re&&!!I.sheenRoughnessMap,re=!!I.specularMap,be=!!I.specularColorMap,We=!!I.specularIntensityMap,q=Qe&&!!I.transmissionMap,Ve=Qe&&!!I.thicknessMap,se=!!I.gradientMap,Pe=!!I.alphaMap,Ke=I.alphaTest>0,St=!!I.alphaHash,Pt=!!I.extensions;let Kt=So;I.toneMapped&&(Be===null||Be.isXRRenderTarget===!0)&&(Kt=n.toneMapping);const dn={shaderID:Y,shaderType:I.type,shaderName:I.name,vertexShader:Ue,fragmentShader:he,defines:I.defines,customVertexShaderID:Te,customFragmentShaderID:Me,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:m,batching:wt,batchingColor:wt&&$._colorsTexture!==null,instancing:at,instancingColor:at&&$.instanceColor!==null,instancingMorph:at&&$.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Be===null?n.outputColorSpace:Be.isXRRenderTarget===!0?Be.texture.colorSpace:As,alphaToCoverage:!!I.alphaToCoverage,map:mt,matcap:te,envMap:Ie,envMapMode:Ie&&fe.mapping,envMapCubeUVHeight:k,aoMap:Se,lightMap:Ne,bumpMap:Le,normalMap:Oe,displacementMap:p&&qe,emissiveMap:Ye,normalMapObjectSpace:Oe&&I.normalMapType===a3,normalMapTangentSpace:Oe&&I.normalMapType===Al,metalnessMap:xt,roughnessMap:J,anisotropy:U,anisotropyMap:ze,clearcoat:pe,clearcoatMap:Je,clearcoatNormalMap:yt,clearcoatRoughnessMap:Fe,dispersion:le,iridescence:de,iridescenceMap:it,iridescenceThicknessMap:Rt,sheen:Re,sheenColorMap:pt,sheenRoughnessMap:He,specularMap:re,specularColorMap:be,specularIntensityMap:We,transmission:Qe,transmissionMap:q,thicknessMap:Ve,gradientMap:se,opaque:I.transparent===!1&&I.blending===Sc&&I.alphaToCoverage===!1,alphaMap:Pe,alphaTest:Ke,alphaHash:St,combine:I.combine,mapUv:mt&&_(I.map.channel),aoMapUv:Se&&_(I.aoMap.channel),lightMapUv:Ne&&_(I.lightMap.channel),bumpMapUv:Le&&_(I.bumpMap.channel),normalMapUv:Oe&&_(I.normalMap.channel),displacementMapUv:qe&&_(I.displacementMap.channel),emissiveMapUv:Ye&&_(I.emissiveMap.channel),metalnessMapUv:xt&&_(I.metalnessMap.channel),roughnessMapUv:J&&_(I.roughnessMap.channel),anisotropyMapUv:ze&&_(I.anisotropyMap.channel),clearcoatMapUv:Je&&_(I.clearcoatMap.channel),clearcoatNormalMapUv:yt&&_(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&_(I.clearcoatRoughnessMap.channel),iridescenceMapUv:it&&_(I.iridescenceMap.channel),iridescenceThicknessMapUv:Rt&&_(I.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&_(I.sheenColorMap.channel),sheenRoughnessMapUv:He&&_(I.sheenRoughnessMap.channel),specularMapUv:re&&_(I.specularMap.channel),specularColorMapUv:be&&_(I.specularColorMap.channel),specularIntensityMapUv:We&&_(I.specularIntensityMap.channel),transmissionMapUv:q&&_(I.transmissionMap.channel),thicknessMapUv:Ve&&_(I.thicknessMap.channel),alphaMapUv:Pe&&_(I.alphaMap.channel),vertexTangents:!!ie.attributes.tangent&&(Oe||U),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!ie.attributes.uv&&(mt||Pe),fog:!!Q,useFog:I.fog===!0,fogExp2:!!Q&&Q.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:$.isSkinnedMesh===!0,morphTargets:ie.morphAttributes.position!==void 0,morphNormals:ie.morphAttributes.normal!==void 0,morphColors:ie.morphAttributes.color!==void 0,morphTargetsCount:ae,morphTextureStride:ye,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:Kt,decodeVideoTexture:mt&&I.map.isVideoTexture===!0&&fn.getTransfer(I.map.colorSpace)===xn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===ds,flipSided:I.side===di,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Pt&&I.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Pt&&I.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return dn.vertexUv1s=c.has(1),dn.vertexUv2s=c.has(2),dn.vertexUv3s=c.has(3),c.clear(),dn}function g(I){const C=[];if(I.shaderID?C.push(I.shaderID):(C.push(I.customVertexShaderID),C.push(I.customFragmentShaderID)),I.defines!==void 0)for(const O in I.defines)C.push(O),C.push(I.defines[O]);return I.isRawShaderMaterial===!1&&(w(C,I),S(C,I),C.push(n.outputColorSpace)),C.push(I.customProgramCacheKey),C.join()}function w(I,C){I.push(C.precision),I.push(C.outputColorSpace),I.push(C.envMapMode),I.push(C.envMapCubeUVHeight),I.push(C.mapUv),I.push(C.alphaMapUv),I.push(C.lightMapUv),I.push(C.aoMapUv),I.push(C.bumpMapUv),I.push(C.normalMapUv),I.push(C.displacementMapUv),I.push(C.emissiveMapUv),I.push(C.metalnessMapUv),I.push(C.roughnessMapUv),I.push(C.anisotropyMapUv),I.push(C.clearcoatMapUv),I.push(C.clearcoatNormalMapUv),I.push(C.clearcoatRoughnessMapUv),I.push(C.iridescenceMapUv),I.push(C.iridescenceThicknessMapUv),I.push(C.sheenColorMapUv),I.push(C.sheenRoughnessMapUv),I.push(C.specularMapUv),I.push(C.specularColorMapUv),I.push(C.specularIntensityMapUv),I.push(C.transmissionMapUv),I.push(C.thicknessMapUv),I.push(C.combine),I.push(C.fogExp2),I.push(C.sizeAttenuation),I.push(C.morphTargetsCount),I.push(C.morphAttributeCount),I.push(C.numDirLights),I.push(C.numPointLights),I.push(C.numSpotLights),I.push(C.numSpotLightMaps),I.push(C.numHemiLights),I.push(C.numRectAreaLights),I.push(C.numDirLightShadows),I.push(C.numPointLightShadows),I.push(C.numSpotLightShadows),I.push(C.numSpotLightShadowsWithMaps),I.push(C.numLightProbes),I.push(C.shadowMapType),I.push(C.toneMapping),I.push(C.numClippingPlanes),I.push(C.numClipIntersection),I.push(C.depthPacking)}function S(I,C){a.disableAll(),C.supportsVertexTextures&&a.enable(0),C.instancing&&a.enable(1),C.instancingColor&&a.enable(2),C.instancingMorph&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),C.dispersion&&a.enable(20),C.batchingColor&&a.enable(21),I.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.doubleSided&&a.enable(10),C.flipSided&&a.enable(11),C.useDepthPacking&&a.enable(12),C.dithering&&a.enable(13),C.transmission&&a.enable(14),C.sheen&&a.enable(15),C.opaque&&a.enable(16),C.pointsUvs&&a.enable(17),C.decodeVideoTexture&&a.enable(18),C.alphaToCoverage&&a.enable(19),I.push(a.mask)}function E(I){const C=v[I.type];let O;if(C){const V=Hs[C];O=w3.clone(V.uniforms)}else O=I.uniforms;return O}function P(I,C){let O;for(let V=0,$=u.length;V<$;V++){const Q=u[V];if(Q.cacheKey===C){O=Q,++O.usedTimes;break}}return O===void 0&&(O=new wj(n,C,I,s),u.push(O)),O}function b(I){if(--I.usedTimes===0){const C=u.indexOf(I);u[C]=u[u.length-1],u.pop(),I.destroy()}}function R(I){l.remove(I)}function L(){l.dispose()}return{getParameters:y,getProgramCacheKey:g,getUniforms:E,acquireProgram:P,releaseProgram:b,releaseShaderCache:R,programs:u,dispose:L}}function bj(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Cj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function fP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function hP(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,p,m,v,_,y){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:_,group:y},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=_,g.group=y),e++,g}function a(f,p,m,v,_,y){const g=o(f,p,m,v,_,y);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(f,p,m,v,_,y){const g=o(f,p,m,v,_,y);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||Cj),r.length>1&&r.sort(p||fP),i.length>1&&i.sort(p||fP)}function u(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Tj(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new hP,n.set(r,[o])):i>=s.length?(o=new hP,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Rj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new G,color:new Xe};break;case"SpotLight":t={position:new G,direction:new G,color:new Xe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new G,color:new Xe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new G,skyColor:new Xe,groundColor:new Xe};break;case"RectAreaLight":t={color:new Xe,position:new G,halfWidth:new G,halfHeight:new G};break}return n[e.id]=t,t}}}function Pj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Ij=0;function Bj(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Dj(n){const e=new Rj,t=Pj(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new G);const i=new G,s=new tt,o=new tt;function a(c){let u=0,f=0,p=0;for(let I=0;I<9;I++)r.probe[I].set(0,0,0);let m=0,v=0,_=0,y=0,g=0,w=0,S=0,E=0,P=0,b=0,R=0;c.sort(Bj);for(let I=0,C=c.length;I<C;I++){const O=c[I],V=O.color,$=O.intensity,Q=O.distance,ie=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)u+=V.r*$,f+=V.g*$,p+=V.b*$;else if(O.isLightProbe){for(let ee=0;ee<9;ee++)r.probe[ee].addScaledVector(O.sh.coefficients[ee],$);R++}else if(O.isDirectionalLight){const ee=e.get(O);if(ee.color.copy(O.color).multiplyScalar(O.intensity),O.castShadow){const fe=O.shadow,k=t.get(O);k.shadowBias=fe.bias,k.shadowNormalBias=fe.normalBias,k.shadowRadius=fe.radius,k.shadowMapSize=fe.mapSize,r.directionalShadow[m]=k,r.directionalShadowMap[m]=ie,r.directionalShadowMatrix[m]=O.shadow.matrix,w++}r.directional[m]=ee,m++}else if(O.isSpotLight){const ee=e.get(O);ee.position.setFromMatrixPosition(O.matrixWorld),ee.color.copy(V).multiplyScalar($),ee.distance=Q,ee.coneCos=Math.cos(O.angle),ee.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),ee.decay=O.decay,r.spot[_]=ee;const fe=O.shadow;if(O.map&&(r.spotLightMap[P]=O.map,P++,fe.updateMatrices(O),O.castShadow&&b++),r.spotLightMatrix[_]=fe.matrix,O.castShadow){const k=t.get(O);k.shadowBias=fe.bias,k.shadowNormalBias=fe.normalBias,k.shadowRadius=fe.radius,k.shadowMapSize=fe.mapSize,r.spotShadow[_]=k,r.spotShadowMap[_]=ie,E++}_++}else if(O.isRectAreaLight){const ee=e.get(O);ee.color.copy(V).multiplyScalar($),ee.halfWidth.set(O.width*.5,0,0),ee.halfHeight.set(0,O.height*.5,0),r.rectArea[y]=ee,y++}else if(O.isPointLight){const ee=e.get(O);if(ee.color.copy(O.color).multiplyScalar(O.intensity),ee.distance=O.distance,ee.decay=O.decay,O.castShadow){const fe=O.shadow,k=t.get(O);k.shadowBias=fe.bias,k.shadowNormalBias=fe.normalBias,k.shadowRadius=fe.radius,k.shadowMapSize=fe.mapSize,k.shadowCameraNear=fe.camera.near,k.shadowCameraFar=fe.camera.far,r.pointShadow[v]=k,r.pointShadowMap[v]=ie,r.pointShadowMatrix[v]=O.shadow.matrix,S++}r.point[v]=ee,v++}else if(O.isHemisphereLight){const ee=e.get(O);ee.skyColor.copy(O.color).multiplyScalar($),ee.groundColor.copy(O.groundColor).multiplyScalar($),r.hemi[g]=ee,g++}}y>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=et.LTC_FLOAT_1,r.rectAreaLTC2=et.LTC_FLOAT_2):(r.rectAreaLTC1=et.LTC_HALF_1,r.rectAreaLTC2=et.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=f,r.ambient[2]=p;const L=r.hash;(L.directionalLength!==m||L.pointLength!==v||L.spotLength!==_||L.rectAreaLength!==y||L.hemiLength!==g||L.numDirectionalShadows!==w||L.numPointShadows!==S||L.numSpotShadows!==E||L.numSpotMaps!==P||L.numLightProbes!==R)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=y,r.point.length=v,r.hemi.length=g,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=E+P-b,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=b,r.numLightProbes=R,L.directionalLength=m,L.pointLength=v,L.spotLength=_,L.rectAreaLength=y,L.hemiLength=g,L.numDirectionalShadows=w,L.numPointShadows=S,L.numSpotShadows=E,L.numSpotMaps=P,L.numLightProbes=R,r.version=Ij++)}function l(c,u){let f=0,p=0,m=0,v=0,_=0;const y=u.matrixWorldInverse;for(let g=0,w=c.length;g<w;g++){const S=c[g];if(S.isDirectionalLight){const E=r.directional[f];E.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(y),f++}else if(S.isSpotLight){const E=r.spot[m];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(y),m++}else if(S.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),o.identity(),s.copy(S.matrixWorld),s.premultiply(y),o.extractRotation(s),E.halfWidth.set(S.width*.5,0,0),E.halfHeight.set(0,S.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const E=r.point[p];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),p++}else if(S.isHemisphereLight){const E=r.hemi[_];E.direction.setFromMatrixPosition(S.matrixWorld),E.direction.transformDirection(y),_++}}}return{setup:a,setupView:l,state:r}}function dP(n){const e=new Dj(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Lj(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new dP(n),e.set(i,[a])):s>=o.length?(a=new dP(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}class hM extends cr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=s3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class dM extends cr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Oj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Nj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function kj(n,e,t){let r=new zp;const i=new Ce,s=new Ce,o=new rn,a=new hM({depthPacking:o3}),l=new dM,c={},u=t.maxTextureSize,f={[Mo]:di,[di]:Mo,[ds]:ds},p=new Bi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:Oj,fragmentShader:Nj}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new Tt;v.setAttribute("position",new tn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new bn(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=g0;let g=this.type;this.render=function(b,R,L){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||b.length===0)return;const I=n.getRenderTarget(),C=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),V=n.state;V.setBlending(wo),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const $=g!==ks&&this.type===ks,Q=g===ks&&this.type!==ks;for(let ie=0,ee=b.length;ie<ee;ie++){const fe=b[ie],k=fe.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",fe,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;i.copy(k.mapSize);const Y=k.getFrameExtents();if(i.multiply(Y),s.copy(k.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Y.x),i.x=s.x*Y.x,k.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Y.y),i.y=s.y*Y.y,k.mapSize.y=s.y)),k.map===null||$===!0||Q===!0){const ae=this.type!==ks?{minFilter:pr,magFilter:pr}:{};k.map!==null&&k.map.dispose(),k.map=new Yi(i.x,i.y,ae),k.map.texture.name=fe.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const Z=k.getViewportCount();for(let ae=0;ae<Z;ae++){const ye=k.getViewport(ae);o.set(s.x*ye.x,s.y*ye.y,s.x*ye.z,s.y*ye.w),V.viewport(o),k.updateMatrices(fe,ae),r=k.getFrustum(),E(R,L,k.camera,fe,this.type)}k.isPointLightShadow!==!0&&this.type===ks&&w(k,L),k.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(I,C,O)};function w(b,R){const L=e.update(_);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Yi(i.x,i.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(R,null,L,p,_,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(R,null,L,m,_,null)}function S(b,R,L,I){let C=null;const O=L.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(O!==void 0)C=O;else if(C=L.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const V=C.uuid,$=R.uuid;let Q=c[V];Q===void 0&&(Q={},c[V]=Q);let ie=Q[$];ie===void 0&&(ie=C.clone(),Q[$]=ie,R.addEventListener("dispose",P)),C=ie}if(C.visible=R.visible,C.wireframe=R.wireframe,I===ks?C.side=R.shadowSide!==null?R.shadowSide:R.side:C.side=R.shadowSide!==null?R.shadowSide:f[R.side],C.alphaMap=R.alphaMap,C.alphaTest=R.alphaTest,C.map=R.map,C.clipShadows=R.clipShadows,C.clippingPlanes=R.clippingPlanes,C.clipIntersection=R.clipIntersection,C.displacementMap=R.displacementMap,C.displacementScale=R.displacementScale,C.displacementBias=R.displacementBias,C.wireframeLinewidth=R.wireframeLinewidth,C.linewidth=R.linewidth,L.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const V=n.properties.get(C);V.light=L}return C}function E(b,R,L,I,C){if(b.visible===!1)return;if(b.layers.test(R.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&C===ks)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,b.matrixWorld);const $=e.update(b),Q=b.material;if(Array.isArray(Q)){const ie=$.groups;for(let ee=0,fe=ie.length;ee<fe;ee++){const k=ie[ee],Y=Q[k.materialIndex];if(Y&&Y.visible){const Z=S(b,Y,I,C);b.onBeforeShadow(n,b,R,L,$,Z,k),n.renderBufferDirect(L,null,$,Z,b,k),b.onAfterShadow(n,b,R,L,$,Z,k)}}}else if(Q.visible){const ie=S(b,Q,I,C);b.onBeforeShadow(n,b,R,L,$,ie,null),n.renderBufferDirect(L,null,$,ie,b,null),b.onAfterShadow(n,b,R,L,$,ie,null)}}const V=b.children;for(let $=0,Q=V.length;$<Q;$++)E(V[$],R,L,I,C)}function P(b){b.target.removeEventListener("dispose",P);for(const L in c){const I=c[L],C=b.target.uuid;C in I&&(I[C].dispose(),delete I[C])}}}function Fj(n){function e(){let q=!1;const Ve=new rn;let se=null;const Pe=new rn(0,0,0,0);return{setMask:function(Ke){se!==Ke&&!q&&(n.colorMask(Ke,Ke,Ke,Ke),se=Ke)},setLocked:function(Ke){q=Ke},setClear:function(Ke,St,Pt,Kt,dn){dn===!0&&(Ke*=Kt,St*=Kt,Pt*=Kt),Ve.set(Ke,St,Pt,Kt),Pe.equals(Ve)===!1&&(n.clearColor(Ke,St,Pt,Kt),Pe.copy(Ve))},reset:function(){q=!1,se=null,Pe.set(-1,0,0,0)}}}function t(){let q=!1,Ve=null,se=null,Pe=null;return{setTest:function(Ke){Ke?Me(n.DEPTH_TEST):Be(n.DEPTH_TEST)},setMask:function(Ke){Ve!==Ke&&!q&&(n.depthMask(Ke),Ve=Ke)},setFunc:function(Ke){if(se!==Ke){switch(Ke){case BO:n.depthFunc(n.NEVER);break;case DO:n.depthFunc(n.ALWAYS);break;case LO:n.depthFunc(n.LESS);break;case ip:n.depthFunc(n.LEQUAL);break;case OO:n.depthFunc(n.EQUAL);break;case NO:n.depthFunc(n.GEQUAL);break;case kO:n.depthFunc(n.GREATER);break;case FO:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}se=Ke}},setLocked:function(Ke){q=Ke},setClear:function(Ke){Pe!==Ke&&(n.clearDepth(Ke),Pe=Ke)},reset:function(){q=!1,Ve=null,se=null,Pe=null}}}function r(){let q=!1,Ve=null,se=null,Pe=null,Ke=null,St=null,Pt=null,Kt=null,dn=null;return{setTest:function(zt){q||(zt?Me(n.STENCIL_TEST):Be(n.STENCIL_TEST))},setMask:function(zt){Ve!==zt&&!q&&(n.stencilMask(zt),Ve=zt)},setFunc:function(zt,Xn,er){(se!==zt||Pe!==Xn||Ke!==er)&&(n.stencilFunc(zt,Xn,er),se=zt,Pe=Xn,Ke=er)},setOp:function(zt,Xn,er){(St!==zt||Pt!==Xn||Kt!==er)&&(n.stencilOp(zt,Xn,er),St=zt,Pt=Xn,Kt=er)},setLocked:function(zt){q=zt},setClear:function(zt){dn!==zt&&(n.clearStencil(zt),dn=zt)},reset:function(){q=!1,Ve=null,se=null,Pe=null,Ke=null,St=null,Pt=null,Kt=null,dn=null}}}const i=new e,s=new t,o=new r,a=new WeakMap,l=new WeakMap;let c={},u={},f=new WeakMap,p=[],m=null,v=!1,_=null,y=null,g=null,w=null,S=null,E=null,P=null,b=new Xe(0,0,0),R=0,L=!1,I=null,C=null,O=null,V=null,$=null;const Q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ie=!1,ee=0;const fe=n.getParameter(n.VERSION);fe.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(fe)[1]),ie=ee>=1):fe.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(fe)[1]),ie=ee>=2);let k=null,Y={};const Z=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),ye=new rn().fromArray(Z),Ue=new rn().fromArray(ae);function he(q,Ve,se,Pe){const Ke=new Uint8Array(4),St=n.createTexture();n.bindTexture(q,St),n.texParameteri(q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Pt=0;Pt<se;Pt++)q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY?n.texImage3D(Ve,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,Ke):n.texImage2D(Ve+Pt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ke);return St}const Te={};Te[n.TEXTURE_2D]=he(n.TEXTURE_2D,n.TEXTURE_2D,1),Te[n.TEXTURE_CUBE_MAP]=he(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Te[n.TEXTURE_2D_ARRAY]=he(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Te[n.TEXTURE_3D]=he(n.TEXTURE_3D,n.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Me(n.DEPTH_TEST),s.setFunc(ip),Le(!1),Oe(p1),Me(n.CULL_FACE),Se(wo);function Me(q){c[q]!==!0&&(n.enable(q),c[q]=!0)}function Be(q){c[q]!==!1&&(n.disable(q),c[q]=!1)}function at(q,Ve){return u[q]!==Ve?(n.bindFramebuffer(q,Ve),u[q]=Ve,q===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=Ve),q===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=Ve),!0):!1}function wt(q,Ve){let se=p,Pe=!1;if(q){se=f.get(Ve),se===void 0&&(se=[],f.set(Ve,se));const Ke=q.textures;if(se.length!==Ke.length||se[0]!==n.COLOR_ATTACHMENT0){for(let St=0,Pt=Ke.length;St<Pt;St++)se[St]=n.COLOR_ATTACHMENT0+St;se.length=Ke.length,Pe=!0}}else se[0]!==n.BACK&&(se[0]=n.BACK,Pe=!0);Pe&&n.drawBuffers(se)}function mt(q){return m!==q?(n.useProgram(q),m=q,!0):!1}const te={[ja]:n.FUNC_ADD,[mO]:n.FUNC_SUBTRACT,[gO]:n.FUNC_REVERSE_SUBTRACT};te[vO]=n.MIN,te[yO]=n.MAX;const Ie={[_O]:n.ZERO,[xO]:n.ONE,[wO]:n.SRC_COLOR,[Ry]:n.SRC_ALPHA,[CO]:n.SRC_ALPHA_SATURATE,[MO]:n.DST_COLOR,[AO]:n.DST_ALPHA,[SO]:n.ONE_MINUS_SRC_COLOR,[Py]:n.ONE_MINUS_SRC_ALPHA,[bO]:n.ONE_MINUS_DST_COLOR,[EO]:n.ONE_MINUS_DST_ALPHA,[TO]:n.CONSTANT_COLOR,[RO]:n.ONE_MINUS_CONSTANT_COLOR,[PO]:n.CONSTANT_ALPHA,[IO]:n.ONE_MINUS_CONSTANT_ALPHA};function Se(q,Ve,se,Pe,Ke,St,Pt,Kt,dn,zt){if(q===wo){v===!0&&(Be(n.BLEND),v=!1);return}if(v===!1&&(Me(n.BLEND),v=!0),q!==pO){if(q!==_||zt!==L){if((y!==ja||S!==ja)&&(n.blendEquation(n.FUNC_ADD),y=ja,S=ja),zt)switch(q){case Sc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case m1:n.blendFunc(n.ONE,n.ONE);break;case g1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case v1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Sc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case m1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case g1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case v1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}g=null,w=null,E=null,P=null,b.set(0,0,0),R=0,_=q,L=zt}return}Ke=Ke||Ve,St=St||se,Pt=Pt||Pe,(Ve!==y||Ke!==S)&&(n.blendEquationSeparate(te[Ve],te[Ke]),y=Ve,S=Ke),(se!==g||Pe!==w||St!==E||Pt!==P)&&(n.blendFuncSeparate(Ie[se],Ie[Pe],Ie[St],Ie[Pt]),g=se,w=Pe,E=St,P=Pt),(Kt.equals(b)===!1||dn!==R)&&(n.blendColor(Kt.r,Kt.g,Kt.b,dn),b.copy(Kt),R=dn),_=q,L=!1}function Ne(q,Ve){q.side===ds?Be(n.CULL_FACE):Me(n.CULL_FACE);let se=q.side===di;Ve&&(se=!se),Le(se),q.blending===Sc&&q.transparent===!1?Se(wo):Se(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.blendColor,q.blendAlpha,q.premultipliedAlpha),s.setFunc(q.depthFunc),s.setTest(q.depthTest),s.setMask(q.depthWrite),i.setMask(q.colorWrite);const Pe=q.stencilWrite;o.setTest(Pe),Pe&&(o.setMask(q.stencilWriteMask),o.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),o.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),Ye(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?Me(n.SAMPLE_ALPHA_TO_COVERAGE):Be(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(q){I!==q&&(q?n.frontFace(n.CW):n.frontFace(n.CCW),I=q)}function Oe(q){q!==fO?(Me(n.CULL_FACE),q!==C&&(q===p1?n.cullFace(n.BACK):q===hO?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Be(n.CULL_FACE),C=q}function qe(q){q!==O&&(ie&&n.lineWidth(q),O=q)}function Ye(q,Ve,se){q?(Me(n.POLYGON_OFFSET_FILL),(V!==Ve||$!==se)&&(n.polygonOffset(Ve,se),V=Ve,$=se)):Be(n.POLYGON_OFFSET_FILL)}function xt(q){q?Me(n.SCISSOR_TEST):Be(n.SCISSOR_TEST)}function J(q){q===void 0&&(q=n.TEXTURE0+Q-1),k!==q&&(n.activeTexture(q),k=q)}function U(q,Ve,se){se===void 0&&(k===null?se=n.TEXTURE0+Q-1:se=k);let Pe=Y[se];Pe===void 0&&(Pe={type:void 0,texture:void 0},Y[se]=Pe),(Pe.type!==q||Pe.texture!==Ve)&&(k!==se&&(n.activeTexture(se),k=se),n.bindTexture(q,Ve||Te[q]),Pe.type=q,Pe.texture=Ve)}function pe(){const q=Y[k];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function le(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function de(){try{n.compressedTexImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Re(){try{n.texSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Qe(){try{n.texSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ze(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function yt(){try{n.texStorage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Fe(){try{n.texStorage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function it(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Rt(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function pt(q){ye.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),ye.copy(q))}function He(q){Ue.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),Ue.copy(q))}function re(q,Ve){let se=l.get(Ve);se===void 0&&(se=new WeakMap,l.set(Ve,se));let Pe=se.get(q);Pe===void 0&&(Pe=n.getUniformBlockIndex(Ve,q.name),se.set(q,Pe))}function be(q,Ve){const Pe=l.get(Ve).get(q);a.get(Ve)!==Pe&&(n.uniformBlockBinding(Ve,Pe,q.__bindingPointIndex),a.set(Ve,Pe))}function We(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},k=null,Y={},u={},f=new WeakMap,p=[],m=null,v=!1,_=null,y=null,g=null,w=null,S=null,E=null,P=null,b=new Xe(0,0,0),R=0,L=!1,I=null,C=null,O=null,V=null,$=null,ye.set(0,0,n.canvas.width,n.canvas.height),Ue.set(0,0,n.canvas.width,n.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Me,disable:Be,bindFramebuffer:at,drawBuffers:wt,useProgram:mt,setBlending:Se,setMaterial:Ne,setFlipSided:Le,setCullFace:Oe,setLineWidth:qe,setPolygonOffset:Ye,setScissorTest:xt,activeTexture:J,bindTexture:U,unbindTexture:pe,compressedTexImage2D:le,compressedTexImage3D:de,texImage2D:it,texImage3D:Rt,updateUBOMapping:re,uniformBlockBinding:be,texStorage2D:yt,texStorage3D:Fe,texSubImage2D:Re,texSubImage3D:Qe,compressedTexSubImage2D:ze,compressedTexSubImage3D:Je,scissor:pt,viewport:He,reset:We}}function Uj(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ce,u=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(J,U){return m?new OffscreenCanvas(J,U):dp("canvas")}function _(J,U,pe){let le=1;const de=xt(J);if((de.width>pe||de.height>pe)&&(le=pe/Math.max(de.width,de.height)),le<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Re=Math.floor(le*de.width),Qe=Math.floor(le*de.height);f===void 0&&(f=v(Re,Qe));const ze=U?v(Re,Qe):f;return ze.width=Re,ze.height=Qe,ze.getContext("2d").drawImage(J,0,0,Re,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+Re+"x"+Qe+")."),ze}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),J;return J}function y(J){return J.generateMipmaps&&J.minFilter!==pr&&J.minFilter!==un}function g(J){n.generateMipmap(J)}function w(J,U,pe,le,de=!1){if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Re=U;if(U===n.RED&&(pe===n.FLOAT&&(Re=n.R32F),pe===n.HALF_FLOAT&&(Re=n.R16F),pe===n.UNSIGNED_BYTE&&(Re=n.R8)),U===n.RED_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Re=n.R8UI),pe===n.UNSIGNED_SHORT&&(Re=n.R16UI),pe===n.UNSIGNED_INT&&(Re=n.R32UI),pe===n.BYTE&&(Re=n.R8I),pe===n.SHORT&&(Re=n.R16I),pe===n.INT&&(Re=n.R32I)),U===n.RG&&(pe===n.FLOAT&&(Re=n.RG32F),pe===n.HALF_FLOAT&&(Re=n.RG16F),pe===n.UNSIGNED_BYTE&&(Re=n.RG8)),U===n.RG_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Re=n.RG8UI),pe===n.UNSIGNED_SHORT&&(Re=n.RG16UI),pe===n.UNSIGNED_INT&&(Re=n.RG32UI),pe===n.BYTE&&(Re=n.RG8I),pe===n.SHORT&&(Re=n.RG16I),pe===n.INT&&(Re=n.RG32I)),U===n.RGB&&pe===n.UNSIGNED_INT_5_9_9_9_REV&&(Re=n.RGB9_E5),U===n.RGBA){const Qe=de?lp:fn.getTransfer(le);pe===n.FLOAT&&(Re=n.RGBA32F),pe===n.HALF_FLOAT&&(Re=n.RGBA16F),pe===n.UNSIGNED_BYTE&&(Re=Qe===xn?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&&(Re=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&&(Re=n.RGB5_A1)}return(Re===n.R16F||Re===n.R32F||Re===n.RG16F||Re===n.RG32F||Re===n.RGBA16F||Re===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Re}function S(J,U){let pe;return J?U===null||U===ul||U===Nc?pe=n.DEPTH24_STENCIL8:U===Vn?pe=n.DEPTH32F_STENCIL8:U===op&&(pe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):U===null||U===ul||U===Nc?pe=n.DEPTH_COMPONENT24:U===Vn?pe=n.DEPTH_COMPONENT32F:U===op&&(pe=n.DEPTH_COMPONENT16),pe}function E(J,U){return y(J)===!0||J.isFramebufferTexture&&J.minFilter!==pr&&J.minFilter!==un?Math.log2(Math.max(U.width,U.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?U.mipmaps.length:1}function P(J){const U=J.target;U.removeEventListener("dispose",P),R(U),U.isVideoTexture&&u.delete(U)}function b(J){const U=J.target;U.removeEventListener("dispose",b),I(U)}function R(J){const U=r.get(J);if(U.__webglInit===void 0)return;const pe=J.source,le=p.get(pe);if(le){const de=le[U.__cacheKey];de.usedTimes--,de.usedTimes===0&&L(J),Object.keys(le).length===0&&p.delete(pe)}r.remove(J)}function L(J){const U=r.get(J);n.deleteTexture(U.__webglTexture);const pe=J.source,le=p.get(pe);delete le[U.__cacheKey],o.memory.textures--}function I(J){const U=r.get(J);if(J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let le=0;le<6;le++){if(Array.isArray(U.__webglFramebuffer[le]))for(let de=0;de<U.__webglFramebuffer[le].length;de++)n.deleteFramebuffer(U.__webglFramebuffer[le][de]);else n.deleteFramebuffer(U.__webglFramebuffer[le]);U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer[le])}else{if(Array.isArray(U.__webglFramebuffer))for(let le=0;le<U.__webglFramebuffer.length;le++)n.deleteFramebuffer(U.__webglFramebuffer[le]);else n.deleteFramebuffer(U.__webglFramebuffer);if(U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer),U.__webglMultisampledFramebuffer&&n.deleteFramebuffer(U.__webglMultisampledFramebuffer),U.__webglColorRenderbuffer)for(let le=0;le<U.__webglColorRenderbuffer.length;le++)U.__webglColorRenderbuffer[le]&&n.deleteRenderbuffer(U.__webglColorRenderbuffer[le]);U.__webglDepthRenderbuffer&&n.deleteRenderbuffer(U.__webglDepthRenderbuffer)}const pe=J.textures;for(let le=0,de=pe.length;le<de;le++){const Re=r.get(pe[le]);Re.__webglTexture&&(n.deleteTexture(Re.__webglTexture),o.memory.textures--),r.remove(pe[le])}r.remove(J)}let C=0;function O(){C=0}function V(){const J=C;return J>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+i.maxTextures),C+=1,J}function $(J){const U=[];return U.push(J.wrapS),U.push(J.wrapT),U.push(J.wrapR||0),U.push(J.magFilter),U.push(J.minFilter),U.push(J.anisotropy),U.push(J.internalFormat),U.push(J.format),U.push(J.type),U.push(J.generateMipmaps),U.push(J.premultiplyAlpha),U.push(J.flipY),U.push(J.unpackAlignment),U.push(J.colorSpace),U.join()}function Q(J,U){const pe=r.get(J);if(J.isVideoTexture&&qe(J),J.isRenderTargetTexture===!1&&J.version>0&&pe.__version!==J.version){const le=J.image;if(le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ue(pe,J,U);return}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+U)}function ie(J,U){const pe=r.get(J);if(J.version>0&&pe.__version!==J.version){Ue(pe,J,U);return}t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+U)}function ee(J,U){const pe=r.get(J);if(J.version>0&&pe.__version!==J.version){Ue(pe,J,U);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+U)}function fe(J,U){const pe=r.get(J);if(J.version>0&&pe.__version!==J.version){he(pe,J,U);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+U)}const k={[Co]:n.REPEAT,[On]:n.CLAMP_TO_EDGE,[If]:n.MIRRORED_REPEAT},Y={[pr]:n.NEAREST,[v0]:n.NEAREST_MIPMAP_NEAREST,[fc]:n.NEAREST_MIPMAP_LINEAR,[un]:n.LINEAR,[yf]:n.LINEAR_MIPMAP_NEAREST,[gs]:n.LINEAR_MIPMAP_LINEAR},Z={[l3]:n.NEVER,[p3]:n.ALWAYS,[c3]:n.LESS,[iM]:n.LEQUAL,[u3]:n.EQUAL,[d3]:n.GEQUAL,[f3]:n.GREATER,[h3]:n.NOTEQUAL};function ae(J,U){if(U.type===Vn&&e.has("OES_texture_float_linear")===!1&&(U.magFilter===un||U.magFilter===yf||U.magFilter===fc||U.magFilter===gs||U.minFilter===un||U.minFilter===yf||U.minFilter===fc||U.minFilter===gs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,k[U.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,k[U.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,k[U.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,Y[U.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,Y[U.minFilter]),U.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,Z[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(U.magFilter===pr||U.minFilter!==fc&&U.minFilter!==gs||U.type===Vn&&e.has("OES_texture_float_linear")===!1)return;if(U.anisotropy>1||r.get(U).__currentAnisotropy){const pe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,i.getMaxAnisotropy())),r.get(U).__currentAnisotropy=U.anisotropy}}}function ye(J,U){let pe=!1;J.__webglInit===void 0&&(J.__webglInit=!0,U.addEventListener("dispose",P));const le=U.source;let de=p.get(le);de===void 0&&(de={},p.set(le,de));const Re=$(U);if(Re!==J.__cacheKey){de[Re]===void 0&&(de[Re]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),de[Re].usedTimes++;const Qe=de[J.__cacheKey];Qe!==void 0&&(de[J.__cacheKey].usedTimes--,Qe.usedTimes===0&&L(U)),J.__cacheKey=Re,J.__webglTexture=de[Re].texture}return pe}function Ue(J,U,pe){let le=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(le=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(le=n.TEXTURE_3D);const de=ye(J,U),Re=U.source;t.bindTexture(le,J.__webglTexture,n.TEXTURE0+pe);const Qe=r.get(Re);if(Re.version!==Qe.__version||de===!0){t.activeTexture(n.TEXTURE0+pe);const ze=fn.getPrimaries(fn.workingColorSpace),Je=U.colorSpace===Zo?null:fn.getPrimaries(U.colorSpace),yt=U.colorSpace===Zo||ze===Je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);let Fe=_(U.image,!1,i.maxTextureSize);Fe=Ye(U,Fe);const it=s.convert(U.format,U.colorSpace),Rt=s.convert(U.type);let pt=w(U.internalFormat,it,Rt,U.colorSpace,U.isVideoTexture);ae(le,U);let He;const re=U.mipmaps,be=U.isVideoTexture!==!0,We=Qe.__version===void 0||de===!0,q=Re.dataReady,Ve=E(U,Fe);if(U.isDepthTexture)pt=S(U.format===kc,U.type),We&&(be?t.texStorage2D(n.TEXTURE_2D,1,pt,Fe.width,Fe.height):t.texImage2D(n.TEXTURE_2D,0,pt,Fe.width,Fe.height,0,it,Rt,null));else if(U.isDataTexture)if(re.length>0){be&&We&&t.texStorage2D(n.TEXTURE_2D,Ve,pt,re[0].width,re[0].height);for(let se=0,Pe=re.length;se<Pe;se++)He=re[se],be?q&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,He.width,He.height,it,Rt,He.data):t.texImage2D(n.TEXTURE_2D,se,pt,He.width,He.height,0,it,Rt,He.data);U.generateMipmaps=!1}else be?(We&&t.texStorage2D(n.TEXTURE_2D,Ve,pt,Fe.width,Fe.height),q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,it,Rt,Fe.data)):t.texImage2D(n.TEXTURE_2D,0,pt,Fe.width,Fe.height,0,it,Rt,Fe.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){be&&We&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,pt,re[0].width,re[0].height,Fe.depth);for(let se=0,Pe=re.length;se<Pe;se++)if(He=re[se],U.format!==or)if(it!==null)if(be){if(q)if(U.layerUpdates.size>0){for(const Ke of U.layerUpdates){const St=He.width*He.height;t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,Ke,He.width,He.height,1,it,He.data.slice(St*Ke,St*(Ke+1)),0,0)}U.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,He.width,He.height,Fe.depth,it,He.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,se,pt,He.width,He.height,Fe.depth,0,He.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else be?q&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,He.width,He.height,Fe.depth,it,Rt,He.data):t.texImage3D(n.TEXTURE_2D_ARRAY,se,pt,He.width,He.height,Fe.depth,0,it,Rt,He.data)}else{be&&We&&t.texStorage2D(n.TEXTURE_2D,Ve,pt,re[0].width,re[0].height);for(let se=0,Pe=re.length;se<Pe;se++)He=re[se],U.format!==or?it!==null?be?q&&t.compressedTexSubImage2D(n.TEXTURE_2D,se,0,0,He.width,He.height,it,He.data):t.compressedTexImage2D(n.TEXTURE_2D,se,pt,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):be?q&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,He.width,He.height,it,Rt,He.data):t.texImage2D(n.TEXTURE_2D,se,pt,He.width,He.height,0,it,Rt,He.data)}else if(U.isDataArrayTexture)if(be){if(We&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,pt,Fe.width,Fe.height,Fe.depth),q)if(U.layerUpdates.size>0){let se;switch(Rt){case n.UNSIGNED_BYTE:switch(it){case n.ALPHA:se=1;break;case n.LUMINANCE:se=1;break;case n.LUMINANCE_ALPHA:se=2;break;case n.RGB:se=3;break;case n.RGBA:se=4;break;default:throw new Error(`Unknown texel size for format ${it}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:se=1;break;default:throw new Error(`Unknown texel size for type ${Rt}.`)}const Pe=Fe.width*Fe.height*se;for(const Ke of U.layerUpdates)t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ke,Fe.width,Fe.height,1,it,Rt,Fe.data.slice(Pe*Ke,Pe*(Ke+1)));U.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,it,Rt,Fe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,pt,Fe.width,Fe.height,Fe.depth,0,it,Rt,Fe.data);else if(U.isData3DTexture)be?(We&&t.texStorage3D(n.TEXTURE_3D,Ve,pt,Fe.width,Fe.height,Fe.depth),q&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,it,Rt,Fe.data)):t.texImage3D(n.TEXTURE_3D,0,pt,Fe.width,Fe.height,Fe.depth,0,it,Rt,Fe.data);else if(U.isFramebufferTexture){if(We)if(be)t.texStorage2D(n.TEXTURE_2D,Ve,pt,Fe.width,Fe.height);else{let se=Fe.width,Pe=Fe.height;for(let Ke=0;Ke<Ve;Ke++)t.texImage2D(n.TEXTURE_2D,Ke,pt,se,Pe,0,it,Rt,null),se>>=1,Pe>>=1}}else if(re.length>0){if(be&&We){const se=xt(re[0]);t.texStorage2D(n.TEXTURE_2D,Ve,pt,se.width,se.height)}for(let se=0,Pe=re.length;se<Pe;se++)He=re[se],be?q&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,it,Rt,He):t.texImage2D(n.TEXTURE_2D,se,pt,it,Rt,He);U.generateMipmaps=!1}else if(be){if(We){const se=xt(Fe);t.texStorage2D(n.TEXTURE_2D,Ve,pt,se.width,se.height)}q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,it,Rt,Fe)}else t.texImage2D(n.TEXTURE_2D,0,pt,it,Rt,Fe);y(U)&&g(le),Qe.__version=Re.version,U.onUpdate&&U.onUpdate(U)}J.__version=U.version}function he(J,U,pe){if(U.image.length!==6)return;const le=ye(J,U),de=U.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+pe);const Re=r.get(de);if(de.version!==Re.__version||le===!0){t.activeTexture(n.TEXTURE0+pe);const Qe=fn.getPrimaries(fn.workingColorSpace),ze=U.colorSpace===Zo?null:fn.getPrimaries(U.colorSpace),Je=U.colorSpace===Zo||Qe===ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const yt=U.isCompressedTexture||U.image[0].isCompressedTexture,Fe=U.image[0]&&U.image[0].isDataTexture,it=[];for(let Pe=0;Pe<6;Pe++)!yt&&!Fe?it[Pe]=_(U.image[Pe],!0,i.maxCubemapSize):it[Pe]=Fe?U.image[Pe].image:U.image[Pe],it[Pe]=Ye(U,it[Pe]);const Rt=it[0],pt=s.convert(U.format,U.colorSpace),He=s.convert(U.type),re=w(U.internalFormat,pt,He,U.colorSpace),be=U.isVideoTexture!==!0,We=Re.__version===void 0||le===!0,q=de.dataReady;let Ve=E(U,Rt);ae(n.TEXTURE_CUBE_MAP,U);let se;if(yt){be&&We&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ve,re,Rt.width,Rt.height);for(let Pe=0;Pe<6;Pe++){se=it[Pe].mipmaps;for(let Ke=0;Ke<se.length;Ke++){const St=se[Ke];U.format!==or?pt!==null?be?q&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke,0,0,St.width,St.height,pt,St.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke,re,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):be?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke,0,0,St.width,St.height,pt,He,St.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke,re,St.width,St.height,0,pt,He,St.data)}}}else{if(se=U.mipmaps,be&&We){se.length>0&&Ve++;const Pe=xt(it[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ve,re,Pe.width,Pe.height)}for(let Pe=0;Pe<6;Pe++)if(Fe){be?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,it[Pe].width,it[Pe].height,pt,He,it[Pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,re,it[Pe].width,it[Pe].height,0,pt,He,it[Pe].data);for(let Ke=0;Ke<se.length;Ke++){const Pt=se[Ke].image[Pe].image;be?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke+1,0,0,Pt.width,Pt.height,pt,He,Pt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke+1,re,Pt.width,Pt.height,0,pt,He,Pt.data)}}else{be?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,pt,He,it[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,re,pt,He,it[Pe]);for(let Ke=0;Ke<se.length;Ke++){const St=se[Ke];be?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke+1,0,0,pt,He,St.image[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ke+1,re,pt,He,St.image[Pe])}}}y(U)&&g(n.TEXTURE_CUBE_MAP),Re.__version=de.version,U.onUpdate&&U.onUpdate(U)}J.__version=U.version}function Te(J,U,pe,le,de,Re){const Qe=s.convert(pe.format,pe.colorSpace),ze=s.convert(pe.type),Je=w(pe.internalFormat,Qe,ze,pe.colorSpace);if(!r.get(U).__hasExternalTextures){const Fe=Math.max(1,U.width>>Re),it=Math.max(1,U.height>>Re);de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?t.texImage3D(de,Re,Je,Fe,it,U.depth,0,Qe,ze,null):t.texImage2D(de,Re,Je,Fe,it,0,Qe,ze,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),Oe(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,le,de,r.get(pe).__webglTexture,0,Le(U)):(de===n.TEXTURE_2D||de>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&de<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,le,de,r.get(pe).__webglTexture,Re),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Me(J,U,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,J),U.depthBuffer){const le=U.depthTexture,de=le&&le.isDepthTexture?le.type:null,Re=S(U.stencilBuffer,de),Qe=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ze=Le(U);Oe(U)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ze,Re,U.width,U.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,ze,Re,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,Re,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Qe,n.RENDERBUFFER,J)}else{const le=U.textures;for(let de=0;de<le.length;de++){const Re=le[de],Qe=s.convert(Re.format,Re.colorSpace),ze=s.convert(Re.type),Je=w(Re.internalFormat,Qe,ze,Re.colorSpace),yt=Le(U);pe&&Oe(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,Je,U.width,U.height):Oe(U)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,yt,Je,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,Je,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Be(J,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),Q(U.depthTexture,0);const le=r.get(U.depthTexture).__webglTexture,de=Le(U);if(U.depthTexture.format===Ac)Oe(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,le,0,de):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,le,0);else if(U.depthTexture.format===kc)Oe(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,le,0,de):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,le,0);else throw new Error("Unknown depthTexture format")}function at(J){const U=r.get(J),pe=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!U.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture not supported in Cube render targets");Be(U.__webglFramebuffer,J)}else if(pe){U.__webglDepthbuffer=[];for(let le=0;le<6;le++)t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[le]),U.__webglDepthbuffer[le]=n.createRenderbuffer(),Me(U.__webglDepthbuffer[le],J,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer=n.createRenderbuffer(),Me(U.__webglDepthbuffer,J,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function wt(J,U,pe){const le=r.get(J);U!==void 0&&Te(le.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&&at(J)}function mt(J){const U=J.texture,pe=r.get(J),le=r.get(U);J.addEventListener("dispose",b);const de=J.textures,Re=J.isWebGLCubeRenderTarget===!0,Qe=de.length>1;if(Qe||(le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture()),le.__version=U.version,o.memory.textures++),Re){pe.__webglFramebuffer=[];for(let ze=0;ze<6;ze++)if(U.mipmaps&&U.mipmaps.length>0){pe.__webglFramebuffer[ze]=[];for(let Je=0;Je<U.mipmaps.length;Je++)pe.__webglFramebuffer[ze][Je]=n.createFramebuffer()}else pe.__webglFramebuffer[ze]=n.createFramebuffer()}else{if(U.mipmaps&&U.mipmaps.length>0){pe.__webglFramebuffer=[];for(let ze=0;ze<U.mipmaps.length;ze++)pe.__webglFramebuffer[ze]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(Qe)for(let ze=0,Je=de.length;ze<Je;ze++){const yt=r.get(de[ze]);yt.__webglTexture===void 0&&(yt.__webglTexture=n.createTexture(),o.memory.textures++)}if(J.samples>0&&Oe(J)===!1){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let ze=0;ze<de.length;ze++){const Je=de[ze];pe.__webglColorRenderbuffer[ze]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[ze]);const yt=s.convert(Je.format,Je.colorSpace),Fe=s.convert(Je.type),it=w(Je.internalFormat,yt,Fe,Je.colorSpace,J.isXRRenderTarget===!0),Rt=Le(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,Rt,it,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,pe.__webglColorRenderbuffer[ze])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),Me(pe.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Re){t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture),ae(n.TEXTURE_CUBE_MAP,U);for(let ze=0;ze<6;ze++)if(U.mipmaps&&U.mipmaps.length>0)for(let Je=0;Je<U.mipmaps.length;Je++)Te(pe.__webglFramebuffer[ze][Je],J,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,Je);else Te(pe.__webglFramebuffer[ze],J,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0);y(U)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Qe){for(let ze=0,Je=de.length;ze<Je;ze++){const yt=de[ze],Fe=r.get(yt);t.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),ae(n.TEXTURE_2D,yt),Te(pe.__webglFramebuffer,J,yt,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,0),y(yt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let ze=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(ze=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ze,le.__webglTexture),ae(ze,U),U.mipmaps&&U.mipmaps.length>0)for(let Je=0;Je<U.mipmaps.length;Je++)Te(pe.__webglFramebuffer[Je],J,U,n.COLOR_ATTACHMENT0,ze,Je);else Te(pe.__webglFramebuffer,J,U,n.COLOR_ATTACHMENT0,ze,0);y(U)&&g(ze),t.unbindTexture()}J.depthBuffer&&at(J)}function te(J){const U=J.textures;for(let pe=0,le=U.length;pe<le;pe++){const de=U[pe];if(y(de)){const Re=J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Qe=r.get(de).__webglTexture;t.bindTexture(Re,Qe),g(Re),t.unbindTexture()}}}const Ie=[],Se=[];function Ne(J){if(J.samples>0){if(Oe(J)===!1){const U=J.textures,pe=J.width,le=J.height;let de=n.COLOR_BUFFER_BIT;const Re=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Qe=r.get(J),ze=U.length>1;if(ze)for(let Je=0;Je<U.length;Je++)t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer);for(let Je=0;Je<U.length;Je++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(de|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(de|=n.STENCIL_BUFFER_BIT)),ze){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[Je]);const yt=r.get(U[Je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,yt,0)}n.blitFramebuffer(0,0,pe,le,0,0,pe,le,de,n.NEAREST),l===!0&&(Ie.length=0,Se.length=0,Ie.push(n.COLOR_ATTACHMENT0+Je),J.depthBuffer&&J.resolveDepthBuffer===!1&&(Ie.push(Re),Se.push(Re),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Se)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ie))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ze)for(let Je=0;Je<U.length;Je++){t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[Je]);const yt=r.get(U[Je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&l){const U=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[U])}}}function Le(J){return Math.min(i.maxSamples,J.samples)}function Oe(J){const U=r.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function qe(J){const U=o.render.frame;u.get(J)!==U&&(u.set(J,U),J.update())}function Ye(J,U){const pe=J.colorSpace,le=J.format,de=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||pe!==As&&pe!==Zo&&(fn.getTransfer(pe)===xn?(le!==or||de!==Ki)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",pe)),U}function xt(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(c.width=J.naturalWidth||J.width,c.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(c.width=J.displayWidth,c.height=J.displayHeight):(c.width=J.width,c.height=J.height),c}this.allocateTextureUnit=V,this.resetTextureUnits=O,this.setTexture2D=Q,this.setTexture2DArray=ie,this.setTexture3D=ee,this.setTextureCube=fe,this.rebindTextures=wt,this.setupRenderTarget=mt,this.updateRenderTargetMipmap=te,this.updateMultisampleRenderTarget=Ne,this.setupDepthRenderbuffer=at,this.setupFrameBufferTexture=Te,this.useMultisampledRTT=Oe}function R3(n,e){function t(r,i=Zo){let s;const o=fn.getTransfer(i);if(r===Ki)return n.UNSIGNED_BYTE;if(r===qE)return n.UNSIGNED_SHORT_4_4_4_4;if(r===QE)return n.UNSIGNED_SHORT_5_5_5_1;if(r===JO)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===KE)return n.BYTE;if(r===YE)return n.SHORT;if(r===op)return n.UNSIGNED_SHORT;if(r===y0)return n.INT;if(r===ul)return n.UNSIGNED_INT;if(r===Vn)return n.FLOAT;if(r===Ir)return n.HALF_FLOAT;if(r===KO)return n.ALPHA;if(r===YO)return n.RGB;if(r===or)return n.RGBA;if(r===qO)return n.LUMINANCE;if(r===QO)return n.LUMINANCE_ALPHA;if(r===Ac)return n.DEPTH_COMPONENT;if(r===kc)return n.DEPTH_STENCIL;if(r===_0)return n.RED;if(r===ZE)return n.RED_INTEGER;if(r===ZO)return n.RG;if(r===eM)return n.RG_INTEGER;if(r===tM)return n.RGBA_INTEGER;if(r===Uv||r===zv||r===Hv||r===Gv)if(o===xn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Uv)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===zv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Hv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Gv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Uv)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===zv)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Hv)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Gv)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===x1||r===w1||r===S1||r===A1)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===x1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===w1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===S1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===A1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===E1||r===M1||r===b1)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===E1||r===M1)return o===xn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===b1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===C1||r===T1||r===R1||r===P1||r===I1||r===B1||r===D1||r===L1||r===O1||r===N1||r===k1||r===F1||r===U1||r===z1)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===C1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===T1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===R1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===P1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===I1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===B1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===D1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===L1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===O1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===N1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===k1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===F1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===U1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===z1)return o===xn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Vv||r===H1||r===G1)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Vv)return o===xn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===H1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===G1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===e3||r===V1||r===W1||r===j1)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Vv)return s.COMPRESSED_RED_RGTC1_EXT;if(r===V1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===W1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===j1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Nc?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class P3 extends Rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Gs extends Vt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const zj={type:"move"};class pw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Gs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Gs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new G,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new G),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Gs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new G,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new G),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const y=t.getJointPose(_,r),g=this._getHandJoint(c,_);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=u.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(zj)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Gs;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const Hj=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Gj=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Vj{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Yt,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Bi({vertexShader:Hj,fragmentShader:Gj,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new bn(new El(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class Wj extends Do{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,p=null,m=null,v=null;const _=new Vj,y=t.getContextAttributes();let g=null,w=null;const S=[],E=[],P=new Ce;let b=null;const R=new Rn;R.layers.enable(1),R.viewport=new rn;const L=new Rn;L.layers.enable(2),L.viewport=new rn;const I=[R,L],C=new P3;C.layers.enable(1),C.layers.enable(2);let O=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let Te=S[he];return Te===void 0&&(Te=new pw,S[he]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(he){let Te=S[he];return Te===void 0&&(Te=new pw,S[he]=Te),Te.getGripSpace()},this.getHand=function(he){let Te=S[he];return Te===void 0&&(Te=new pw,S[he]=Te),Te.getHandSpace()};function $(he){const Te=E.indexOf(he.inputSource);if(Te===-1)return;const Me=S[Te];Me!==void 0&&(Me.update(he.inputSource,he.frame,c||o),Me.dispatchEvent({type:he.type,data:he.inputSource}))}function Q(){i.removeEventListener("select",$),i.removeEventListener("selectstart",$),i.removeEventListener("selectend",$),i.removeEventListener("squeeze",$),i.removeEventListener("squeezestart",$),i.removeEventListener("squeezeend",$),i.removeEventListener("end",Q),i.removeEventListener("inputsourceschange",ie);for(let he=0;he<S.length;he++){const Te=E[he];Te!==null&&(E[he]=null,S[he].disconnect(Te))}O=null,V=null,_.reset(),e.setRenderTarget(g),m=null,p=null,f=null,i=null,w=null,Ue.stop(),r.isPresenting=!1,e.setPixelRatio(b),e.setSize(P.width,P.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){a=he,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(he){c=he},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(he){if(i=he,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",$),i.addEventListener("selectstart",$),i.addEventListener("selectend",$),i.addEventListener("squeeze",$),i.addEventListener("squeezestart",$),i.addEventListener("squeezeend",$),i.addEventListener("end",Q),i.addEventListener("inputsourceschange",ie),y.xrCompatible!==!0&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(P),i.renderState.layers===void 0){const Te={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,Te),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),w=new Yi(m.framebufferWidth,m.framebufferHeight,{format:or,type:Ki,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let Te=null,Me=null,Be=null;y.depth&&(Be=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Te=y.stencil?kc:Ac,Me=y.stencil?Nc:ul);const at={colorFormat:t.RGBA8,depthFormat:Be,scaleFactor:s};f=new XRWebGLBinding(i,t),p=f.createProjectionLayer(at),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),w=new Yi(p.textureWidth,p.textureHeight,{format:or,type:Ki,depthTexture:new fM(p.textureWidth,p.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,Te),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Ue.setContext(i),Ue.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function ie(he){for(let Te=0;Te<he.removed.length;Te++){const Me=he.removed[Te],Be=E.indexOf(Me);Be>=0&&(E[Be]=null,S[Be].disconnect(Me))}for(let Te=0;Te<he.added.length;Te++){const Me=he.added[Te];let Be=E.indexOf(Me);if(Be===-1){for(let wt=0;wt<S.length;wt++)if(wt>=E.length){E.push(Me),Be=wt;break}else if(E[wt]===null){E[wt]=Me,Be=wt;break}if(Be===-1)break}const at=S[Be];at&&at.connect(Me)}}const ee=new G,fe=new G;function k(he,Te,Me){ee.setFromMatrixPosition(Te.matrixWorld),fe.setFromMatrixPosition(Me.matrixWorld);const Be=ee.distanceTo(fe),at=Te.projectionMatrix.elements,wt=Me.projectionMatrix.elements,mt=at[14]/(at[10]-1),te=at[14]/(at[10]+1),Ie=(at[9]+1)/at[5],Se=(at[9]-1)/at[5],Ne=(at[8]-1)/at[0],Le=(wt[8]+1)/wt[0],Oe=mt*Ne,qe=mt*Le,Ye=Be/(-Ne+Le),xt=Ye*-Ne;Te.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(xt),he.translateZ(Ye),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert();const J=mt+Ye,U=te+Ye,pe=Oe-xt,le=qe+(Be-xt),de=Ie*te/U*J,Re=Se*te/U*J;he.projectionMatrix.makePerspective(pe,le,de,Re,J,U),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}function Y(he,Te){Te===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(Te.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(i===null)return;_.texture!==null&&(he.near=_.depthNear,he.far=_.depthFar),C.near=L.near=R.near=he.near,C.far=L.far=R.far=he.far,(O!==C.near||V!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),O=C.near,V=C.far,R.near=O,R.far=V,L.near=O,L.far=V,R.updateProjectionMatrix(),L.updateProjectionMatrix(),he.updateProjectionMatrix());const Te=he.parent,Me=C.cameras;Y(C,Te);for(let Be=0;Be<Me.length;Be++)Y(Me[Be],Te);Me.length===2?k(C,R,L):C.projectionMatrix.copy(R.projectionMatrix),Z(he,C,Te)};function Z(he,Te,Me){Me===null?he.matrix.copy(Te.matrixWorld):(he.matrix.copy(Me.matrixWorld),he.matrix.invert(),he.matrix.multiply(Te.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(Te.projectionMatrix),he.projectionMatrixInverse.copy(Te.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=Lf*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(he){l=he,p!==null&&(p.fixedFoveation=he),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=he)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(C)};let ae=null;function ye(he,Te){if(u=Te.getViewerPose(c||o),v=Te,u!==null){const Me=u.views;m!==null&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));let Be=!1;Me.length!==C.cameras.length&&(C.cameras.length=0,Be=!0);for(let wt=0;wt<Me.length;wt++){const mt=Me[wt];let te=null;if(m!==null)te=m.getViewport(mt);else{const Se=f.getViewSubImage(p,mt);te=Se.viewport,wt===0&&(e.setRenderTargetTextures(w,Se.colorTexture,p.ignoreDepthValues?void 0:Se.depthStencilTexture),e.setRenderTarget(w))}let Ie=I[wt];Ie===void 0&&(Ie=new Rn,Ie.layers.enable(wt),Ie.viewport=new rn,I[wt]=Ie),Ie.matrix.fromArray(mt.transform.matrix),Ie.matrix.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.projectionMatrix.fromArray(mt.projectionMatrix),Ie.projectionMatrixInverse.copy(Ie.projectionMatrix).invert(),Ie.viewport.set(te.x,te.y,te.width,te.height),wt===0&&(C.matrix.copy(Ie.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Be===!0&&C.cameras.push(Ie)}const at=i.enabledFeatures;if(at&&at.includes("depth-sensing")){const wt=f.getDepthInformation(Me[0]);wt&&wt.isValid&&wt.texture&&_.init(e,wt,i.renderState)}}for(let Me=0;Me<S.length;Me++){const Be=E[Me],at=S[Me];Be!==null&&at!==void 0&&at.update(Be,Te,c||o)}ae&&ae(he,Te),Te.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Te}),v=null}const Ue=new A3;Ue.setAnimationLoop(ye),this.setAnimationLoop=function(he){ae=he},this.dispose=function(){}}}const Wl=new Ar,jj=new tt;function $j(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function r(y,g){g.color.getRGB(y.fogColor.value,x3(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function i(y,g,w,S,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(y,g):g.isMeshToonMaterial?(s(y,g),f(y,g)):g.isMeshPhongMaterial?(s(y,g),u(y,g)):g.isMeshStandardMaterial?(s(y,g),p(y,g),g.isMeshPhysicalMaterial&&m(y,g,E)):g.isMeshMatcapMaterial?(s(y,g),v(y,g)):g.isMeshDepthMaterial?s(y,g):g.isMeshDistanceMaterial?(s(y,g),_(y,g)):g.isMeshNormalMaterial?s(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,w,S):g.isSpriteMaterial?c(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===di&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===di&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const w=e.get(g),S=w.envMap,E=w.envMapRotation;S&&(y.envMap.value=S,Wl.copy(E),Wl.x*=-1,Wl.y*=-1,Wl.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Wl.y*=-1,Wl.z*=-1),y.envMapRotation.value.setFromMatrix4(jj.makeRotationFromEuler(Wl)),y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap&&(y.lightMap.value=g.lightMap,y.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,y.lightMapTransform)),g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,w,S){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*w,y.scale.value=S*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function u(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function f(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function p(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),g.envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function m(y,g,w){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===di&&y.clearcoatNormalScale.value.negate())),g.dispersion>0&&(y.dispersion.value=g.dispersion),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,g){g.matcap&&(y.matcap.value=g.matcap)}function _(y,g){const w=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Xj(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(w,S){const E=S.program;r.uniformBlockBinding(w,E)}function c(w,S){let E=i[w.id];E===void 0&&(v(w),E=u(w),i[w.id]=E,w.addEventListener("dispose",y));const P=S.program;r.updateUBOMapping(w,P);const b=e.render.frame;s[w.id]!==b&&(p(w),s[w.id]=b)}function u(w){const S=f();w.__bindingPointIndex=S;const E=n.createBuffer(),P=w.__size,b=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,P,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,E),E}function f(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const S=i[w.id],E=w.uniforms,P=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let b=0,R=E.length;b<R;b++){const L=Array.isArray(E[b])?E[b]:[E[b]];for(let I=0,C=L.length;I<C;I++){const O=L[I];if(m(O,b,I,P)===!0){const V=O.__offset,$=Array.isArray(O.value)?O.value:[O.value];let Q=0;for(let ie=0;ie<$.length;ie++){const ee=$[ie],fe=_(ee);typeof ee=="number"||typeof ee=="boolean"?(O.__data[0]=ee,n.bufferSubData(n.UNIFORM_BUFFER,V+Q,O.__data)):ee.isMatrix3?(O.__data[0]=ee.elements[0],O.__data[1]=ee.elements[1],O.__data[2]=ee.elements[2],O.__data[3]=0,O.__data[4]=ee.elements[3],O.__data[5]=ee.elements[4],O.__data[6]=ee.elements[5],O.__data[7]=0,O.__data[8]=ee.elements[6],O.__data[9]=ee.elements[7],O.__data[10]=ee.elements[8],O.__data[11]=0):(ee.toArray(O.__data,Q),Q+=fe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(w,S,E,P){const b=w.value,R=S+"_"+E;if(P[R]===void 0)return typeof b=="number"||typeof b=="boolean"?P[R]=b:P[R]=b.clone(),!0;{const L=P[R];if(typeof b=="number"||typeof b=="boolean"){if(L!==b)return P[R]=b,!0}else if(L.equals(b)===!1)return L.copy(b),!0}return!1}function v(w){const S=w.uniforms;let E=0;const P=16;for(let R=0,L=S.length;R<L;R++){const I=Array.isArray(S[R])?S[R]:[S[R]];for(let C=0,O=I.length;C<O;C++){const V=I[C],$=Array.isArray(V.value)?V.value:[V.value];for(let Q=0,ie=$.length;Q<ie;Q++){const ee=$[Q],fe=_(ee),k=E%P;k!==0&&P-k<fe.boundary&&(E+=P-k),V.__data=new Float32Array(fe.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=E,E+=fe.storage}}}const b=E%P;return b>0&&(E+=P-b),w.__size=E,w.__cache={},this}function _(w){const S={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function y(w){const S=w.target;S.removeEventListener("dispose",y);const E=o.indexOf(S.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class pM{constructor(e={}){const{canvas:t=g3(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),v=new Int32Array(4);let _=null,y=null;const g=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Hi,this.toneMapping=So,this.toneMappingExposure=1;const S=this;let E=!1,P=0,b=0,R=null,L=-1,I=null;const C=new rn,O=new rn;let V=null;const $=new Xe(0);let Q=0,ie=t.width,ee=t.height,fe=1,k=null,Y=null;const Z=new rn(0,0,ie,ee),ae=new rn(0,0,ie,ee);let ye=!1;const Ue=new zp;let he=!1,Te=!1;const Me=new tt,Be=new G,at={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let wt=!1;function mt(){return R===null?fe:1}let te=r;function Ie(T,z){return t.getContext(T,z)}try{const T={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Kf}`),t.addEventListener("webglcontextlost",Ve,!1),t.addEventListener("webglcontextrestored",se,!1),t.addEventListener("webglcontextcreationerror",Pe,!1),te===null){const z="webgl2";if(te=Ie(z,T),te===null)throw Ie(z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let Se,Ne,Le,Oe,qe,Ye,xt,J,U,pe,le,de,Re,Qe,ze,Je,yt,Fe,it,Rt,pt,He,re,be;function We(){Se=new oW(te),Se.init(),He=new R3(te,Se),Ne=new eW(te,Se,e,He),Le=new Fj(te),Oe=new cW(te),qe=new bj,Ye=new Uj(te,Se,Le,qe,Ne,He,Oe),xt=new nW(S),J=new sW(S),U=new gV(te),re=new Q6(te,U),pe=new aW(te,U,Oe,re),le=new fW(te,pe,U,Oe),it=new uW(te,Ne,Ye),Je=new tW(qe),de=new Mj(S,xt,J,Se,Ne,re,Je),Re=new $j(S,qe),Qe=new Tj,ze=new Lj(Se),Fe=new q6(S,xt,J,Le,le,p,l),yt=new kj(S,le,Ne),be=new Xj(te,Oe,Ne,Le),Rt=new Z6(te,Se,Oe),pt=new lW(te,Se,Oe),Oe.programs=de.programs,S.capabilities=Ne,S.extensions=Se,S.properties=qe,S.renderLists=Qe,S.shadowMap=yt,S.state=Le,S.info=Oe}We();const q=new Wj(S,te);this.xr=q,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const T=Se.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=Se.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(T){T!==void 0&&(fe=T,this.setSize(ie,ee,!1))},this.getSize=function(T){return T.set(ie,ee)},this.setSize=function(T,z,W=!0){if(q.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ie=T,ee=z,t.width=Math.floor(T*fe),t.height=Math.floor(z*fe),W===!0&&(t.style.width=T+"px",t.style.height=z+"px"),this.setViewport(0,0,T,z)},this.getDrawingBufferSize=function(T){return T.set(ie*fe,ee*fe).floor()},this.setDrawingBufferSize=function(T,z,W){ie=T,ee=z,fe=W,t.width=Math.floor(T*W),t.height=Math.floor(z*W),this.setViewport(0,0,T,z)},this.getCurrentViewport=function(T){return T.copy(C)},this.getViewport=function(T){return T.copy(Z)},this.setViewport=function(T,z,W,j){T.isVector4?Z.set(T.x,T.y,T.z,T.w):Z.set(T,z,W,j),Le.viewport(C.copy(Z).multiplyScalar(fe).round())},this.getScissor=function(T){return T.copy(ae)},this.setScissor=function(T,z,W,j){T.isVector4?ae.set(T.x,T.y,T.z,T.w):ae.set(T,z,W,j),Le.scissor(O.copy(ae).multiplyScalar(fe).round())},this.getScissorTest=function(){return ye},this.setScissorTest=function(T){Le.setScissorTest(ye=T)},this.setOpaqueSort=function(T){k=T},this.setTransparentSort=function(T){Y=T},this.getClearColor=function(T){return T.copy(Fe.getClearColor())},this.setClearColor=function(){Fe.setClearColor.apply(Fe,arguments)},this.getClearAlpha=function(){return Fe.getClearAlpha()},this.setClearAlpha=function(){Fe.setClearAlpha.apply(Fe,arguments)},this.clear=function(T=!0,z=!0,W=!0){let j=0;if(T){let K=!1;if(R!==null){const ce=R.texture.format;K=ce===tM||ce===eM||ce===ZE}if(K){const ce=R.texture.type,me=ce===Ki||ce===ul||ce===op||ce===Nc||ce===qE||ce===QE,ve=Fe.getClearColor(),_e=Fe.getClearAlpha(),we=ve.r,Ze=ve.g,De=ve.b;me?(m[0]=we,m[1]=Ze,m[2]=De,m[3]=_e,te.clearBufferuiv(te.COLOR,0,m)):(v[0]=we,v[1]=Ze,v[2]=De,v[3]=_e,te.clearBufferiv(te.COLOR,0,v))}else j|=te.COLOR_BUFFER_BIT}z&&(j|=te.DEPTH_BUFFER_BIT),W&&(j|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(j)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ve,!1),t.removeEventListener("webglcontextrestored",se,!1),t.removeEventListener("webglcontextcreationerror",Pe,!1),Qe.dispose(),ze.dispose(),qe.dispose(),xt.dispose(),J.dispose(),le.dispose(),re.dispose(),be.dispose(),de.dispose(),q.dispose(),q.removeEventListener("sessionstart",Xn),q.removeEventListener("sessionend",er),Ts.stop()};function Ve(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const T=Oe.autoReset,z=yt.enabled,W=yt.autoUpdate,j=yt.needsUpdate,K=yt.type;We(),Oe.autoReset=T,yt.enabled=z,yt.autoUpdate=W,yt.needsUpdate=j,yt.type=K}function Pe(T){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",T.statusMessage)}function Ke(T){const z=T.target;z.removeEventListener("dispose",Ke),St(z)}function St(T){Pt(T),qe.remove(T)}function Pt(T){const z=qe.get(T).programs;z!==void 0&&(z.forEach(function(W){de.releaseProgram(W)}),T.isShaderMaterial&&de.releaseShaderCache(T))}this.renderBufferDirect=function(T,z,W,j,K,ce){z===null&&(z=at);const me=K.isMesh&&K.matrixWorld.determinant()<0,ve=hh(T,z,W,j,K);Le.setMaterial(j,me);let _e=W.index,we=1;if(j.wireframe===!0){if(_e=pe.getWireframeAttribute(W),_e===void 0)return;we=2}const Ze=W.drawRange,De=W.attributes.position;let je=Ze.start*we,st=(Ze.start+Ze.count)*we;ce!==null&&(je=Math.max(je,ce.start*we),st=Math.min(st,(ce.start+ce.count)*we)),_e!==null?(je=Math.max(je,0),st=Math.min(st,_e.count)):De!=null&&(je=Math.max(je,0),st=Math.min(st,De.count));const ct=st-je;if(ct<0||ct===1/0)return;re.setup(K,j,ve,W,_e);let bt,ut=Rt;if(_e!==null&&(bt=U.get(_e),ut=pt,ut.setIndex(bt)),K.isMesh)j.wireframe===!0?(Le.setLineWidth(j.wireframeLinewidth*mt()),ut.setMode(te.LINES)):ut.setMode(te.TRIANGLES);else if(K.isLine){let ke=j.linewidth;ke===void 0&&(ke=1),Le.setLineWidth(ke*mt()),K.isLineSegments?ut.setMode(te.LINES):K.isLineLoop?ut.setMode(te.LINE_LOOP):ut.setMode(te.LINE_STRIP)}else K.isPoints?ut.setMode(te.POINTS):K.isSprite&&ut.setMode(te.TRIANGLES);if(K.isBatchedMesh)K._multiDrawInstances!==null?ut.renderMultiDrawInstances(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount,K._multiDrawInstances):ut.renderMultiDraw(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount);else if(K.isInstancedMesh)ut.renderInstances(je,ct,K.count);else if(W.isInstancedBufferGeometry){const ke=W._maxInstanceCount!==void 0?W._maxInstanceCount:1/0,gt=Math.min(W.instanceCount,ke);ut.renderInstances(je,ct,gt)}else ut.render(je,ct)};function Kt(T,z,W){T.transparent===!0&&T.side===ds&&T.forceSinglePass===!1?(T.side=di,T.needsUpdate=!0,Nr(T,z,W),T.side=Mo,T.needsUpdate=!0,Nr(T,z,W),T.side=ds):Nr(T,z,W)}this.compile=function(T,z,W=null){W===null&&(W=T),y=ze.get(W),y.init(z),w.push(y),W.traverseVisible(function(K){K.isLight&&K.layers.test(z.layers)&&(y.pushLight(K),K.castShadow&&y.pushShadow(K))}),T!==W&&T.traverseVisible(function(K){K.isLight&&K.layers.test(z.layers)&&(y.pushLight(K),K.castShadow&&y.pushShadow(K))}),y.setupLights();const j=new Set;return T.traverse(function(K){const ce=K.material;if(ce)if(Array.isArray(ce))for(let me=0;me<ce.length;me++){const ve=ce[me];Kt(ve,W,K),j.add(ve)}else Kt(ce,W,K),j.add(ce)}),w.pop(),y=null,j},this.compileAsync=function(T,z,W=null){const j=this.compile(T,z,W);return new Promise(K=>{function ce(){if(j.forEach(function(me){qe.get(me).currentProgram.isReady()&&j.delete(me)}),j.size===0){K(T);return}setTimeout(ce,10)}Se.get("KHR_parallel_shader_compile")!==null?ce():setTimeout(ce,10)})};let dn=null;function zt(T){dn&&dn(T)}function Xn(){Ts.stop()}function er(){Ts.start()}const Ts=new A3;Ts.setAnimationLoop(zt),typeof self<"u"&&Ts.setContext(self),this.setAnimationLoop=function(T){dn=T,q.setAnimationLoop(T),T===null?Ts.stop():Ts.start()},q.addEventListener("sessionstart",Xn),q.addEventListener("sessionend",er),this.render=function(T,z){if(z!==void 0&&z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;if(T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),z.parent===null&&z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),q.enabled===!0&&q.isPresenting===!0&&(q.cameraAutoUpdate===!0&&q.updateCamera(z),z=q.getCamera()),T.isScene===!0&&T.onBeforeRender(S,T,z,R),y=ze.get(T,w.length),y.init(z),w.push(y),Me.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse),Ue.setFromProjectionMatrix(Me),Te=this.localClippingEnabled,he=Je.init(this.clippingPlanes,Te),_=Qe.get(T,g.length),_.init(),g.push(_),q.enabled===!0&&q.isPresenting===!0){const ce=S.xr.getDepthSensingMesh();ce!==null&&Tl(ce,z,-1/0,S.sortObjects)}Tl(T,z,0,S.sortObjects),_.finish(),S.sortObjects===!0&&_.sort(k,Y),wt=q.enabled===!1||q.isPresenting===!1||q.hasDepthSensing()===!1,wt&&Fe.addToRenderList(_,T),this.info.render.frame++,he===!0&&Je.beginShadows();const W=y.state.shadowsArray;yt.render(W,T,z),he===!0&&Je.endShadows(),this.info.autoReset===!0&&this.info.reset();const j=_.opaque,K=_.transmissive;if(y.setupLights(),z.isArrayCamera){const ce=z.cameras;if(K.length>0)for(let me=0,ve=ce.length;me<ve;me++){const _e=ce[me];to(j,K,T,_e)}wt&&Fe.render(T);for(let me=0,ve=ce.length;me<ve;me++){const _e=ce[me];tu(_,T,_e,_e.viewport)}}else K.length>0&&to(j,K,T,z),wt&&Fe.render(T),tu(_,T,z);R!==null&&(Ye.updateMultisampleRenderTarget(R),Ye.updateRenderTargetMipmap(R)),T.isScene===!0&&T.onAfterRender(S,T,z),re.resetDefaultState(),L=-1,I=null,w.pop(),w.length>0?(y=w[w.length-1],he===!0&&Je.setGlobalState(S.clippingPlanes,y.state.camera)):y=null,g.pop(),g.length>0?_=g[g.length-1]:_=null};function Tl(T,z,W,j){if(T.visible===!1)return;if(T.layers.test(z.layers)){if(T.isGroup)W=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(z);else if(T.isLight)y.pushLight(T),T.castShadow&&y.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||Ue.intersectsSprite(T)){j&&Be.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Me);const me=le.update(T),ve=T.material;ve.visible&&_.push(T,me,ve,W,Be.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(!T.frustumCulled||Ue.intersectsObject(T))){const me=le.update(T),ve=T.material;if(j&&(T.boundingSphere!==void 0?(T.boundingSphere===null&&T.computeBoundingSphere(),Be.copy(T.boundingSphere.center)):(me.boundingSphere===null&&me.computeBoundingSphere(),Be.copy(me.boundingSphere.center)),Be.applyMatrix4(T.matrixWorld).applyMatrix4(Me)),Array.isArray(ve)){const _e=me.groups;for(let we=0,Ze=_e.length;we<Ze;we++){const De=_e[we],je=ve[De.materialIndex];je&&je.visible&&_.push(T,me,je,W,Be.z,De)}}else ve.visible&&_.push(T,me,ve,W,Be.z,null)}}const ce=T.children;for(let me=0,ve=ce.length;me<ve;me++)Tl(ce[me],z,W,j)}function tu(T,z,W,j){const K=T.opaque,ce=T.transmissive,me=T.transparent;y.setupLightsView(W),he===!0&&Je.setGlobalState(S.clippingPlanes,W),j&&Le.viewport(C.copy(j)),K.length>0&&no(K,z,W),ce.length>0&&no(ce,z,W),me.length>0&&no(me,z,W),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function to(T,z,W,j){if((W.isScene===!0?W.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[j.id]===void 0&&(y.state.transmissionRenderTarget[j.id]=new Yi(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float")?Ir:Ki,minFilter:gs,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fn.workingColorSpace}));const ce=y.state.transmissionRenderTarget[j.id],me=j.viewport||C;ce.setSize(me.z,me.w);const ve=S.getRenderTarget();S.setRenderTarget(ce),S.getClearColor($),Q=S.getClearAlpha(),Q<1&&S.setClearColor(16777215,.5),wt?Fe.render(W):S.clear();const _e=S.toneMapping;S.toneMapping=So;const we=j.viewport;if(j.viewport!==void 0&&(j.viewport=void 0),y.setupLightsView(j),he===!0&&Je.setGlobalState(S.clippingPlanes,j),no(T,W,j),Ye.updateMultisampleRenderTarget(ce),Ye.updateRenderTargetMipmap(ce),Se.has("WEBGL_multisampled_render_to_texture")===!1){let Ze=!1;for(let De=0,je=z.length;De<je;De++){const st=z[De],ct=st.object,bt=st.geometry,ut=st.material,ke=st.group;if(ut.side===ds&&ct.layers.test(j.layers)){const gt=ut.side;ut.side=di,ut.needsUpdate=!0,ro(ct,W,j,bt,ut,ke),ut.side=gt,ut.needsUpdate=!0,Ze=!0}}Ze===!0&&(Ye.updateMultisampleRenderTarget(ce),Ye.updateRenderTargetMipmap(ce))}S.setRenderTarget(ve),S.setClearColor($,Q),we!==void 0&&(j.viewport=we),S.toneMapping=_e}function no(T,z,W){const j=z.isScene===!0?z.overrideMaterial:null;for(let K=0,ce=T.length;K<ce;K++){const me=T[K],ve=me.object,_e=me.geometry,we=j===null?me.material:j,Ze=me.group;ve.layers.test(W.layers)&&ro(ve,z,W,_e,we,Ze)}}function ro(T,z,W,j,K,ce){T.onBeforeRender(S,z,W,j,K,ce),T.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),K.onBeforeRender(S,z,W,j,T,ce),K.transparent===!0&&K.side===ds&&K.forceSinglePass===!1?(K.side=di,K.needsUpdate=!0,S.renderBufferDirect(W,z,j,K,T,ce),K.side=Mo,K.needsUpdate=!0,S.renderBufferDirect(W,z,j,K,T,ce),K.side=ds):S.renderBufferDirect(W,z,j,K,T,ce),T.onAfterRender(S,z,W,j,K,ce)}function Nr(T,z,W){z.isScene!==!0&&(z=at);const j=qe.get(T),K=y.state.lights,ce=y.state.shadowsArray,me=K.state.version,ve=de.getParameters(T,K.state,ce,z,W),_e=de.getProgramCacheKey(ve);let we=j.programs;j.environment=T.isMeshStandardMaterial?z.environment:null,j.fog=z.fog,j.envMap=(T.isMeshStandardMaterial?J:xt).get(T.envMap||j.environment),j.envMapRotation=j.environment!==null&&T.envMap===null?z.environmentRotation:T.envMapRotation,we===void 0&&(T.addEventListener("dispose",Ke),we=new Map,j.programs=we);let Ze=we.get(_e);if(Ze!==void 0){if(j.currentProgram===Ze&&j.lightsStateVersion===me)return Rl(T,ve),Ze}else ve.uniforms=de.getUniforms(T),T.onBuild(W,ve,S),T.onBeforeCompile(ve,S),Ze=de.acquireProgram(ve,_e),we.set(_e,Ze),j.uniforms=ve.uniforms;const De=j.uniforms;return(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(De.clippingPlanes=Je.uniform),Rl(T,ve),j.needsLights=H(T),j.lightsStateVersion=me,j.needsLights&&(De.ambientLightColor.value=K.state.ambient,De.lightProbe.value=K.state.probe,De.directionalLights.value=K.state.directional,De.directionalLightShadows.value=K.state.directionalShadow,De.spotLights.value=K.state.spot,De.spotLightShadows.value=K.state.spotShadow,De.rectAreaLights.value=K.state.rectArea,De.ltc_1.value=K.state.rectAreaLTC1,De.ltc_2.value=K.state.rectAreaLTC2,De.pointLights.value=K.state.point,De.pointLightShadows.value=K.state.pointShadow,De.hemisphereLights.value=K.state.hemi,De.directionalShadowMap.value=K.state.directionalShadowMap,De.directionalShadowMatrix.value=K.state.directionalShadowMatrix,De.spotShadowMap.value=K.state.spotShadowMap,De.spotLightMatrix.value=K.state.spotLightMatrix,De.spotLightMap.value=K.state.spotLightMap,De.pointShadowMap.value=K.state.pointShadowMap,De.pointShadowMatrix.value=K.state.pointShadowMatrix),j.currentProgram=Ze,j.uniformsList=null,Ze}function Ft(T){if(T.uniformsList===null){const z=T.currentProgram.getUniforms();T.uniformsList=jv.seqWithValue(z.seq,T.uniforms)}return T.uniformsList}function Rl(T,z){const W=qe.get(T);W.outputColorSpace=z.outputColorSpace,W.batching=z.batching,W.batchingColor=z.batchingColor,W.instancing=z.instancing,W.instancingColor=z.instancingColor,W.instancingMorph=z.instancingMorph,W.skinning=z.skinning,W.morphTargets=z.morphTargets,W.morphNormals=z.morphNormals,W.morphColors=z.morphColors,W.morphTargetsCount=z.morphTargetsCount,W.numClippingPlanes=z.numClippingPlanes,W.numIntersection=z.numClipIntersection,W.vertexAlphas=z.vertexAlphas,W.vertexTangents=z.vertexTangents,W.toneMapping=z.toneMapping}function hh(T,z,W,j,K){z.isScene!==!0&&(z=at),Ye.resetTextureUnits();const ce=z.fog,me=j.isMeshStandardMaterial?z.environment:null,ve=R===null?S.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:As,_e=(j.isMeshStandardMaterial?J:xt).get(j.envMap||me),we=j.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,Ze=!!W.attributes.tangent&&(!!j.normalMap||j.anisotropy>0),De=!!W.morphAttributes.position,je=!!W.morphAttributes.normal,st=!!W.morphAttributes.color;let ct=So;j.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(ct=S.toneMapping);const bt=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,ut=bt!==void 0?bt.length:0,ke=qe.get(j),gt=y.state.lights;if(he===!0&&(Te===!0||T!==I)){const on=T===I&&j.id===L;Je.setState(j,T,on)}let dt=!1;j.version===ke.__version?(ke.needsLights&&ke.lightsStateVersion!==gt.state.version||ke.outputColorSpace!==ve||K.isBatchedMesh&&ke.batching===!1||!K.isBatchedMesh&&ke.batching===!0||K.isBatchedMesh&&ke.batchingColor===!0&&K.colorTexture===null||K.isBatchedMesh&&ke.batchingColor===!1&&K.colorTexture!==null||K.isInstancedMesh&&ke.instancing===!1||!K.isInstancedMesh&&ke.instancing===!0||K.isSkinnedMesh&&ke.skinning===!1||!K.isSkinnedMesh&&ke.skinning===!0||K.isInstancedMesh&&ke.instancingColor===!0&&K.instanceColor===null||K.isInstancedMesh&&ke.instancingColor===!1&&K.instanceColor!==null||K.isInstancedMesh&&ke.instancingMorph===!0&&K.morphTexture===null||K.isInstancedMesh&&ke.instancingMorph===!1&&K.morphTexture!==null||ke.envMap!==_e||j.fog===!0&&ke.fog!==ce||ke.numClippingPlanes!==void 0&&(ke.numClippingPlanes!==Je.numPlanes||ke.numIntersection!==Je.numIntersection)||ke.vertexAlphas!==we||ke.vertexTangents!==Ze||ke.morphTargets!==De||ke.morphNormals!==je||ke.morphColors!==st||ke.toneMapping!==ct||ke.morphTargetsCount!==ut)&&(dt=!0):(dt=!0,ke.__version=j.version);let jt=ke.currentProgram;dt===!0&&(jt=Nr(j,z,K));let It=!1,Qt=!1,tr=!1;const Ht=jt.getUniforms(),yn=ke.uniforms;if(Le.useProgram(jt.program)&&(It=!0,Qt=!0,tr=!0),j.id!==L&&(L=j.id,Qt=!0),It||I!==T){Ht.setValue(te,"projectionMatrix",T.projectionMatrix),Ht.setValue(te,"viewMatrix",T.matrixWorldInverse);const on=Ht.map.cameraPosition;on!==void 0&&on.setValue(te,Be.setFromMatrixPosition(T.matrixWorld)),Ne.logarithmicDepthBuffer&&Ht.setValue(te,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial)&&Ht.setValue(te,"isOrthographic",T.isOrthographicCamera===!0),I!==T&&(I=T,Qt=!0,tr=!0)}if(K.isSkinnedMesh){Ht.setOptional(te,K,"bindMatrix"),Ht.setOptional(te,K,"bindMatrixInverse");const on=K.skeleton;on&&(on.boneTexture===null&&on.computeBoneTexture(),Ht.setValue(te,"boneTexture",on.boneTexture,Ye))}K.isBatchedMesh&&(Ht.setOptional(te,K,"batchingTexture"),Ht.setValue(te,"batchingTexture",K._matricesTexture,Ye),Ht.setOptional(te,K,"batchingColorTexture"),K._colorsTexture!==null&&Ht.setValue(te,"batchingColorTexture",K._colorsTexture,Ye));const Zt=W.morphAttributes;if((Zt.position!==void 0||Zt.normal!==void 0||Zt.color!==void 0)&&it.update(K,W,jt),(Qt||ke.receiveShadow!==K.receiveShadow)&&(ke.receiveShadow=K.receiveShadow,Ht.setValue(te,"receiveShadow",K.receiveShadow)),j.isMeshGouraudMaterial&&j.envMap!==null&&(yn.envMap.value=_e,yn.flipEnvMap.value=_e.isCubeTexture&&_e.isRenderTargetTexture===!1?-1:1),j.isMeshStandardMaterial&&j.envMap===null&&z.environment!==null&&(yn.envMapIntensity.value=z.environmentIntensity),Qt&&(Ht.setValue(te,"toneMappingExposure",S.toneMappingExposure),ke.needsLights&&N(yn,tr),ce&&j.fog===!0&&Re.refreshFogUniforms(yn,ce),Re.refreshMaterialUniforms(yn,j,fe,ee,y.state.transmissionRenderTarget[T.id]),jv.upload(te,Ft(ke),yn,Ye)),j.isShaderMaterial&&j.uniformsNeedUpdate===!0&&(jv.upload(te,Ft(ke),yn,Ye),j.uniformsNeedUpdate=!1),j.isSpriteMaterial&&Ht.setValue(te,"center",K.center),Ht.setValue(te,"modelViewMatrix",K.modelViewMatrix),Ht.setValue(te,"normalMatrix",K.normalMatrix),Ht.setValue(te,"modelMatrix",K.matrixWorld),j.isShaderMaterial||j.isRawShaderMaterial){const on=j.uniformsGroups;for(let nn=0,en=on.length;nn<en;nn++){const gn=on[nn];be.update(gn,jt),be.bind(gn,jt)}}return jt}function N(T,z){T.ambientLightColor.needsUpdate=z,T.lightProbe.needsUpdate=z,T.directionalLights.needsUpdate=z,T.directionalLightShadows.needsUpdate=z,T.pointLights.needsUpdate=z,T.pointLightShadows.needsUpdate=z,T.spotLights.needsUpdate=z,T.spotLightShadows.needsUpdate=z,T.rectAreaLights.needsUpdate=z,T.hemisphereLights.needsUpdate=z}function H(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(T,z,W){qe.get(T.texture).__webglTexture=z,qe.get(T.depthTexture).__webglTexture=W;const j=qe.get(T);j.__hasExternalTextures=!0,j.__autoAllocateDepthBuffer=W===void 0,j.__autoAllocateDepthBuffer||Se.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),j.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(T,z){const W=qe.get(T);W.__webglFramebuffer=z,W.__useDefaultFramebuffer=z===void 0},this.setRenderTarget=function(T,z=0,W=0){R=T,P=z,b=W;let j=!0,K=null,ce=!1,me=!1;if(T){const _e=qe.get(T);_e.__useDefaultFramebuffer!==void 0?(Le.bindFramebuffer(te.FRAMEBUFFER,null),j=!1):_e.__webglFramebuffer===void 0?Ye.setupRenderTarget(T):_e.__hasExternalTextures&&Ye.rebindTextures(T,qe.get(T.texture).__webglTexture,qe.get(T.depthTexture).__webglTexture);const we=T.texture;(we.isData3DTexture||we.isDataArrayTexture||we.isCompressedArrayTexture)&&(me=!0);const Ze=qe.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(Array.isArray(Ze[z])?K=Ze[z][W]:K=Ze[z],ce=!0):T.samples>0&&Ye.useMultisampledRTT(T)===!1?K=qe.get(T).__webglMultisampledFramebuffer:Array.isArray(Ze)?K=Ze[W]:K=Ze,C.copy(T.viewport),O.copy(T.scissor),V=T.scissorTest}else C.copy(Z).multiplyScalar(fe).floor(),O.copy(ae).multiplyScalar(fe).floor(),V=ye;if(Le.bindFramebuffer(te.FRAMEBUFFER,K)&&j&&Le.drawBuffers(T,K),Le.viewport(C),Le.scissor(O),Le.setScissorTest(V),ce){const _e=qe.get(T.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+z,_e.__webglTexture,W)}else if(me){const _e=qe.get(T.texture),we=z||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,_e.__webglTexture,W||0,we)}L=-1},this.readRenderTargetPixels=function(T,z,W,j,K,ce,me){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ve=qe.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&me!==void 0&&(ve=ve[me]),ve){Le.bindFramebuffer(te.FRAMEBUFFER,ve);try{const _e=T.texture,we=_e.format,Ze=_e.type;if(!Ne.textureFormatReadable(we)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ne.textureTypeReadable(Ze)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}z>=0&&z<=T.width-j&&W>=0&&W<=T.height-K&&te.readPixels(z,W,j,K,He.convert(we),He.convert(Ze),ce)}finally{const _e=R!==null?qe.get(R).__webglFramebuffer:null;Le.bindFramebuffer(te.FRAMEBUFFER,_e)}}},this.readRenderTargetPixelsAsync=async function(T,z,W,j,K,ce,me){if(!(T&&T.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ve=qe.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&me!==void 0&&(ve=ve[me]),ve){Le.bindFramebuffer(te.FRAMEBUFFER,ve);try{const _e=T.texture,we=_e.format,Ze=_e.type;if(!Ne.textureFormatReadable(we))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ne.textureTypeReadable(Ze))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(z>=0&&z<=T.width-j&&W>=0&&W<=T.height-K){const De=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,De),te.bufferData(te.PIXEL_PACK_BUFFER,ce.byteLength,te.STREAM_READ),te.readPixels(z,W,j,K,He.convert(we),He.convert(Ze),0),te.flush();const je=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);await G8(te,je,4);try{te.bindBuffer(te.PIXEL_PACK_BUFFER,De),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,ce)}finally{te.deleteBuffer(De),te.deleteSync(je)}return ce}}finally{const _e=R!==null?qe.get(R).__webglFramebuffer:null;Le.bindFramebuffer(te.FRAMEBUFFER,_e)}}},this.copyFramebufferToTexture=function(T,z=null,W=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),z=arguments[0]||null,T=arguments[1]);const j=Math.pow(2,-W),K=Math.floor(T.image.width*j),ce=Math.floor(T.image.height*j),me=z!==null?z.x:0,ve=z!==null?z.y:0;Ye.setTexture2D(T,0),te.copyTexSubImage2D(te.TEXTURE_2D,W,0,0,me,ve,K,ce),Le.unbindTexture()},this.copyTextureToTexture=function(T,z,W=null,j=null,K=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),j=arguments[0]||null,T=arguments[1],z=arguments[2],K=arguments[3]||0,W=null);let ce,me,ve,_e,we,Ze;W!==null?(ce=W.max.x-W.min.x,me=W.max.y-W.min.y,ve=W.min.x,_e=W.min.y):(ce=T.image.width,me=T.image.height,ve=0,_e=0),j!==null?(we=j.x,Ze=j.y):(we=0,Ze=0);const De=He.convert(z.format),je=He.convert(z.type);Ye.setTexture2D(z,0),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,z.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,z.unpackAlignment);const st=te.getParameter(te.UNPACK_ROW_LENGTH),ct=te.getParameter(te.UNPACK_IMAGE_HEIGHT),bt=te.getParameter(te.UNPACK_SKIP_PIXELS),ut=te.getParameter(te.UNPACK_SKIP_ROWS),ke=te.getParameter(te.UNPACK_SKIP_IMAGES),gt=T.isCompressedTexture?T.mipmaps[K]:T.image;te.pixelStorei(te.UNPACK_ROW_LENGTH,gt.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,gt.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,ve),te.pixelStorei(te.UNPACK_SKIP_ROWS,_e),T.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,K,we,Ze,ce,me,De,je,gt.data):T.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,K,we,Ze,gt.width,gt.height,De,gt.data):te.texSubImage2D(te.TEXTURE_2D,K,we,Ze,De,je,gt),te.pixelStorei(te.UNPACK_ROW_LENGTH,st),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,ct),te.pixelStorei(te.UNPACK_SKIP_PIXELS,bt),te.pixelStorei(te.UNPACK_SKIP_ROWS,ut),te.pixelStorei(te.UNPACK_SKIP_IMAGES,ke),K===0&&z.generateMipmaps&&te.generateMipmap(te.TEXTURE_2D),Le.unbindTexture()},this.copyTextureToTexture3D=function(T,z,W=null,j=null,K=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),W=arguments[0]||null,j=arguments[1]||null,T=arguments[2],z=arguments[3],K=arguments[4]||0);let ce,me,ve,_e,we,Ze,De,je,st;const ct=T.isCompressedTexture?T.mipmaps[K]:T.image;W!==null?(ce=W.max.x-W.min.x,me=W.max.y-W.min.y,ve=W.max.z-W.min.z,_e=W.min.x,we=W.min.y,Ze=W.min.z):(ce=ct.width,me=ct.height,ve=ct.depth,_e=0,we=0,Ze=0),j!==null?(De=j.x,je=j.y,st=j.z):(De=0,je=0,st=0);const bt=He.convert(z.format),ut=He.convert(z.type);let ke;if(z.isData3DTexture)Ye.setTexture3D(z,0),ke=te.TEXTURE_3D;else if(z.isDataArrayTexture||z.isCompressedArrayTexture)Ye.setTexture2DArray(z,0),ke=te.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,z.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,z.unpackAlignment);const gt=te.getParameter(te.UNPACK_ROW_LENGTH),dt=te.getParameter(te.UNPACK_IMAGE_HEIGHT),jt=te.getParameter(te.UNPACK_SKIP_PIXELS),It=te.getParameter(te.UNPACK_SKIP_ROWS),Qt=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,ct.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,ct.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,_e),te.pixelStorei(te.UNPACK_SKIP_ROWS,we),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Ze),T.isDataTexture||T.isData3DTexture?te.texSubImage3D(ke,K,De,je,st,ce,me,ve,bt,ut,ct.data):z.isCompressedArrayTexture?te.compressedTexSubImage3D(ke,K,De,je,st,ce,me,ve,bt,ct.data):te.texSubImage3D(ke,K,De,je,st,ce,me,ve,bt,ut,ct),te.pixelStorei(te.UNPACK_ROW_LENGTH,gt),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,dt),te.pixelStorei(te.UNPACK_SKIP_PIXELS,jt),te.pixelStorei(te.UNPACK_SKIP_ROWS,It),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Qt),K===0&&z.generateMipmaps&&te.generateMipmap(ke),Le.unbindTexture()},this.initRenderTarget=function(T){qe.get(T).__webglFramebuffer===void 0&&Ye.setupRenderTarget(T)},this.initTexture=function(T){T.isCubeTexture?Ye.setTextureCube(T,0):T.isData3DTexture?Ye.setTexture3D(T,0):T.isDataArrayTexture||T.isCompressedArrayTexture?Ye.setTexture2DArray(T,0):Ye.setTexture2D(T,0),Le.unbindTexture()},this.resetState=function(){P=0,b=0,R=null,Le.reset(),re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return vo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===w0?"display-p3":"srgb",t.unpackColorSpace=fn.workingColorSpace===kp?"display-p3":"srgb"}}class M0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Xe(e),this.density=t}clone(){return new M0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class b0{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Xe(e),this.near=t,this.far=r}clone(){return new b0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Nf extends Vt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ar,this.environmentIntensity=1,this.environmentRotation=new Ar,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Hp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=fp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=$i()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return oM("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$i()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$i()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ni=new G;class fl{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ni.fromBufferAttribute(this,t),ni.applyMatrix4(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ni.fromBufferAttribute(this,t),ni.applyNormalMatrix(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ni.fromBufferAttribute(this,t),ni.transformDirection(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=ui(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Ot(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Ot(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ot(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ot(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ot(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ui(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ui(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ui(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ui(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array),i=Ot(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ot(t,this.array),r=Ot(r,this.array),i=Ot(i,this.array),s=Ot(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new tn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class mM extends cr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Xe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Iu;const Wh=new G,Bu=new G,Du=new G,Lu=new Ce,jh=new Ce,I3=new tt,kg=new G,$h=new G,Fg=new G,pP=new Ce,mw=new Ce,mP=new Ce;class B3 extends Vt{constructor(e=new mM){if(super(),this.isSprite=!0,this.type="Sprite",Iu===void 0){Iu=new Tt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Hp(t,5);Iu.setIndex([0,1,2,0,2,3]),Iu.setAttribute("position",new fl(r,3,0,!1)),Iu.setAttribute("uv",new fl(r,2,3,!1))}this.geometry=Iu,this.material=e,this.center=new Ce(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bu.setFromMatrixScale(this.matrixWorld),I3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Du.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Bu.multiplyScalar(-Du.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Ug(kg.set(-.5,-.5,0),Du,o,Bu,i,s),Ug($h.set(.5,-.5,0),Du,o,Bu,i,s),Ug(Fg.set(.5,.5,0),Du,o,Bu,i,s),pP.set(0,0),mw.set(1,0),mP.set(1,1);let a=e.ray.intersectTriangle(kg,$h,Fg,!1,Wh);if(a===null&&(Ug($h.set(-.5,.5,0),Du,o,Bu,i,s),mw.set(0,1),a=e.ray.intersectTriangle(kg,Fg,$h,!1,Wh),a===null))return;const l=e.ray.origin.distanceTo(Wh);l<e.near||l>e.far||t.push({distance:l,point:Wh.clone(),uv:Vi.getInterpolation(Wh,kg,$h,Fg,pP,mw,mP,new Ce),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ug(n,e,t,r,i,s){Lu.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(jh.x=s*Lu.x-i*Lu.y,jh.y=i*Lu.x+s*Lu.y):jh.copy(Lu),n.copy(e),n.x+=jh.x,n.y+=jh.y,n.applyMatrix4(I3)}const zg=new G,gP=new G;class D3 extends Vt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){zg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(zg);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){zg.setFromMatrixPosition(e.matrixWorld),gP.setFromMatrixPosition(this.matrixWorld);const r=zg.distanceTo(gP)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const vP=new G,yP=new rn,_P=new rn,Jj=new G,xP=new tt,Hg=new G,gw=new Dr,wP=new tt,vw=new Kc;class C0 extends bn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=y1,this.bindMatrix=new tt,this.bindMatrixInverse=new tt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Hg),this.boundingBox.expandByPoint(Hg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Dr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Hg),this.boundingSphere.expandByPoint(Hg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gw.copy(this.boundingSphere),gw.applyMatrix4(i),e.ray.intersectsSphere(gw)!==!1&&(wP.copy(i).invert(),vw.copy(e.ray).applyMatrix4(wP),!(this.boundingBox!==null&&vw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,vw)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new rn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===y1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===XO?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;yP.fromBufferAttribute(i.attributes.skinIndex,e),_P.fromBufferAttribute(i.attributes.skinWeight,e),vP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=_P.getComponent(s);if(o!==0){const a=yP.getComponent(s);xP.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Jj.copy(vP).applyMatrix4(xP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class kf extends Vt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ao extends Yt{constructor(e=null,t=1,r=1,i,s,o,a,l,c=pr,u=pr,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const SP=new tt,Kj=new tt;class Qf{constructor(e=[],t=[]){this.uuid=$i(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new tt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new tt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Kj;SP.multiplyMatrices(a,t[s]),SP.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Qf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Ao(t,e,e,or,Vn);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new kf),this.bones.push(o),this.boneInverses.push(new tt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Fc extends tn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ou=new tt,AP=new tt,Gg=[],EP=new Yr,Yj=new tt,Xh=new bn,Jh=new Dr;class gM extends bn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Fc(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Yj)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Yr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Ou),EP.copy(e.boundingBox).applyMatrix4(Ou),this.boundingBox.union(EP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Dr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Ou),Jh.copy(e.boundingSphere).applyMatrix4(Ou),this.boundingSphere.union(Jh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Xh.geometry=this.geometry,Xh.material=this.material,Xh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Jh.copy(this.boundingSphere),Jh.applyMatrix4(r),e.ray.intersectsSphere(Jh)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Ou),AP.multiplyMatrices(r,Ou),Xh.matrixWorld=AP,Xh.raycast(e,Gg);for(let o=0,a=Gg.length;o<a;o++){const l=Gg[o];l.instanceId=s,l.object=this,t.push(l)}Gg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Fc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Ao(new Float32Array(i*this.count),i,this.count,_0,Vn));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function qj(n,e){return n.z-e.z}function Qj(n,e){return e.z-n.z}class Zj{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Nu="batchId",La=new tt,yw=new tt,e$=new tt,t$=new Xe(1,1,1),MP=new tt,_w=new zp,Vg=new Yr,jl=new Dr,Kh=new G,bP=new G,n$=new G,xw=new Zj,jr=new bn,Wg=[];function r$(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class L3 extends bn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new Tt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Ao(t,e,e,or,Vn);this._matricesTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxGeometryCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Ao(t,e,e,or,Vn);r.colorSpace=fn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:f}=l,p=new c.constructor(r*u),m=new tn(p,u,f);t.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new tn(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Nu,new tn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Nu))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Nu}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Nu)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yr);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,La),this.getBoundingBoxAt(i,Vg).applyMatrix4(La),t.union(Vg))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Dr);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,La),this.getBoundingSphereAt(i,jl).applyMatrix4(La),t.union(jl))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data,_=this._colorsTexture;f.push(!0),p.push(!0);const y=this._geometryCount;this._geometryCount++,e$.toArray(v,y*16),m.needsUpdate=!0,_!==null&&(t$.toArray(_.image.data,y*4),_.needsUpdate=!0),o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Yr,sphereInitialized:!1,sphere:new Dr});const g=this.geometry.getAttribute(Nu);for(let w=0;w<i.vertexCount;w++)g.setX(i.vertexStart+w,y);return g.needsUpdate=!0,this.setGeometryAt(y,e),y}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===Nu)continue;const v=t.getAttribute(m),_=r.getAttribute(m);r$(v,_,l);const y=v.itemSize;for(let g=v.count,w=c;g<w;g++){const S=l+g;for(let E=0;E<y;E++)_.setComponent(S,E,0)}_.needsUpdate=!0,_.addUpdateRange(l*y,c*y)}if(i){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,_=a.indexCount;v<_;v++)s.setX(m+v,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,t){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=t,e}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,f=c.start+c.count;u<f;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(Kh.fromBufferAttribute(l,p))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Vg),Vg.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),Kh.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(Kh))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const r=this._active,i=this._colorsTexture,s=this._colorsTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const r=this._active,i=this._colorsTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;jr.material=this.material,jr.geometry.index=l.index,jr.geometry.attributes=l.attributes,jr.geometry.boundingBox===null&&(jr.geometry.boundingBox=new Yr),jr.geometry.boundingSphere===null&&(jr.geometry.boundingSphere=new Dr);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];jr.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,jr.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,jr.geometry.boundingBox),this.getBoundingSphereAt(c,jr.geometry.boundingSphere),jr.raycast(e,Wg);for(let f=0,p=Wg.length;f<p;f++){const m=Wg[f];m.object=this,m.batchId=c,t.push(m)}Wg.length=0}jr.material=null,jr.geometry.index=null,jr.geometry.attributes={},jr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,u=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(MP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),_w.setFromProjectionMatrix(MP,e.coordinateSystem));let v=0;if(this.sortObjects){yw.copy(this.matrixWorld).invert(),Kh.setFromMatrixPosition(r.matrixWorld).applyMatrix4(yw),bP.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(yw);for(let g=0,w=c.length;g<w;g++)if(c[g]&&l[g]){this.getMatrixAt(g,La),this.getBoundingSphereAt(g,jl).applyMatrix4(La);let S=!1;if(m&&(S=!_w.intersectsSphere(jl)),!S){const E=n$.subVectors(jl.center,Kh).dot(bP);xw.push(p[g],E)}}const _=xw.list,y=this.customSort;y===null?_.sort(s.transparent?Qj:qj):y.call(this,_,r);for(let g=0,w=_.length;g<w;g++){const S=_[g];u[v]=S.start*a,f[v]=S.count,v++}xw.reset()}else for(let _=0,y=c.length;_<y;_++)if(c[_]&&l[_]){let g=!1;if(m&&(this.getMatrixAt(_,La),this.getBoundingSphereAt(_,jl).applyMatrix4(La),g=!_w.intersectsSphere(jl)),!g){const w=p[_];u[v]=w.start*a,f[v]=w.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Or extends cr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Xe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const By=new G,Dy=new G,CP=new tt,Yh=new Kc,jg=new Dr,ww=new G,TP=new G;class To extends Vt{constructor(e=new Tt,t=new Or){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)By.fromBufferAttribute(t,i-1),Dy.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=By.distanceTo(Dy);e.setAttribute("lineDistance",new ot(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),jg.copy(r.boundingSphere),jg.applyMatrix4(i),jg.radius+=s,e.ray.intersectsSphere(jg)===!1)return;CP.copy(i).invert(),Yh.copy(e.ray).applyMatrix4(CP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const m=Math.max(0,o.start),v=Math.min(u.count,o.start+o.count);for(let _=m,y=v-1;_<y;_+=c){const g=u.getX(_),w=u.getX(_+1),S=$g(this,e,Yh,l,g,w);S&&t.push(S)}if(this.isLineLoop){const _=u.getX(v-1),y=u.getX(m),g=$g(this,e,Yh,l,_,y);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let _=m,y=v-1;_<y;_+=c){const g=$g(this,e,Yh,l,_,_+1);g&&t.push(g)}if(this.isLineLoop){const _=$g(this,e,Yh,l,v-1,m);_&&t.push(_)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function $g(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(By.fromBufferAttribute(o,i),Dy.fromBufferAttribute(o,s),t.distanceSqToSegment(By,Dy,ww,TP)>r)return;ww.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(ww);if(!(l<e.near||l>e.far))return{distance:l,point:TP.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,object:n}}const RP=new G,PP=new G;class Ys extends To{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)RP.fromBufferAttribute(t,i),PP.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+RP.distanceTo(PP);e.setAttribute("lineDistance",new ot(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vM extends To{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class T0 extends cr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Xe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const IP=new tt,Y1=new Kc,Xg=new Dr,Jg=new G;class yM extends Vt{constructor(e=new Tt,t=new T0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Xg.copy(r.boundingSphere),Xg.applyMatrix4(i),Xg.radius+=s,e.ray.intersectsSphere(Xg)===!1)return;IP.copy(i).invert(),Y1.copy(e.ray).applyMatrix4(IP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,_=m;v<_;v++){const y=c.getX(v);Jg.fromBufferAttribute(f,y),BP(Jg,y,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,_=m;v<_;v++)Jg.fromBufferAttribute(f,v),BP(Jg,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function BP(n,e,t,r,i,s,o){const a=Y1.distanceSqToPoint(n);if(a<t){const l=new G;Y1.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class i$ extends Yt{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:un,this.magFilter=s!==void 0?s:un,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class s$ extends Yt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=pr,this.minFilter=pr,this.generateMipmaps=!1,this.needsUpdate=!0}}class R0 extends Yt{constructor(e,t,r,i,s,o,a,l,c,u,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class o$ extends R0{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=On,this.layerUpdates=new Set}addLayerUpdates(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class a$ extends R0{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,bo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class l$ extends Yt{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Es{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ce:new G);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new G,i=[],s=[],o=[],a=new G,l=new tt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new G)}s[0]=new G,o[0]=new G;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Gn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Gn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class P0 extends Es{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ce){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*f+this.aX,c=p*f+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class O3 extends P0{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function _M(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+f)+(l-a)/f;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Kg=new G,Sw=new _M,Aw=new _M,Ew=new _M;class N3 extends Es{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new G){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(Kg.subVectors(i[0],i[1]).add(i[0]),c=Kg);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(Kg.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=Kg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),_=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(u),m);_<1e-4&&(_=1),v<1e-4&&(v=_),y<1e-4&&(y=_),Sw.initNonuniformCatmullRom(c.x,f.x,p.x,u.x,v,_,y),Aw.initNonuniformCatmullRom(c.y,f.y,p.y,u.y,v,_,y),Ew.initNonuniformCatmullRom(c.z,f.z,p.z,u.z,v,_,y)}else this.curveType==="catmullrom"&&(Sw.initCatmullRom(c.x,f.x,p.x,u.x,this.tension),Aw.initCatmullRom(c.y,f.y,p.y,u.y,this.tension),Ew.initCatmullRom(c.z,f.z,p.z,u.z,this.tension));return r.set(Sw.calc(l),Aw.calc(l),Ew.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new G().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function DP(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function c$(n,e){const t=1-n;return t*t*e}function u$(n,e){return 2*(1-n)*n*e}function f$(n,e){return n*n*e}function Bd(n,e,t,r){return c$(n,e)+u$(n,t)+f$(n,r)}function h$(n,e){const t=1-n;return t*t*t*e}function d$(n,e){const t=1-n;return 3*t*t*n*e}function p$(n,e){return 3*(1-n)*n*n*e}function m$(n,e){return n*n*n*e}function Dd(n,e,t,r,i){return h$(n,e)+d$(n,t)+p$(n,r)+m$(n,i)}class xM extends Es{constructor(e=new Ce,t=new Ce,r=new Ce,i=new Ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ce){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Dd(e,i.x,s.x,o.x,a.x),Dd(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k3 extends Es{constructor(e=new G,t=new G,r=new G,i=new G){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new G){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Dd(e,i.x,s.x,o.x,a.x),Dd(e,i.y,s.y,o.y,a.y),Dd(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class wM extends Es{constructor(e=new Ce,t=new Ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ce){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ce){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class F3 extends Es{constructor(e=new G,t=new G){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new G){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new G){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SM extends Es{constructor(e=new Ce,t=new Ce,r=new Ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ce){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Bd(e,i.x,s.x,o.x),Bd(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AM extends Es{constructor(e=new G,t=new G,r=new G){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new G){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Bd(e,i.x,s.x,o.x),Bd(e,i.y,s.y,o.y),Bd(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EM extends Es{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ce){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(DP(a,l.x,c.x,u.x,f.x),DP(a,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ce().fromArray(i))}return this}}var Ly=Object.freeze({__proto__:null,ArcCurve:O3,CatmullRomCurve3:N3,CubicBezierCurve:xM,CubicBezierCurve3:k3,EllipseCurve:P0,LineCurve:wM,LineCurve3:F3,QuadraticBezierCurve:SM,QuadraticBezierCurve3:AM,SplineCurve:EM});class U3 extends Es{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Ly[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new Ly[i.type]().fromJSON(i))}return this}}class pp extends U3{constructor(e){super(),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new wM(this.currentPoint.clone(),new Ce(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new SM(this.currentPoint.clone(),new Ce(e,t),new Ce(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new xM(this.currentPoint.clone(),new Ce(e,t),new Ce(r,i),new Ce(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new EM(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new P0(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gp extends Tt{constructor(e=[new Ce(0,-.5),new Ce(.5,0),new Ce(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Gn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new G,p=new Ce,m=new G,v=new G,_=new G;let y=0,g=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-y,m.z=g*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-y,m.z=g*0,v.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(v)}for(let w=0;w<=t;w++){const S=r+w*u*i,E=Math.sin(S),P=Math.cos(S);for(let b=0;b<=e.length-1;b++){f.x=e[b].x*E,f.y=e[b].y,f.z=e[b].x*P,o.push(f.x,f.y,f.z),p.x=w/t,p.y=b/(e.length-1),a.push(p.x,p.y);const R=l[3*b+0]*E,L=l[3*b+1],I=l[3*b+0]*P;c.push(R,L,I)}}for(let w=0;w<t;w++)for(let S=0;S<e.length-1;S++){const E=S+w*e.length,P=E,b=E+e.length,R=E+e.length+1,L=E+1;s.push(P,b,L),s.push(R,L,b)}this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("uv",new ot(a,2)),this.setAttribute("normal",new ot(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gp(e.points,e.segments,e.phiStart,e.phiLength)}}class I0 extends Gp{constructor(e=1,t=1,r=4,i=8){const s=new pp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new I0(e.radius,e.length,e.capSegments,e.radialSegments)}}class B0 extends Tt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new G,u=new Ce;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=r+f/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("normal",new ot(a,3)),this.setAttribute("uv",new ot(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Zf extends Tt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],p=[],m=[];let v=0;const _=[],y=r/2;let g=0;w(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function w(){const E=new G,P=new G;let b=0;const R=(t-e)/r;for(let L=0;L<=s;L++){const I=[],C=L/s,O=C*(t-e)+e;for(let V=0;V<=i;V++){const $=V/i,Q=$*l+a,ie=Math.sin(Q),ee=Math.cos(Q);P.x=O*ie,P.y=-C*r+y,P.z=O*ee,f.push(P.x,P.y,P.z),E.set(ie,R,ee).normalize(),p.push(E.x,E.y,E.z),m.push($,1-C),I.push(v++)}_.push(I)}for(let L=0;L<i;L++)for(let I=0;I<s;I++){const C=_[I][L],O=_[I+1][L],V=_[I+1][L+1],$=_[I][L+1];u.push(C,O,$),u.push(O,V,$),b+=6}c.addGroup(g,b,0),g+=b}function S(E){const P=v,b=new Ce,R=new G;let L=0;const I=E===!0?e:t,C=E===!0?1:-1;for(let V=1;V<=i;V++)f.push(0,y*C,0),p.push(0,C,0),m.push(.5,.5),v++;const O=v;for(let V=0;V<=i;V++){const Q=V/i*l+a,ie=Math.cos(Q),ee=Math.sin(Q);R.x=I*ee,R.y=y*C,R.z=I*ie,f.push(R.x,R.y,R.z),p.push(0,C,0),b.x=ie*.5+.5,b.y=ee*.5*C+.5,m.push(b.x,b.y),v++}for(let V=0;V<i;V++){const $=P+V,Q=O+V;E===!0?u.push(Q,Q+1,$):u.push(Q+1,Q,$),L+=3}c.addGroup(g,L,E===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class D0 extends Zf{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new D0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ml extends Tt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const S=new G,E=new G,P=new G;for(let b=0;b<t.length;b+=3)m(t[b+0],S),m(t[b+1],E),m(t[b+2],P),l(S,E,P,w)}function l(w,S,E,P){const b=P+1,R=[];for(let L=0;L<=b;L++){R[L]=[];const I=w.clone().lerp(E,L/b),C=S.clone().lerp(E,L/b),O=b-L;for(let V=0;V<=O;V++)V===0&&L===b?R[L][V]=I:R[L][V]=I.clone().lerp(C,V/O)}for(let L=0;L<b;L++)for(let I=0;I<2*(b-L)-1;I++){const C=Math.floor(I/2);I%2===0?(p(R[L][C+1]),p(R[L+1][C]),p(R[L][C])):(p(R[L][C+1]),p(R[L+1][C+1]),p(R[L+1][C]))}}function c(w){const S=new G;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(w),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function u(){const w=new G;for(let S=0;S<s.length;S+=3){w.x=s[S+0],w.y=s[S+1],w.z=s[S+2];const E=y(w)/2/Math.PI+.5,P=g(w)/Math.PI+.5;o.push(E,1-P)}v(),f()}function f(){for(let w=0;w<o.length;w+=6){const S=o[w+0],E=o[w+2],P=o[w+4],b=Math.max(S,E,P),R=Math.min(S,E,P);b>.9&&R<.1&&(S<.2&&(o[w+0]+=1),E<.2&&(o[w+2]+=1),P<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function m(w,S){const E=w*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function v(){const w=new G,S=new G,E=new G,P=new G,b=new Ce,R=new Ce,L=new Ce;for(let I=0,C=0;I<s.length;I+=9,C+=6){w.set(s[I+0],s[I+1],s[I+2]),S.set(s[I+3],s[I+4],s[I+5]),E.set(s[I+6],s[I+7],s[I+8]),b.set(o[C+0],o[C+1]),R.set(o[C+2],o[C+3]),L.set(o[C+4],o[C+5]),P.copy(w).add(S).add(E).divideScalar(3);const O=y(P);_(b,C+0,w,O),_(R,C+2,S,O),_(L,C+4,E,O)}}function _(w,S,E,P){P<0&&w.x===1&&(o[S]=w.x-1),E.x===0&&E.z===0&&(o[S]=P/2/Math.PI+.5)}function y(w){return Math.atan2(w.z,-w.x)}function g(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ml(e.vertices,e.indices,e.radius,e.details)}}class L0 extends Ml{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new L0(e.radius,e.detail)}}const Yg=new G,qg=new G,Mw=new G,Qg=new Vi;class z3 extends Tt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Ec*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:_,b:y,c:g}=Qg;if(_.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Qg.getNormal(Mw),f[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let w=0;w<3;w++){const S=(w+1)%3,E=f[w],P=f[S],b=Qg[u[w]],R=Qg[u[S]],L=`${E}_${P}`,I=`${P}_${E}`;I in p&&p[I]?(Mw.dot(p[I].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(R.x,R.y,R.z)),p[I]=null):L in p||(p[L]={index0:c[w],index1:c[S],normal:Mw.clone()})}}for(const v in p)if(p[v]){const{index0:_,index1:y}=p[v];Yg.fromBufferAttribute(a,_),qg.fromBufferAttribute(a,y),m.push(Yg.x,Yg.y,Yg.z),m.push(qg.x,qg.y,qg.z)}this.setAttribute("position",new ot(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class bc extends pp{constructor(e){super(e),this.uuid=$i(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new pp().fromJSON(i))}return this}}const g$={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=H3(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,p,m;if(r&&(s=w$(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let v=t;v<i;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return mp(s,o,t,a,l,m,0),o}};function H3(n,e,t,r,i){let s,o;if(i===B$(n,e,t,r)>0)for(s=e;s<t;s+=r)o=LP(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=LP(s,n[s],n[s+1],o);return o&&O0(o,o.next)&&(vp(o),o=o.next),o}function Uc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(O0(t,t.next)||Ln(t.prev,t,t.next)===0)){if(vp(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function mp(n,e,t,r,i,s,o){if(!n)return;!o&&s&&b$(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?y$(n,r,i,s):v$(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),vp(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=_$(Uc(n),e,t),mp(n,e,t,r,i,s,2)):o===2&&x$(n,e,t,r,i,s):mp(Uc(n),e,t,r,i,s,1);break}}}function v$(n){const e=n.prev,t=n,r=n.next;if(Ln(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=p&&v.y>=f&&v.y<=m&&cf(i,a,s,l,o,c,v.x,v.y)&&Ln(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function y$(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Ln(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=u<f?u<p?u:p:f<p?f:p,_=a>l?a>c?a:c:l>c?l:c,y=u>f?u>p?u:p:f>p?f:p,g=q1(m,v,e,t,r),w=q1(_,y,e,t,r);let S=n.prevZ,E=n.nextZ;for(;S&&S.z>=g&&E&&E.z<=w;){if(S.x>=m&&S.x<=_&&S.y>=v&&S.y<=y&&S!==i&&S!==o&&cf(a,u,l,f,c,p,S.x,S.y)&&Ln(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=m&&E.x<=_&&E.y>=v&&E.y<=y&&E!==i&&E!==o&&cf(a,u,l,f,c,p,E.x,E.y)&&Ln(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=_&&S.y>=v&&S.y<=y&&S!==i&&S!==o&&cf(a,u,l,f,c,p,S.x,S.y)&&Ln(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=w;){if(E.x>=m&&E.x<=_&&E.y>=v&&E.y<=y&&E!==i&&E!==o&&cf(a,u,l,f,c,p,E.x,E.y)&&Ln(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function _$(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!O0(i,s)&&G3(i,r,r.next,s)&&gp(i,s)&&gp(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),vp(r),vp(r.next),r=n=s),r=r.next}while(r!==n);return Uc(r)}function x$(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&R$(o,a)){let l=V3(o,a);o=Uc(o,o.next),l=Uc(l,l.next),mp(o,e,t,r,i,s,0),mp(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function w$(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=H3(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(T$(c));for(i.sort(S$),s=0;s<i.length;s++)t=A$(i[s],t);return t}function S$(n,e){return n.x-e.x}function A$(n,e){const t=E$(n,e);if(!t)return e;const r=V3(t,n);return Uc(r,r.next),Uc(t,t.next)}function E$(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&cf(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),gp(t,n)&&(f<u||f===u&&(t.x>i.x||t.x===i.x&&M$(i,t)))&&(i=t,u=f)),t=t.next;while(t!==a);return i}function M$(n,e){return Ln(n.prev,n,e.prev)<0&&Ln(e.next,n,n.next)<0}function b$(n,e,t,r){let i=n;do i.z===0&&(i.z=q1(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,C$(i)}function C$(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function q1(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function T$(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function cf(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function R$(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!P$(n,e)&&(gp(n,e)&&gp(e,n)&&I$(n,e)&&(Ln(n.prev,n,e.prev)||Ln(n,e.prev,e))||O0(n,e)&&Ln(n.prev,n,n.next)>0&&Ln(e.prev,e,e.next)>0)}function Ln(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function O0(n,e){return n.x===e.x&&n.y===e.y}function G3(n,e,t,r){const i=ev(Ln(n,e,t)),s=ev(Ln(n,e,r)),o=ev(Ln(t,r,n)),a=ev(Ln(t,r,e));return!!(i!==s&&o!==a||i===0&&Zg(n,t,e)||s===0&&Zg(n,r,e)||o===0&&Zg(t,n,r)||a===0&&Zg(t,e,r))}function Zg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ev(n){return n>0?1:n<0?-1:0}function P$(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&G3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function gp(n,e){return Ln(n.prev,n,n.next)<0?Ln(n,e,n.next)>=0&&Ln(n,n.prev,e)>=0:Ln(n,e,n.prev)<0||Ln(n,n.next,e)<0}function I$(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function V3(n,e){const t=new Q1(n.i,n.x,n.y),r=new Q1(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function LP(n,e,t,r){const i=new Q1(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function vp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Q1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B$(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Eo{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Eo.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];OP(e),NP(r,e);let o=e.length;t.forEach(OP);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,NP(r,t[l]);const a=g$.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function OP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function NP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class N0 extends Tt{constructor(e=new bc([new Ce(.5,.5),new Ce(-.5,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ot(i,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:D$;let S,E=!1,P,b,R,L;g&&(S=g.getSpacedPoints(u),E=!0,p=!1,P=g.computeFrenetFrames(u,!1),b=new G,R=new G,L=new G),p||(y=0,m=0,v=0,_=0);const I=a.extractPoints(c);let C=I.shape;const O=I.holes;if(!Eo.isClockWise(C)){C=C.reverse();for(let Ie=0,Se=O.length;Ie<Se;Ie++){const Ne=O[Ie];Eo.isClockWise(Ne)&&(O[Ie]=Ne.reverse())}}const $=Eo.triangulateShape(C,O),Q=C;for(let Ie=0,Se=O.length;Ie<Se;Ie++){const Ne=O[Ie];C=C.concat(Ne)}function ie(Ie,Se,Ne){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ie.clone().addScaledVector(Se,Ne)}const ee=C.length,fe=$.length;function k(Ie,Se,Ne){let Le,Oe,qe;const Ye=Ie.x-Se.x,xt=Ie.y-Se.y,J=Ne.x-Ie.x,U=Ne.y-Ie.y,pe=Ye*Ye+xt*xt,le=Ye*U-xt*J;if(Math.abs(le)>Number.EPSILON){const de=Math.sqrt(pe),Re=Math.sqrt(J*J+U*U),Qe=Se.x-xt/de,ze=Se.y+Ye/de,Je=Ne.x-U/Re,yt=Ne.y+J/Re,Fe=((Je-Qe)*U-(yt-ze)*J)/(Ye*U-xt*J);Le=Qe+Ye*Fe-Ie.x,Oe=ze+xt*Fe-Ie.y;const it=Le*Le+Oe*Oe;if(it<=2)return new Ce(Le,Oe);qe=Math.sqrt(it/2)}else{let de=!1;Ye>Number.EPSILON?J>Number.EPSILON&&(de=!0):Ye<-Number.EPSILON?J<-Number.EPSILON&&(de=!0):Math.sign(xt)===Math.sign(U)&&(de=!0),de?(Le=-xt,Oe=Ye,qe=Math.sqrt(pe)):(Le=Ye,Oe=xt,qe=Math.sqrt(pe/2))}return new Ce(Le/qe,Oe/qe)}const Y=[];for(let Ie=0,Se=Q.length,Ne=Se-1,Le=Ie+1;Ie<Se;Ie++,Ne++,Le++)Ne===Se&&(Ne=0),Le===Se&&(Le=0),Y[Ie]=k(Q[Ie],Q[Ne],Q[Le]);const Z=[];let ae,ye=Y.concat();for(let Ie=0,Se=O.length;Ie<Se;Ie++){const Ne=O[Ie];ae=[];for(let Le=0,Oe=Ne.length,qe=Oe-1,Ye=Le+1;Le<Oe;Le++,qe++,Ye++)qe===Oe&&(qe=0),Ye===Oe&&(Ye=0),ae[Le]=k(Ne[Le],Ne[qe],Ne[Ye]);Z.push(ae),ye=ye.concat(ae)}for(let Ie=0;Ie<y;Ie++){const Se=Ie/y,Ne=m*Math.cos(Se*Math.PI/2),Le=v*Math.sin(Se*Math.PI/2)+_;for(let Oe=0,qe=Q.length;Oe<qe;Oe++){const Ye=ie(Q[Oe],Y[Oe],Le);Be(Ye.x,Ye.y,-Ne)}for(let Oe=0,qe=O.length;Oe<qe;Oe++){const Ye=O[Oe];ae=Z[Oe];for(let xt=0,J=Ye.length;xt<J;xt++){const U=ie(Ye[xt],ae[xt],Le);Be(U.x,U.y,-Ne)}}}const Ue=v+_;for(let Ie=0;Ie<ee;Ie++){const Se=p?ie(C[Ie],ye[Ie],Ue):C[Ie];E?(R.copy(P.normals[0]).multiplyScalar(Se.x),b.copy(P.binormals[0]).multiplyScalar(Se.y),L.copy(S[0]).add(R).add(b),Be(L.x,L.y,L.z)):Be(Se.x,Se.y,0)}for(let Ie=1;Ie<=u;Ie++)for(let Se=0;Se<ee;Se++){const Ne=p?ie(C[Se],ye[Se],Ue):C[Se];E?(R.copy(P.normals[Ie]).multiplyScalar(Ne.x),b.copy(P.binormals[Ie]).multiplyScalar(Ne.y),L.copy(S[Ie]).add(R).add(b),Be(L.x,L.y,L.z)):Be(Ne.x,Ne.y,f/u*Ie)}for(let Ie=y-1;Ie>=0;Ie--){const Se=Ie/y,Ne=m*Math.cos(Se*Math.PI/2),Le=v*Math.sin(Se*Math.PI/2)+_;for(let Oe=0,qe=Q.length;Oe<qe;Oe++){const Ye=ie(Q[Oe],Y[Oe],Le);Be(Ye.x,Ye.y,f+Ne)}for(let Oe=0,qe=O.length;Oe<qe;Oe++){const Ye=O[Oe];ae=Z[Oe];for(let xt=0,J=Ye.length;xt<J;xt++){const U=ie(Ye[xt],ae[xt],Le);E?Be(U.x,U.y+S[u-1].y,S[u-1].x+Ne):Be(U.x,U.y,f+Ne)}}}he(),Te();function he(){const Ie=i.length/3;if(p){let Se=0,Ne=ee*Se;for(let Le=0;Le<fe;Le++){const Oe=$[Le];at(Oe[2]+Ne,Oe[1]+Ne,Oe[0]+Ne)}Se=u+y*2,Ne=ee*Se;for(let Le=0;Le<fe;Le++){const Oe=$[Le];at(Oe[0]+Ne,Oe[1]+Ne,Oe[2]+Ne)}}else{for(let Se=0;Se<fe;Se++){const Ne=$[Se];at(Ne[2],Ne[1],Ne[0])}for(let Se=0;Se<fe;Se++){const Ne=$[Se];at(Ne[0]+ee*u,Ne[1]+ee*u,Ne[2]+ee*u)}}r.addGroup(Ie,i.length/3-Ie,0)}function Te(){const Ie=i.length/3;let Se=0;Me(Q,Se),Se+=Q.length;for(let Ne=0,Le=O.length;Ne<Le;Ne++){const Oe=O[Ne];Me(Oe,Se),Se+=Oe.length}r.addGroup(Ie,i.length/3-Ie,1)}function Me(Ie,Se){let Ne=Ie.length;for(;--Ne>=0;){const Le=Ne;let Oe=Ne-1;Oe<0&&(Oe=Ie.length-1);for(let qe=0,Ye=u+y*2;qe<Ye;qe++){const xt=ee*qe,J=ee*(qe+1),U=Se+Le+xt,pe=Se+Oe+xt,le=Se+Oe+J,de=Se+Le+J;wt(U,pe,le,de)}}}function Be(Ie,Se,Ne){l.push(Ie),l.push(Se),l.push(Ne)}function at(Ie,Se,Ne){mt(Ie),mt(Se),mt(Ne);const Le=i.length/3,Oe=w.generateTopUV(r,i,Le-3,Le-2,Le-1);te(Oe[0]),te(Oe[1]),te(Oe[2])}function wt(Ie,Se,Ne,Le){mt(Ie),mt(Se),mt(Le),mt(Se),mt(Ne),mt(Le);const Oe=i.length/3,qe=w.generateSideWallUV(r,i,Oe-6,Oe-3,Oe-2,Oe-1);te(qe[0]),te(qe[1]),te(qe[3]),te(qe[1]),te(qe[2]),te(qe[3])}function mt(Ie){i.push(l[Ie*3+0]),i.push(l[Ie*3+1]),i.push(l[Ie*3+2])}function te(Ie){s.push(Ie.x),s.push(Ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return L$(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Ly[i.type]().fromJSON(i)),new N0(r,e.options)}}const D$={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Ce(s,o),new Ce(a,l),new Ce(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],_=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ce(o,1-l),new Ce(c,1-f),new Ce(p,1-v),new Ce(_,1-g)]:[new Ce(a,1-l),new Ce(u,1-f),new Ce(m,1-v),new Ce(y,1-g)]}};function L$(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Vp extends Ml{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vp(e.radius,e.detail)}}class Wp extends Ml{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wp(e.radius,e.detail)}}class k0 extends Tt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let f=e;const p=(t-e)/i,m=new G,v=new Ce;for(let _=0;_<=i;_++){for(let y=0;y<=r;y++){const g=s+y/r*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,u.push(v.x,v.y)}f+=p}for(let _=0;_<i;_++){const y=_*(r+1);for(let g=0;g<r;g++){const w=g+y,S=w,E=w+r+1,P=w+r+2,b=w+1;a.push(S,E,b),a.push(E,P,b)}}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class F0 extends Tt{constructor(e=new bc([new Ce(0,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new ot(i,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(o,2));function c(u){const f=i.length/3,p=u.extractPoints(t);let m=p.shape;const v=p.holes;Eo.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,g=v.length;y<g;y++){const w=v[y];Eo.isClockWise(w)===!0&&(v[y]=w.reverse())}const _=Eo.triangulateShape(m,v);for(let y=0,g=v.length;y<g;y++){const w=v[y];m=m.concat(w)}for(let y=0,g=m.length;y<g;y++){const w=m[y];i.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let y=0,g=_.length;y<g;y++){const w=_[y],S=w[0]+f,E=w[1]+f,P=w[2]+f;r.push(S,E,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return O$(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new F0(r,e.curveSegments)}}function O$(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class jp extends Tt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new G,p=new G,m=[],v=[],_=[],y=[];for(let g=0;g<=r;g++){const w=[],S=g/r;let E=0;g===0&&o===0?E=.5/t:g===r&&l===Math.PI&&(E=-.5/t);for(let P=0;P<=t;P++){const b=P/t;f.x=-e*Math.cos(i+b*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+b*s)*Math.sin(o+S*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),_.push(p.x,p.y,p.z),y.push(b+E,1-S),w.push(c++)}u.push(w)}for(let g=0;g<r;g++)for(let w=0;w<t;w++){const S=u[g][w+1],E=u[g][w],P=u[g+1][w],b=u[g+1][w+1];(g!==0||o>0)&&m.push(S,E,b),(g!==r-1||l<Math.PI)&&m.push(E,P,b)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(_,3)),this.setAttribute("uv",new ot(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class U0 extends Ml{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new U0(e.radius,e.detail)}}class z0 extends Tt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new G,f=new G,p=new G;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const _=v/i*s,y=m/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(_),f.y=(e+t*Math.cos(y))*Math.sin(_),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),p.subVectors(f,u).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const _=(i+1)*m+v-1,y=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,w=(i+1)*m+v;o.push(_,y,w),o.push(y,g,w)}this.setIndex(o),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class H0 extends Tt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],f=new G,p=new G,m=new G,v=new G,_=new G,y=new G,g=new G;for(let S=0;S<=r;++S){const E=S/r*s*Math.PI*2;w(E,s,o,e,m),w(E+.01,s,o,e,v),y.subVectors(v,m),g.addVectors(v,m),_.crossVectors(y,g),g.crossVectors(_,y),_.normalize(),g.normalize();for(let P=0;P<=i;++P){const b=P/i*Math.PI*2,R=-t*Math.cos(b),L=t*Math.sin(b);f.x=m.x+(R*g.x+L*_.x),f.y=m.y+(R*g.y+L*_.y),f.z=m.z+(R*g.z+L*_.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),u.push(S/r),u.push(P/i)}}for(let S=1;S<=r;S++)for(let E=1;E<=i;E++){const P=(i+1)*(S-1)+(E-1),b=(i+1)*S+(E-1),R=(i+1)*S+E,L=(i+1)*(S-1)+E;a.push(P,b,L),a.push(b,R,L)}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(u,2));function w(S,E,P,b,R){const L=Math.cos(S),I=Math.sin(S),C=P/E*S,O=Math.cos(C);R.x=b*(2+O)*.5*L,R.y=b*(2+O)*I*.5,R.z=b*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class G0 extends Tt{constructor(e=new AM(new G(-1,-1,0),new G(-1,1,0),new G(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new G,l=new G,c=new Ce;let u=new G;const f=[],p=[],m=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function _(){for(let S=0;S<t;S++)y(S);y(s===!1?t:0),w(),g()}function y(S){u=e.getPointAt(S/t,u);const E=o.normals[S],P=o.binormals[S];for(let b=0;b<=i;b++){const R=b/i*Math.PI*2,L=Math.sin(R),I=-Math.cos(R);l.x=I*E.x+L*P.x,l.y=I*E.y+L*P.y,l.z=I*E.z+L*P.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let E=1;E<=i;E++){const P=(i+1)*(S-1)+(E-1),b=(i+1)*S+(E-1),R=(i+1)*S+E,L=(i+1)*(S-1)+E;v.push(P,b,L),v.push(b,R,L)}}function w(){for(let S=0;S<=t;S++)for(let E=0;E<=i;E++)c.x=S/t,c.y=E/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new G0(new Ly[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class W3 extends Tt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new G,s=new G;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,_=p+m;v<_;v+=3)for(let y=0;y<3;y++){const g=a.getX(v+y),w=a.getX(v+(y+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,w),kP(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),kP(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kP(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var FP=Object.freeze({__proto__:null,BoxGeometry:Yc,CapsuleGeometry:I0,CircleGeometry:B0,ConeGeometry:D0,CylinderGeometry:Zf,DodecahedronGeometry:L0,EdgesGeometry:z3,ExtrudeGeometry:N0,IcosahedronGeometry:Vp,LatheGeometry:Gp,OctahedronGeometry:Wp,PlaneGeometry:El,PolyhedronGeometry:Ml,RingGeometry:k0,ShapeGeometry:F0,SphereGeometry:jp,TetrahedronGeometry:U0,TorusGeometry:z0,TorusKnotGeometry:H0,TubeGeometry:G0,WireframeGeometry:W3});class j3 extends cr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Xe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class $3 extends Bi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class sl extends cr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Xe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ar,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ms extends sl{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Xe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Xe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Xe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Ld extends cr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Xe(16777215),this.specular=new Xe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ar,this.combine=Np,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X3 extends cr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Xe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class J3 extends cr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class MM extends cr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ar,this.combine=Np,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class K3 extends cr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Xe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Y3 extends Or{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function q3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Q3(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function Z1(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function bM(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function N$(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){f.push(c.times[m]);for(let _=0;_<u;++_)p.push(c.values[m*u+_])}}f.length!==0&&(c.times=gc(f,c.times.constructor),c.values=gc(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function k$(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let _;if(s<=a.times[0]){const g=u,w=f-u;_=a.values.slice(g,w)}else if(s>=a.times[v]){const g=v*f+u,w=g+f-u;_=a.values.slice(g,w)}else{const g=a.createInterpolant(),w=u,S=f-u;g.evaluate(s),_=g.resultBuffer.slice(w,S)}l==="quaternion"&&new Wn().fromArray(_).normalize().conjugate().toArray(_);const y=c.times.length;for(let g=0;g<y;++g){const w=g*m+p;if(l==="quaternion")Wn.multiplyQuaternionsFlat(c.values,w,_,0,c.values,w);else{const S=m-p*2;for(let E=0;E<S;++E)c.values[w+E]-=_[E]}}}return n.blendMode=nM,n}const F$={convertArray:gc,isTypedArray:q3,getKeyframeOrder:Q3,sortedArray:Z1,flattenJSON:bM,subclip:N$,makeClipAdditive:k$};class eh{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Z3 extends eh{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:hc,endingEnd:hc}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case dc:s=e,a=2*t-r;break;case ap:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case dc:o=e,l=2*r-t;break;case ap:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),_=v*v,y=_*v,g=-p*y+2*p*_-p*v,w=(1+p)*y+(-1.5-2*p)*_+(-.5+p)*v+1,S=(-1-m)*y+(1.5+m)*_+.5*v,E=m*y-m*_;for(let P=0;P!==a;++P)s[P]=g*o[u+P]+w*o[c+P]+S*o[l+P]+E*o[f+P];return s}}class CM extends eh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*u;return s}}class eN extends eh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class qs{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gc(t,this.TimeBufferType),this.values=gc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:gc(e.times,Array),values:gc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new eN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new CM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Z3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bf:t=this.InterpolantFactoryMethodDiscrete;break;case Df:t=this.InterpolantFactoryMethodLinear;break;case Wv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bf;case this.InterpolantFactoryMethodLinear:return Df;case this.InterpolantFactoryMethodSmooth:return Wv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&q3(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Wv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let v=0;v!==r;++v){const _=t[f+v];if(_!==t[p+v]||_!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}qs.prototype.TimeBufferType=Float32Array;qs.prototype.ValueBufferType=Float32Array;qs.prototype.DefaultInterpolation=Df;class qc extends qs{constructor(e,t,r){super(e,t,r)}}qc.prototype.ValueTypeName="bool";qc.prototype.ValueBufferType=Array;qc.prototype.DefaultInterpolation=Bf;qc.prototype.InterpolantFactoryMethodLinear=void 0;qc.prototype.InterpolantFactoryMethodSmooth=void 0;class TM extends qs{}TM.prototype.ValueTypeName="color";class hl extends qs{}hl.prototype.ValueTypeName="number";class tN extends eh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Wn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class dl extends qs{InterpolantFactoryMethodLinear(e){return new tN(this.times,this.values,this.getValueSize(),e)}}dl.prototype.ValueTypeName="quaternion";dl.prototype.InterpolantFactoryMethodSmooth=void 0;class Qc extends qs{constructor(e,t,r){super(e,t,r)}}Qc.prototype.ValueTypeName="string";Qc.prototype.ValueBufferType=Array;Qc.prototype.DefaultInterpolation=Bf;Qc.prototype.InterpolantFactoryMethodLinear=void 0;Qc.prototype.InterpolantFactoryMethodSmooth=void 0;class pl extends qs{}pl.prototype.ValueTypeName="vector";class zc{constructor(e="",t=-1,r=[],i=x0){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=$i(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(z$(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(qs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Q3(l);l=Z1(l,1,u),c=Z1(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new hl(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let p=i[f];p||(i[f]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,v,_){if(m.length!==0){const y=[],g=[];bM(m,y,g,v),y.length!==0&&_.push(new f(p,y,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let _=0;_<p[v].morphTargets.length;_++)m[p[v].morphTargets[_]]=-1;for(const _ in m){const y=[],g=[];for(let w=0;w!==p[v].morphTargets.length;++w){const S=p[v];y.push(S.time),g.push(S.morphTarget===_?1:0)}i.push(new hl(".morphTargetInfluence["+_+"]",y,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(pl,m+".position",p,"pos",i),r(dl,m+".quaternion",p,"rot",i),r(pl,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function U$(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hl;case"vector":case"vector2":case"vector3":case"vector4":return pl;case"color":return TM;case"quaternion":return dl;case"bool":case"boolean":return qc;case"string":return Qc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function z$(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=U$(n.type);if(n.times===void 0){const t=[],r=[];bM(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ia={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class V0{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null}}}const nN=new V0;class br{constructor(e){this.manager=e!==void 0?e:nN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}br.DEFAULT_MATERIAL_NAME="__DEFAULT";const $o={};class H$ extends Error{constructor(e,t){super(e),this.response=t}}class Mr extends br{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ia.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if($o[e]!==void 0){$o[e].push({onLoad:t,onProgress:r,onError:i});return}$o[e]=[],$o[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=$o[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let _=0;const y=new ReadableStream({start(g){w();function w(){f.read().then(({done:S,value:E})=>{if(S)g.close();else{_+=E.byteLength;const P=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:m});for(let b=0,R=u.length;b<R;b++){const L=u[b];L.onProgress&&L.onProgress(P)}g.enqueue(E),w()}},S=>{g.error(S)})}}});return new Response(y)}else throw new H$(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{ia.add(e,c);const u=$o[e];delete $o[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=$o[e];if(u===void 0)throw this.manager.itemError(e),c;delete $o[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class G$ extends br{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=zc.parse(e[r]);t.push(i)}return t}}class V$ extends br{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new R0,l=new Mr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=un),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)u(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+_]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=un),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class yp extends br{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ia.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=dp("img");function l(){u(),ia.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class rN extends br{constructor(e){super(e)}load(e,t,r,i){const s=new Up;s.colorSpace=Hi;const o=new yp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class RM extends br{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ao,a=new Mr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:On,o.wrapT=c.wrapT!==void 0?c.wrapT:On,o.magFilter=c.magFilter!==void 0?c.magFilter:un,o.minFilter=c.minFilter!==void 0?c.minFilter:un,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=gs),c.mipmapCount===1&&(o.minFilter=un),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class th extends br{constructor(e){super(e)}load(e,t,r,i){const s=new Yt,o=new yp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class bl extends Vt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Xe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class iN extends bl{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Xe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const bw=new tt,UP=new G,zP=new G;class PM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.map=null,this.mapPass=null,this.matrix=new tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new zp,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;UP.setFromMatrixPosition(e.matrixWorld),t.position.copy(UP),zP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zP),t.updateMatrixWorld(),bw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bw),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(bw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class W$ extends PM{constructor(){super(new Rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Lf*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class W0 extends bl{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new W$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const HP=new tt,qh=new G,Cw=new G;class j$ extends PM{constructor(){super(new Rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ce(4,2),this._viewportCount=6,this._viewports=[new rn(2,1,1,1),new rn(0,1,1,1),new rn(3,1,1,1),new rn(1,1,1,1),new rn(3,0,1,1),new rn(1,0,1,1)],this._cubeDirections=[new G(1,0,0),new G(-1,0,0),new G(0,0,1),new G(0,0,-1),new G(0,1,0),new G(0,-1,0)],this._cubeUps=[new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,0,1),new G(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),qh.setFromMatrixPosition(e.matrixWorld),r.position.copy(qh),Cw.copy(r.position),Cw.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Cw),r.updateMatrixWorld(),i.makeTranslation(-qh.x,-qh.y,-qh.z),HP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HP)}}class _p extends bl{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new j$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class $$ extends PM{constructor(){super(new vs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class j0 extends bl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.shadow=new $$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class IM extends bl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sN extends bl{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class oN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new G)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class aN extends bl{constructor(e=new oN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class $0 extends br{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Mr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=$0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Xe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Xe().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ce().fromArray(o.value);break;case"v3":i.uniforms[s].value=new G().fromArray(o.value);break;case"v4":i.uniforms[s].value=new rn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Lt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new tt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ce().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ce().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:j3,SpriteMaterial:mM,RawShaderMaterial:$3,ShaderMaterial:Bi,PointsMaterial:T0,MeshPhysicalMaterial:Ms,MeshStandardMaterial:sl,MeshPhongMaterial:Ld,MeshToonMaterial:X3,MeshNormalMaterial:J3,MeshLambertMaterial:MM,MeshDepthMaterial:hM,MeshDistanceMaterial:dM,MeshBasicMaterial:bi,MeshMatcapMaterial:K3,LineDashedMaterial:Y3,LineBasicMaterial:Or,Material:cr};return new t[e]}}class oa{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class lN extends Tt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class cN extends br{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],g=s(m,y.buffer),w=af(y.type,g),S=new Hp(w,y.stride);return S.uuid=y.uuid,t[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const y=m.arrayBuffers[v],g=new Uint32Array(y).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new lN:new Tt,a=e.data.index;if(a!==void 0){const m=af(a.type,a.array);o.setIndex(new tn(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let _;if(v.isInterleavedBufferAttribute){const y=i(e.data,v.data);_=new fl(y,v.itemSize,v.offset,v.normalized)}else{const y=af(v.type,v.array),g=v.isInstancedBufferAttribute?Fc:tn;_=new g(y,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),o.setAttribute(m,_)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],_=[];for(let y=0,g=v.length;y<g;y++){const w=v[y];let S;if(w.isInterleavedBufferAttribute){const E=i(e.data,w.data);S=new fl(E,w.itemSize,w.offset,w.normalized)}else{const E=af(w.type,w.array);S=new tn(E,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),_.push(S)}o.morphAttributes[m]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const _=f[m];o.addGroup(_.start,_.count,_.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new G;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Dr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class X$ extends br{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?oa.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Mr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?oa.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Mr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new bc().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Qf().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new cN;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in FP?a=FP[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new $0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=zc.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:af(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new V0(t);s=new yp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,_=p.length;v<_;v++){const y=p[v],g=a(y);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Ao(g.data,g.width,g.height)))}i[f.uuid]=new pc(m)}else{const m=a(f.url);i[f.uuid]=new pc(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:af(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new yp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new Ao(v.data,v.width,v.height)))}r[l.uuid]=new pc(u)}else{const u=await s(l.url);r[l.uuid]=new pc(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Up,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Ao:u=new Yt,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,J$)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],GP),u.wrapT=r(a.wrap[1],GP)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,VP)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,VP)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,_=p.length;v<_;v++){const y=p[v];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,f;switch(e.type){case"Scene":o=new Nf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Xe(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new b0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new M0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new vs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new IM(e.color,e.intensity);break;case"DirectionalLight":o=new j0(e.color,e.intensity);break;case"PointLight":o=new _p(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new sN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new W0(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new iN(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new aN().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new C0(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new bn(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new gM(u,f,p),o.instanceMatrix=new Fc(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Fc(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new L3(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(_=>{const y=new Yr;y.min.fromArray(_.boxMin),y.max.fromArray(_.boxMax);const g=new Dr;return g.radius=_.sphereRadius,g.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:y,sphereInitialized:_.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new D3;break;case"Line":o=new To(a(e.geometry),l(e.material));break;case"LineLoop":o=new vM(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ys(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new yM(a(e.geometry),l(e.material));break;case"Sprite":o=new B3(l(e.material));break;case"Group":o=new Gs;break;case"Bone":o=new kf;break;default:o=new Vt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],_=o.getObjectByProperty("uuid",v.object);_!==void 0&&o.addLevel(_,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const J$={UVMapping:ll,CubeReflectionMapping:bo,CubeRefractionMapping:cl,EquirectangularReflectionMapping:Oc,EquirectangularRefractionMapping:sp,CubeUVReflectionMapping:Yf},GP={RepeatWrapping:Co,ClampToEdgeWrapping:On,MirroredRepeatWrapping:If},VP={NearestFilter:pr,NearestMipmapNearestFilter:v0,NearestMipmapLinearFilter:fc,LinearFilter:un,LinearMipmapNearestFilter:yf,LinearMipmapLinearFilter:gs};class uN extends br{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ia.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return ia.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),ia.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ia.add(e,l),s.manager.itemStart(e)}}let tv;class BM{static getContext(){return tv===void 0&&(tv=new(window.AudioContext||window.webkitAudioContext)),tv}static setContext(e){tv=e}}class K$ extends br{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);BM.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const WP=new tt,jP=new tt,$l=new tt;class Y${constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,$l.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Ec*t.fov*.5)/t.zoom;let a,l;jP.elements[12]=-i,WP.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,$l.elements[0]=2*t.near/(l-a),$l.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy($l),a=-o*t.aspect-s,l=o*t.aspect-s,$l.elements[0]=2*t.near/(l-a),$l.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy($l)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(jP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(WP)}}class DM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$P(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=$P();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function $P(){return(typeof performance>"u"?Date:performance).now()}const Xl=new G,XP=new Wn,q$=new G,Jl=new G;class Q$ extends Vt{constructor(){super(),this.type="AudioListener",this.context=BM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new DM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xl,XP,q$),Jl.set(0,0,-1).applyQuaternion(XP),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Xl.x,i),t.positionY.linearRampToValueAtTime(Xl.y,i),t.positionZ.linearRampToValueAtTime(Xl.z,i),t.forwardX.linearRampToValueAtTime(Jl.x,i),t.forwardY.linearRampToValueAtTime(Jl.y,i),t.forwardZ.linearRampToValueAtTime(Jl.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Xl.x,Xl.y,Xl.z),t.setOrientation(Jl.x,Jl.y,Jl.z,r.x,r.y,r.z)}}let fN=class extends Vt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Kl=new G,JP=new Wn,Z$=new G,Yl=new G;class eX extends fN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Kl,JP,Z$),Yl.set(0,0,1).applyQuaternion(JP);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Kl.x,r),t.positionY.linearRampToValueAtTime(Kl.y,r),t.positionZ.linearRampToValueAtTime(Kl.z,r),t.orientationX.linearRampToValueAtTime(Yl.x,r),t.orientationY.linearRampToValueAtTime(Yl.y,r),t.orientationZ.linearRampToValueAtTime(Yl.z,r)}else t.setPosition(Kl.x,Kl.y,Kl.z),t.setOrientation(Yl.x,Yl.y,Yl.z)}}class tX{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class hN{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Wn.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Wn.multiplyQuaternionsFlat(e,o,e,t,e,r),Wn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const LM="\\[\\]\\.:\\/",nX=new RegExp("["+LM+"]","g"),OM="[^"+LM+"]",rX="[^"+LM.replace("\\.","")+"]",iX=/((?:WC+[\/:])*)/.source.replace("WC",OM),sX=/(WCOD+)?/.source.replace("WCOD",rX),oX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",OM),aX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",OM),lX=new RegExp("^"+iX+sX+oX+aX+"$"),cX=["material","materials","bones","map"];class uX{constructor(e,t,r){const i=r||Wt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Wt{constructor(e,t,r){this.path=t,this.parsedPath=r||Wt.parseTrackName(t),this.node=Wt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Wt.Composite(e,t,r):new Wt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(nX,"")}static parseTrackName(e){const t=lX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);cX.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Wt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Wt.Composite=uX;Wt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wt.prototype.GetterByBindingType=[Wt.prototype._getValue_direct,Wt.prototype._getValue_array,Wt.prototype._getValue_arrayElement,Wt.prototype._getValue_toArray];Wt.prototype.SetterByBindingTypeAndVersioning=[[Wt.prototype._setValue_direct,Wt.prototype._setValue_direct_setNeedsUpdate,Wt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_array,Wt.prototype._setValue_array_setNeedsUpdate,Wt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_arrayElement,Wt.prototype._setValue_arrayElement_setNeedsUpdate,Wt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_fromArray,Wt.prototype._setValue_fromArray_setNeedsUpdate,Wt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class fX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=$i(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const p=arguments[u],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let _=0,y=o;_!==y;++_)s[_].push(new Wt(p,r[_],i[_]))}else if(v<c){a=e[v];const _=--c,y=e[_];t[y.uuid]=v,e[v]=y,t[m]=_,e[_]=p;for(let g=0,w=o;g!==w;++g){const S=s[g],E=S[_];let P=S[v];S[v]=E,P===void 0&&(P=new Wt(p,r[g],i[g])),S[_]=P}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,p=e[f];t[p.uuid]=u,e[u]=p,t[c]=f,e[f]=l;for(let m=0,v=i;m!==v;++m){const _=r[m],y=_[f],g=_[u];_[u]=y,_[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const p=--s,m=e[p],v=--o,_=e[v];t[m.uuid]=f,e[f]=m,t[_.uuid]=p,e[p]=_,e.pop();for(let y=0,g=i;y!==g;++y){const w=r[y],S=w[p],E=w[v];w[f]=S,w[p]=E,w.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,_=i;v!==_;++v){const y=r[v];y[f]=y[p],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let p=u,m=l.length;p!==m;++p){const v=l[p];f[p]=new Wt(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class dN{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:hc,endingEnd:hc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=n3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case nM:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case x0:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===r3;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===t3){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=dc,i.endingEnd=dc):(e?i.endingStart=this.zeroSlopeAtStart?dc:hc:i.endingStart=ap,t?i.endingEnd=this.zeroSlopeAtEnd?dc:hc:i.endingEnd=ap)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const hX=new Float32Array(1);class pN extends Do{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const _=t&&t._propertyBindings[f].binding.parsedPath;v=new hN(Wt.create(r,m,_),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new CM(new Float32Array(2),new Float32Array(2),1,hX),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?zc.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=x0),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new dN(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?zc.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class NM{constructor(e){this.value=e}clone(){return new NM(this.value.clone===void 0?this.value:this.value.clone())}}let dX=0;class pX extends Do{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:dX++}),this.name="",this.usage=fp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class mX extends Hp{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class gX{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const KP=new tt;class kM{constructor(e,t,r=0,i=1/0){this.ray=new Kc(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Mc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return KP.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(KP),this}intersectObject(e,t=!0,r=[]){return eA(e,this,r,t),r.sort(YP),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)eA(e[i],this,r,t);return r.sort(YP),r}}function YP(n,e){return n.distance-e.distance}function eA(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)eA(s[o],e,t,!0)}}class tA{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Gn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class vX{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const qP=new Ce;class yX{constructor(e=new Ce(1/0,1/0),t=new Ce(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=qP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const QP=new G,nv=new G;class _X{constructor(e=new G,t=new G){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){QP.subVectors(e,this.start),nv.subVectors(this.end,this.start);const r=nv.dot(nv);let s=nv.dot(QP)/r;return t&&(s=Gn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const ZP=new G;class xX extends Vt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Tt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new ot(i,3));const s=new Or({fog:!1,toneMapped:!1});this.cone=new Ys(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),ZP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ZP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Oa=new G,rv=new tt,Tw=new tt;class wX extends Ys{constructor(e){const t=mN(e),r=new Tt,i=[],s=[],o=new Xe(0,0,1),a=new Xe(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new ot(i,3)),r.setAttribute("color",new ot(s,3));const l=new Or({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Tw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(rv.multiplyMatrices(Tw,a.matrixWorld),Oa.setFromMatrixPosition(rv),i.setXYZ(o,Oa.x,Oa.y,Oa.z),rv.multiplyMatrices(Tw,a.parent.matrixWorld),Oa.setFromMatrixPosition(rv),i.setXYZ(o+1,Oa.x,Oa.y,Oa.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function mN(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,mN(n.children[t]));return e}class SX extends bn{constructor(e,t,r){const i=new jp(t,4,2),s=new bi({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const AX=new G,eI=new Xe,tI=new Xe;class EX extends Vt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Wp(t);i.rotateY(Math.PI*.5),this.material=new bi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new tn(o,3)),this.add(new bn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");eI.copy(this.light.color),tI.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?eI:tI;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(AX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class MX extends Ys{constructor(e=10,t=10,r=4473924,i=8947848){r=new Xe(r),i=new Xe(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const _=p===s?r:i;_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3}const u=new Tt;u.setAttribute("position",new ot(l,3)),u.setAttribute("color",new ot(c,3));const f=new Or({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class bX extends Ys{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Xe(s),o=new Xe(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const _=f&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let v=0;v<i;v++){let _=v/i*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m;a.push(y,0,g),l.push(p.r,p.g,p.b),_=(v+1)/i*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m,a.push(y,0,g),l.push(p.r,p.g,p.b)}}const c=new Tt;c.setAttribute("position",new ot(a,3)),c.setAttribute("color",new ot(l,3));const u=new Or({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const nI=new G,iv=new G,rI=new G;class CX extends Vt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Tt;i.setAttribute("position",new ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Or({fog:!1,toneMapped:!1});this.lightPlane=new To(i,s),this.add(this.lightPlane),i=new Tt,i.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new To(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nI.setFromMatrixPosition(this.light.matrixWorld),iv.setFromMatrixPosition(this.light.target.matrixWorld),rI.subVectors(iv,nI),this.lightPlane.lookAt(iv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(iv),this.targetLine.scale.z=rI.length()}}const sv=new G,zn=new Fp;class TX extends Ys{constructor(e){const t=new Tt,r=new Or({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,_){l(v),l(_)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new ot(i,3)),t.setAttribute("color",new ot(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Xe(16755200),u=new Xe(16711680),f=new Xe(43775),p=new Xe(16777215),m=new Xe(3355443);this.setColors(c,u,f,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Kn("c",t,e,zn,0,0,-1),Kn("t",t,e,zn,0,0,1),Kn("n1",t,e,zn,-r,-i,-1),Kn("n2",t,e,zn,r,-i,-1),Kn("n3",t,e,zn,-r,i,-1),Kn("n4",t,e,zn,r,i,-1),Kn("f1",t,e,zn,-r,-i,1),Kn("f2",t,e,zn,r,-i,1),Kn("f3",t,e,zn,-r,i,1),Kn("f4",t,e,zn,r,i,1),Kn("u1",t,e,zn,r*.7,i*1.1,-1),Kn("u2",t,e,zn,-r*.7,i*1.1,-1),Kn("u3",t,e,zn,0,i*2,-1),Kn("cf1",t,e,zn,-r,0,1),Kn("cf2",t,e,zn,r,0,1),Kn("cf3",t,e,zn,0,-i,1),Kn("cf4",t,e,zn,0,i,1),Kn("cn1",t,e,zn,-r,0,-1),Kn("cn2",t,e,zn,r,0,-1),Kn("cn3",t,e,zn,0,-i,-1),Kn("cn4",t,e,zn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kn(n,e,t,r,i,s,o){sv.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],sv.x,sv.y,sv.z)}}const ov=new Yr;class RX extends Ys{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Tt;s.setIndex(new tn(r,1)),s.setAttribute("position",new tn(i,3)),super(s,new Or({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ov.setFromObject(this.object),ov.isEmpty())return;const t=ov.min,r=ov.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PX extends Ys{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Tt;s.setIndex(new tn(r,1)),s.setAttribute("position",new ot(i,3)),super(s,new Or({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class IX extends To{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Tt;o.setAttribute("position",new ot(s,3)),o.computeBoundingSphere(),super(o,new Or({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Tt;l.setAttribute("position",new ot(a,3)),l.computeBoundingSphere(),this.add(new bn(l,new bi({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const iI=new G;let av,Rw;class BX extends Vt{constructor(e=new G(0,0,1),t=new G(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",av===void 0&&(av=new Tt,av.setAttribute("position",new ot([0,0,0,0,1,0],3)),Rw=new Zf(0,.5,1,5,1),Rw.translate(0,-.5,0)),this.position.copy(t),this.line=new To(av,new Or({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bn(Rw,new bi({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{iI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(iI,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class DX extends Ys{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Tt;i.setAttribute("position",new ot(t,3)),i.setAttribute("color",new ot(r,3));const s=new Or({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Xe,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class LX{constructor(){this.type="ShapePath",this.color=new Xe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new pp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const w=[];for(let S=0,E=g.length;S<E;S++){const P=g[S],b=new bc;b.curves=P.curves,w.push(b)}return w}function r(g,w){const S=w.length;let E=!1;for(let P=S-1,b=0;b<S;P=b++){let R=w[P],L=w[b],I=L.x-R.x,C=L.y-R.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(R=w[b],I=-I,L=w[P],C=-C),g.y<R.y||g.y>L.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const O=C*(g.x-R.x)-I*(g.y-R.y);if(O===0)return!0;if(O<0)continue;E=!E}}else{if(g.y!==R.y)continue;if(L.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=L.x)return!0}}return E}const i=Eo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new bc,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],p=[];let m=[],v=0,_;p[v]=void 0,m[v]=[];for(let g=0,w=s.length;g<w;g++)a=s[g],_=a.getPoints(),o=i(_),o=e?!o:o,o?(!u&&p[v]&&v++,p[v]={s:new bc,p:_},p[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:_[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,w=0;for(let S=0,E=p.length;S<E;S++)f[S]=[];for(let S=0,E=p.length;S<E;S++){const P=m[S];for(let b=0;b<P.length;b++){const R=P[b];let L=!0;for(let I=0;I<p.length;I++)r(R.p,p[I].p)&&(S!==I&&w++,L?(L=!1,f[I].push(R)):g=!0);L&&f[S].push(R)}}w>0&&g===!1&&(m=f)}let y;for(let g=0,w=p.length;g<w;g++){l=p[g].s,c.push(l),y=m[g];for(let S=0,E=y.length;S<E;S++)l.holes.push(y[S].h)}return c}}class OX extends Yi{constructor(e=1,t=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Kf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Kf);const NX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:JE,AddEquation:ja,AddOperation:zO,AdditiveAnimationBlendMode:nM,AdditiveBlending:m1,AgXToneMapping:jO,AlphaFormat:KO,AlwaysCompare:p3,AlwaysDepth:DO,AlwaysStencilFunc:$1,AmbientLight:IM,AnimationAction:dN,AnimationClip:zc,AnimationLoader:G$,AnimationMixer:pN,AnimationObjectGroup:fX,AnimationUtils:F$,ArcCurve:O3,ArrayCamera:P3,ArrowHelper:BX,AttachedBindMode:y1,Audio:fN,AudioAnalyser:tX,AudioContext:BM,AudioListener:Q$,AudioLoader:K$,AxesHelper:DX,BackSide:di,BasicDepthPacking:s3,BasicShadowMap:dO,BatchedMesh:L3,Bone:kf,BooleanKeyframeTrack:qc,Box2:yX,Box3:Yr,Box3Helper:PX,BoxGeometry:Yc,BoxHelper:RX,BufferAttribute:tn,BufferGeometry:Tt,BufferGeometryLoader:cN,ByteType:KE,Cache:ia,Camera:Fp,CameraHelper:TX,CanvasTexture:l$,CapsuleGeometry:I0,CatmullRomCurve3:N3,CineonToneMapping:VO,CircleGeometry:B0,ClampToEdgeWrapping:On,Clock:DM,Color:Xe,ColorKeyframeTrack:TM,ColorManagement:fn,CompressedArrayTexture:o$,CompressedCubeTexture:a$,CompressedTexture:R0,CompressedTextureLoader:V$,ConeGeometry:D0,ConstantAlphaFactor:PO,ConstantColorFactor:TO,CubeCamera:S3,CubeReflectionMapping:bo,CubeRefractionMapping:cl,CubeTexture:Up,CubeTextureLoader:rN,CubeUVReflectionMapping:Yf,CubicBezierCurve:xM,CubicBezierCurve3:k3,CubicInterpolant:Z3,CullFaceBack:p1,CullFaceFront:hO,CullFaceFrontBack:Q5,CullFaceNone:fO,Curve:Es,CurvePath:U3,CustomBlending:pO,CustomToneMapping:WO,CylinderGeometry:Zf,Cylindrical:vX,Data3DTexture:aM,DataArrayTexture:S0,DataTexture:Ao,DataTextureLoader:RM,DataUtils:mc,DecrementStencilOp:s8,DecrementWrapStencilOp:a8,DefaultLoadingManager:nN,DepthFormat:Ac,DepthStencilFormat:kc,DepthTexture:fM,DetachedBindMode:XO,DirectionalLight:j0,DirectionalLightHelper:CX,DiscreteInterpolant:eN,DisplayP3ColorSpace:w0,DodecahedronGeometry:L0,DoubleSide:ds,DstAlphaFactor:AO,DstColorFactor:MO,DynamicCopyUsage:S8,DynamicDrawUsage:g8,DynamicReadUsage:_8,EdgesGeometry:z3,EllipseCurve:P0,EqualCompare:u3,EqualDepth:OO,EqualStencilFunc:f8,EquirectangularReflectionMapping:Oc,EquirectangularRefractionMapping:sp,Euler:Ar,EventDispatcher:Do,ExtrudeGeometry:N0,FileLoader:Mr,Float16BufferAttribute:lV,Float32BufferAttribute:ot,FloatType:Vn,Fog:b0,FogExp2:M0,FramebufferTexture:s$,FrontSide:Mo,Frustum:zp,GLBufferAttribute:gX,GLSL1:E8,GLSL3:X1,GreaterCompare:f3,GreaterDepth:kO,GreaterEqualCompare:d3,GreaterEqualDepth:NO,GreaterEqualStencilFunc:m8,GreaterStencilFunc:d8,GridHelper:MX,Group:Gs,HalfFloatType:Ir,HemisphereLight:iN,HemisphereLightHelper:EX,IcosahedronGeometry:Vp,ImageBitmapLoader:uN,ImageLoader:yp,ImageUtils:v3,IncrementStencilOp:i8,IncrementWrapStencilOp:o8,InstancedBufferAttribute:Fc,InstancedBufferGeometry:lN,InstancedInterleavedBuffer:mX,InstancedMesh:gM,Int16BufferAttribute:oV,Int32BufferAttribute:aV,Int8BufferAttribute:rV,IntType:y0,InterleavedBuffer:Hp,InterleavedBufferAttribute:fl,Interpolant:eh,InterpolateDiscrete:Bf,InterpolateLinear:Df,InterpolateSmooth:Wv,InvertStencilOp:l8,KeepStencilOp:ic,KeyframeTrack:qs,LOD:D3,LatheGeometry:Gp,Layers:Mc,LessCompare:c3,LessDepth:LO,LessEqualCompare:iM,LessEqualDepth:ip,LessEqualStencilFunc:h8,LessStencilFunc:u8,Light:bl,LightProbe:aN,Line:To,Line3:_X,LineBasicMaterial:Or,LineCurve:wM,LineCurve3:F3,LineDashedMaterial:Y3,LineLoop:vM,LineSegments:Ys,LinearDisplayP3ColorSpace:kp,LinearFilter:un,LinearInterpolant:CM,LinearMipMapLinearFilter:_1,LinearMipMapNearestFilter:t8,LinearMipmapLinearFilter:gs,LinearMipmapNearestFilter:yf,LinearSRGBColorSpace:As,LinearToneMapping:HO,LinearTransfer:lp,Loader:br,LoaderUtils:oa,LoadingManager:V0,LoopOnce:t3,LoopPingPong:r3,LoopRepeat:n3,LuminanceAlphaFormat:QO,LuminanceFormat:qO,MOUSE:nc,Material:cr,MaterialLoader:$0,MathUtils:Jr,Matrix3:Lt,Matrix4:tt,MaxEquation:yO,Mesh:bn,MeshBasicMaterial:bi,MeshDepthMaterial:hM,MeshDistanceMaterial:dM,MeshLambertMaterial:MM,MeshMatcapMaterial:K3,MeshNormalMaterial:J3,MeshPhongMaterial:Ld,MeshPhysicalMaterial:Ms,MeshStandardMaterial:sl,MeshToonMaterial:X3,MinEquation:vO,MirroredRepeatWrapping:If,MixOperation:UO,MultiplyBlending:v1,MultiplyOperation:Np,NearestFilter:pr,NearestMipMapLinearFilter:e8,NearestMipMapNearestFilter:Z5,NearestMipmapLinearFilter:fc,NearestMipmapNearestFilter:v0,NeutralToneMapping:$O,NeverCompare:l3,NeverDepth:BO,NeverStencilFunc:c8,NoBlending:wo,NoColorSpace:Zo,NoToneMapping:So,NormalAnimationBlendMode:x0,NormalBlending:Sc,NotEqualCompare:h3,NotEqualDepth:FO,NotEqualStencilFunc:p8,NumberKeyframeTrack:hl,Object3D:Vt,ObjectLoader:X$,ObjectSpaceNormalMap:a3,OctahedronGeometry:Wp,OneFactor:xO,OneMinusConstantAlphaFactor:IO,OneMinusConstantColorFactor:RO,OneMinusDstAlphaFactor:EO,OneMinusDstColorFactor:bO,OneMinusSrcAlphaFactor:Py,OneMinusSrcColorFactor:SO,OrthographicCamera:vs,P3Primaries:up,PCFShadowMap:g0,PCFSoftShadowMap:Pd,PMREMGenerator:J1,Path:pp,PerspectiveCamera:Rn,Plane:qo,PlaneGeometry:El,PlaneHelper:IX,PointLight:_p,PointLightHelper:SX,Points:yM,PointsMaterial:T0,PolarGridHelper:bX,PolyhedronGeometry:Ml,PositionalAudio:eX,PropertyBinding:Wt,PropertyMixer:hN,QuadraticBezierCurve:SM,QuadraticBezierCurve3:AM,Quaternion:Wn,QuaternionKeyframeTrack:dl,QuaternionLinearInterpolant:tN,RED_GREEN_RGTC2_Format:W1,RED_RGTC1_Format:e3,REVISION:Kf,RGBADepthPacking:o3,RGBAFormat:or,RGBAIntegerFormat:tM,RGBA_ASTC_10x10_Format:F1,RGBA_ASTC_10x5_Format:O1,RGBA_ASTC_10x6_Format:N1,RGBA_ASTC_10x8_Format:k1,RGBA_ASTC_12x10_Format:U1,RGBA_ASTC_12x12_Format:z1,RGBA_ASTC_4x4_Format:C1,RGBA_ASTC_5x4_Format:T1,RGBA_ASTC_5x5_Format:R1,RGBA_ASTC_6x5_Format:P1,RGBA_ASTC_6x6_Format:I1,RGBA_ASTC_8x5_Format:B1,RGBA_ASTC_8x6_Format:D1,RGBA_ASTC_8x8_Format:L1,RGBA_BPTC_Format:Vv,RGBA_ETC2_EAC_Format:b1,RGBA_PVRTC_2BPPV1_Format:A1,RGBA_PVRTC_4BPPV1_Format:S1,RGBA_S3TC_DXT1_Format:zv,RGBA_S3TC_DXT3_Format:Hv,RGBA_S3TC_DXT5_Format:Gv,RGBFormat:YO,RGB_BPTC_SIGNED_Format:H1,RGB_BPTC_UNSIGNED_Format:G1,RGB_ETC1_Format:E1,RGB_ETC2_Format:M1,RGB_PVRTC_2BPPV1_Format:w1,RGB_PVRTC_4BPPV1_Format:x1,RGB_S3TC_DXT1_Format:Uv,RGFormat:ZO,RGIntegerFormat:eM,RawShaderMaterial:$3,Ray:Kc,Raycaster:kM,Rec709Primaries:cp,RectAreaLight:sN,RedFormat:_0,RedIntegerFormat:ZE,ReinhardToneMapping:GO,RenderTarget:y3,RepeatWrapping:Co,ReplaceStencilOp:r8,ReverseSubtractEquation:gO,RingGeometry:k0,SIGNED_RED_GREEN_RGTC2_Format:j1,SIGNED_RED_RGTC1_Format:V1,SRGBColorSpace:Hi,SRGBTransfer:xn,Scene:Nf,ShaderChunk:kt,ShaderLib:Hs,ShaderMaterial:Bi,ShadowMaterial:j3,Shape:bc,ShapeGeometry:F0,ShapePath:LX,ShapeUtils:Eo,ShortType:YE,Skeleton:Qf,SkeletonHelper:wX,SkinnedMesh:C0,Source:pc,Sphere:Dr,SphereGeometry:jp,Spherical:tA,SphericalHarmonics3:oN,SplineCurve:EM,SpotLight:W0,SpotLightHelper:xX,Sprite:B3,SpriteMaterial:mM,SrcAlphaFactor:Ry,SrcAlphaSaturateFactor:CO,SrcColorFactor:wO,StaticCopyUsage:w8,StaticDrawUsage:fp,StaticReadUsage:y8,StereoCamera:Y$,StreamCopyUsage:A8,StreamDrawUsage:v8,StreamReadUsage:x8,StringKeyframeTrack:Qc,SubtractEquation:mO,SubtractiveBlending:g1,TOUCH:rc,TangentSpaceNormalMap:Al,TetrahedronGeometry:U0,Texture:Yt,TextureLoader:th,TorusGeometry:z0,TorusKnotGeometry:H0,Triangle:Vi,TriangleFanDrawMode:Iy,TriangleStripDrawMode:rM,TrianglesDrawMode:i3,TubeGeometry:G0,UVMapping:ll,Uint16BufferAttribute:A0,Uint32BufferAttribute:lM,Uint8BufferAttribute:iV,Uint8ClampedBufferAttribute:sV,Uniform:NM,UniformsGroup:pX,UniformsLib:et,UniformsUtils:w3,UnsignedByteType:Ki,UnsignedInt248Type:Nc,UnsignedInt5999Type:JO,UnsignedIntType:ul,UnsignedShort4444Type:qE,UnsignedShort5551Type:QE,UnsignedShortType:op,VSMShadowMap:ks,Vector2:Ce,Vector3:G,Vector4:rn,VectorKeyframeTrack:pl,VideoTexture:i$,WebGL3DRenderTarget:X8,WebGLArrayRenderTarget:$8,WebGLCoordinateSystem:vo,WebGLCubeRenderTarget:cM,WebGLMultipleRenderTargets:OX,WebGLRenderTarget:Yi,WebGLRenderer:pM,WebGLUtils:R3,WebGPUCoordinateSystem:hp,WireframeGeometry:W3,WrapAroundEnding:ap,ZeroCurvatureEnding:hc,ZeroFactor:_O,ZeroSlopeEnding:dc,ZeroStencilOp:n8,createCanvasElement:g3},Symbol.toStringTag,{value:"Module"}));var gN={exports:{}},Zc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Zc.ConcurrentRoot=1;Zc.ContinuousEventPriority=4;Zc.DefaultEventPriority=16;Zc.DiscreteEventPriority=1;Zc.IdleEventPriority=536870912;Zc.LegacyRoot=0;gN.exports=Zc;var uf=gN.exports;function kX(n){let e;const t=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=u?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!f(p,v)){const _=p;c(p=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const FX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sI=FX?B.useEffect:B.useLayoutEffect;function vN(n){const e=typeof n=="function"?kX(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=B.useReducer(y=>y+1,0),o=e.getState(),a=B.useRef(o),l=B.useRef(r),c=B.useRef(i),u=B.useRef(!1),f=B.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(f.current,p)),sI(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=B.useRef(o);sI(()=>{const y=()=>{try{const w=e.getState(),S=l.current(w);c.current(f.current,S)||(a.current=w,f.current=S,s())}catch{u.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const _=m?p:f.current;return B.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var yN={exports:{}},Pw={exports:{}},Iw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oI;function UX(){return oI||(oI=1,function(n){function e(k,Y){var Z=k.length;k.push(Y);e:for(;0<Z;){var ae=Z-1>>>1,ye=k[ae];if(0<i(ye,Y))k[ae]=Y,k[Z]=ye,Z=ae;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var Y=k[0],Z=k.pop();if(Z!==Y){k[0]=Z;e:for(var ae=0,ye=k.length,Ue=ye>>>1;ae<Ue;){var he=2*(ae+1)-1,Te=k[he],Me=he+1,Be=k[Me];if(0>i(Te,Z))Me<ye&&0>i(Be,Te)?(k[ae]=Be,k[Me]=Z,ae=Me):(k[ae]=Te,k[he]=Z,ae=he);else if(Me<ye&&0>i(Be,Z))k[ae]=Be,k[Me]=Z,ae=Me;else break e}}return Y}function i(k,Y){var Z=k.sortIndex-Y.sortIndex;return Z!==0?Z:k.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=k)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function E(k){if(_=!1,S(k),!v)if(t(l)!==null)v=!0,ee(P);else{var Y=t(c);Y!==null&&fe(E,Y.startTime-k)}}function P(k,Y){v=!1,_&&(_=!1,g(L),L=-1),m=!0;var Z=p;try{for(S(Y),f=t(l);f!==null&&(!(f.expirationTime>Y)||k&&!O());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var ye=ae(f.expirationTime<=Y);Y=n.unstable_now(),typeof ye=="function"?f.callback=ye:f===t(l)&&r(l),S(Y)}else r(l);f=t(l)}if(f!==null)var Ue=!0;else{var he=t(c);he!==null&&fe(E,he.startTime-Y),Ue=!1}return Ue}finally{f=null,p=Z,m=!1}}var b=!1,R=null,L=-1,I=5,C=-1;function O(){return!(n.unstable_now()-C<I)}function V(){if(R!==null){var k=n.unstable_now();C=k;var Y=!0;try{Y=R(!0,k)}finally{Y?$():(b=!1,R=null)}}else b=!1}var $;if(typeof w=="function")$=function(){w(V)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ie=Q.port2;Q.port1.onmessage=V,$=function(){ie.postMessage(null)}}else $=function(){y(V,0)};function ee(k){R=k,b||(b=!0,$())}function fe(k,Y){L=y(function(){k(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(P))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return k()}finally{p=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,Y){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=p;p=k;try{return Y()}finally{p=Z}},n.unstable_scheduleCallback=function(k,Y,Z){var ae=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ae+Z:ae):Z=ae,k){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Z+ye,k={id:u++,callback:Y,priorityLevel:k,startTime:Z,expirationTime:ye,sortIndex:-1},Z>ae?(k.sortIndex=Z,e(c,k),t(l)===null&&k===t(c)&&(_?(g(L),L=-1):_=!0,fe(E,Z-ae))):(k.sortIndex=ye,e(l,k),v||m||(v=!0,ee(P))),k},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(k){var Y=p;return function(){var Z=p;p=Y;try{return k.apply(this,arguments)}finally{p=Z}}}}(Iw)),Iw}var aI;function zX(){return aI||(aI=1,Pw.exports=UX()),Pw.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HX=function(e){var t={},r=B,i=zX(),s=Object.assign;function o(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),P=Symbol.iterator;function b(h){return h===null||typeof h!="object"?null:(h=P&&h[P]||h["@@iterator"],typeof h=="function"?h:null)}function R(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case v:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case _:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case w:return d=h.displayName||null,d!==null?d:R(h.type)||"Memo";case S:d=h._payload,h=h._init;try{return R(h(d))}catch{}}return null}function L(h){var d=h.type;switch(h.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=d.render,h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function I(h){var d=h,x=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,d.flags&4098&&(x=d.return),h=d.return;while(h)}return d.tag===3?x:null}function C(h){if(I(h)!==h)throw Error(o(188))}function O(h){var d=h.alternate;if(!d){if(d=I(h),d===null)throw Error(o(188));return d!==h?null:h}for(var x=h,A=d;;){var M=x.return;if(M===null)break;var D=M.alternate;if(D===null){if(A=M.return,A!==null){x=A;continue}break}if(M.child===D.child){for(D=M.child;D;){if(D===x)return C(M),h;if(D===A)return C(M),d;D=D.sibling}throw Error(o(188))}if(x.return!==A.return)x=M,A=D;else{for(var X=!1,oe=M.child;oe;){if(oe===x){X=!0,x=M,A=D;break}if(oe===A){X=!0,A=M,x=D;break}oe=oe.sibling}if(!X){for(oe=D.child;oe;){if(oe===x){X=!0,x=D,A=M;break}if(oe===A){X=!0,A=D,x=M;break}oe=oe.sibling}if(!X)throw Error(o(189))}}if(x.alternate!==A)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?h:d}function V(h){return h=O(h),h!==null?$(h):null}function $(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var d=$(h);if(d!==null)return d;h=h.sibling}return null}function Q(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var d=Q(h);if(d!==null)return d}h=h.sibling}return null}var ie=Array.isArray,ee=e.getPublicInstance,fe=e.getRootHostContext,k=e.getChildHostContext,Y=e.prepareForCommit,Z=e.resetAfterCommit,ae=e.createInstance,ye=e.appendInitialChild,Ue=e.finalizeInitialChildren,he=e.prepareUpdate,Te=e.shouldSetTextContent,Me=e.createTextInstance,Be=e.scheduleTimeout,at=e.cancelTimeout,wt=e.noTimeout,mt=e.isPrimaryRenderer,te=e.supportsMutation,Ie=e.supportsPersistence,Se=e.supportsHydration,Ne=e.getInstanceFromNode,Le=e.preparePortalMount,Oe=e.getCurrentEventPriority,qe=e.detachDeletedInstance,Ye=e.supportsMicrotasks,xt=e.scheduleMicrotask,J=e.supportsTestSelectors,U=e.findFiberRoot,pe=e.getBoundingRect,le=e.getTextContent,de=e.isHiddenSubtree,Re=e.matchAccessibilityRole,Qe=e.setFocusIfFocusable,ze=e.setupIntersectionObserver,Je=e.appendChild,yt=e.appendChildToContainer,Fe=e.commitTextUpdate,it=e.commitMount,Rt=e.commitUpdate,pt=e.insertBefore,He=e.insertInContainerBefore,re=e.removeChild,be=e.removeChildFromContainer,We=e.resetTextContent,q=e.hideInstance,Ve=e.hideTextInstance,se=e.unhideInstance,Pe=e.unhideTextInstance,Ke=e.clearContainer,St=e.cloneInstance,Pt=e.createContainerChildSet,Kt=e.appendChildToContainerChildSet,dn=e.finalizeContainerChildren,zt=e.replaceContainerChildren,Xn=e.cloneHiddenInstance,er=e.cloneHiddenTextInstance,Ts=e.canHydrateInstance,Tl=e.canHydrateTextInstance,tu=e.canHydrateSuspenseInstance,to=e.isSuspenseInstancePending,no=e.isSuspenseInstanceFallback,ro=e.registerSuspenseInstanceRetry,Nr=e.getNextHydratableSibling,Ft=e.getFirstHydratableChild,Rl=e.getFirstHydratableChildWithinContainer,hh=e.getFirstHydratableChildWithinSuspenseInstance,N=e.hydrateInstance,H=e.hydrateTextInstance,T=e.hydrateSuspenseInstance,z=e.getNextHydratableInstanceAfterSuspenseInstance,W=e.commitHydratedContainer,j=e.commitHydratedSuspenseInstance,K=e.clearSuspenseBoundary,ce=e.clearSuspenseBoundaryFromContainer,me=e.shouldDeleteUnhydratedTailInstances,ve=e.didNotMatchHydratedContainerTextInstance,_e=e.didNotMatchHydratedTextInstance,we;function Ze(h){if(we===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);we=d&&d[1]||""}return`
`+we+h}var De=!1;function je(h,d){if(!h||De)return"";De=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch($e){var A=$e}Reflect.construct(h,[],d)}else{try{d.call()}catch($e){A=$e}h.call(d.prototype)}else{try{throw Error()}catch($e){A=$e}h()}}catch($e){if($e&&A&&typeof $e.stack=="string"){for(var M=$e.stack.split(`
`),D=A.stack.split(`
`),X=M.length-1,oe=D.length-1;1<=X&&0<=oe&&M[X]!==D[oe];)oe--;for(;1<=X&&0<=oe;X--,oe--)if(M[X]!==D[oe]){if(X!==1||oe!==1)do if(X--,oe--,0>oe||M[X]!==D[oe]){var Ee=`
`+M[X].replace(" at new "," at ");return h.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",h.displayName)),Ee}while(1<=X&&0<=oe);break}}}finally{De=!1,Error.prepareStackTrace=x}return(h=h?h.displayName||h.name:"")?Ze(h):""}var st=Object.prototype.hasOwnProperty,ct=[],bt=-1;function ut(h){return{current:h}}function ke(h){0>bt||(h.current=ct[bt],ct[bt]=null,bt--)}function gt(h,d){bt++,ct[bt]=h.current,h.current=d}var dt={},jt=ut(dt),It=ut(!1),Qt=dt;function tr(h,d){var x=h.type.contextTypes;if(!x)return dt;var A=h.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===d)return A.__reactInternalMemoizedMaskedChildContext;var M={},D;for(D in x)M[D]=d[D];return A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=M),M}function Ht(h){return h=h.childContextTypes,h!=null}function yn(){ke(It),ke(jt)}function Zt(h,d,x){if(jt.current!==dt)throw Error(o(168));gt(jt,d),gt(It,x)}function on(h,d,x){var A=h.stateNode;if(d=d.childContextTypes,typeof A.getChildContext!="function")return x;A=A.getChildContext();for(var M in A)if(!(M in d))throw Error(o(108,L(h)||"Unknown",M));return s({},x,A)}function nn(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||dt,Qt=jt.current,gt(jt,h),gt(It,It.current),!0}function en(h,d,x){var A=h.stateNode;if(!A)throw Error(o(169));x?(h=on(h,d,Qt),A.__reactInternalMemoizedMergedChildContext=h,ke(It),ke(jt),gt(jt,h)):ke(It),gt(It,x)}var gn=Math.clz32?Math.clz32:io,Lo=Math.log,Zr=Math.LN2;function io(h){return h>>>=0,h===0?32:31-(Lo(h)/Zr|0)|0}var om=64,am=4194304;function dh(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function lm(h,d){var x=h.pendingLanes;if(x===0)return 0;var A=0,M=h.suspendedLanes,D=h.pingedLanes,X=x&268435455;if(X!==0){var oe=X&~M;oe!==0?A=dh(oe):(D&=X,D!==0&&(A=dh(D)))}else X=x&~M,X!==0?A=dh(X):D!==0&&(A=dh(D));if(A===0)return 0;if(d!==0&&d!==A&&!(d&M)&&(M=A&-A,D=d&-d,M>=D||M===16&&(D&4194240)!==0))return d;if(A&4&&(A|=x&16),d=h.entangledLanes,d!==0)for(h=h.entanglements,d&=A;0<d;)x=31-gn(d),M=1<<x,A|=h[x],d&=~M;return A}function Pz(h,d){switch(h){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iz(h,d){for(var x=h.suspendedLanes,A=h.pingedLanes,M=h.expirationTimes,D=h.pendingLanes;0<D;){var X=31-gn(D),oe=1<<X,Ee=M[X];Ee===-1?(!(oe&x)||oe&A)&&(M[X]=Pz(oe,d)):Ee<=d&&(h.expiredLanes|=oe),D&=~oe}}function d_(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function p_(h){for(var d=[],x=0;31>x;x++)d.push(h);return d}function ph(h,d,x){h.pendingLanes|=d,d!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,d=31-gn(d),h[d]=x}function Bz(h,d){var x=h.pendingLanes&~d;h.pendingLanes=d,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=d,h.mutableReadLanes&=d,h.entangledLanes&=d,d=h.entanglements;var A=h.eventTimes;for(h=h.expirationTimes;0<x;){var M=31-gn(x),D=1<<M;d[M]=0,A[M]=-1,h[M]=-1,x&=~D}}function m_(h,d){var x=h.entangledLanes|=d;for(h=h.entanglements;x;){var A=31-gn(x),M=1<<A;M&d|h[A]&d&&(h[A]|=d),x&=~M}}var an=0;function Lb(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var g_=i.unstable_scheduleCallback,Ob=i.unstable_cancelCallback,Dz=i.unstable_shouldYield,Lz=i.unstable_requestPaint,vr=i.unstable_now,v_=i.unstable_ImmediatePriority,Oz=i.unstable_UserBlockingPriority,y_=i.unstable_NormalPriority,Nz=i.unstable_IdlePriority,cm=null,so=null;function kz(h){if(so&&typeof so.onCommitFiberRoot=="function")try{so.onCommitFiberRoot(cm,h,void 0,(h.current.flags&128)===128)}catch{}}function Fz(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var oo=typeof Object.is=="function"?Object.is:Fz,Oo=null,um=!1,__=!1;function Nb(h){Oo===null?Oo=[h]:Oo.push(h)}function Uz(h){um=!0,Nb(h)}function ao(){if(!__&&Oo!==null){__=!0;var h=0,d=an;try{var x=Oo;for(an=1;h<x.length;h++){var A=x[h];do A=A(!0);while(A!==null)}Oo=null,um=!1}catch(M){throw Oo!==null&&(Oo=Oo.slice(h+1)),g_(v_,ao),M}finally{an=d,__=!1}}return null}var zz=a.ReactCurrentBatchConfig;function fm(h,d){if(oo(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var x=Object.keys(h),A=Object.keys(d);if(x.length!==A.length)return!1;for(A=0;A<x.length;A++){var M=x[A];if(!st.call(d,M)||!oo(h[M],d[M]))return!1}return!0}function Hz(h){switch(h.tag){case 5:return Ze(h.type);case 16:return Ze("Lazy");case 13:return Ze("Suspense");case 19:return Ze("SuspenseList");case 0:case 2:case 15:return h=je(h.type,!1),h;case 11:return h=je(h.type.render,!1),h;case 1:return h=je(h.type,!0),h;default:return""}}function Rs(h,d){if(h&&h.defaultProps){d=s({},d),h=h.defaultProps;for(var x in h)d[x]===void 0&&(d[x]=h[x]);return d}return d}var hm=ut(null),dm=null,nu=null,x_=null;function w_(){x_=nu=dm=null}function kb(h,d,x){mt?(gt(hm,d._currentValue),d._currentValue=x):(gt(hm,d._currentValue2),d._currentValue2=x)}function S_(h){var d=hm.current;ke(hm),mt?h._currentValue=d:h._currentValue2=d}function A_(h,d,x){for(;h!==null;){var A=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),h===x)break;h=h.return}}function ru(h,d){dm=h,x_=nu=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&d&&(Oi=!0),h.firstContext=null)}function Zi(h){var d=mt?h._currentValue:h._currentValue2;if(x_!==h)if(h={context:h,memoizedValue:d,next:null},nu===null){if(dm===null)throw Error(o(308));nu=h,dm.dependencies={lanes:0,firstContext:h}}else nu=nu.next=h;return d}var lo=null,_a=!1;function E_(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fb(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function No(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function xa(h,d){var x=h.updateQueue;x!==null&&(x=x.shared,nr!==null&&h.mode&1&&!(Gt&2)?(h=x.interleaved,h===null?(d.next=d,lo===null?lo=[x]:lo.push(x)):(d.next=h.next,h.next=d),x.interleaved=d):(h=x.pending,h===null?d.next=d:(d.next=h.next,h.next=d),x.pending=d))}function pm(h,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var A=d.lanes;A&=h.pendingLanes,x|=A,d.lanes=x,m_(h,x)}}function Ub(h,d){var x=h.updateQueue,A=h.alternate;if(A!==null&&(A=A.updateQueue,x===A)){var M=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var X={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};D===null?M=D=X:D=D.next=X,x=x.next}while(x!==null);D===null?M=D=d:D=D.next=d}else M=D=d;x={baseState:A.baseState,firstBaseUpdate:M,lastBaseUpdate:D,shared:A.shared,effects:A.effects},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=d:h.next=d,x.lastBaseUpdate=d}function mm(h,d,x,A){var M=h.updateQueue;_a=!1;var D=M.firstBaseUpdate,X=M.lastBaseUpdate,oe=M.shared.pending;if(oe!==null){M.shared.pending=null;var Ee=oe,$e=Ee.next;Ee.next=null,X===null?D=$e:X.next=$e,X=Ee;var ft=h.alternate;ft!==null&&(ft=ft.updateQueue,oe=ft.lastBaseUpdate,oe!==X&&(oe===null?ft.firstBaseUpdate=$e:oe.next=$e,ft.lastBaseUpdate=Ee))}if(D!==null){var Bt=M.baseState;X=0,ft=$e=Ee=null,oe=D;do{var At=oe.lane,vn=oe.eventTime;if((A&At)===At){ft!==null&&(ft=ft.next={eventTime:vn,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var _t=h,zr=oe;switch(At=d,vn=x,zr.tag){case 1:if(_t=zr.payload,typeof _t=="function"){Bt=_t.call(vn,Bt,At);break e}Bt=_t;break e;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=zr.payload,At=typeof _t=="function"?_t.call(vn,Bt,At):_t,At==null)break e;Bt=s({},Bt,At);break e;case 2:_a=!0}}oe.callback!==null&&oe.lane!==0&&(h.flags|=64,At=M.effects,At===null?M.effects=[oe]:At.push(oe))}else vn={eventTime:vn,lane:At,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},ft===null?($e=ft=vn,Ee=Bt):ft=ft.next=vn,X|=At;if(oe=oe.next,oe===null){if(oe=M.shared.pending,oe===null)break;At=oe,oe=At.next,At.next=null,M.lastBaseUpdate=At,M.shared.pending=null}}while(!0);if(ft===null&&(Ee=Bt),M.baseState=Ee,M.firstBaseUpdate=$e,M.lastBaseUpdate=ft,d=M.shared.interleaved,d!==null){M=d;do X|=M.lane,M=M.next;while(M!==d)}else D===null&&(M.shared.lanes=0);hu|=X,h.lanes=X,h.memoizedState=Bt}}function zb(h,d,x){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var A=h[d],M=A.callback;if(M!==null){if(A.callback=null,A=x,typeof M!="function")throw Error(o(191,M));M.call(A)}}}var Hb=new r.Component().refs;function M_(h,d,x,A){d=h.memoizedState,x=x(A,d),x=x==null?d:s({},d,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}var gm={isMounted:function(h){return(h=h._reactInternals)?I(h)===h:!1},enqueueSetState:function(h,d,x){h=h._reactInternals;var A=ti(),M=Aa(h),D=No(A,M);D.payload=d,x!=null&&(D.callback=x),xa(h,D),d=is(h,M,A),d!==null&&pm(d,h,M)},enqueueReplaceState:function(h,d,x){h=h._reactInternals;var A=ti(),M=Aa(h),D=No(A,M);D.tag=1,D.payload=d,x!=null&&(D.callback=x),xa(h,D),d=is(h,M,A),d!==null&&pm(d,h,M)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var x=ti(),A=Aa(h),M=No(x,A);M.tag=2,d!=null&&(M.callback=d),xa(h,M),d=is(h,A,x),d!==null&&pm(d,h,A)}};function Gb(h,d,x,A,M,D,X){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(A,D,X):d.prototype&&d.prototype.isPureReactComponent?!fm(x,A)||!fm(M,D):!0}function Vb(h,d,x){var A=!1,M=dt,D=d.contextType;return typeof D=="object"&&D!==null?D=Zi(D):(M=Ht(d)?Qt:jt.current,A=d.contextTypes,D=(A=A!=null)?tr(h,M):dt),d=new d(x,D),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=gm,h.stateNode=d,d._reactInternals=h,A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=M,h.__reactInternalMemoizedMaskedChildContext=D),d}function Wb(h,d,x,A){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,A),d.state!==h&&gm.enqueueReplaceState(d,d.state,null)}function b_(h,d,x,A){var M=h.stateNode;M.props=x,M.state=h.memoizedState,M.refs=Hb,E_(h);var D=d.contextType;typeof D=="object"&&D!==null?M.context=Zi(D):(D=Ht(d)?Qt:jt.current,M.context=tr(h,D)),M.state=h.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(M_(h,d,D,x),M.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(d=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),d!==M.state&&gm.enqueueReplaceState(M,M.state,null),mm(h,x,M,A),M.state=h.memoizedState),typeof M.componentDidMount=="function"&&(h.flags|=4194308)}var iu=[],su=0,vm=null,ym=0,es=[],ts=0,Pl=null,ko=1,Fo="";function Il(h,d){iu[su++]=ym,iu[su++]=vm,vm=h,ym=d}function jb(h,d,x){es[ts++]=ko,es[ts++]=Fo,es[ts++]=Pl,Pl=h;var A=ko;h=Fo;var M=32-gn(A)-1;A&=~(1<<M),x+=1;var D=32-gn(d)+M;if(30<D){var X=M-M%5;D=(A&(1<<X)-1).toString(32),A>>=X,M-=X,ko=1<<32-gn(d)+M|x<<M|A,Fo=D+h}else ko=1<<D|x<<M|A,Fo=h}function C_(h){h.return!==null&&(Il(h,1),jb(h,1,0))}function T_(h){for(;h===vm;)vm=iu[--su],iu[su]=null,ym=iu[--su],iu[su]=null;for(;h===Pl;)Pl=es[--ts],es[ts]=null,Fo=es[--ts],es[ts]=null,ko=es[--ts],es[ts]=null}var Di=null,Li=null,Cn=!1,mh=!1,Ps=null;function $b(h,d){var x=ss(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=h,d=h.deletions,d===null?(h.deletions=[x],h.flags|=16):d.push(x)}function Xb(h,d){switch(h.tag){case 5:return d=Ts(d,h.type,h.pendingProps),d!==null?(h.stateNode=d,Di=h,Li=Ft(d),!0):!1;case 6:return d=Tl(d,h.pendingProps),d!==null?(h.stateNode=d,Di=h,Li=null,!0):!1;case 13:if(d=tu(d),d!==null){var x=Pl!==null?{id:ko,overflow:Fo}:null;return h.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=ss(18,null,null,0),x.stateNode=d,x.return=h,h.child=x,Di=h,Li=null,!0}return!1;default:return!1}}function R_(h){return(h.mode&1)!==0&&(h.flags&128)===0}function P_(h){if(Cn){var d=Li;if(d){var x=d;if(!Xb(h,d)){if(R_(h))throw Error(o(418));d=Nr(x);var A=Di;d&&Xb(h,d)?$b(A,x):(h.flags=h.flags&-4097|2,Cn=!1,Di=h)}}else{if(R_(h))throw Error(o(418));h.flags=h.flags&-4097|2,Cn=!1,Di=h}}}function Jb(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Di=h}function gh(h){if(!Se||h!==Di)return!1;if(!Cn)return Jb(h),Cn=!0,!1;if(h.tag!==3&&(h.tag!==5||me(h.type)&&!Te(h.type,h.memoizedProps))){var d=Li;if(d){if(R_(h)){for(h=Li;h;)h=Nr(h);throw Error(o(418))}for(;d;)$b(h,d),d=Nr(d)}}if(Jb(h),h.tag===13){if(!Se)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Li=z(h)}else Li=Di?Nr(h.stateNode):null;return!0}function ou(){Se&&(Li=Di=null,mh=Cn=!1)}function I_(h){Ps===null?Ps=[h]:Ps.push(h)}function vh(h,d,x){if(h=x.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var A=x.stateNode}if(!A)throw Error(o(147,h));var M=A,D=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===D?d.ref:(d=function(X){var oe=M.refs;oe===Hb&&(oe=M.refs={}),X===null?delete oe[D]:oe[D]=X},d._stringRef=D,d)}if(typeof h!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,h))}return h}function _m(h,d){throw h=Object.prototype.toString.call(d),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h))}function Kb(h){var d=h._init;return d(h._payload)}function Yb(h){function d(ge,ue){if(h){var xe=ge.deletions;xe===null?(ge.deletions=[ue],ge.flags|=16):xe.push(ue)}}function x(ge,ue){if(!h)return null;for(;ue!==null;)d(ge,ue),ue=ue.sibling;return null}function A(ge,ue){for(ge=new Map;ue!==null;)ue.key!==null?ge.set(ue.key,ue):ge.set(ue.index,ue),ue=ue.sibling;return ge}function M(ge,ue){return ge=Ma(ge,ue),ge.index=0,ge.sibling=null,ge}function D(ge,ue,xe){return ge.index=xe,h?(xe=ge.alternate,xe!==null?(xe=xe.index,xe<ue?(ge.flags|=2,ue):xe):(ge.flags|=2,ue)):(ge.flags|=1048576,ue)}function X(ge){return h&&ge.alternate===null&&(ge.flags|=2),ge}function oe(ge,ue,xe,rt){return ue===null||ue.tag!==6?(ue=px(xe,ge.mode,rt),ue.return=ge,ue):(ue=M(ue,xe),ue.return=ge,ue)}function Ee(ge,ue,xe,rt){var vt=xe.type;return vt===u?ft(ge,ue,xe.props.children,rt,xe.key):ue!==null&&(ue.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===S&&Kb(vt)===ue.type)?(rt=M(ue,xe.props),rt.ref=vh(ge,ue,xe),rt.return=ge,rt):(rt=Ym(xe.type,xe.key,xe.props,null,ge.mode,rt),rt.ref=vh(ge,ue,xe),rt.return=ge,rt)}function $e(ge,ue,xe,rt){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==xe.containerInfo||ue.stateNode.implementation!==xe.implementation?(ue=mx(xe,ge.mode,rt),ue.return=ge,ue):(ue=M(ue,xe.children||[]),ue.return=ge,ue)}function ft(ge,ue,xe,rt,vt){return ue===null||ue.tag!==7?(ue=Fl(xe,ge.mode,rt,vt),ue.return=ge,ue):(ue=M(ue,xe),ue.return=ge,ue)}function Bt(ge,ue,xe){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=px(""+ue,ge.mode,xe),ue.return=ge,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return xe=Ym(ue.type,ue.key,ue.props,null,ge.mode,xe),xe.ref=vh(ge,null,ue),xe.return=ge,xe;case c:return ue=mx(ue,ge.mode,xe),ue.return=ge,ue;case S:var rt=ue._init;return Bt(ge,rt(ue._payload),xe)}if(ie(ue)||b(ue))return ue=Fl(ue,ge.mode,xe,null),ue.return=ge,ue;_m(ge,ue)}return null}function At(ge,ue,xe,rt){var vt=ue!==null?ue.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return vt!==null?null:oe(ge,ue,""+xe,rt);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:return xe.key===vt?Ee(ge,ue,xe,rt):null;case c:return xe.key===vt?$e(ge,ue,xe,rt):null;case S:return vt=xe._init,At(ge,ue,vt(xe._payload),rt)}if(ie(xe)||b(xe))return vt!==null?null:ft(ge,ue,xe,rt,null);_m(ge,xe)}return null}function vn(ge,ue,xe,rt,vt){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return ge=ge.get(xe)||null,oe(ue,ge,""+rt,vt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case l:return ge=ge.get(rt.key===null?xe:rt.key)||null,Ee(ue,ge,rt,vt);case c:return ge=ge.get(rt.key===null?xe:rt.key)||null,$e(ue,ge,rt,vt);case S:var Ut=rt._init;return vn(ge,ue,xe,Ut(rt._payload),vt)}if(ie(rt)||b(rt))return ge=ge.get(xe)||null,ft(ue,ge,rt,vt,null);_m(ue,rt)}return null}function _t(ge,ue,xe,rt){for(var vt=null,Ut=null,Dt=ue,ln=ue=0,_r=null;Dt!==null&&ln<xe.length;ln++){Dt.index>ln?(_r=Dt,Dt=null):_r=Dt.sibling;var cn=At(ge,Dt,xe[ln],rt);if(cn===null){Dt===null&&(Dt=_r);break}h&&Dt&&cn.alternate===null&&d(ge,Dt),ue=D(cn,ue,ln),Ut===null?vt=cn:Ut.sibling=cn,Ut=cn,Dt=_r}if(ln===xe.length)return x(ge,Dt),Cn&&Il(ge,ln),vt;if(Dt===null){for(;ln<xe.length;ln++)Dt=Bt(ge,xe[ln],rt),Dt!==null&&(ue=D(Dt,ue,ln),Ut===null?vt=Dt:Ut.sibling=Dt,Ut=Dt);return Cn&&Il(ge,ln),vt}for(Dt=A(ge,Dt);ln<xe.length;ln++)_r=vn(Dt,ge,ln,xe[ln],rt),_r!==null&&(h&&_r.alternate!==null&&Dt.delete(_r.key===null?ln:_r.key),ue=D(_r,ue,ln),Ut===null?vt=_r:Ut.sibling=_r,Ut=_r);return h&&Dt.forEach(function(ba){return d(ge,ba)}),Cn&&Il(ge,ln),vt}function zr(ge,ue,xe,rt){var vt=b(xe);if(typeof vt!="function")throw Error(o(150));if(xe=vt.call(xe),xe==null)throw Error(o(151));for(var Ut=vt=null,Dt=ue,ln=ue=0,_r=null,cn=xe.next();Dt!==null&&!cn.done;ln++,cn=xe.next()){Dt.index>ln?(_r=Dt,Dt=null):_r=Dt.sibling;var ba=At(ge,Dt,cn.value,rt);if(ba===null){Dt===null&&(Dt=_r);break}h&&Dt&&ba.alternate===null&&d(ge,Dt),ue=D(ba,ue,ln),Ut===null?vt=ba:Ut.sibling=ba,Ut=ba,Dt=_r}if(cn.done)return x(ge,Dt),Cn&&Il(ge,ln),vt;if(Dt===null){for(;!cn.done;ln++,cn=xe.next())cn=Bt(ge,cn.value,rt),cn!==null&&(ue=D(cn,ue,ln),Ut===null?vt=cn:Ut.sibling=cn,Ut=cn);return Cn&&Il(ge,ln),vt}for(Dt=A(ge,Dt);!cn.done;ln++,cn=xe.next())cn=vn(Dt,ge,ln,cn.value,rt),cn!==null&&(h&&cn.alternate!==null&&Dt.delete(cn.key===null?ln:cn.key),ue=D(cn,ue,ln),Ut===null?vt=cn:Ut.sibling=cn,Ut=cn);return h&&Dt.forEach(function(vH){return d(ge,vH)}),Cn&&Il(ge,ln),vt}function os(ge,ue,xe,rt){if(typeof xe=="object"&&xe!==null&&xe.type===u&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:e:{for(var vt=xe.key,Ut=ue;Ut!==null;){if(Ut.key===vt){if(vt=xe.type,vt===u){if(Ut.tag===7){x(ge,Ut.sibling),ue=M(Ut,xe.props.children),ue.return=ge,ge=ue;break e}}else if(Ut.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===S&&Kb(vt)===Ut.type){x(ge,Ut.sibling),ue=M(Ut,xe.props),ue.ref=vh(ge,Ut,xe),ue.return=ge,ge=ue;break e}x(ge,Ut);break}else d(ge,Ut);Ut=Ut.sibling}xe.type===u?(ue=Fl(xe.props.children,ge.mode,rt,xe.key),ue.return=ge,ge=ue):(rt=Ym(xe.type,xe.key,xe.props,null,ge.mode,rt),rt.ref=vh(ge,ue,xe),rt.return=ge,ge=rt)}return X(ge);case c:e:{for(Ut=xe.key;ue!==null;){if(ue.key===Ut)if(ue.tag===4&&ue.stateNode.containerInfo===xe.containerInfo&&ue.stateNode.implementation===xe.implementation){x(ge,ue.sibling),ue=M(ue,xe.children||[]),ue.return=ge,ge=ue;break e}else{x(ge,ue);break}else d(ge,ue);ue=ue.sibling}ue=mx(xe,ge.mode,rt),ue.return=ge,ge=ue}return X(ge);case S:return Ut=xe._init,os(ge,ue,Ut(xe._payload),rt)}if(ie(xe))return _t(ge,ue,xe,rt);if(b(xe))return zr(ge,ue,xe,rt);_m(ge,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,ue!==null&&ue.tag===6?(x(ge,ue.sibling),ue=M(ue,xe),ue.return=ge,ge=ue):(x(ge,ue),ue=px(xe,ge.mode,rt),ue.return=ge,ge=ue),X(ge)):x(ge,ue)}return os}var au=Yb(!0),qb=Yb(!1),yh={},ns=ut(yh),_h=ut(yh),lu=ut(yh);function co(h){if(h===yh)throw Error(o(174));return h}function B_(h,d){gt(lu,d),gt(_h,h),gt(ns,yh),h=fe(d),ke(ns),gt(ns,h)}function cu(){ke(ns),ke(_h),ke(lu)}function Qb(h){var d=co(lu.current),x=co(ns.current);d=k(x,h.type,d),x!==d&&(gt(_h,h),gt(ns,d))}function D_(h){_h.current===h&&(ke(ns),ke(_h))}var Pn=ut(0);function xm(h){for(var d=h;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||to(x)||no(x)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var L_=[];function O_(){for(var h=0;h<L_.length;h++){var d=L_[h];mt?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}L_.length=0}var wm=a.ReactCurrentDispatcher,rs=a.ReactCurrentBatchConfig,uu=0,Un=null,kr=null,yr=null,Sm=!1,xh=!1,wh=0,Gz=0;function Fr(){throw Error(o(321))}function N_(h,d){if(d===null)return!1;for(var x=0;x<d.length&&x<h.length;x++)if(!oo(h[x],d[x]))return!1;return!0}function k_(h,d,x,A,M,D){if(uu=D,Un=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,wm.current=h===null||h.memoizedState===null?$z:Xz,h=x(A,M),xh){D=0;do{if(xh=!1,wh=0,25<=D)throw Error(o(301));D+=1,yr=kr=null,d.updateQueue=null,wm.current=Jz,h=x(A,M)}while(xh)}if(wm.current=Cm,d=kr!==null&&kr.next!==null,uu=0,yr=kr=Un=null,Sm=!1,d)throw Error(o(300));return h}function F_(){var h=wh!==0;return wh=0,h}function Uo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?Un.memoizedState=yr=h:yr=yr.next=h,yr}function uo(){if(kr===null){var h=Un.alternate;h=h!==null?h.memoizedState:null}else h=kr.next;var d=yr===null?Un.memoizedState:yr.next;if(d!==null)yr=d,kr=h;else{if(h===null)throw Error(o(310));kr=h,h={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},yr===null?Un.memoizedState=yr=h:yr=yr.next=h}return yr}function Bl(h,d){return typeof d=="function"?d(h):d}function Am(h){var d=uo(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var A=kr,M=A.baseQueue,D=x.pending;if(D!==null){if(M!==null){var X=M.next;M.next=D.next,D.next=X}A.baseQueue=M=D,x.pending=null}if(M!==null){D=M.next,A=A.baseState;var oe=X=null,Ee=null,$e=D;do{var ft=$e.lane;if((uu&ft)===ft)Ee!==null&&(Ee=Ee.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),A=$e.hasEagerState?$e.eagerState:h(A,$e.action);else{var Bt={lane:ft,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};Ee===null?(oe=Ee=Bt,X=A):Ee=Ee.next=Bt,Un.lanes|=ft,hu|=ft}$e=$e.next}while($e!==null&&$e!==D);Ee===null?X=A:Ee.next=oe,oo(A,d.memoizedState)||(Oi=!0),d.memoizedState=A,d.baseState=X,d.baseQueue=Ee,x.lastRenderedState=A}if(h=x.interleaved,h!==null){M=h;do D=M.lane,Un.lanes|=D,hu|=D,M=M.next;while(M!==h)}else M===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function Em(h){var d=uo(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var A=x.dispatch,M=x.pending,D=d.memoizedState;if(M!==null){x.pending=null;var X=M=M.next;do D=h(D,X.action),X=X.next;while(X!==M);oo(D,d.memoizedState)||(Oi=!0),d.memoizedState=D,d.baseQueue===null&&(d.baseState=D),x.lastRenderedState=D}return[D,A]}function Zb(){}function eC(h,d){var x=Un,A=uo(),M=d(),D=!oo(A.memoizedState,M);if(D&&(A.memoizedState=M,Oi=!0),A=A.queue,Ah(rC.bind(null,x,A,h),[h]),A.getSnapshot!==d||D||yr!==null&&yr.memoizedState.tag&1){if(x.flags|=2048,Sh(9,nC.bind(null,x,A,M,d),void 0,null),nr===null)throw Error(o(349));uu&30||tC(x,d,M)}return M}function tC(h,d,x){h.flags|=16384,h={getSnapshot:d,value:x},d=Un.updateQueue,d===null?(d={lastEffect:null,stores:null},Un.updateQueue=d,d.stores=[h]):(x=d.stores,x===null?d.stores=[h]:x.push(h))}function nC(h,d,x,A){d.value=x,d.getSnapshot=A,iC(d)&&is(h,1,-1)}function rC(h,d,x){return x(function(){iC(d)&&is(h,1,-1)})}function iC(h){var d=h.getSnapshot;h=h.value;try{var x=d();return!oo(h,x)}catch{return!0}}function U_(h){var d=Uo();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:h},d.queue=h,h=h.dispatch=jz.bind(null,Un,h),[d.memoizedState,h]}function Sh(h,d,x,A){return h={tag:h,create:d,destroy:x,deps:A,next:null},d=Un.updateQueue,d===null?(d={lastEffect:null,stores:null},Un.updateQueue=d,d.lastEffect=h.next=h):(x=d.lastEffect,x===null?d.lastEffect=h.next=h:(A=x.next,x.next=h,h.next=A,d.lastEffect=h)),h}function sC(){return uo().memoizedState}function Mm(h,d,x,A){var M=Uo();Un.flags|=h,M.memoizedState=Sh(1|d,x,void 0,A===void 0?null:A)}function bm(h,d,x,A){var M=uo();A=A===void 0?null:A;var D=void 0;if(kr!==null){var X=kr.memoizedState;if(D=X.destroy,A!==null&&N_(A,X.deps)){M.memoizedState=Sh(d,x,D,A);return}}Un.flags|=h,M.memoizedState=Sh(1|d,x,D,A)}function z_(h,d){return Mm(8390656,8,h,d)}function Ah(h,d){return bm(2048,8,h,d)}function oC(h,d){return bm(4,2,h,d)}function aC(h,d){return bm(4,4,h,d)}function lC(h,d){if(typeof d=="function")return h=h(),d(h),function(){d(null)};if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function cC(h,d,x){return x=x!=null?x.concat([h]):null,bm(4,4,lC.bind(null,d,h),x)}function H_(){}function uC(h,d){var x=uo();d=d===void 0?null:d;var A=x.memoizedState;return A!==null&&d!==null&&N_(d,A[1])?A[0]:(x.memoizedState=[h,d],h)}function fC(h,d){var x=uo();d=d===void 0?null:d;var A=x.memoizedState;return A!==null&&d!==null&&N_(d,A[1])?A[0]:(h=h(),x.memoizedState=[h,d],h)}function Vz(h,d){var x=an;an=x!==0&&4>x?x:4,h(!0);var A=rs.transition;rs.transition={};try{h(!1),d()}finally{an=x,rs.transition=A}}function hC(){return uo().memoizedState}function Wz(h,d,x){var A=Aa(h);x={lane:A,action:x,hasEagerState:!1,eagerState:null,next:null},dC(h)?pC(d,x):(mC(h,d,x),x=ti(),h=is(h,A,x),h!==null&&gC(h,d,A))}function jz(h,d,x){var A=Aa(h),M={lane:A,action:x,hasEagerState:!1,eagerState:null,next:null};if(dC(h))pC(d,M);else{mC(h,d,M);var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=d.lastRenderedReducer,D!==null))try{var X=d.lastRenderedState,oe=D(X,x);if(M.hasEagerState=!0,M.eagerState=oe,oo(oe,X))return}catch{}finally{}x=ti(),h=is(h,A,x),h!==null&&gC(h,d,A)}}function dC(h){var d=h.alternate;return h===Un||d!==null&&d===Un}function pC(h,d){xh=Sm=!0;var x=h.pending;x===null?d.next=d:(d.next=x.next,x.next=d),h.pending=d}function mC(h,d,x){nr!==null&&h.mode&1&&!(Gt&2)?(h=d.interleaved,h===null?(x.next=x,lo===null?lo=[d]:lo.push(d)):(x.next=h.next,h.next=x),d.interleaved=x):(h=d.pending,h===null?x.next=x:(x.next=h.next,h.next=x),d.pending=x)}function gC(h,d,x){if(x&4194240){var A=d.lanes;A&=h.pendingLanes,x|=A,d.lanes=x,m_(h,x)}}var Cm={readContext:Zi,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},$z={readContext:Zi,useCallback:function(h,d){return Uo().memoizedState=[h,d===void 0?null:d],h},useContext:Zi,useEffect:z_,useImperativeHandle:function(h,d,x){return x=x!=null?x.concat([h]):null,Mm(4194308,4,lC.bind(null,d,h),x)},useLayoutEffect:function(h,d){return Mm(4194308,4,h,d)},useInsertionEffect:function(h,d){return Mm(4,2,h,d)},useMemo:function(h,d){var x=Uo();return d=d===void 0?null:d,h=h(),x.memoizedState=[h,d],h},useReducer:function(h,d,x){var A=Uo();return d=x!==void 0?x(d):d,A.memoizedState=A.baseState=d,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:d},A.queue=h,h=h.dispatch=Wz.bind(null,Un,h),[A.memoizedState,h]},useRef:function(h){var d=Uo();return h={current:h},d.memoizedState=h},useState:U_,useDebugValue:H_,useDeferredValue:function(h){var d=U_(h),x=d[0],A=d[1];return z_(function(){var M=rs.transition;rs.transition={};try{A(h)}finally{rs.transition=M}},[h]),x},useTransition:function(){var h=U_(!1),d=h[0];return h=Vz.bind(null,h[1]),Uo().memoizedState=h,[d,h]},useMutableSource:function(){},useSyncExternalStore:function(h,d,x){var A=Un,M=Uo();if(Cn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=d(),nr===null)throw Error(o(349));uu&30||tC(A,d,x)}M.memoizedState=x;var D={value:x,getSnapshot:d};return M.queue=D,z_(rC.bind(null,A,D,h),[h]),A.flags|=2048,Sh(9,nC.bind(null,A,D,x,d),void 0,null),x},useId:function(){var h=Uo(),d=nr.identifierPrefix;if(Cn){var x=Fo,A=ko;x=(A&~(1<<32-gn(A)-1)).toString(32)+x,d=":"+d+"R"+x,x=wh++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=Gz++,d=":"+d+"r"+x.toString(32)+":";return h.memoizedState=d},unstable_isNewReconciler:!1},Xz={readContext:Zi,useCallback:uC,useContext:Zi,useEffect:Ah,useImperativeHandle:cC,useInsertionEffect:oC,useLayoutEffect:aC,useMemo:fC,useReducer:Am,useRef:sC,useState:function(){return Am(Bl)},useDebugValue:H_,useDeferredValue:function(h){var d=Am(Bl),x=d[0],A=d[1];return Ah(function(){var M=rs.transition;rs.transition={};try{A(h)}finally{rs.transition=M}},[h]),x},useTransition:function(){var h=Am(Bl)[0],d=uo().memoizedState;return[h,d]},useMutableSource:Zb,useSyncExternalStore:eC,useId:hC,unstable_isNewReconciler:!1},Jz={readContext:Zi,useCallback:uC,useContext:Zi,useEffect:Ah,useImperativeHandle:cC,useInsertionEffect:oC,useLayoutEffect:aC,useMemo:fC,useReducer:Em,useRef:sC,useState:function(){return Em(Bl)},useDebugValue:H_,useDeferredValue:function(h){var d=Em(Bl),x=d[0],A=d[1];return Ah(function(){var M=rs.transition;rs.transition={};try{A(h)}finally{rs.transition=M}},[h]),x},useTransition:function(){var h=Em(Bl)[0],d=uo().memoizedState;return[h,d]},useMutableSource:Zb,useSyncExternalStore:eC,useId:hC,unstable_isNewReconciler:!1};function G_(h,d){try{var x="",A=d;do x+=Hz(A),A=A.return;while(A);var M=x}catch(D){M=`
Error generating stack: `+D.message+`
`+D.stack}return{value:h,source:d,stack:M}}function V_(h,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var Kz=typeof WeakMap=="function"?WeakMap:Map;function vC(h,d,x){x=No(-1,x),x.tag=3,x.payload={element:null};var A=d.value;return x.callback=function(){Vm||(Vm=!0,ax=A),V_(h,d)},x}function yC(h,d,x){x=No(-1,x),x.tag=3;var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var M=d.value;x.payload=function(){return A(M)},x.callback=function(){V_(h,d)}}var D=h.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(x.callback=function(){V_(h,d),typeof A!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var X=d.stack;this.componentDidCatch(d.value,{componentStack:X!==null?X:""})}),x}function _C(h,d,x){var A=h.pingCache;if(A===null){A=h.pingCache=new Kz;var M=new Set;A.set(d,M)}else M=A.get(d),M===void 0&&(M=new Set,A.set(d,M));M.has(x)||(M.add(x),h=cH.bind(null,h,d,x),d.then(h,h))}function xC(h){do{var d;if((d=h.tag===13)&&(d=h.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return h;h=h.return}while(h!==null);return null}function wC(h,d,x,A,M){return h.mode&1?(h.flags|=65536,h.lanes=M,h):(h===d?h.flags|=65536:(h.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=No(-1,1),d.tag=2,xa(x,d))),x.lanes|=1),h)}function fo(h){h.flags|=4}function SC(h,d){if(h!==null&&h.child===d.child)return!0;if(d.flags&16)return!1;for(h=d.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Eh,Mh,Tm,Rm;if(te)Eh=function(h,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)ye(h,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Mh=function(){},Tm=function(h,d,x,A,M){if(h=h.memoizedProps,h!==A){var D=d.stateNode,X=co(ns.current);x=he(D,x,h,A,M,X),(d.updateQueue=x)&&fo(d)}},Rm=function(h,d,x,A){x!==A&&fo(d)};else if(Ie){Eh=function(h,d,x,A){for(var M=d.child;M!==null;){if(M.tag===5){var D=M.stateNode;x&&A&&(D=Xn(D,M.type,M.memoizedProps,M)),ye(h,D)}else if(M.tag===6)D=M.stateNode,x&&A&&(D=er(D,M.memoizedProps,M)),ye(h,D);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)D=M.child,D!==null&&(D.return=M),Eh(h,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var AC=function(h,d,x,A){for(var M=d.child;M!==null;){if(M.tag===5){var D=M.stateNode;x&&A&&(D=Xn(D,M.type,M.memoizedProps,M)),Kt(h,D)}else if(M.tag===6)D=M.stateNode,x&&A&&(D=er(D,M.memoizedProps,M)),Kt(h,D);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)D=M.child,D!==null&&(D.return=M),AC(h,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};Mh=function(h,d){var x=d.stateNode;if(!SC(h,d)){h=x.containerInfo;var A=Pt(h);AC(A,d,!1,!1),x.pendingChildren=A,fo(d),dn(h,A)}},Tm=function(h,d,x,A,M){var D=h.stateNode,X=h.memoizedProps;if((h=SC(h,d))&&X===A)d.stateNode=D;else{var oe=d.stateNode,Ee=co(ns.current),$e=null;X!==A&&($e=he(oe,x,X,A,M,Ee)),h&&$e===null?d.stateNode=D:(D=St(D,$e,x,X,A,d,h,oe),Ue(D,x,A,M,Ee)&&fo(d),d.stateNode=D,h?fo(d):Eh(D,d,!1,!1))}},Rm=function(h,d,x,A){x!==A?(h=co(lu.current),x=co(ns.current),d.stateNode=Me(A,h,x,d),fo(d)):d.stateNode=h.stateNode}}else Mh=function(){},Tm=function(){},Rm=function(){};function bh(h,d){if(!Cn)switch(h.tailMode){case"hidden":d=h.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:A.sibling=null}}function Ur(h){var d=h.alternate!==null&&h.alternate.child===h.child,x=0,A=0;if(d)for(var M=h.child;M!==null;)x|=M.lanes|M.childLanes,A|=M.subtreeFlags&14680064,A|=M.flags&14680064,M.return=h,M=M.sibling;else for(M=h.child;M!==null;)x|=M.lanes|M.childLanes,A|=M.subtreeFlags,A|=M.flags,M.return=h,M=M.sibling;return h.subtreeFlags|=A,h.childLanes=x,d}function Yz(h,d,x){var A=d.pendingProps;switch(T_(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(d),null;case 1:return Ht(d.type)&&yn(),Ur(d),null;case 3:return A=d.stateNode,cu(),ke(It),ke(jt),O_(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(gh(d)?fo(d):h===null||h.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Ps!==null&&(ux(Ps),Ps=null))),Mh(h,d),Ur(d),null;case 5:D_(d),x=co(lu.current);var M=d.type;if(h!==null&&d.stateNode!=null)Tm(h,d,M,A,x),h.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!A){if(d.stateNode===null)throw Error(o(166));return Ur(d),null}if(h=co(ns.current),gh(d)){if(!Se)throw Error(o(175));h=N(d.stateNode,d.type,d.memoizedProps,x,h,d,!mh),d.updateQueue=h,h!==null&&fo(d)}else{var D=ae(M,A,x,h,d);Eh(D,d,!1,!1),d.stateNode=D,Ue(D,M,A,x,h)&&fo(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ur(d),null;case 6:if(h&&d.stateNode!=null)Rm(h,d,h.memoizedProps,A);else{if(typeof A!="string"&&d.stateNode===null)throw Error(o(166));if(h=co(lu.current),x=co(ns.current),gh(d)){if(!Se)throw Error(o(176));if(h=d.stateNode,A=d.memoizedProps,(x=H(h,A,d,!mh))&&(M=Di,M!==null))switch(D=(M.mode&1)!==0,M.tag){case 3:ve(M.stateNode.containerInfo,h,A,D);break;case 5:_e(M.type,M.memoizedProps,M.stateNode,h,A,D)}x&&fo(d)}else d.stateNode=Me(A,h,x,d)}return Ur(d),null;case 13:if(ke(Pn),A=d.memoizedState,Cn&&Li!==null&&d.mode&1&&!(d.flags&128)){for(h=Li;h;)h=Nr(h);return ou(),d.flags|=98560,d}if(A!==null&&A.dehydrated!==null){if(A=gh(d),h===null){if(!A)throw Error(o(318));if(!Se)throw Error(o(344));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));T(h,d)}else ou(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Ur(d),null}return Ps!==null&&(ux(Ps),Ps=null),d.flags&128?(d.lanes=x,d):(A=A!==null,x=!1,h===null?gh(d):x=h.memoizedState!==null,A&&!x&&(d.child.flags|=8192,d.mode&1&&(h===null||Pn.current&1?ur===0&&(ur=3):hx())),d.updateQueue!==null&&(d.flags|=4),Ur(d),null);case 4:return cu(),Mh(h,d),h===null&&Le(d.stateNode.containerInfo),Ur(d),null;case 10:return S_(d.type._context),Ur(d),null;case 17:return Ht(d.type)&&yn(),Ur(d),null;case 19:if(ke(Pn),M=d.memoizedState,M===null)return Ur(d),null;if(A=(d.flags&128)!==0,D=M.rendering,D===null)if(A)bh(M,!1);else{if(ur!==0||h!==null&&h.flags&128)for(h=d.child;h!==null;){if(D=xm(h),D!==null){for(d.flags|=128,bh(M,!1),h=D.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),d.subtreeFlags=0,h=x,A=d.child;A!==null;)x=A,M=h,x.flags&=14680066,D=x.alternate,D===null?(x.childLanes=0,x.lanes=M,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=D.childLanes,x.lanes=D.lanes,x.child=D.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=D.memoizedProps,x.memoizedState=D.memoizedState,x.updateQueue=D.updateQueue,x.type=D.type,M=D.dependencies,x.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),A=A.sibling;return gt(Pn,Pn.current&1|2),d.child}h=h.sibling}M.tail!==null&&vr()>ox&&(d.flags|=128,A=!0,bh(M,!1),d.lanes=4194304)}else{if(!A)if(h=xm(D),h!==null){if(d.flags|=128,A=!0,h=h.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),bh(M,!0),M.tail===null&&M.tailMode==="hidden"&&!D.alternate&&!Cn)return Ur(d),null}else 2*vr()-M.renderingStartTime>ox&&x!==1073741824&&(d.flags|=128,A=!0,bh(M,!1),d.lanes=4194304);M.isBackwards?(D.sibling=d.child,d.child=D):(h=M.last,h!==null?h.sibling=D:d.child=D,M.last=D)}return M.tail!==null?(d=M.tail,M.rendering=d,M.tail=d.sibling,M.renderingStartTime=vr(),d.sibling=null,h=Pn.current,gt(Pn,A?h&1|2:h&1),d):(Ur(d),null);case 22:case 23:return fx(),A=d.memoizedState!==null,h!==null&&h.memoizedState!==null!==A&&(d.flags|=8192),A&&d.mode&1?Ni&1073741824&&(Ur(d),te&&d.subtreeFlags&6&&(d.flags|=8192)):Ur(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var qz=a.ReactCurrentOwner,Oi=!1;function ei(h,d,x,A){d.child=h===null?qb(d,null,x,A):au(d,h.child,x,A)}function EC(h,d,x,A,M){x=x.render;var D=d.ref;return ru(d,M),A=k_(h,d,x,A,D,M),x=F_(),h!==null&&!Oi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~M,zo(h,d,M)):(Cn&&x&&C_(d),d.flags|=1,ei(h,d,A,M),d.child)}function MC(h,d,x,A,M){if(h===null){var D=x.type;return typeof D=="function"&&!dx(D)&&D.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=D,bC(h,d,D,A,M)):(h=Ym(x.type,null,A,d,d.mode,M),h.ref=d.ref,h.return=d,d.child=h)}if(D=h.child,!(h.lanes&M)){var X=D.memoizedProps;if(x=x.compare,x=x!==null?x:fm,x(X,A)&&h.ref===d.ref)return zo(h,d,M)}return d.flags|=1,h=Ma(D,A),h.ref=d.ref,h.return=d,d.child=h}function bC(h,d,x,A,M){if(h!==null&&fm(h.memoizedProps,A)&&h.ref===d.ref)if(Oi=!1,(h.lanes&M)!==0)h.flags&131072&&(Oi=!0);else return d.lanes=h.lanes,zo(h,d,M);return W_(h,d,x,A,M)}function CC(h,d,x){var A=d.pendingProps,M=A.children,D=h!==null?h.memoizedState:null;if(A.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},gt(fu,Ni),Ni|=x;else if(x&1073741824)d.memoizedState={baseLanes:0,cachePool:null},A=D!==null?D.baseLanes:x,gt(fu,Ni),Ni|=A;else return h=D!==null?D.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h,cachePool:null},d.updateQueue=null,gt(fu,Ni),Ni|=h,null;else D!==null?(A=D.baseLanes|x,d.memoizedState=null):A=x,gt(fu,Ni),Ni|=A;return ei(h,d,M,x),d.child}function TC(h,d){var x=d.ref;(h===null&&x!==null||h!==null&&h.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function W_(h,d,x,A,M){var D=Ht(x)?Qt:jt.current;return D=tr(d,D),ru(d,M),x=k_(h,d,x,A,D,M),A=F_(),h!==null&&!Oi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~M,zo(h,d,M)):(Cn&&A&&C_(d),d.flags|=1,ei(h,d,x,M),d.child)}function RC(h,d,x,A,M){if(Ht(x)){var D=!0;nn(d)}else D=!1;if(ru(d,M),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),Vb(d,x,A),b_(d,x,A,M),A=!0;else if(h===null){var X=d.stateNode,oe=d.memoizedProps;X.props=oe;var Ee=X.context,$e=x.contextType;typeof $e=="object"&&$e!==null?$e=Zi($e):($e=Ht(x)?Qt:jt.current,$e=tr(d,$e));var ft=x.getDerivedStateFromProps,Bt=typeof ft=="function"||typeof X.getSnapshotBeforeUpdate=="function";Bt||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==A||Ee!==$e)&&Wb(d,X,A,$e),_a=!1;var At=d.memoizedState;X.state=At,mm(d,A,X,M),Ee=d.memoizedState,oe!==A||At!==Ee||It.current||_a?(typeof ft=="function"&&(M_(d,x,ft,A),Ee=d.memoizedState),(oe=_a||Gb(d,x,oe,A,At,Ee,$e))?(Bt||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(d.flags|=4194308)):(typeof X.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=Ee),X.props=A,X.state=Ee,X.context=$e,A=oe):(typeof X.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{X=d.stateNode,Fb(h,d),oe=d.memoizedProps,$e=d.type===d.elementType?oe:Rs(d.type,oe),X.props=$e,Bt=d.pendingProps,At=X.context,Ee=x.contextType,typeof Ee=="object"&&Ee!==null?Ee=Zi(Ee):(Ee=Ht(x)?Qt:jt.current,Ee=tr(d,Ee));var vn=x.getDerivedStateFromProps;(ft=typeof vn=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==Bt||At!==Ee)&&Wb(d,X,A,Ee),_a=!1,At=d.memoizedState,X.state=At,mm(d,A,X,M);var _t=d.memoizedState;oe!==Bt||At!==_t||It.current||_a?(typeof vn=="function"&&(M_(d,x,vn,A),_t=d.memoizedState),($e=_a||Gb(d,x,$e,A,At,_t,Ee)||!1)?(ft||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(A,_t,Ee),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(A,_t,Ee)),typeof X.componentDidUpdate=="function"&&(d.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof X.componentDidUpdate!="function"||oe===h.memoizedProps&&At===h.memoizedState||(d.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===h.memoizedProps&&At===h.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=_t),X.props=A,X.state=_t,X.context=Ee,A=$e):(typeof X.componentDidUpdate!="function"||oe===h.memoizedProps&&At===h.memoizedState||(d.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===h.memoizedProps&&At===h.memoizedState||(d.flags|=1024),A=!1)}return j_(h,d,x,A,D,M)}function j_(h,d,x,A,M,D){TC(h,d);var X=(d.flags&128)!==0;if(!A&&!X)return M&&en(d,x,!1),zo(h,d,D);A=d.stateNode,qz.current=d;var oe=X&&typeof x.getDerivedStateFromError!="function"?null:A.render();return d.flags|=1,h!==null&&X?(d.child=au(d,h.child,null,D),d.child=au(d,null,oe,D)):ei(h,d,oe,D),d.memoizedState=A.state,M&&en(d,x,!0),d.child}function PC(h){var d=h.stateNode;d.pendingContext?Zt(h,d.pendingContext,d.pendingContext!==d.context):d.context&&Zt(h,d.context,!1),B_(h,d.containerInfo)}function IC(h,d,x,A,M){return ou(),I_(M),d.flags|=256,ei(h,d,x,A),d.child}var Pm={dehydrated:null,treeContext:null,retryLane:0};function Im(h){return{baseLanes:h,cachePool:null}}function BC(h,d,x){var A=d.pendingProps,M=Pn.current,D=!1,X=(d.flags&128)!==0,oe;if((oe=X)||(oe=h!==null&&h.memoizedState===null?!1:(M&2)!==0),oe?(D=!0,d.flags&=-129):(h===null||h.memoizedState!==null)&&(M|=1),gt(Pn,M&1),h===null)return P_(d),h=d.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(d.mode&1?no(h)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(M=A.children,h=A.fallback,D?(A=d.mode,D=d.child,M={mode:"hidden",children:M},!(A&1)&&D!==null?(D.childLanes=0,D.pendingProps=M):D=qm(M,A,0,null),h=Fl(h,A,x,null),D.return=d,h.return=d,D.sibling=h,d.child=D,d.child.memoizedState=Im(x),d.memoizedState=Pm,h):$_(d,M));if(M=h.memoizedState,M!==null){if(oe=M.dehydrated,oe!==null){if(X)return d.flags&256?(d.flags&=-257,Bm(h,d,x,Error(o(422)))):d.memoizedState!==null?(d.child=h.child,d.flags|=128,null):(D=A.fallback,M=d.mode,A=qm({mode:"visible",children:A.children},M,0,null),D=Fl(D,M,x,null),D.flags|=2,A.return=d,D.return=d,A.sibling=D,d.child=A,d.mode&1&&au(d,h.child,null,x),d.child.memoizedState=Im(x),d.memoizedState=Pm,D);if(!(d.mode&1))d=Bm(h,d,x,null);else if(no(oe))d=Bm(h,d,x,Error(o(419)));else if(A=(x&h.childLanes)!==0,Oi||A){if(A=nr,A!==null){switch(x&-x){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}A=D&(A.suspendedLanes|x)?0:D,A!==0&&A!==M.retryLane&&(M.retryLane=A,is(h,A,-1))}hx(),d=Bm(h,d,x,Error(o(421)))}else to(oe)?(d.flags|=128,d.child=h.child,d=uH.bind(null,h),ro(oe,d),d=null):(x=M.treeContext,Se&&(Li=hh(oe),Di=d,Cn=!0,Ps=null,mh=!1,x!==null&&(es[ts++]=ko,es[ts++]=Fo,es[ts++]=Pl,ko=x.id,Fo=x.overflow,Pl=d)),d=$_(d,d.pendingProps.children),d.flags|=4096);return d}return D?(A=LC(h,d,A.children,A.fallback,x),D=d.child,M=h.child.memoizedState,D.memoizedState=M===null?Im(x):{baseLanes:M.baseLanes|x,cachePool:null},D.childLanes=h.childLanes&~x,d.memoizedState=Pm,A):(x=DC(h,d,A.children,x),d.memoizedState=null,x)}return D?(A=LC(h,d,A.children,A.fallback,x),D=d.child,M=h.child.memoizedState,D.memoizedState=M===null?Im(x):{baseLanes:M.baseLanes|x,cachePool:null},D.childLanes=h.childLanes&~x,d.memoizedState=Pm,A):(x=DC(h,d,A.children,x),d.memoizedState=null,x)}function $_(h,d){return d=qm({mode:"visible",children:d},h.mode,0,null),d.return=h,h.child=d}function DC(h,d,x,A){var M=h.child;return h=M.sibling,x=Ma(M,{mode:"visible",children:x}),!(d.mode&1)&&(x.lanes=A),x.return=d,x.sibling=null,h!==null&&(A=d.deletions,A===null?(d.deletions=[h],d.flags|=16):A.push(h)),d.child=x}function LC(h,d,x,A,M){var D=d.mode;h=h.child;var X=h.sibling,oe={mode:"hidden",children:x};return!(D&1)&&d.child!==h?(x=d.child,x.childLanes=0,x.pendingProps=oe,d.deletions=null):(x=Ma(h,oe),x.subtreeFlags=h.subtreeFlags&14680064),X!==null?A=Ma(X,A):(A=Fl(A,D,M,null),A.flags|=2),A.return=d,x.return=d,x.sibling=A,d.child=x,A}function Bm(h,d,x,A){return A!==null&&I_(A),au(d,h.child,null,x),h=$_(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function OC(h,d,x){h.lanes|=d;var A=h.alternate;A!==null&&(A.lanes|=d),A_(h.return,d,x)}function X_(h,d,x,A,M){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:x,tailMode:M}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=A,D.tail=x,D.tailMode=M)}function NC(h,d,x){var A=d.pendingProps,M=A.revealOrder,D=A.tail;if(ei(h,d,A.children,x),A=Pn.current,A&2)A=A&1|2,d.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&OC(h,x,d);else if(h.tag===19)OC(h,x,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}A&=1}if(gt(Pn,A),!(d.mode&1))d.memoizedState=null;else switch(M){case"forwards":for(x=d.child,M=null;x!==null;)h=x.alternate,h!==null&&xm(h)===null&&(M=x),x=x.sibling;x=M,x===null?(M=d.child,d.child=null):(M=x.sibling,x.sibling=null),X_(d,!1,M,x,D);break;case"backwards":for(x=null,M=d.child,d.child=null;M!==null;){if(h=M.alternate,h!==null&&xm(h)===null){d.child=M;break}h=M.sibling,M.sibling=x,x=M,M=h}X_(d,!0,x,null,D);break;case"together":X_(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function zo(h,d,x){if(h!==null&&(d.dependencies=h.dependencies),hu|=d.lanes,!(x&d.childLanes))return null;if(h!==null&&d.child!==h.child)throw Error(o(153));if(d.child!==null){for(h=d.child,x=Ma(h,h.pendingProps),d.child=x,x.return=d;h.sibling!==null;)h=h.sibling,x=x.sibling=Ma(h,h.pendingProps),x.return=d;x.sibling=null}return d.child}function Qz(h,d,x){switch(d.tag){case 3:PC(d),ou();break;case 5:Qb(d);break;case 1:Ht(d.type)&&nn(d);break;case 4:B_(d,d.stateNode.containerInfo);break;case 10:kb(d,d.type._context,d.memoizedProps.value);break;case 13:var A=d.memoizedState;if(A!==null)return A.dehydrated!==null?(gt(Pn,Pn.current&1),d.flags|=128,null):x&d.child.childLanes?BC(h,d,x):(gt(Pn,Pn.current&1),h=zo(h,d,x),h!==null?h.sibling:null);gt(Pn,Pn.current&1);break;case 19:if(A=(x&d.childLanes)!==0,h.flags&128){if(A)return NC(h,d,x);d.flags|=128}var M=d.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),gt(Pn,Pn.current),A)break;return null;case 22:case 23:return d.lanes=0,CC(h,d,x)}return zo(h,d,x)}function Zz(h,d){switch(T_(d),d.tag){case 1:return Ht(d.type)&&yn(),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return cu(),ke(It),ke(jt),O_(),h=d.flags,h&65536&&!(h&128)?(d.flags=h&-65537|128,d):null;case 5:return D_(d),null;case 13:if(ke(Pn),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(o(340));ou()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return ke(Pn),null;case 4:return cu(),null;case 10:return S_(d.type._context),null;case 22:case 23:return fx(),null;case 24:return null;default:return null}}var Dm=!1,Dl=!1,eH=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Lm(h,d){var x=h.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(A){yi(h,d,A)}else x.current=null}function J_(h,d,x){try{x()}catch(A){yi(h,d,A)}}var kC=!1;function tH(h,d){for(Y(h.containerInfo),nt=d;nt!==null;)if(h=nt,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,nt=d;else for(;nt!==null;){h=nt;try{var x=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var A=x.memoizedProps,M=x.memoizedState,D=h.stateNode,X=D.getSnapshotBeforeUpdate(h.elementType===h.type?A:Rs(h.type,A),M);D.__reactInternalSnapshotBeforeUpdate=X}break;case 3:te&&Ke(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(oe){yi(h,h.return,oe)}if(d=h.sibling,d!==null){d.return=h.return,nt=d;break}nt=h.return}return x=kC,kC=!1,x}function Ll(h,d,x){var A=d.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var M=A=A.next;do{if((M.tag&h)===h){var D=M.destroy;M.destroy=void 0,D!==void 0&&J_(d,x,D)}M=M.next}while(M!==A)}}function Ch(h,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&h)===h){var A=x.create;x.destroy=A()}x=x.next}while(x!==d)}}function K_(h){var d=h.ref;if(d!==null){var x=h.stateNode;switch(h.tag){case 5:h=ee(x);break;default:h=x}typeof d=="function"?d(h):d.current=h}}function FC(h,d,x){if(so&&typeof so.onCommitFiberUnmount=="function")try{so.onCommitFiberUnmount(cm,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(h=d.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var A=h=h.next;do{var M=A,D=M.destroy;M=M.tag,D!==void 0&&(M&2||M&4)&&J_(d,x,D),A=A.next}while(A!==h)}break;case 1:if(Lm(d,x),h=d.stateNode,typeof h.componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(X){yi(d,x,X)}break;case 5:Lm(d,x);break;case 4:te?WC(h,d,x):Ie&&Ie&&(d=d.stateNode.containerInfo,x=Pt(d),zt(d,x))}}function UC(h,d,x){for(var A=d;;)if(FC(h,A,x),A.child===null||te&&A.tag===4){if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function zC(h){var d=h.alternate;d!==null&&(h.alternate=null,zC(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&qe(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function HC(h){return h.tag===5||h.tag===3||h.tag===4}function GC(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||HC(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function VC(h){if(te){e:{for(var d=h.return;d!==null;){if(HC(d))break e;d=d.return}throw Error(o(160))}var x=d;switch(x.tag){case 5:d=x.stateNode,x.flags&32&&(We(d),x.flags&=-33),x=GC(h),q_(h,x,d);break;case 3:case 4:d=x.stateNode.containerInfo,x=GC(h),Y_(h,x,d);break;default:throw Error(o(161))}}}function Y_(h,d,x){var A=h.tag;if(A===5||A===6)h=h.stateNode,d?He(x,h,d):yt(x,h);else if(A!==4&&(h=h.child,h!==null))for(Y_(h,d,x),h=h.sibling;h!==null;)Y_(h,d,x),h=h.sibling}function q_(h,d,x){var A=h.tag;if(A===5||A===6)h=h.stateNode,d?pt(x,h,d):Je(x,h);else if(A!==4&&(h=h.child,h!==null))for(q_(h,d,x),h=h.sibling;h!==null;)q_(h,d,x),h=h.sibling}function WC(h,d,x){for(var A=d,M=!1,D,X;;){if(!M){M=A.return;e:for(;;){if(M===null)throw Error(o(160));switch(D=M.stateNode,M.tag){case 5:X=!1;break e;case 3:D=D.containerInfo,X=!0;break e;case 4:D=D.containerInfo,X=!0;break e}M=M.return}M=!0}if(A.tag===5||A.tag===6)UC(h,A,x),X?be(D,A.stateNode):re(D,A.stateNode);else if(A.tag===18)X?ce(D,A.stateNode):K(D,A.stateNode);else if(A.tag===4){if(A.child!==null){D=A.stateNode.containerInfo,X=!0,A.child.return=A,A=A.child;continue}}else if(FC(h,A,x),A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return,A.tag===4&&(M=!1)}A.sibling.return=A.return,A=A.sibling}}function Q_(h,d){if(te){switch(d.tag){case 0:case 11:case 14:case 15:Ll(3,d,d.return),Ch(3,d),Ll(5,d,d.return);return;case 1:return;case 5:var x=d.stateNode;if(x!=null){var A=d.memoizedProps;h=h!==null?h.memoizedProps:A;var M=d.type,D=d.updateQueue;d.updateQueue=null,D!==null&&Rt(x,D,M,h,A,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));x=d.memoizedProps,Fe(d.stateNode,h!==null?h.memoizedProps:x,x);return;case 3:Se&&h!==null&&h.memoizedState.isDehydrated&&W(d.stateNode.containerInfo);return;case 12:return;case 13:Om(d);return;case 19:Om(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:Ll(3,d,d.return),Ch(3,d),Ll(5,d,d.return);return;case 12:return;case 13:Om(d);return;case 19:Om(d);return;case 3:Se&&h!==null&&h.memoizedState.isDehydrated&&W(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ie){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,zt(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Om(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var x=h.stateNode;x===null&&(x=h.stateNode=new eH),d.forEach(function(A){var M=fH.bind(null,h,A);x.has(A)||(x.add(A),A.then(M,M))})}}function nH(h,d){for(nt=d;nt!==null;){d=nt;var x=d.deletions;if(x!==null)for(var A=0;A<x.length;A++){var M=x[A];try{var D=h;te?WC(D,M,d):UC(D,M,d);var X=M.alternate;X!==null&&(X.return=null),M.return=null}catch(vt){yi(M,d,vt)}}if(x=d.child,d.subtreeFlags&12854&&x!==null)x.return=d,nt=x;else for(;nt!==null;){d=nt;try{var oe=d.flags;if(oe&32&&te&&We(d.stateNode),oe&512){var Ee=d.alternate;if(Ee!==null){var $e=Ee.ref;$e!==null&&(typeof $e=="function"?$e(null):$e.current=null)}}if(oe&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var ft=d.alternate;(ft===null||ft.memoizedState===null)&&(sx=vr())}break;case 22:var Bt=d.memoizedState!==null,At=d.alternate,vn=At!==null&&At.memoizedState!==null;if(x=d,te){e:if(A=x,M=Bt,D=null,te)for(var _t=A;;){if(_t.tag===5){if(D===null){D=_t;var zr=_t.stateNode;M?q(zr):se(_t.stateNode,_t.memoizedProps)}}else if(_t.tag===6){if(D===null){var os=_t.stateNode;M?Ve(os):Pe(os,_t.memoizedProps)}}else if((_t.tag!==22&&_t.tag!==23||_t.memoizedState===null||_t===A)&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===A)break;for(;_t.sibling===null;){if(_t.return===null||_t.return===A)break e;D===_t&&(D=null),_t=_t.return}D===_t&&(D=null),_t.sibling.return=_t.return,_t=_t.sibling}}if(Bt&&!vn&&x.mode&1){nt=x;for(var ge=x.child;ge!==null;){for(x=nt=ge;nt!==null;){A=nt;var ue=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Ll(4,A,A.return);break;case 1:Lm(A,A.return);var xe=A.stateNode;if(typeof xe.componentWillUnmount=="function"){var rt=A.return;try{xe.props=A.memoizedProps,xe.state=A.memoizedState,xe.componentWillUnmount()}catch(vt){yi(A,rt,vt)}}break;case 5:Lm(A,A.return);break;case 22:if(A.memoizedState!==null){XC(x);continue}}ue!==null?(ue.return=A,nt=ue):XC(x)}ge=ge.sibling}}}switch(oe&4102){case 2:VC(d),d.flags&=-3;break;case 6:VC(d),d.flags&=-3,Q_(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Q_(d.alternate,d);break;case 4:Q_(d.alternate,d)}}catch(vt){yi(d,d.return,vt)}if(x=d.sibling,x!==null){x.return=d.return,nt=x;break}nt=d.return}}}function rH(h,d,x){nt=h,jC(h)}function jC(h,d,x){for(var A=(h.mode&1)!==0;nt!==null;){var M=nt,D=M.child;if(M.tag===22&&A){var X=M.memoizedState!==null||Dm;if(!X){var oe=M.alternate,Ee=oe!==null&&oe.memoizedState!==null||Dl;oe=Dm;var $e=Dl;if(Dm=X,(Dl=Ee)&&!$e)for(nt=M;nt!==null;)X=nt,Ee=X.child,X.tag===22&&X.memoizedState!==null?JC(M):Ee!==null?(Ee.return=X,nt=Ee):JC(M);for(;D!==null;)nt=D,jC(D),D=D.sibling;nt=M,Dm=oe,Dl=$e}$C(h)}else M.subtreeFlags&8772&&D!==null?(D.return=M,nt=D):$C(h)}}function $C(h){for(;nt!==null;){var d=nt;if(d.flags&8772){var x=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Dl||Ch(5,d);break;case 1:var A=d.stateNode;if(d.flags&4&&!Dl)if(x===null)A.componentDidMount();else{var M=d.elementType===d.type?x.memoizedProps:Rs(d.type,x.memoizedProps);A.componentDidUpdate(M,x.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var D=d.updateQueue;D!==null&&zb(d,D,A);break;case 3:var X=d.updateQueue;if(X!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=ee(d.child.stateNode);break;case 1:x=d.child.stateNode}zb(d,X,x)}break;case 5:var oe=d.stateNode;x===null&&d.flags&4&&it(oe,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&d.memoizedState===null){var Ee=d.alternate;if(Ee!==null){var $e=Ee.memoizedState;if($e!==null){var ft=$e.dehydrated;ft!==null&&j(ft)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Dl||d.flags&512&&K_(d)}catch(Bt){yi(d,d.return,Bt)}}if(d===h){nt=null;break}if(x=d.sibling,x!==null){x.return=d.return,nt=x;break}nt=d.return}}function XC(h){for(;nt!==null;){var d=nt;if(d===h){nt=null;break}var x=d.sibling;if(x!==null){x.return=d.return,nt=x;break}nt=d.return}}function JC(h){for(;nt!==null;){var d=nt;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{Ch(4,d)}catch(Ee){yi(d,x,Ee)}break;case 1:var A=d.stateNode;if(typeof A.componentDidMount=="function"){var M=d.return;try{A.componentDidMount()}catch(Ee){yi(d,M,Ee)}}var D=d.return;try{K_(d)}catch(Ee){yi(d,D,Ee)}break;case 5:var X=d.return;try{K_(d)}catch(Ee){yi(d,X,Ee)}}}catch(Ee){yi(d,d.return,Ee)}if(d===h){nt=null;break}var oe=d.sibling;if(oe!==null){oe.return=d.return,nt=oe;break}nt=d.return}}var Nm=0,km=1,Fm=2,Um=3,zm=4;if(typeof Symbol=="function"&&Symbol.for){var Th=Symbol.for;Nm=Th("selector.component"),km=Th("selector.has_pseudo_class"),Fm=Th("selector.role"),Um=Th("selector.test_id"),zm=Th("selector.text")}function Z_(h){var d=Ne(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(h=U(h),h===null)throw Error(o(362));return h.stateNode.current}function ex(h,d){switch(d.$$typeof){case Nm:if(h.type===d.value)return!0;break;case km:e:{d=d.value,h=[h,0];for(var x=0;x<h.length;){var A=h[x++],M=h[x++],D=d[M];if(A.tag!==5||!de(A)){for(;D!=null&&ex(A,D);)M++,D=d[M];if(M===d.length){d=!0;break e}else for(A=A.child;A!==null;)h.push(A,M),A=A.sibling}}d=!1}return d;case Fm:if(h.tag===5&&Re(h.stateNode,d.value))return!0;break;case zm:if((h.tag===5||h.tag===6)&&(h=le(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case Um:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function tx(h){switch(h.$$typeof){case Nm:return"<"+(R(h.value)||"Unknown")+">";case km:return":has("+(tx(h)||"")+")";case Fm:return'[role="'+h.value+'"]';case zm:return'"'+h.value+'"';case Um:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function KC(h,d){var x=[];h=[h,0];for(var A=0;A<h.length;){var M=h[A++],D=h[A++],X=d[D];if(M.tag!==5||!de(M)){for(;X!=null&&ex(M,X);)D++,X=d[D];if(D===d.length)x.push(M);else for(M=M.child;M!==null;)h.push(M,D),M=M.sibling}}return x}function nx(h,d){if(!J)throw Error(o(363));h=Z_(h),h=KC(h,d),d=[],h=Array.from(h);for(var x=0;x<h.length;){var A=h[x++];if(A.tag===5)de(A)||d.push(A.stateNode);else for(A=A.child;A!==null;)h.push(A),A=A.sibling}return d}var iH=Math.ceil,Hm=a.ReactCurrentDispatcher,rx=a.ReactCurrentOwner,Jn=a.ReactCurrentBatchConfig,Gt=0,nr=null,rr=null,Cr=0,Ni=0,fu=ut(0),ur=0,Rh=null,hu=0,Gm=0,ix=0,Ph=null,gi=null,sx=0,ox=1/0;function du(){ox=vr()+500}var Vm=!1,ax=null,wa=null,Wm=!1,Sa=null,jm=0,Ih=0,lx=null,$m=-1,Xm=0;function ti(){return Gt&6?vr():$m!==-1?$m:$m=vr()}function Aa(h){return h.mode&1?Gt&2&&Cr!==0?Cr&-Cr:zz.transition!==null?(Xm===0&&(h=om,om<<=1,!(om&4194240)&&(om=64),Xm=h),Xm):(h=an,h!==0?h:Oe()):1}function is(h,d,x){if(50<Ih)throw Ih=0,lx=null,Error(o(185));var A=Jm(h,d);return A===null?null:(ph(A,d,x),(!(Gt&2)||A!==nr)&&(A===nr&&(!(Gt&2)&&(Gm|=d),ur===4&&Ea(A,Cr)),vi(A,x),d===1&&Gt===0&&!(h.mode&1)&&(du(),um&&ao())),A)}function Jm(h,d){h.lanes|=d;var x=h.alternate;for(x!==null&&(x.lanes|=d),x=h,h=h.return;h!==null;)h.childLanes|=d,x=h.alternate,x!==null&&(x.childLanes|=d),x=h,h=h.return;return x.tag===3?x.stateNode:null}function vi(h,d){var x=h.callbackNode;Iz(h,d);var A=lm(h,h===nr?Cr:0);if(A===0)x!==null&&Ob(x),h.callbackNode=null,h.callbackPriority=0;else if(d=A&-A,h.callbackPriority!==d){if(x!=null&&Ob(x),d===1)h.tag===0?Uz(qC.bind(null,h)):Nb(qC.bind(null,h)),Ye?xt(function(){Gt===0&&ao()}):g_(v_,ao),x=null;else{switch(Lb(A)){case 1:x=v_;break;case 4:x=Oz;break;case 16:x=y_;break;case 536870912:x=Nz;break;default:x=y_}x=oT(x,YC.bind(null,h))}h.callbackPriority=d,h.callbackNode=x}}function YC(h,d){if($m=-1,Xm=0,Gt&6)throw Error(o(327));var x=h.callbackNode;if(kl()&&h.callbackNode!==x)return null;var A=lm(h,h===nr?Cr:0);if(A===0)return null;if(A&30||A&h.expiredLanes||d)d=Km(h,A);else{d=A;var M=Gt;Gt|=2;var D=eT();(nr!==h||Cr!==d)&&(du(),Ol(h,d));do try{aH();break}catch(oe){ZC(h,oe)}while(!0);w_(),Hm.current=D,Gt=M,rr!==null?d=0:(nr=null,Cr=0,d=ur)}if(d!==0){if(d===2&&(M=d_(h),M!==0&&(A=M,d=cx(h,M))),d===1)throw x=Rh,Ol(h,0),Ea(h,A),vi(h,vr()),x;if(d===6)Ea(h,A);else{if(M=h.current.alternate,!(A&30)&&!sH(M)&&(d=Km(h,A),d===2&&(D=d_(h),D!==0&&(A=D,d=cx(h,D))),d===1))throw x=Rh,Ol(h,0),Ea(h,A),vi(h,vr()),x;switch(h.finishedWork=M,h.finishedLanes=A,d){case 0:case 1:throw Error(o(345));case 2:Nl(h,gi);break;case 3:if(Ea(h,A),(A&130023424)===A&&(d=sx+500-vr(),10<d)){if(lm(h,0)!==0)break;if(M=h.suspendedLanes,(M&A)!==A){ti(),h.pingedLanes|=h.suspendedLanes&M;break}h.timeoutHandle=Be(Nl.bind(null,h,gi),d);break}Nl(h,gi);break;case 4:if(Ea(h,A),(A&4194240)===A)break;for(d=h.eventTimes,M=-1;0<A;){var X=31-gn(A);D=1<<X,X=d[X],X>M&&(M=X),A&=~D}if(A=M,A=vr()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*iH(A/1960))-A,10<A){h.timeoutHandle=Be(Nl.bind(null,h,gi),A);break}Nl(h,gi);break;case 5:Nl(h,gi);break;default:throw Error(o(329))}}}return vi(h,vr()),h.callbackNode===x?YC.bind(null,h):null}function cx(h,d){var x=Ph;return h.current.memoizedState.isDehydrated&&(Ol(h,d).flags|=256),h=Km(h,d),h!==2&&(d=gi,gi=x,d!==null&&ux(d)),h}function ux(h){gi===null?gi=h:gi.push.apply(gi,h)}function sH(h){for(var d=h;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var A=0;A<x.length;A++){var M=x[A],D=M.getSnapshot;M=M.value;try{if(!oo(D(),M))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ea(h,d){for(d&=~ix,d&=~Gm,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var x=31-gn(d),A=1<<x;h[x]=-1,d&=~A}}function qC(h){if(Gt&6)throw Error(o(327));kl();var d=lm(h,0);if(!(d&1))return vi(h,vr()),null;var x=Km(h,d);if(h.tag!==0&&x===2){var A=d_(h);A!==0&&(d=A,x=cx(h,A))}if(x===1)throw x=Rh,Ol(h,0),Ea(h,d),vi(h,vr()),x;if(x===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=d,Nl(h,gi),vi(h,vr()),null}function QC(h){Sa!==null&&Sa.tag===0&&!(Gt&6)&&kl();var d=Gt;Gt|=1;var x=Jn.transition,A=an;try{if(Jn.transition=null,an=1,h)return h()}finally{an=A,Jn.transition=x,Gt=d,!(Gt&6)&&ao()}}function fx(){Ni=fu.current,ke(fu)}function Ol(h,d){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;if(x!==wt&&(h.timeoutHandle=wt,at(x)),rr!==null)for(x=rr.return;x!==null;){var A=x;switch(T_(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&yn();break;case 3:cu(),ke(It),ke(jt),O_();break;case 5:D_(A);break;case 4:cu();break;case 13:ke(Pn);break;case 19:ke(Pn);break;case 10:S_(A.type._context);break;case 22:case 23:fx()}x=x.return}if(nr=h,rr=h=Ma(h.current,null),Cr=Ni=d,ur=0,Rh=null,ix=Gm=hu=0,gi=Ph=null,lo!==null){for(d=0;d<lo.length;d++)if(x=lo[d],A=x.interleaved,A!==null){x.interleaved=null;var M=A.next,D=x.pending;if(D!==null){var X=D.next;D.next=M,A.next=X}x.pending=A}lo=null}return h}function ZC(h,d){do{var x=rr;try{if(w_(),wm.current=Cm,Sm){for(var A=Un.memoizedState;A!==null;){var M=A.queue;M!==null&&(M.pending=null),A=A.next}Sm=!1}if(uu=0,yr=kr=Un=null,xh=!1,wh=0,rx.current=null,x===null||x.return===null){ur=1,Rh=d,rr=null;break}e:{var D=h,X=x.return,oe=x,Ee=d;if(d=Cr,oe.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var $e=Ee,ft=oe,Bt=ft.tag;if(!(ft.mode&1)&&(Bt===0||Bt===11||Bt===15)){var At=ft.alternate;At?(ft.updateQueue=At.updateQueue,ft.memoizedState=At.memoizedState,ft.lanes=At.lanes):(ft.updateQueue=null,ft.memoizedState=null)}var vn=xC(X);if(vn!==null){vn.flags&=-257,wC(vn,X,oe,D,d),vn.mode&1&&_C(D,$e,d),d=vn,Ee=$e;var _t=d.updateQueue;if(_t===null){var zr=new Set;zr.add(Ee),d.updateQueue=zr}else _t.add(Ee);break e}else{if(!(d&1)){_C(D,$e,d),hx();break e}Ee=Error(o(426))}}else if(Cn&&oe.mode&1){var os=xC(X);if(os!==null){!(os.flags&65536)&&(os.flags|=256),wC(os,X,oe,D,d),I_(Ee);break e}}D=Ee,ur!==4&&(ur=2),Ph===null?Ph=[D]:Ph.push(D),Ee=G_(Ee,oe),oe=X;do{switch(oe.tag){case 3:oe.flags|=65536,d&=-d,oe.lanes|=d;var ge=vC(oe,Ee,d);Ub(oe,ge);break e;case 1:D=Ee;var ue=oe.type,xe=oe.stateNode;if(!(oe.flags&128)&&(typeof ue.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(wa===null||!wa.has(xe)))){oe.flags|=65536,d&=-d,oe.lanes|=d;var rt=yC(oe,D,d);Ub(oe,rt);break e}}oe=oe.return}while(oe!==null)}nT(x)}catch(vt){d=vt,rr===x&&x!==null&&(rr=x=x.return);continue}break}while(!0)}function eT(){var h=Hm.current;return Hm.current=Cm,h===null?Cm:h}function hx(){(ur===0||ur===3||ur===2)&&(ur=4),nr===null||!(hu&268435455)&&!(Gm&268435455)||Ea(nr,Cr)}function Km(h,d){var x=Gt;Gt|=2;var A=eT();nr===h&&Cr===d||Ol(h,d);do try{oH();break}catch(M){ZC(h,M)}while(!0);if(w_(),Gt=x,Hm.current=A,rr!==null)throw Error(o(261));return nr=null,Cr=0,ur}function oH(){for(;rr!==null;)tT(rr)}function aH(){for(;rr!==null&&!Dz();)tT(rr)}function tT(h){var d=sT(h.alternate,h,Ni);h.memoizedProps=h.pendingProps,d===null?nT(h):rr=d,rx.current=null}function nT(h){var d=h;do{var x=d.alternate;if(h=d.return,d.flags&32768){if(x=Zz(x,d),x!==null){x.flags&=32767,rr=x;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ur=6,rr=null;return}}else if(x=Yz(x,d,Ni),x!==null){rr=x;return}if(d=d.sibling,d!==null){rr=d;return}rr=d=h}while(d!==null);ur===0&&(ur=5)}function Nl(h,d){var x=an,A=Jn.transition;try{Jn.transition=null,an=1,lH(h,d,x)}finally{Jn.transition=A,an=x}return null}function lH(h,d,x){do kl();while(Sa!==null);if(Gt&6)throw Error(o(327));var A=h.finishedWork,M=h.finishedLanes;if(A===null)return null;if(h.finishedWork=null,h.finishedLanes=0,A===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var D=A.lanes|A.childLanes;if(Bz(h,D),h===nr&&(rr=nr=null,Cr=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Wm||(Wm=!0,oT(y_,function(){return kl(),null})),D=(A.flags&15990)!==0,A.subtreeFlags&15990||D){D=Jn.transition,Jn.transition=null;var X=an;an=1;var oe=Gt;Gt|=4,rx.current=null,tH(h,A),nH(h,A),Z(h.containerInfo),h.current=A,rH(A),Lz(),Gt=oe,an=X,Jn.transition=D}else h.current=A;if(Wm&&(Wm=!1,Sa=h,jm=M),D=h.pendingLanes,D===0&&(wa=null),kz(A.stateNode),vi(h,vr()),d!==null)for(x=h.onRecoverableError,A=0;A<d.length;A++)x(d[A]);if(Vm)throw Vm=!1,h=ax,ax=null,h;return jm&1&&h.tag!==0&&kl(),D=h.pendingLanes,D&1?h===lx?Ih++:(Ih=0,lx=h):Ih=0,ao(),null}function kl(){if(Sa!==null){var h=Lb(jm),d=Jn.transition,x=an;try{if(Jn.transition=null,an=16>h?16:h,Sa===null)var A=!1;else{if(h=Sa,Sa=null,jm=0,Gt&6)throw Error(o(331));var M=Gt;for(Gt|=4,nt=h.current;nt!==null;){var D=nt,X=D.child;if(nt.flags&16){var oe=D.deletions;if(oe!==null){for(var Ee=0;Ee<oe.length;Ee++){var $e=oe[Ee];for(nt=$e;nt!==null;){var ft=nt;switch(ft.tag){case 0:case 11:case 15:Ll(8,ft,D)}var Bt=ft.child;if(Bt!==null)Bt.return=ft,nt=Bt;else for(;nt!==null;){ft=nt;var At=ft.sibling,vn=ft.return;if(zC(ft),ft===$e){nt=null;break}if(At!==null){At.return=vn,nt=At;break}nt=vn}}}var _t=D.alternate;if(_t!==null){var zr=_t.child;if(zr!==null){_t.child=null;do{var os=zr.sibling;zr.sibling=null,zr=os}while(zr!==null)}}nt=D}}if(D.subtreeFlags&2064&&X!==null)X.return=D,nt=X;else e:for(;nt!==null;){if(D=nt,D.flags&2048)switch(D.tag){case 0:case 11:case 15:Ll(9,D,D.return)}var ge=D.sibling;if(ge!==null){ge.return=D.return,nt=ge;break e}nt=D.return}}var ue=h.current;for(nt=ue;nt!==null;){X=nt;var xe=X.child;if(X.subtreeFlags&2064&&xe!==null)xe.return=X,nt=xe;else e:for(X=ue;nt!==null;){if(oe=nt,oe.flags&2048)try{switch(oe.tag){case 0:case 11:case 15:Ch(9,oe)}}catch(vt){yi(oe,oe.return,vt)}if(oe===X){nt=null;break e}var rt=oe.sibling;if(rt!==null){rt.return=oe.return,nt=rt;break e}nt=oe.return}}if(Gt=M,ao(),so&&typeof so.onPostCommitFiberRoot=="function")try{so.onPostCommitFiberRoot(cm,h)}catch{}A=!0}return A}finally{an=x,Jn.transition=d}}return!1}function rT(h,d,x){d=G_(x,d),d=vC(h,d,1),xa(h,d),d=ti(),h=Jm(h,1),h!==null&&(ph(h,1,d),vi(h,d))}function yi(h,d,x){if(h.tag===3)rT(h,h,x);else for(;d!==null;){if(d.tag===3){rT(d,h,x);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(wa===null||!wa.has(A))){h=G_(x,h),h=yC(d,h,1),xa(d,h),h=ti(),d=Jm(d,1),d!==null&&(ph(d,1,h),vi(d,h));break}}d=d.return}}function cH(h,d,x){var A=h.pingCache;A!==null&&A.delete(d),d=ti(),h.pingedLanes|=h.suspendedLanes&x,nr===h&&(Cr&x)===x&&(ur===4||ur===3&&(Cr&130023424)===Cr&&500>vr()-sx?Ol(h,0):ix|=x),vi(h,d)}function iT(h,d){d===0&&(h.mode&1?(d=am,am<<=1,!(am&130023424)&&(am=4194304)):d=1);var x=ti();h=Jm(h,d),h!==null&&(ph(h,d,x),vi(h,x))}function uH(h){var d=h.memoizedState,x=0;d!==null&&(x=d.retryLane),iT(h,x)}function fH(h,d){var x=0;switch(h.tag){case 13:var A=h.stateNode,M=h.memoizedState;M!==null&&(x=M.retryLane);break;case 19:A=h.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(d),iT(h,x)}var sT;sT=function(h,d,x){if(h!==null)if(h.memoizedProps!==d.pendingProps||It.current)Oi=!0;else{if(!(h.lanes&x)&&!(d.flags&128))return Oi=!1,Qz(h,d,x);Oi=!!(h.flags&131072)}else Oi=!1,Cn&&d.flags&1048576&&jb(d,ym,d.index);switch(d.lanes=0,d.tag){case 2:var A=d.type;h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps;var M=tr(d,jt.current);ru(d,x),M=k_(null,d,A,h,M,x);var D=F_();return d.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Ht(A)?(D=!0,nn(d)):D=!1,d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,E_(d),M.updater=gm,d.stateNode=M,M._reactInternals=d,b_(d,A,h,x),d=j_(null,d,A,!0,D,x)):(d.tag=0,Cn&&D&&C_(d),ei(null,d,M,x),d=d.child),d;case 16:A=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,M=A._init,A=M(A._payload),d.type=A,M=d.tag=dH(A),h=Rs(A,h),M){case 0:d=W_(null,d,A,h,x);break e;case 1:d=RC(null,d,A,h,x);break e;case 11:d=EC(null,d,A,h,x);break e;case 14:d=MC(null,d,A,Rs(A.type,h),x);break e}throw Error(o(306,A,""))}return d;case 0:return A=d.type,M=d.pendingProps,M=d.elementType===A?M:Rs(A,M),W_(h,d,A,M,x);case 1:return A=d.type,M=d.pendingProps,M=d.elementType===A?M:Rs(A,M),RC(h,d,A,M,x);case 3:e:{if(PC(d),h===null)throw Error(o(387));A=d.pendingProps,D=d.memoizedState,M=D.element,Fb(h,d),mm(d,A,null,x);var X=d.memoizedState;if(A=X.element,Se&&D.isDehydrated)if(D={element:A,isDehydrated:!1,cache:X.cache,transitions:X.transitions},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){M=Error(o(423)),d=IC(h,d,A,x,M);break e}else if(A!==M){M=Error(o(424)),d=IC(h,d,A,x,M);break e}else for(Se&&(Li=Rl(d.stateNode.containerInfo),Di=d,Cn=!0,Ps=null,mh=!1),x=qb(d,null,A,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(ou(),A===M){d=zo(h,d,x);break e}ei(h,d,A,x)}d=d.child}return d;case 5:return Qb(d),h===null&&P_(d),A=d.type,M=d.pendingProps,D=h!==null?h.memoizedProps:null,X=M.children,Te(A,M)?X=null:D!==null&&Te(A,D)&&(d.flags|=32),TC(h,d),ei(h,d,X,x),d.child;case 6:return h===null&&P_(d),null;case 13:return BC(h,d,x);case 4:return B_(d,d.stateNode.containerInfo),A=d.pendingProps,h===null?d.child=au(d,null,A,x):ei(h,d,A,x),d.child;case 11:return A=d.type,M=d.pendingProps,M=d.elementType===A?M:Rs(A,M),EC(h,d,A,M,x);case 7:return ei(h,d,d.pendingProps,x),d.child;case 8:return ei(h,d,d.pendingProps.children,x),d.child;case 12:return ei(h,d,d.pendingProps.children,x),d.child;case 10:e:{if(A=d.type._context,M=d.pendingProps,D=d.memoizedProps,X=M.value,kb(d,A,X),D!==null)if(oo(D.value,X)){if(D.children===M.children&&!It.current){d=zo(h,d,x);break e}}else for(D=d.child,D!==null&&(D.return=d);D!==null;){var oe=D.dependencies;if(oe!==null){X=D.child;for(var Ee=oe.firstContext;Ee!==null;){if(Ee.context===A){if(D.tag===1){Ee=No(-1,x&-x),Ee.tag=2;var $e=D.updateQueue;if($e!==null){$e=$e.shared;var ft=$e.pending;ft===null?Ee.next=Ee:(Ee.next=ft.next,ft.next=Ee),$e.pending=Ee}}D.lanes|=x,Ee=D.alternate,Ee!==null&&(Ee.lanes|=x),A_(D.return,x,d),oe.lanes|=x;break}Ee=Ee.next}}else if(D.tag===10)X=D.type===d.type?null:D.child;else if(D.tag===18){if(X=D.return,X===null)throw Error(o(341));X.lanes|=x,oe=X.alternate,oe!==null&&(oe.lanes|=x),A_(X,x,d),X=D.sibling}else X=D.child;if(X!==null)X.return=D;else for(X=D;X!==null;){if(X===d){X=null;break}if(D=X.sibling,D!==null){D.return=X.return,X=D;break}X=X.return}D=X}ei(h,d,M.children,x),d=d.child}return d;case 9:return M=d.type,A=d.pendingProps.children,ru(d,x),M=Zi(M),A=A(M),d.flags|=1,ei(h,d,A,x),d.child;case 14:return A=d.type,M=Rs(A,d.pendingProps),M=Rs(A.type,M),MC(h,d,A,M,x);case 15:return bC(h,d,d.type,d.pendingProps,x);case 17:return A=d.type,M=d.pendingProps,M=d.elementType===A?M:Rs(A,M),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,Ht(A)?(h=!0,nn(d)):h=!1,ru(d,x),Vb(d,A,M),b_(d,A,M,x),j_(null,d,A,!0,h,x);case 19:return NC(h,d,x);case 22:return CC(h,d,x)}throw Error(o(156,d.tag))};function oT(h,d){return g_(h,d)}function hH(h,d,x,A){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(h,d,x,A){return new hH(h,d,x,A)}function dx(h){return h=h.prototype,!(!h||!h.isReactComponent)}function dH(h){if(typeof h=="function")return dx(h)?1:0;if(h!=null){if(h=h.$$typeof,h===_)return 11;if(h===w)return 14}return 2}function Ma(h,d){var x=h.alternate;return x===null?(x=ss(h.tag,d,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=d,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&14680064,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,d=h.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x}function Ym(h,d,x,A,M,D){var X=2;if(A=h,typeof h=="function")dx(h)&&(X=1);else if(typeof h=="string")X=5;else e:switch(h){case u:return Fl(x.children,M,D,d);case f:X=8,M|=8;break;case p:return h=ss(12,x,d,M|2),h.elementType=p,h.lanes=D,h;case y:return h=ss(13,x,d,M),h.elementType=y,h.lanes=D,h;case g:return h=ss(19,x,d,M),h.elementType=g,h.lanes=D,h;case E:return qm(x,M,D,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:X=10;break e;case v:X=9;break e;case _:X=11;break e;case w:X=14;break e;case S:X=16,A=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return d=ss(X,x,d,M),d.elementType=h,d.type=A,d.lanes=D,d}function Fl(h,d,x,A){return h=ss(7,h,A,d),h.lanes=x,h}function qm(h,d,x,A){return h=ss(22,h,A,d),h.elementType=E,h.lanes=x,h.stateNode={},h}function px(h,d,x){return h=ss(6,h,null,d),h.lanes=x,h}function mx(h,d,x){return d=ss(4,h.children!==null?h.children:[],h.key,d),d.lanes=x,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function pH(h,d,x,A,M){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=wt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p_(0),this.expirationTimes=p_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p_(0),this.identifierPrefix=A,this.onRecoverableError=M,Se&&(this.mutableSourceEagerHydrationData=null)}function aT(h,d,x,A,M,D,X,oe,Ee){return h=new pH(h,d,x,oe,Ee),d===1?(d=1,D===!0&&(d|=8)):d=0,D=ss(3,null,null,d),h.current=D,D.stateNode=h,D.memoizedState={element:A,isDehydrated:x,cache:null,transitions:null},E_(D),h}function lT(h){if(!h)return dt;h=h._reactInternals;e:{if(I(h)!==h||h.tag!==1)throw Error(o(170));var d=h;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Ht(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(h.tag===1){var x=h.type;if(Ht(x))return on(h,x,d)}return d}function cT(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=V(d),h===null?null:h.stateNode}function uT(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<d?x:d}}function gx(h,d){uT(h,d),(h=h.alternate)&&uT(h,d)}function mH(h){return h=V(h),h===null?null:h.stateNode}function gH(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var d=ti();is(h,134217728,d),gx(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=ti(),x=Aa(h);is(h,x,d),gx(h,x)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.current.memoizedState.isDehydrated){var x=dh(d.pendingLanes);x!==0&&(m_(d,x|1),vi(d,vr()),!(Gt&6)&&(du(),ao()))}break;case 13:var A=ti();QC(function(){return is(h,1,A)}),gx(h,1)}},t.batchedUpdates=function(h,d){var x=Gt;Gt|=1;try{return h(d)}finally{Gt=x,Gt===0&&(du(),um&&ao())}},t.createComponentSelector=function(h){return{$$typeof:Nm,value:h}},t.createContainer=function(h,d,x,A,M,D,X){return aT(h,d,!1,null,x,A,M,D,X)},t.createHasPseudoClassSelector=function(h){return{$$typeof:km,value:h}},t.createHydrationContainer=function(h,d,x,A,M,D,X,oe,Ee){return h=aT(x,A,!0,h,M,D,X,oe,Ee),h.context=lT(null),x=h.current,A=ti(),M=Aa(x),D=No(A,M),D.callback=d??null,xa(x,D),h.current.lanes=M,ph(h,M,A),vi(h,A),h},t.createPortal=function(h,d,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:h,containerInfo:d,implementation:x}},t.createRoleSelector=function(h){return{$$typeof:Fm,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Um,value:h}},t.createTextSelector=function(h){return{$$typeof:zm,value:h}},t.deferredUpdates=function(h){var d=an,x=Jn.transition;try{return Jn.transition=null,an=16,h()}finally{an=d,Jn.transition=x}},t.discreteUpdates=function(h,d,x,A,M){var D=an,X=Jn.transition;try{return Jn.transition=null,an=1,h(d,x,A,M)}finally{an=D,Jn.transition=X,Gt===0&&du()}},t.findAllNodes=nx,t.findBoundingRects=function(h,d){if(!J)throw Error(o(363));d=nx(h,d),h=[];for(var x=0;x<d.length;x++)h.push(pe(d[x]));for(d=h.length-1;0<d;d--){x=h[d];for(var A=x.x,M=A+x.width,D=x.y,X=D+x.height,oe=d-1;0<=oe;oe--)if(d!==oe){var Ee=h[oe],$e=Ee.x,ft=$e+Ee.width,Bt=Ee.y,At=Bt+Ee.height;if(A>=$e&&D>=Bt&&M<=ft&&X<=At){h.splice(d,1);break}else if(A!==$e||x.width!==Ee.width||At<D||Bt>X){if(!(D!==Bt||x.height!==Ee.height||ft<A||$e>M)){$e>A&&(Ee.width+=$e-A,Ee.x=A),ft<M&&(Ee.width=M-$e),h.splice(d,1);break}}else{Bt>D&&(Ee.height+=Bt-D,Ee.y=D),At<X&&(Ee.height=X-Bt),h.splice(d,1);break}}}return h},t.findHostInstance=cT,t.findHostInstanceWithNoPortals=function(h){return h=O(h),h=h!==null?Q(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return cT(h)},t.flushControlled=function(h){var d=Gt;Gt|=1;var x=Jn.transition,A=an;try{Jn.transition=null,an=1,h()}finally{an=A,Jn.transition=x,Gt=d,Gt===0&&(du(),ao())}},t.flushPassiveEffects=kl,t.flushSync=QC,t.focusWithin=function(h,d){if(!J)throw Error(o(363));for(h=Z_(h),d=KC(h,d),d=Array.from(d),h=0;h<d.length;){var x=d[h++];if(!de(x)){if(x.tag===5&&Qe(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return an},t.getFindAllNodesFailureDescription=function(h,d){if(!J)throw Error(o(363));var x=0,A=[];h=[Z_(h),0];for(var M=0;M<h.length;){var D=h[M++],X=h[M++],oe=d[X];if((D.tag!==5||!de(D))&&(ex(D,oe)&&(A.push(tx(oe)),X++,X>x&&(x=X)),X<d.length))for(D=D.child;D!==null;)h.push(D,X),D=D.sibling}if(x<d.length){for(h=[];x<d.length;x++)h.push(tx(d[x]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return ee(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:mH,findFiberByHostInstance:h.findFiberByHostInstance||gH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{cm=d.inject(h),so=d}catch{}h=!!d.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,d,x,A){if(!J)throw Error(o(363));h=nx(h,d);var M=ze(h,x,A).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(h,d){var x=d._getVersion;x=x(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,x]:h.mutableSourceEagerHydrationData.push(d,x)},t.runWithPriority=function(h,d){var x=an;try{return an=h,d()}finally{an=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,d,x,A){var M=d.current,D=ti(),X=Aa(M);return x=lT(x),d.context===null?d.context=x:d.pendingContext=x,d=No(D,X),d.payload={element:h},A=A===void 0?null:A,A!==null&&(d.callback=A),xa(M,d),h=is(M,X,D),h!==null&&pm(h,M,X),X},t};yN.exports=HX;var GX=yN.exports;const VX=_l(GX);var _N={exports:{}},xN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,Y){var Z=k.length;k.push(Y);e:for(;0<Z;){var ae=Z-1>>>1,ye=k[ae];if(0<i(ye,Y))k[ae]=Y,k[Z]=ye,Z=ae;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var Y=k[0],Z=k.pop();if(Z!==Y){k[0]=Z;e:for(var ae=0,ye=k.length,Ue=ye>>>1;ae<Ue;){var he=2*(ae+1)-1,Te=k[he],Me=he+1,Be=k[Me];if(0>i(Te,Z))Me<ye&&0>i(Be,Te)?(k[ae]=Be,k[Me]=Z,ae=Me):(k[ae]=Te,k[he]=Z,ae=he);else if(Me<ye&&0>i(Be,Z))k[ae]=Be,k[Me]=Z,ae=Me;else break e}}return Y}function i(k,Y){var Z=k.sortIndex-Y.sortIndex;return Z!==0?Z:k.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=k)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function E(k){if(_=!1,S(k),!v)if(t(l)!==null)v=!0,ee(P);else{var Y=t(c);Y!==null&&fe(E,Y.startTime-k)}}function P(k,Y){v=!1,_&&(_=!1,g(L),L=-1),m=!0;var Z=p;try{for(S(Y),f=t(l);f!==null&&(!(f.expirationTime>Y)||k&&!O());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var ye=ae(f.expirationTime<=Y);Y=n.unstable_now(),typeof ye=="function"?f.callback=ye:f===t(l)&&r(l),S(Y)}else r(l);f=t(l)}if(f!==null)var Ue=!0;else{var he=t(c);he!==null&&fe(E,he.startTime-Y),Ue=!1}return Ue}finally{f=null,p=Z,m=!1}}var b=!1,R=null,L=-1,I=5,C=-1;function O(){return!(n.unstable_now()-C<I)}function V(){if(R!==null){var k=n.unstable_now();C=k;var Y=!0;try{Y=R(!0,k)}finally{Y?$():(b=!1,R=null)}}else b=!1}var $;if(typeof w=="function")$=function(){w(V)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ie=Q.port2;Q.port1.onmessage=V,$=function(){ie.postMessage(null)}}else $=function(){y(V,0)};function ee(k){R=k,b||(b=!0,$())}function fe(k,Y){L=y(function(){k(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(P))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return k()}finally{p=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,Y){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=p;p=k;try{return Y()}finally{p=Z}},n.unstable_scheduleCallback=function(k,Y,Z){var ae=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ae+Z:ae):Z=ae,k){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Z+ye,k={id:u++,callback:Y,priorityLevel:k,startTime:Z,expirationTime:ye,sortIndex:-1},Z>ae?(k.sortIndex=Z,e(c,k),t(l)===null&&k===t(c)&&(_?(g(L),L=-1):_=!0,fe(E,Z-ae))):(k.sortIndex=ye,e(l,k),v||m||(v=!0,ee(P))),k},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(k){var Y=p;return function(){var Z=p;p=Y;try{return k.apply(this,arguments)}finally{p=Z}}}})(xN);_N.exports=xN;var lI=_N.exports;const WX=n=>typeof n=="object"&&typeof n.then=="function",vc=[];function wN(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function SN(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of vc)if(wN(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=vc.indexOf(i);s!==-1&&vc.splice(s,1)},promise:(WX(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(vc.push(i),!t)throw i.promise}const jX=(n,e,t)=>SN(n,e,!1,t),$X=(n,e,t)=>void SN(n,e,!0,t),XX=n=>{if(n===void 0||n.length===0)vc.splice(0,vc.length);else{const e=vc.find(t=>wN(n,t.keys,t.equal));e&&e.remove()}},FM={},AN=n=>void Object.assign(FM,n);function JX(n,e){function t(u,{args:f=[],attach:p,...m},v){let _=`${u[0].toUpperCase()}${u.slice(1)}`,y;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;y=Wu(g,{type:u,root:v,attach:p,primitive:!0})}else{const g=FM[_];if(!g)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=Wu(new g(...f),{type:u,root:v,attach:p,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof Tt?y.__r3f.attach="geometry":y instanceof cr&&(y.__r3f.attach="material")),_!=="inject"&&Lw(y,m),y}function r(u,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?Dw(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),p=!0),p||(v=u.__r3f)==null||v.objects.push(f),f.__r3f||Wu(f,{}),f.__r3f.parent=u,rA(f),ju(f)}}function i(u,f,p){let m=!1;if(f){var v,_;if((v=f.__r3f)!=null&&v.attach)Dw(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const y=u.children.filter(w=>w!==f),g=y.indexOf(p);u.children=[...y.slice(0,g),f,...y.slice(g)],m=!0}m||(_=u.__r3f)==null||_.objects.push(f),f.__r3f||Wu(f,{}),f.__r3f.parent=u,rA(f),ju(f)}}function s(u,f,p=!1){u&&[...u].forEach(m=>o(f,m,p))}function o(u,f,p){if(f){var m,v,_;if(f.__r3f&&(f.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==f)),(v=f.__r3f)!=null&&v.attach)dI(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var y;u.remove(f),(y=f.__r3f)!=null&&y.root&&n7($v(f),f)}const w=(_=f.__r3f)==null?void 0:_.primitive,S=!w&&(p===void 0?f.dispose!==null:p);if(!w){var g;s((g=f.__r3f)==null?void 0:g.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?lI.unstable_scheduleCallback(lI.unstable_IdlePriority,E):E()}ju(u)}}function a(u,f,p,m){var v;const _=(v=u.__r3f)==null?void 0:v.parent;if(!_)return;const y=t(f,p,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(y,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(y,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(_,u),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(_,y),y.raycast&&y.__r3f.eventCount&&$v(y).getState().internal.interaction.push(y),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=y,g.ref&&(typeof g.ref=="function"?g.ref(y):g.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:VX({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,p)=>{if(!f||!p)return;const m=u.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,p,m){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:y=[],children:g,...w}=m,{args:S=[],children:E,...P}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((R,L)=>R!==S[L]))return[!0];const b=PN(u,w,P,!0);return b.changes.length?[!1,b]:null}},commitUpdate(u,[f,p],m,v,_,y){f?a(u,m,_,y):Lw(u,p)},commitMount(u,f,p,m){var v;const _=(v=u.__r3f)!=null?v:{};u.raycast&&_.handlers&&_.eventCount&&$v(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Wu(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:p,parent:m}=(f=u.__r3f)!=null?f:{};p&&m&&dI(m,u,p),u.isObject3D&&(u.visible=!1),ju(u)},unhideInstance(u,f){var p;const{attach:m,parent:v}=(p=u.__r3f)!=null?p:{};m&&v&&Dw(v,u,m),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),ju(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():uf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&wn.fun(performance.now)?performance.now:wn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:wn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:wn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Lw}}var cI,uI;const Bw=n=>"colorSpace"in n||"outputColorSpace"in n,EN=()=>{var n;return(n=FM.ColorManagement)!=null?n:null},MN=n=>n&&n.isOrthographicCamera,KX=n=>n&&n.hasOwnProperty("current"),$p=typeof window<"u"&&((cI=window.document)!=null&&cI.createElement||((uI=window.navigator)==null?void 0:uI.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function bN(n){const e=B.useRef(n);return $p(()=>void(e.current=n),[n]),e}function YX({set:n}){return $p(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class CN extends B.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}CN.getDerivedStateFromError=()=>({error:!0});const TN="__default",fI=new Map,qX=n=>n&&!!n.memoized&&!!n.changes;function RN(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Qh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function $v(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const wn={obj:n=>n===Object(n)&&!wn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(wn.str(n)||wn.num(n)||wn.boo(n))return n===e;const s=wn.obj(n);if(s&&r==="reference")return n===e;const o=wn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!wn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(wn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function QX(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function ZX(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Wu(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function nA(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const hI=/-\d+$/;function Dw(n,e,t){if(wn.str(t)){if(hI.test(t)){const s=t.replace(hI,""),{target:o,key:a}=nA(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=nA(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function dI(n,e,t){var r,i;if(wn.str(t)){const{target:s,key:o}=nA(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function PN(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,f=Object.entries(i),p=[];if(c){const v=Object.keys(l);for(let _=0;_<v.length;_++)i.hasOwnProperty(v[_])||f.unshift([v[_],TN+"remove"])}f.forEach(([v,_])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&v==="object"||wn.equ(_,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,_,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,_,!1,g]);for(const w in i){const S=i[w];w.startsWith(`${v}-`)&&p.push([w,S,!1,w.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:p}}const e7=typeof process<"u"&&!1;function Lw(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=qX(e)?e:PN(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[f,p,m,v]=a[u];if(Bw(n)){const w="srgb",S="srgb-linear";f==="encoding"?(f="colorSpace",p=p===3001?w:S):f==="outputEncoding"&&(f="outputColorSpace",p=p===3001?w:S)}let _=n,y=_[f];if(v.length&&(y=v.reduce((g,w)=>g[w],n),!(y&&y.set))){const[g,...w]=v.reverse();_=w.reverse().reduce((S,E)=>S[E],n),f=g}if(p===TN+"remove")if(_.constructor){let g=fI.get(_.constructor);g||(g=new _.constructor,fI.set(_.constructor,g)),p=g[f]}else p=0;if(m&&r)p?r.handlers[f]=p:delete r.handlers[f],r.eventCount=Object.keys(r.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Mc)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&(e7?y.constructor.name===p.constructor.name:y.constructor===p.constructor))y.copy(p);else if(p!==void 0){const g=y instanceof Xe;!g&&y.setScalar?y.setScalar(p):y instanceof Mc&&p instanceof Mc?y.mask=p.mask:y.set(p),!EN()&&s&&!s.linear&&g&&y.convertSRGBToLinear()}}else if(_[f]=p,_[f]instanceof Yt&&_[f].format===or&&_[f].type===Ki&&s){const g=_[f];Bw(g)&&Bw(s.gl)?g.colorSpace=s.gl.outputColorSpace:g.encoding=s.gl.outputEncoding}ju(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const u=$v(n).getState().internal,f=u.interaction.indexOf(n);f>-1&&u.interaction.splice(f,1),r.eventCount&&u.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&rA(n),n}function ju(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function rA(n){n.onUpdate==null||n.onUpdate(n)}function IN(n,e){n.manual||(MN(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function lv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function t7(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return uf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return uf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return uf.ContinuousEventPriority;default:return uf.DefaultEventPriority}}function BN(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function n7(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{BN(t.capturedMap,e,r,i)})}function r7(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),f=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const w=Qh(m[g]);w&&(w.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(g){const w=Qh(g);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var S;w.events.compute==null||w.events.compute(l,w,(S=w.previousRoot)==null?void 0:S.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(g,!0):[]}let _=m.flatMap(v).sort((g,w)=>{const S=Qh(g.object),E=Qh(w.object);return!S||!E?g.distance-w.distance:E.events.priority-S.events.priority||g.distance-w.distance}).filter(g=>{const w=lv(g);return f.has(w)?!1:(f.add(w),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const g of _){let w=g.object;for(;w;){var y;(y=w.__r3f)!=null&&y.eventCount&&p.push({...g,eventObject:w}),w=w.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())f.has(lv(g.intersection))||p.push(g.intersection);return p}function i(l,c,u,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const _=Qh(v.object)||p,{raycaster:y,pointer:g,camera:w,internal:S}=_,E=new G(g.x,g.y,0).unproject(w),P=C=>{var O,V;return(O=(V=S.capturedMap.get(C))==null?void 0:V.has(v.eventObject))!=null?O:!1},b=C=>{const O={intersection:v,target:c.target};S.capturedMap.has(C)?S.capturedMap.get(C).set(v.eventObject,O):S.capturedMap.set(C,new Map([[v.eventObject,O]])),c.target.setPointerCapture(C)},R=C=>{const O=S.capturedMap.get(C);O&&BN(S.capturedMap,v.eventObject,O,C)};let L={};for(let C in c){let O=c[C];typeof O!="function"&&(L[C]=O)}let I={...v,...L,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:E,ray:y.ray,camera:w,stopPropagation(){const C="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!C||C.has(v.eventObject))&&(I.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:R},currentTarget:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:R},nativeEvent:c};if(f(I),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(lv(u)),p!=null&&p.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(u,m?t:void 0),g=v?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=y.map(S=>S.eventObject)),v&&!y.length&&g<=2&&(o(u,p.interaction),f&&f(u)),m&&s(y);function w(S){const E=S.eventObject,P=E.__r3f,b=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const R=lv(S),L=p.hovered.get(R);L?L.stopped&&S.stopPropagation():(p.hovered.set(R,S),b.onPointerOver==null||b.onPointerOver(S),b.onPointerEnter==null||b.onPointerEnter(S))}b.onPointerMove==null||b.onPointerMove(S)}else{const R=b[l];R?(!v||p.initialHits.includes(E))&&(o(u,p.interaction.filter(L=>!p.initialHits.includes(L))),R(S)):v&&p.initialHits.includes(E)&&o(u,p.interaction.filter(L=>!p.initialHits.includes(L)))}}i(y,u,g,w)}}return{handlePointer:a}}const i7=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],DN=n=>!!(n!=null&&n.render),UM=B.createContext(null),s7=(n,e)=>{const t=vN((a,l)=>{const c=new G,u=new G,f=new G;function p(g=l().camera,w=u,S=l().size){const{width:E,height:P,top:b,left:R}=S,L=E/P;w instanceof G?f.copy(w):f.set(...w);const I=g.getWorldPosition(c).distanceTo(f);if(MN(g))return{width:E/g.zoom,height:P/g.zoom,top:b,left:R,factor:1,distance:I,aspect:L};{const C=g.fov*Math.PI/180,O=2*Math.tan(C/2)*I,V=O*(E/P);return{width:V,height:O,top:b,left:R,factor:E/V,distance:I,aspect:L}}}let m;const v=g=>a(w=>({performance:{...w.performance,current:g}})),_=new Ce;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,w)=>e(g,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new DM,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(w=>({...w,events:{...w.events,...g}})),setSize:(g,w,S,E,P)=>{const b=l().camera,R={width:g,height:w,top:E||0,left:P||0,updateStyle:S};a(L=>({size:R,viewport:{...L.viewport,...p(b,u,R)}}))},setDpr:g=>a(w=>{const S=RN(g);return{viewport:{...w.viewport,dpr:S,initialDpr:w.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,g!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:B.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,w,S)=>{const E=l().internal;return E.priority=E.priority+(w>0?1:0),E.subscribers.push({ref:g,priority:w,store:S}),E.subscribers=E.subscribers.sort((P,b)=>P.priority-b.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(w>0?1:0),P.subscribers=P.subscribers.filter(b=>b.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,IN(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let cv,o7=new Set,a7=new Set,l7=new Set;function Ow(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Zh(n,e){switch(n){case"before":return Ow(o7,e);case"after":return Ow(a7,e);case"tail":return Ow(l7,e)}}let Nw,kw;function Fw(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Nw=e.internal.subscribers,cv=0;cv<Nw.length;cv++)kw=Nw[cv],kw.ref.current(kw.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function c7(n){let e=!1,t=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,Zh("before",c),t=!0;for(const f of n.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=Fw(c,s))}if(t=!1,Zh("after",c),r===0)return Zh("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,p){if(u&&Zh("before",c),f)Fw(c,f,p);else for(const m of n.values())Fw(c,m.store.getState());u&&Zh("after",c)}return{loop:o,invalidate:a,advance:l}}function zM(){const n=B.useContext(UM);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function ci(n=t=>t,e){return zM()(n,e)}function Ff(n,e=0){const t=zM(),r=t.getState().internal.subscribe,i=bN(n);return $p(()=>r(i,e,t),[e,r,t]),null}const pI=new WeakMap;function LN(n,e){return function(t,...r){let i=pI.get(t);return i||(i=new t,pI.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,QX(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function bs(n,e,t,r){const i=Array.isArray(e)?e:[e],s=jX(LN(t,r),[n,...i],{equal:wn.equ});return Array.isArray(e)?s:s[0]}bs.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return $X(LN(t),[n,...r])};bs.clear=function(n,e){const t=Array.isArray(e)?e:[e];return XX([n,...t])};const Uf=new Map,{invalidate:mI,advance:gI}=c7(Uf),{reconciler:xp,applyProps:Ga}=JX(Uf,t7),ku={objects:"shallow",strict:!1},u7=(n,e)=>{const t=typeof n=="function"?n(e):n;return DN(t)?t:new pM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function f7(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function h7(n){const e=Uf.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||s7(mI,gI),o=t||xp.createContainer(s,uf.ConcurrentRoot,null,!1,null,"",i,null);e||Uf.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:p,scene:m,events:v,onCreated:_,shadows:y=!1,linear:g=!1,flat:w=!1,legacy:S=!1,orthographic:E=!1,frameloop:P="always",dpr:b=[1,2],performance:R,raycaster:L,camera:I,onPointerMissed:C}=u,O=s.getState(),V=O.gl;O.gl||O.set({gl:V=u7(f,n)});let $=O.raycaster;$||O.set({raycaster:$=new kM});const{params:Q,...ie}=L||{};if(wn.equ(ie,$,ku)||Ga($,{...ie}),wn.equ(Q,$.params,ku)||Ga($,{params:{...$.params,...Q}}),!O.camera||O.camera===c&&!wn.equ(c,I,ku)){c=I;const Z=I instanceof Fp,ae=Z?I:E?new vs(0,0,0,0,.1,1e3):new Rn(75,0,.1,1e3);Z||(ae.position.z=5,I&&(Ga(ae,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(ae.manual=!0,ae.updateProjectionMatrix())),!O.camera&&!(I!=null&&I.rotation)&&ae.lookAt(0,0,0)),O.set({camera:ae}),$.camera=ae}if(!O.scene){let Z;m instanceof Nf?Z=m:(Z=new Nf,m&&Ga(Z,m)),O.set({scene:Wu(Z)})}if(!O.xr){var ee;const Z=(Ue,he)=>{const Te=s.getState();Te.frameloop!=="never"&&gI(Ue,!0,Te,he)},ae=()=>{const Ue=s.getState();Ue.gl.xr.enabled=Ue.gl.xr.isPresenting,Ue.gl.xr.setAnimationLoop(Ue.gl.xr.isPresenting?Z:null),Ue.gl.xr.isPresenting||mI(Ue)},ye={connect(){const Ue=s.getState().gl;Ue.xr.addEventListener("sessionstart",ae),Ue.xr.addEventListener("sessionend",ae)},disconnect(){const Ue=s.getState().gl;Ue.xr.removeEventListener("sessionstart",ae),Ue.xr.removeEventListener("sessionend",ae)}};typeof((ee=V.xr)==null?void 0:ee.addEventListener)=="function"&&ye.connect(),O.set({xr:ye})}if(V.shadowMap){const Z=V.shadowMap.enabled,ae=V.shadowMap.type;if(V.shadowMap.enabled=!!y,wn.boo(y))V.shadowMap.type=Pd;else if(wn.str(y)){var fe;const ye={basic:dO,percentage:g0,soft:Pd,variance:ks};V.shadowMap.type=(fe=ye[y])!=null?fe:Pd}else wn.obj(y)&&Object.assign(V.shadowMap,y);(Z!==V.shadowMap.enabled||ae!==V.shadowMap.type)&&(V.shadowMap.needsUpdate=!0)}const k=EN();k&&("enabled"in k?k.enabled=!S:"legacyMode"in k&&(k.legacyMode=S)),l||Ga(V,{outputEncoding:g?3e3:3001,toneMapping:w?So:JE}),O.legacy!==S&&O.set(()=>({legacy:S})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==w&&O.set(()=>({flat:w})),f&&!wn.fun(f)&&!DN(f)&&!wn.equ(f,V,ku)&&Ga(V,f),v&&!O.events.handlers&&O.set({events:v(s)});const Y=f7(n,p);return wn.equ(Y,O.size,ku)||O.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),b&&O.viewport.dpr!==RN(b)&&O.setDpr(b),O.frameloop!==P&&O.setFrameloop(P),O.onPointerMissed||O.set({onPointerMissed:C}),R&&!wn.equ(R,O.performance,ku)&&O.set(Z=>({performance:{...Z.performance,...R}})),a=_,l=!0,this},render(u){return l||this.configure(),xp.updateContainer(F.jsx(d7,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){ON(n)}}}function d7({store:n,children:e,onCreated:t,rootElement:r}){return $p(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),F.jsx(UM.Provider,{value:n,children:e})}function ON(n,e){const t=Uf.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),xp.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),ZX(i),Uf.delete(n)}catch{}},500)})}}function p7(n,e,t){return F.jsx(m7,{children:n,container:e,state:t},e.uuid)}function m7({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=zM(),[a]=B.useState(()=>new kM),[l]=B.useState(()=>new Ce),c=B.useCallback((f,p)=>{const m={...f};Object.keys(f).forEach(_=>{(i7.includes(_)||f[_]!==p[_]&&p[_])&&delete m[_]});let v;if(p&&i){const _=p.camera;v=f.viewport.getCurrentViewport(_,new G,i),_!==f.camera&&IN(_,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...p==null?void 0:p.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...v},...s}},[n]),[u]=B.useState(()=>{const f=o.getState();return vN((m,v)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:m,get:v,setEvents:_=>m(y=>({...y,events:{...y.events,..._}}))}))});return B.useEffect(()=>{const f=o.subscribe(p=>u.setState(m=>c(p,m)));return()=>{f()}},[c]),B.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),B.useEffect(()=>()=>{u.destroy()},[]),F.jsx(F.Fragment,{children:xp.createPortal(F.jsx(UM.Provider,{value:u,children:e}),u,null)})}xp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:B.version});function iA(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=t&&!r;return r||(r=setTimeout(l,e)),u&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}iA.debounce=iA;var g7=iA;const vI=_l(g7);function v7(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=B.useRef(!1);B.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,v]=B.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:S,top:E,width:P,height:b,bottom:R,right:L,x:I,y:C}=l.current.element.getBoundingClientRect(),O={left:S,top:E,width:P,height:b,bottom:R,right:L,x:I,y:C};l.current.element instanceof HTMLElement&&i&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),f.current&&!w7(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[w,u?vI(w,u):w,c?vI(w,c):w]},[a,i,c,u]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=w=>{!w||w===l.current.element||(_(),l.current.element=w,l.current.scrollContainers=NN(w),y())};return _7(v,!!t),y7(m),B.useEffect(()=>{_(),y()},[t,v,m]),B.useEffect(()=>_,[]),[g,o,p]}function y7(n){B.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function _7(n,e){B.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function NN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...NN(n.parentElement)]}const x7=["x","y","top","bottom","left","right","width","height"],w7=(n,e)=>x7.every(t=>n[t]===e[t]);var S7=Object.defineProperty,A7=Object.defineProperties,E7=Object.getOwnPropertyDescriptors,yI=Object.getOwnPropertySymbols,M7=Object.prototype.hasOwnProperty,b7=Object.prototype.propertyIsEnumerable,_I=(n,e,t)=>e in n?S7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xI=(n,e)=>{for(var t in e||(e={}))M7.call(e,t)&&_I(n,t,e[t]);if(yI)for(var t of yI(e))b7.call(e,t)&&_I(n,t,e[t]);return n},C7=(n,e)=>A7(n,E7(e)),wI,SI;typeof window<"u"&&((wI=window.document)!=null&&wI.createElement||((SI=window.navigator)==null?void 0:SI.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function kN(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=kN(r,e,t);if(i)return i;r=r.sibling}}function FN(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const AI=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=AI;return}return AI.apply(this,arguments)};const HM=FN(B.createContext(null));class UN extends B.Component{render(){return B.createElement(HM.Provider,{value:this._reactInternals},this.props.children)}}function T7(){const n=B.useContext(HM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=B.useId();return B.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=kN(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function R7(){const n=T7(),[e]=B.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==HM&&!e.has(i)&&e.set(i,B.useContext(FN(i)))}t=t.return}return e}function P7(){const n=R7();return B.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>B.createElement(e,null,B.createElement(t.Provider,C7(xI({},r),{value:n.get(t)}))),e=>B.createElement(UN,xI({},e))),[n])}const Uw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function I7(n){const{handlePointer:e}=r7(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Uw).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=Uw[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Uw[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const B7=B.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=I7,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:w,scene:S,onPointerMissed:E,onCreated:P,...b},R){B.useMemo(()=>AN(NX),[]);const L=P7(),[I,C]=v7({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=B.useRef(null),V=B.useRef(null);B.useImperativeHandle(R,()=>O.current);const $=bN(E),[Q,ie]=B.useState(!1),[ee,fe]=B.useState(!1);if(Q)throw Q;if(ee)throw ee;const k=B.useRef(null);$p(()=>{const Z=O.current;C.width>0&&C.height>0&&Z&&(k.current||(k.current=h7(Z)),k.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:w,scene:S,size:C,onPointerMissed:(...ae)=>$.current==null?void 0:$.current(...ae),onCreated:ae=>{ae.events.connect==null||ae.events.connect(a?KX(a)?a.current:a:V.current),l&&ae.setEvents({compute:(ye,Ue)=>{const he=ye[l+"X"],Te=ye[l+"Y"];Ue.pointer.set(he/Ue.size.width*2-1,-(Te/Ue.size.height)*2+1),Ue.raycaster.setFromCamera(Ue.pointer,Ue.camera)}}),P==null||P(ae)}}),k.current.render(F.jsx(L,{children:F.jsx(CN,{set:fe,children:F.jsx(B.Suspense,{fallback:F.jsx(YX,{set:ie}),children:e})})})))}),B.useEffect(()=>{const Z=O.current;if(Z)return()=>ON(Z)},[]);const Y=a?"none":"auto";return F.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...i},...b,children:F.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:F.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}),D7=B.forwardRef(function(e,t){return F.jsx(UN,{children:F.jsx(B7,{...e,ref:t})})});function Oy(){return Oy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Oy.apply(null,arguments)}function L7(n,e,t){return Math.max(e,Math.min(n,t))}const Kr={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function EI(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function MI(n,e,t,r=.15){return r===0?L7(n,e,t):n<e?-EI(e-n,t-e,r)+e:n>t?+EI(n-t,t-e,r)+t:n}function O7(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[MI(e,s,o,r),MI(t,a,l,i)]}function N7(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function k7(n){var e=N7(n,"string");return typeof e=="symbol"?e:String(e)}function Ai(n,e,t){return e=k7(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Nn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bI(Object(t),!0).forEach(function(r){Ai(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const zN={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function CI(n){return n?n[0].toUpperCase()+n.slice(1):""}const F7=["enter","leave"];function U7(n=!1,e){return n&&!F7.includes(e)}function z7(n,e="",t=!1){const r=zN[n],i=r&&r[e]||e;return"on"+CI(n)+CI(i)+(U7(t,i)?"Capture":"")}const H7=["gotpointercapture","lostpointercapture"];function G7(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=H7.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function V7(n,e=""){const t=zN[n],r=t&&t[e]||e;return n+r}function X0(n){return"touches"in n}function HN(n){return X0(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function W7(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function j7(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function GN(n){return X0(n)?j7(n)[0]:n}function $7(n){return W7(n).map(e=>e.identifier)}function zw(n){const e=GN(n);return X0(n)?e.identifier:e.pointerId}function TI(n){const e=GN(n);return[e.clientX,e.clientY]}function X7(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function Ny(n,...e){return typeof n=="function"?n(...e):n}function J7(){}function K7(...n){return n.length===0?J7:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function RI(n,e){return Object.assign({},e,n||{})}const Y7=32;class q7{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?Ny(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,X7(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const b=t._delta.map(Math.abs);Kr.addTo(t._distance,b)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=r.threshold,{_step:u,values:f}=t;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[b,R]=f;p[0]=u[0]!==!1?b-u[0]:0,p[1]=u[1]!==!1?R-u[1]:0}else p[0]=u[0]!==!1?o-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=Ny(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[_,y]=t.offset,[[g,w],[S,E]]=t._bounds;t.overflow=[_<g?-1:_>w?1:0,y<S?-1:y>E?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const P=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=O7(t._bounds,t.offset,P),t.delta=Kr.sub(t.offset,m),this.computeMovement(),v&&(!t.last||s>Y7)){t.delta=Kr.sub(t.offset,m);const b=t.delta.map(Math.abs);Kr.addTo(t.distance,b),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[b[0]/s,b[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Nn(Nn(Nn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Q7([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class Z7 extends q7{constructor(...e){super(...e),Ai(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Kr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Kr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[HN(e)]:r.axisThreshold;t.axis=Q7(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const eJ=n=>n,PI=.15,VN={enabled(n=!0){return n},eventOptions(n,e,t){return Nn(Nn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[PI,PI];case!1:return[0,0];default:return Kr.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Kr.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||eJ},threshold(n){return Kr.toVector(n,0)}},tJ=0,Xp=Nn(Nn({},VN),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=tJ){return n},bounds(n={}){if(typeof n=="function")return s=>Xp.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),II={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class nJ extends Z7{constructor(...e){super(...e),Ai(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=Xp.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=zw(e),r._pointerActive=!0,this.computeValues(TI(e)),this.computeInitial(),t.preventScrollAxis&&HN(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=zw(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=TI(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Kr.sub(s,t._values),this.computeValues(s)),Kr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=zw(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[f,p]=r.swipe.velocity,[m,v]=r.swipe.distance,_=r.swipe.duration;if(t.elapsedTime<_){const y=Math.abs(a/t.timeDelta),g=Math.abs(l/t.timeDelta);y>f&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),g>p&&Math.abs(u)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,rJ(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=II[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Kr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in II&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function rJ(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Jp=typeof window<"u"&&window.document&&window.document.createElement;function WN(){return Jp&&"ontouchstart"in window}function iJ(){return WN()||Jp&&window.navigator.maxTouchPoints>1}function sJ(){return Jp&&"onpointerdown"in window}function oJ(){return Jp&&"exitPointerLock"in window.document}function aJ(){try{return"constructor"in GestureEvent}catch{return!1}}const fs={isBrowser:Jp,gesture:aJ(),touch:WN(),touchscreen:iJ(),pointer:sJ(),pointerLock:oJ()},lJ=250,cJ=180,uJ=.5,fJ=50,hJ=250,dJ=10,BI={mouse:0,touch:0,pen:8},pJ=Nn(Nn({},Xp),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&fs.pointerLock,fs.touch&&t?"touch":this.pointerLock?"mouse":fs.pointer&&!i?"pointer":fs.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?lJ:void 0,!(!fs.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Kr.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=uJ,distance:e=fJ,duration:t=hJ}={}){return{velocity:this.transform(Kr.toVector(n)),distance:this.transform(Kr.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return cJ;case!1:return 0;default:return n}},axisThreshold(n){return n?Nn(Nn({},BI),n):BI},keyboardDisplacement(n=dJ){return n}});Nn(Nn({},VN),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!fs.touch&&fs.gesture)return"gesture";if(fs.touch&&r)return"touch";if(fs.touchscreen){if(fs.pointer)return"pointer";if(fs.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=RI(Ny(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=RI(Ny(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Kr.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Nn(Nn({},Xp),{},{mouseOnly:(n=!0)=>n});Nn(Nn({},Xp),{},{mouseOnly:(n=!0)=>n});const jN=new Map,sA=new Map;function mJ(n){jN.set(n.key,n.engine),sA.set(n.key,n.resolver)}const gJ={key:"drag",engine:nJ,resolver:pJ};function vJ(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function yJ(n,e){if(n==null)return{};var t=vJ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const _J={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=fs.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},xJ=["target","eventOptions","window","enabled","transform"];function Xv(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Xv(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function wJ(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=yJ(r,xJ);if(t.shared=Xv({target:i,eventOptions:s,window:o,enabled:a,transform:l},_J),e){const u=sA.get(e);t[e]=Xv(Nn({shared:t.shared},c),u)}else for(const u in c){const f=sA.get(u);f&&(t[u]=Xv(Nn({shared:t.shared},c[u]),f))}return t}class $N{constructor(e,t){Ai(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=V7(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Nn(Nn({},l),s);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class SJ{constructor(){Ai(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class AJ{constructor(e){Ai(this,"gestures",new Set),Ai(this,"_targetEventStore",new $N(this)),Ai(this,"gestureEventStores",{}),Ai(this,"gestureTimeoutStores",{}),Ai(this,"handlers",{}),Ai(this,"config",{}),Ai(this,"pointerIds",new Set),Ai(this,"touchIds",new Set),Ai(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),EJ(this,e)}setEventIds(e){if(X0(e))return this.touchIds=new Set($7(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=wJ(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=DI(r,a.eventOptions,!!i);if(a.enabled){const c=jN.get(o);new c(this,e,o).bind(l)}}const s=DI(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Nn(Nn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=K7(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=G7(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Fu(n,e){n.gestures.add(e),n.gestureEventStores[e]=new $N(n,e),n.gestureTimeoutStores[e]=new SJ}function EJ(n,e){e.drag&&Fu(n,"drag"),e.wheel&&Fu(n,"wheel"),e.scroll&&Fu(n,"scroll"),e.move&&Fu(n,"move"),e.pinch&&Fu(n,"pinch"),e.hover&&Fu(n,"hover")}const DI=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?r:z7(r,i,u);t&&f&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function MJ(n,e={},t,r){const i=ne.useMemo(()=>new AJ(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),ne.useEffect(i.effect.bind(i)),ne.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function bJ(n,e){return mJ(gJ),MJ({drag:n},e||{},"drag")}function LI(n,e){if(e===i3)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Iy||e===rM){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===Iy)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const CJ=parseInt(Kf.replace(/\D+/g,""));var ps=Uint8Array,Ka=Uint16Array,oA=Uint32Array,XN=new ps([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JN=new ps([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),TJ=new ps([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KN=function(n,e){for(var t=new Ka(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new oA(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},YN=KN(XN,2),qN=YN[0],RJ=YN[1];qN[28]=258,RJ[258]=28;var PJ=KN(JN,0),IJ=PJ[0],aA=new Ka(32768);for(var En=0;En<32768;++En){var Na=(En&43690)>>>1|(En&21845)<<1;Na=(Na&52428)>>>2|(Na&13107)<<2,Na=(Na&61680)>>>4|(Na&3855)<<4,aA[En]=((Na&65280)>>>8|(Na&255)<<8)>>>1}var Od=function(n,e,t){for(var r=n.length,i=0,s=new Ka(e);i<r;++i)++s[n[i]-1];var o=new Ka(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Ka(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],f=o[n[i]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)a[aA[f]>>>l]=c}else for(a=new Ka(r),i=0;i<r;++i)n[i]&&(a[i]=aA[o[n[i]-1]++]>>>15-n[i]);return a},Kp=new ps(288);for(var En=0;En<144;++En)Kp[En]=8;for(var En=144;En<256;++En)Kp[En]=9;for(var En=256;En<280;++En)Kp[En]=7;for(var En=280;En<288;++En)Kp[En]=8;var QN=new ps(32);for(var En=0;En<32;++En)QN[En]=5;var BJ=Od(Kp,9,1),DJ=Od(QN,5,1),Hw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Os=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Gw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},LJ=function(n){return(n/8|0)+(n&7&&1)},OJ=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Ka?Ka:n instanceof oA?oA:ps)(t-e);return r.set(n.subarray(e,t)),r},NJ=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new ps(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new ps(r*3));var o=function(Me){var Be=e.length;if(Me>Be){var at=new ps(Math.max(Be*2,Me));at.set(e),e=at}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,f=t.d,p=t.m,m=t.n,v=r*8;do{if(!u){t.f=a=Os(n,l,1);var _=Os(n,l+1,3);if(l+=3,_)if(_==1)u=BJ,f=DJ,p=9,m=5;else if(_==2){var S=Os(n,l,31)+257,E=Os(n,l+10,15)+4,P=S+Os(n,l+5,31)+1;l+=14;for(var b=new ps(P),R=new ps(19),L=0;L<E;++L)R[TJ[L]]=Os(n,l+L*3,7);l+=E*3;for(var I=Hw(R),C=(1<<I)-1,O=Od(R,I,1),L=0;L<P;){var V=O[Os(n,l,C)];l+=V&15;var y=V>>>4;if(y<16)b[L++]=y;else{var $=0,Q=0;for(y==16?(Q=3+Os(n,l,3),l+=2,$=b[L-1]):y==17?(Q=3+Os(n,l,7),l+=3):y==18&&(Q=11+Os(n,l,127),l+=7);Q--;)b[L++]=$}}var ie=b.subarray(0,S),ee=b.subarray(S);p=Hw(ie),m=Hw(ee),u=Od(ie,p,1),f=Od(ee,m,1)}else throw"invalid block type";else{var y=LJ(l)+4,g=n[y-4]|n[y-3]<<8,w=y+g;if(w>r){if(s)throw"unexpected EOF";break}i&&o(c+g),e.set(n.subarray(y,w),c),t.b=c+=g,t.p=l=w*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var fe=(1<<p)-1,k=(1<<m)-1,Y=l;;Y=l){var $=u[Gw(n,l)&fe],Z=$>>>4;if(l+=$&15,l>v){if(s)throw"unexpected EOF";break}if(!$)throw"invalid length/literal";if(Z<256)e[c++]=Z;else if(Z==256){Y=l,u=null;break}else{var ae=Z-254;if(Z>264){var L=Z-257,ye=XN[L];ae=Os(n,l,(1<<ye)-1)+qN[L],l+=ye}var Ue=f[Gw(n,l)&k],he=Ue>>>4;if(!Ue)throw"invalid distance";l+=Ue&15;var ee=IJ[he];if(he>3){var ye=JN[he];ee+=Gw(n,l)&(1<<ye)-1,l+=ye}if(l>v){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var Te=c+ae;c<Te;c+=4)e[c]=e[c-ee],e[c+1]=e[c+1-ee],e[c+2]=e[c+2-ee],e[c+3]=e[c+3-ee];c=Te}}t.l=u,t.p=Y,t.b=c,u&&(a=1,t.m=p,t.d=f,t.n=m)}while(!a);return c==e.length?e:OJ(e,0,c)},kJ=new ps(0),FJ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function gd(n,e){return NJ((FJ(n),n.subarray(2,-4)),e)}var UJ=typeof TextDecoder<"u"&&new TextDecoder,zJ=0;try{UJ.decode(kJ,{stream:!0}),zJ=1}catch{}const HJ=n=>n&&n.isCubeTexture;class GJ extends bn{constructor(e,t){var r,i;const s=HJ(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Kf.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,_={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new Vp(1,16),g=new Bi({uniforms:_,fragmentShader:v,vertexShader:m,side:ds});super(y,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var VJ=Object.defineProperty,WJ=(n,e,t)=>e in n?VJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ct=(n,e,t)=>(WJ(n,typeof e!="symbol"?e+"":e,t),t);const uv=new Kc,OI=new qo,jJ=Math.cos(70*(Math.PI/180)),NI=(n,e)=>(n%e+e)%e;let $J=class extends Do{constructor(e,t){super(),Ct(this,"object"),Ct(this,"domElement"),Ct(this,"enabled",!0),Ct(this,"target",new G),Ct(this,"minDistance",0),Ct(this,"maxDistance",1/0),Ct(this,"minZoom",0),Ct(this,"maxZoom",1/0),Ct(this,"minPolarAngle",0),Ct(this,"maxPolarAngle",Math.PI),Ct(this,"minAzimuthAngle",-1/0),Ct(this,"maxAzimuthAngle",1/0),Ct(this,"enableDamping",!1),Ct(this,"dampingFactor",.05),Ct(this,"enableZoom",!0),Ct(this,"zoomSpeed",1),Ct(this,"enableRotate",!0),Ct(this,"rotateSpeed",1),Ct(this,"enablePan",!0),Ct(this,"panSpeed",1),Ct(this,"screenSpacePanning",!0),Ct(this,"keyPanSpeed",7),Ct(this,"zoomToCursor",!1),Ct(this,"autoRotate",!1),Ct(this,"autoRotateSpeed",2),Ct(this,"reverseOrbit",!1),Ct(this,"reverseHorizontalOrbit",!1),Ct(this,"reverseVerticalOrbit",!1),Ct(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ct(this,"mouseButtons",{LEFT:nc.ROTATE,MIDDLE:nc.DOLLY,RIGHT:nc.PAN}),Ct(this,"touches",{ONE:rc.ROTATE,TWO:rc.DOLLY_PAN}),Ct(this,"target0"),Ct(this,"position0"),Ct(this,"zoom0"),Ct(this,"_domElementKeyEvents",null),Ct(this,"getPolarAngle"),Ct(this,"getAzimuthalAngle"),Ct(this,"setPolarAngle"),Ct(this,"setAzimuthalAngle"),Ct(this,"getDistance"),Ct(this,"listenToKeyEvents"),Ct(this,"stopListenToKeyEvents"),Ct(this,"saveState"),Ct(this,"reset"),Ct(this,"update"),Ct(this,"connect"),Ct(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=re=>{let be=NI(re,2*Math.PI),We=u.phi;We<0&&(We+=2*Math.PI),be<0&&(be+=2*Math.PI);let q=Math.abs(be-We);2*Math.PI-q<q&&(be<We?be+=2*Math.PI:We+=2*Math.PI),f.phi=be-We,r.update()},this.setAzimuthalAngle=re=>{let be=NI(re,2*Math.PI),We=u.theta;We<0&&(We+=2*Math.PI),be<0&&(be+=2*Math.PI);let q=Math.abs(be-We);2*Math.PI-q<q&&(be<We?be+=2*Math.PI:We+=2*Math.PI),f.theta=be-We,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",ze),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ze),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const re=new G,be=new G(0,1,0),We=new Wn().setFromUnitVectors(e.up,be),q=We.clone().invert(),Ve=new G,se=new Wn,Pe=2*Math.PI;return function(){const St=r.object.position;We.setFromUnitVectors(e.up,be),q.copy(We).invert(),re.copy(St).sub(r.target),re.applyQuaternion(We),u.setFromVector3(re),r.autoRotate&&l===a.NONE&&Q(V()),r.enableDamping?(u.theta+=f.theta*r.dampingFactor,u.phi+=f.phi*r.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Pt=r.minAzimuthAngle,Kt=r.maxAzimuthAngle;isFinite(Pt)&&isFinite(Kt)&&(Pt<-Math.PI?Pt+=Pe:Pt>Math.PI&&(Pt-=Pe),Kt<-Math.PI?Kt+=Pe:Kt>Math.PI&&(Kt-=Pe),Pt<=Kt?u.theta=Math.max(Pt,Math.min(Kt,u.theta)):u.theta=u.theta>(Pt+Kt)/2?Math.max(Pt,u.theta):Math.min(Kt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&I||r.object.isOrthographicCamera?u.radius=ye(u.radius):u.radius=ye(u.radius*p),re.setFromSpherical(u),re.applyQuaternion(q),St.copy(r.target).add(re),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let dn=!1;if(r.zoomToCursor&&I){let zt=null;if(r.object instanceof Rn&&r.object.isPerspectiveCamera){const Xn=re.length();zt=ye(Xn*p);const er=Xn-zt;r.object.position.addScaledVector(R,er),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Xn=new G(L.x,L.y,0);Xn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),dn=!0;const er=new G(L.x,L.y,0);er.unproject(r.object),r.object.position.sub(er).add(Xn),r.object.updateMatrixWorld(),zt=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;zt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(zt).add(r.object.position):(uv.origin.copy(r.object.position),uv.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(uv.direction))<jJ?e.lookAt(r.target):(OI.setFromNormalAndCoplanarPoint(r.object.up,r.target),uv.intersectPlane(OI,r.target))))}else r.object instanceof vs&&r.object.isOrthographicCamera&&(dn=p!==1,dn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,I=!1,dn||Ve.distanceToSquared(r.object.position)>c||8*(1-se.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Ve.copy(r.object.position),se.copy(r.object.quaternion),dn=!1,!0):!1}})(),this.connect=re=>{re===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=re,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Fe),r.domElement.addEventListener("pointerdown",U),r.domElement.addEventListener("pointercancel",le),r.domElement.addEventListener("wheel",Qe)},this.dispose=()=>{var re,be,We,q,Ve,se;r.domElement&&(r.domElement.style.touchAction="auto"),(re=r.domElement)==null||re.removeEventListener("contextmenu",Fe),(be=r.domElement)==null||be.removeEventListener("pointerdown",U),(We=r.domElement)==null||We.removeEventListener("pointercancel",le),(q=r.domElement)==null||q.removeEventListener("wheel",Qe),(Ve=r.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",pe),(se=r.domElement)==null||se.ownerDocument.removeEventListener("pointerup",le),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ze)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new tA,f=new tA;let p=1;const m=new G,v=new Ce,_=new Ce,y=new Ce,g=new Ce,w=new Ce,S=new Ce,E=new Ce,P=new Ce,b=new Ce,R=new G,L=new Ce;let I=!1;const C=[],O={};function V(){return 2*Math.PI/60/60*r.autoRotateSpeed}function $(){return Math.pow(.95,r.zoomSpeed)}function Q(re){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=re:f.theta-=re}function ie(re){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=re:f.phi-=re}const ee=(()=>{const re=new G;return function(We,q){re.setFromMatrixColumn(q,0),re.multiplyScalar(-We),m.add(re)}})(),fe=(()=>{const re=new G;return function(We,q){r.screenSpacePanning===!0?re.setFromMatrixColumn(q,1):(re.setFromMatrixColumn(q,0),re.crossVectors(r.object.up,re)),re.multiplyScalar(We),m.add(re)}})(),k=(()=>{const re=new G;return function(We,q){const Ve=r.domElement;if(Ve&&r.object instanceof Rn&&r.object.isPerspectiveCamera){const se=r.object.position;re.copy(se).sub(r.target);let Pe=re.length();Pe*=Math.tan(r.object.fov/2*Math.PI/180),ee(2*We*Pe/Ve.clientHeight,r.object.matrix),fe(2*q*Pe/Ve.clientHeight,r.object.matrix)}else Ve&&r.object instanceof vs&&r.object.isOrthographicCamera?(ee(We*(r.object.right-r.object.left)/r.object.zoom/Ve.clientWidth,r.object.matrix),fe(q*(r.object.top-r.object.bottom)/r.object.zoom/Ve.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Y(re){r.object instanceof Rn&&r.object.isPerspectiveCamera||r.object instanceof vs&&r.object.isOrthographicCamera?p/=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Z(re){r.object instanceof Rn&&r.object.isPerspectiveCamera||r.object instanceof vs&&r.object.isOrthographicCamera?p*=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ae(re){if(!r.zoomToCursor||!r.domElement)return;I=!0;const be=r.domElement.getBoundingClientRect(),We=re.clientX-be.left,q=re.clientY-be.top,Ve=be.width,se=be.height;L.x=We/Ve*2-1,L.y=-(q/se)*2+1,R.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function ye(re){return Math.max(r.minDistance,Math.min(r.maxDistance,re))}function Ue(re){v.set(re.clientX,re.clientY)}function he(re){ae(re),E.set(re.clientX,re.clientY)}function Te(re){g.set(re.clientX,re.clientY)}function Me(re){_.set(re.clientX,re.clientY),y.subVectors(_,v).multiplyScalar(r.rotateSpeed);const be=r.domElement;be&&(Q(2*Math.PI*y.x/be.clientHeight),ie(2*Math.PI*y.y/be.clientHeight)),v.copy(_),r.update()}function Be(re){P.set(re.clientX,re.clientY),b.subVectors(P,E),b.y>0?Y($()):b.y<0&&Z($()),E.copy(P),r.update()}function at(re){w.set(re.clientX,re.clientY),S.subVectors(w,g).multiplyScalar(r.panSpeed),k(S.x,S.y),g.copy(w),r.update()}function wt(re){ae(re),re.deltaY<0?Z($()):re.deltaY>0&&Y($()),r.update()}function mt(re){let be=!1;switch(re.code){case r.keys.UP:k(0,r.keyPanSpeed),be=!0;break;case r.keys.BOTTOM:k(0,-r.keyPanSpeed),be=!0;break;case r.keys.LEFT:k(r.keyPanSpeed,0),be=!0;break;case r.keys.RIGHT:k(-r.keyPanSpeed,0),be=!0;break}be&&(re.preventDefault(),r.update())}function te(){if(C.length==1)v.set(C[0].pageX,C[0].pageY);else{const re=.5*(C[0].pageX+C[1].pageX),be=.5*(C[0].pageY+C[1].pageY);v.set(re,be)}}function Ie(){if(C.length==1)g.set(C[0].pageX,C[0].pageY);else{const re=.5*(C[0].pageX+C[1].pageX),be=.5*(C[0].pageY+C[1].pageY);g.set(re,be)}}function Se(){const re=C[0].pageX-C[1].pageX,be=C[0].pageY-C[1].pageY,We=Math.sqrt(re*re+be*be);E.set(0,We)}function Ne(){r.enableZoom&&Se(),r.enablePan&&Ie()}function Le(){r.enableZoom&&Se(),r.enableRotate&&te()}function Oe(re){if(C.length==1)_.set(re.pageX,re.pageY);else{const We=He(re),q=.5*(re.pageX+We.x),Ve=.5*(re.pageY+We.y);_.set(q,Ve)}y.subVectors(_,v).multiplyScalar(r.rotateSpeed);const be=r.domElement;be&&(Q(2*Math.PI*y.x/be.clientHeight),ie(2*Math.PI*y.y/be.clientHeight)),v.copy(_)}function qe(re){if(C.length==1)w.set(re.pageX,re.pageY);else{const be=He(re),We=.5*(re.pageX+be.x),q=.5*(re.pageY+be.y);w.set(We,q)}S.subVectors(w,g).multiplyScalar(r.panSpeed),k(S.x,S.y),g.copy(w)}function Ye(re){const be=He(re),We=re.pageX-be.x,q=re.pageY-be.y,Ve=Math.sqrt(We*We+q*q);P.set(0,Ve),b.set(0,Math.pow(P.y/E.y,r.zoomSpeed)),Y(b.y),E.copy(P)}function xt(re){r.enableZoom&&Ye(re),r.enablePan&&qe(re)}function J(re){r.enableZoom&&Ye(re),r.enableRotate&&Oe(re)}function U(re){var be,We;r.enabled!==!1&&(C.length===0&&((be=r.domElement)==null||be.ownerDocument.addEventListener("pointermove",pe),(We=r.domElement)==null||We.ownerDocument.addEventListener("pointerup",le)),it(re),re.pointerType==="touch"?Je(re):de(re))}function pe(re){r.enabled!==!1&&(re.pointerType==="touch"?yt(re):Re(re))}function le(re){var be,We,q;Rt(re),C.length===0&&((be=r.domElement)==null||be.releasePointerCapture(re.pointerId),(We=r.domElement)==null||We.ownerDocument.removeEventListener("pointermove",pe),(q=r.domElement)==null||q.ownerDocument.removeEventListener("pointerup",le)),r.dispatchEvent(o),l=a.NONE}function de(re){let be;switch(re.button){case 0:be=r.mouseButtons.LEFT;break;case 1:be=r.mouseButtons.MIDDLE;break;case 2:be=r.mouseButtons.RIGHT;break;default:be=-1}switch(be){case nc.DOLLY:if(r.enableZoom===!1)return;he(re),l=a.DOLLY;break;case nc.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(r.enablePan===!1)return;Te(re),l=a.PAN}else{if(r.enableRotate===!1)return;Ue(re),l=a.ROTATE}break;case nc.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(r.enableRotate===!1)return;Ue(re),l=a.ROTATE}else{if(r.enablePan===!1)return;Te(re),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Re(re){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Me(re);break;case a.DOLLY:if(r.enableZoom===!1)return;Be(re);break;case a.PAN:if(r.enablePan===!1)return;at(re);break}}function Qe(re){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(re.preventDefault(),r.dispatchEvent(s),wt(re),r.dispatchEvent(o))}function ze(re){r.enabled===!1||r.enablePan===!1||mt(re)}function Je(re){switch(pt(re),C.length){case 1:switch(r.touches.ONE){case rc.ROTATE:if(r.enableRotate===!1)return;te(),l=a.TOUCH_ROTATE;break;case rc.PAN:if(r.enablePan===!1)return;Ie(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case rc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ne(),l=a.TOUCH_DOLLY_PAN;break;case rc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Le(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function yt(re){switch(pt(re),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Oe(re),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;qe(re),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;xt(re),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;J(re),r.update();break;default:l=a.NONE}}function Fe(re){r.enabled!==!1&&re.preventDefault()}function it(re){C.push(re)}function Rt(re){delete O[re.pointerId];for(let be=0;be<C.length;be++)if(C[be].pointerId==re.pointerId){C.splice(be,1);return}}function pt(re){let be=O[re.pointerId];be===void 0&&(be=new Ce,O[re.pointerId]=be),be.set(re.pageX,re.pageY)}function He(re){const be=re.pointerId===C[0].pointerId?C[1]:C[0];return O[be.pointerId]}t!==void 0&&this.connect(t),this.update()}};function zf(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const yc="srgb",aa="srgb-linear",kI=3001,XJ=3e3;class GM extends br{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new QJ(t)}),this.register(function(t){return new ZJ(t)}),this.register(function(t){return new lK(t)}),this.register(function(t){return new cK(t)}),this.register(function(t){return new uK(t)}),this.register(function(t){return new tK(t)}),this.register(function(t){return new nK(t)}),this.register(function(t){return new rK(t)}),this.register(function(t){return new iK(t)}),this.register(function(t){return new qJ(t)}),this.register(function(t){return new sK(t)}),this.register(function(t){return new eK(t)}),this.register(function(t){return new aK(t)}),this.register(function(t){return new oK(t)}),this.register(function(t){return new KJ(t)}),this.register(function(t){return new fK(t)}),this.register(function(t){return new hK(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=oa.extractUrlBase(e);o=oa.resolveURL(c,this.path)}else o=oa.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Mr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(zf(new Uint8Array(e.slice(0,4)))===ZN){try{o[Xt.KHR_BINARY_GLTF]=new dK(e)}catch(u){i&&i(u);return}s=JSON.parse(o[Xt.KHR_BINARY_GLTF].content)}else s=JSON.parse(zf(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new bK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case Xt.KHR_MATERIALS_UNLIT:o[u]=new YJ;break;case Xt.KHR_DRACO_MESH_COMPRESSION:o[u]=new pK(s,this.dracoLoader);break;case Xt.KHR_TEXTURE_TRANSFORM:o[u]=new mK;break;case Xt.KHR_MESH_QUANTIZATION:o[u]=new gK;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function JJ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class KJ{constructor(e){this.parser=e,this.name=Xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Xe(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],aa);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new j0(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new _p(u),c.distance=f;break;case"spot":c=new W0(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ko(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class YJ{constructor(){this.name=Xt.KHR_MATERIALS_UNLIT}getMaterialType(){return bi}extendParams(e,t,r){const i=[];e.color=new Xe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],aa),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,yc))}return Promise.all(i)}}class qJ{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class QJ{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ce(a,a)}return Promise.all(s)}}class ZJ{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class eK{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class tK{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Xe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],aa)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,yc)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class nK{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class rK{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Xe().setRGB(a[0],a[1],a[2],aa),Promise.all(s)}}class iK{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class sK{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Xe().setRGB(a[0],a[1],a[2],aa),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,yc)),Promise.all(s)}}class oK{constructor(e){this.parser=e,this.name=Xt.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class aK{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ms}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class lK{constructor(e){this.parser=e,this.name=Xt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class cK{constructor(e){this.parser=e,this.name=Xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class uK{constructor(e){this.parser=e,this.name=Xt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class fK{constructor(e){this.name=Xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(m),u,f,p,i.mode,i.filter),m})})}else return null}}class hK{constructor(e){this.name=Xt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==ls.TRIANGLES&&c.mode!==ls.TRIANGLE_STRIP&&c.mode!==ls.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const v of f){const _=new tt,y=new G,g=new Wn,w=new G(1,1,1),S=new gM(v.geometry,v.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,E),l.SCALE&&w.fromBufferAttribute(l.SCALE,E),S.setMatrixAt(E,_.compose(y,g,w));for(const E in l)if(E==="_COLOR_0"){const P=l[E];S.instanceColor=new Fc(P.array,P.itemSize,P.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&v.geometry.setAttribute(E,l[E]);Vt.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const ZN="glTF",ed=12,FI={JSON:1313821514,BIN:5130562};class dK{constructor(e){this.name=Xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ed);if(this.header={magic:zf(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ZN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-ed,i=new DataView(e,ed);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===FI.JSON){const l=new Uint8Array(e,ed+s,o);this.content=zf(l)}else if(a===FI.BIN){const l=ed+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class pK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=lA[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=lA[u]||u.toLowerCase();if(o[u]!==void 0){const p=r.accessors[e.attributes[u]],m=xf[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,p){i.decodeDracoFile(u,function(m){for(const v in m.attributes){const _=m.attributes[v],y=l[v];y!==void 0&&(_.normalized=y)}f(m)},a,c,aa,p)})})}}class mK{constructor(){this.name=Xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class gK{constructor(){this.name=Xt.KHR_MESH_QUANTIZATION}}class ek extends eh{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,f=(r-t)/u,p=f*f,m=p*f,v=e*c,_=v-c,y=-2*m+3*p,g=m-p,w=1-y,S=g-p+f;for(let E=0;E!==a;E++){const P=o[_+E+a],b=o[_+E+l]*u,R=o[v+E+a],L=o[v+E]*u;s[E]=w*P+S*b+y*R+g*L}return s}}const vK=new Wn;class yK extends ek{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return vK.fromArray(s).normalize().toArray(s),s}}const ls={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},xf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},UI={9728:pr,9729:un,9984:v0,9985:yf,9986:fc,9987:gs},zI={33071:On,33648:If,10497:Co},Vw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...CJ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ka={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_K={CUBICSPLINE:void 0,LINEAR:Df,STEP:Bf},Ww={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function xK(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new sl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Mo})),n.DefaultMaterial}function ql(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Ko(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function wK(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(r){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(i){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],p=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function SK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function AK(n){let e;const t=n.extensions&&n.extensions[Xt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+jw(t.attributes):e=n.indices+":"+jw(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+jw(n.targets[r]);return e}function jw(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function cA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function EK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const MK=new tt;class bK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new JJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new th(this.options.manager):this.textureLoader=new uN(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return ql(s,a,i),Ko(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Xt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(oa.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=Vw[i.type],a=xf[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new tn(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Vw[i.type],c=xf[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let _,y;if(m&&m!==f){const g=Math.floor(p/m),w="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let S=t.cache.get(w);S||(_=new c(a,g*m,i.count*m/u),S=new Hp(_,m/u),t.cache.add(w,S)),y=new fl(S,l,p%m/u,v)}else a===null?_=new c(i.count*l):_=new c(a,p,i.count*l),y=new tn(_,l,v);if(i.sparse!==void 0){const g=Vw.SCALAR,w=xf[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,E=i.sparse.values.byteOffset||0,P=new w(o[1],S,i.sparse.count*g),b=new c(o[2],E,i.sparse.count*l);a!==null&&(y=new tn(y.array.slice(),y.itemSize,y.normalized));for(let R=0,L=P.length;R<L;R++){const I=P[R];if(y.setX(I,b[R*l]),l>=2&&y.setY(I,b[R*l+1]),l>=3&&y.setZ(I,b[R*l+2]),l>=4&&y.setW(I,b[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=UI[p.magFilter]||un,u.minFilter=UI[p.minFilter]||gs,u.wrapS=zI[p.wrapS]||Co,u.wrapT=zI[p.wrapT]||Co,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(_){const y=new Yt(_);y.needsUpdate=!0,p(y)}),t.load(oa.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),Ko(f,o),f.userData.mimeType=o.mimeType||EK(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Xt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Xt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Xt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===kI?yc:aa),"colorSpace"in o?o.colorSpace=i:o.encoding=i===yc?kI:XJ),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new T0,cr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Or,cr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return sl}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Xt.KHR_MATERIALS_UNLIT]){const f=i[Xt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Xe(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],aa),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,yc)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ds);const u=s.alphaMode||Ww.OPAQUE;if(u===Ww.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===Ww.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==bi&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ce(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==bi&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==bi){const f=s.emissiveFactor;a.emissive=new Xe().setRGB(f[0],f[1],f[2],aa)}return s.emissiveTexture!==void 0&&o!==bi&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,yc)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Ko(f,s),t.associations.set(f,{materials:e}),s.extensions&&ql(i,f,s),f})}createUniqueName(e){const t=Wt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return HI(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=AK(c),f=i[u];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[Xt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=HI(new Tt,c,t),i[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?xK(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let m=0,v=u.length;m<v;m++){const _=u[m],y=o[m];let g;const w=c[m];if(y.mode===ls.TRIANGLES||y.mode===ls.TRIANGLE_STRIP||y.mode===ls.TRIANGLE_FAN||y.mode===void 0)g=s.isSkinnedMesh===!0?new C0(_,w):new bn(_,w),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),y.mode===ls.TRIANGLE_STRIP?g.geometry=LI(g.geometry,rM):y.mode===ls.TRIANGLE_FAN&&(g.geometry=LI(g.geometry,Iy));else if(y.mode===ls.LINES)g=new Ys(_,w);else if(y.mode===ls.LINE_STRIP)g=new To(_,w);else if(y.mode===ls.LINE_LOOP)g=new vM(_,w);else if(y.mode===ls.POINTS)g=new yM(_,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(g.geometry.morphAttributes).length>0&&SK(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Ko(g,s),y.extensions&&ql(i,g,y),t.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&ql(i,f[0],s),f[0];const p=new Gs;s.extensions&&ql(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=f.length;m<v;m++)p.add(f[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Rn(Jr.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new vs(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Ko(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const p=new tt;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Qf(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,p=i.channels.length;f<p;f++){const m=i.channels[f],v=i.samplers[m.sampler],_=m.target,y=_.node,g=i.parameters!==void 0?i.parameters[v.input]:v.input,w=i.parameters!==void 0?i.parameters[v.output]:v.output;_.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",w)),c.push(v),u.push(_))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const p=f[0],m=f[1],v=f[2],_=f[3],y=f[4],g=[];for(let w=0,S=p.length;w<S;w++){const E=p[w],P=m[w],b=v[w],R=_[w],L=y[w];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const I=r._createAnimationTracks(E,P,b,R,L);if(I)for(let C=0;C<I.length;C++)g.push(I[C])}return new zc(s,void 0,g)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,MK)});for(let m=0,v=f.length;m<v;m++)u.add(f[m]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new kf:c.length>1?u=new Gs:c.length===1?u=c[0]:u=new Vt,u!==c[0])for(let f=0,p=c.length;f<p;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Ko(u,s),s.extensions&&ql(r,u,s),s.matrix!==void 0){const f=new tt;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Gs;r.name&&(s.name=i.createUniqueName(r.name)),Ko(s,r),r.extensions&&ql(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[p,m]of i.associations)(p instanceof cr||p instanceof Yt)&&f.set(p,m);return u.traverse(p=>{const m=i.associations.get(p);m!=null&&f.set(p,m)}),f};return i.associations=c(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];ka[s.path]===ka.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(ka[s.path]){case ka.weights:c=hl;break;case ka.rotation:c=dl;break;case ka.position:case ka.scale:c=pl;break;default:switch(r.itemSize){case 1:c=hl;break;case 2:case 3:default:c=pl;break}break}const u=i.interpolation!==void 0?_K[i.interpolation]:Df,f=this._getArrayFromAccessor(r);for(let p=0,m=l.length;p<m;p++){const v=new c(l[p]+"."+ka[s.path],t.array,f,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=cA(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof dl?yK:ek;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function CK(n,e,t){const r=e.attributes,i=new Yr;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new G(l[0],l[1],l[2]),new G(c[0],c[1],c[2])),a.normalized){const u=cA(xf[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new G,l=new G;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const _=cA(xf[p.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Dr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function HI(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=lA[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Ko(n,e),CK(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?wK(n,e.targets,t):n})}function tk(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function TK(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],f=s[a-c],p=i[c]/(u+f);i[c]=l+u*p,l=f*p}i[a]=l}return i}function RK(n,e,t,r){const i=tk(n,r,e),s=TK(i,r,n,e),o=new rn(0,0,0,0);for(let a=0;a<=n;++a){const l=t[i-n+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function PK(n,e,t,r,i){const s=[];for(let f=0;f<=t;++f)s[f]=0;const o=[];for(let f=0;f<=r;++f)o[f]=s.slice(0);const a=[];for(let f=0;f<=t;++f)a[f]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let f=1;f<=t;++f){l[f]=e-i[n+1-f],c[f]=i[n+f]-e;let p=0;for(let m=0;m<f;++m){const v=c[m+1],_=l[f-m];a[f][m]=v+_;const y=a[m][f-1]/a[f][m];a[m][f]=p+v*y,p=_*y}a[f][f]=p}for(let f=0;f<=t;++f)o[0][f]=a[f][t];for(let f=0;f<=t;++f){let p=0,m=1;const v=[];for(let _=0;_<=t;++_)v[_]=s.slice(0);v[0][0]=1;for(let _=1;_<=r;++_){let y=0;const g=f-_,w=t-_;f>=_&&(v[m][0]=v[p][0]/a[w+1][g],y=v[m][0]*a[g][w]);const S=g>=-1?1:-g,E=f-1<=w?_-1:t-f;for(let b=S;b<=E;++b)v[m][b]=(v[p][b]-v[p][b-1])/a[w+1][g+b],y+=v[m][b]*a[g+b][w];f<=w&&(v[m][_]=-v[p][_-1]/a[w+1][f],y+=v[m][_]*a[f][w]),o[_][f]=y;const P=p;p=m,m=P}}let u=t;for(let f=1;f<=r;++f){for(let p=0;p<=t;++p)o[f][p]*=u;u*=t-f}return o}function IK(n,e,t,r,i){const s=i<n?i:n,o=[],a=tk(n,r,e),l=PK(a,r,n,s,e),c=[];for(let u=0;u<t.length;++u){const f=t[u].clone(),p=f.w;f.x*=p,f.y*=p,f.z*=p,c[u]=f}for(let u=0;u<=s;++u){const f=c[a-n].clone().multiplyScalar(l[u][0]);for(let p=1;p<=n;++p)f.add(c[a-n+p].clone().multiplyScalar(l[u][p]));o[u]=f}for(let u=s+1;u<=i+1;++u)o[u]=new rn(0,0,0);return o}function BK(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function DK(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new G(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(BK(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function LK(n,e,t,r,i){const s=IK(n,e,t,r,i);return DK(s)}class GI extends Es{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const a=r[o];this.controlPoints[o]=new rn(a.x,a.y,a.z,a.w)}}getPoint(e,t){const r=t||new G,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=RK(this.degree,this.knots,this.controlPoints,i);return s.w!=1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t){const r=t||new G,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=LK(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let $t,Qn,Si;class VM extends br{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?oa.extractUrlBase(e):s.path,a=new Mr(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e,t){if(zK(e))$t=new UK().parse(e);else{const i=sk(e);if(!HK(i))throw new Error("THREE.FBXLoader: Unknown format.");if(WI(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+WI(i));$t=new FK().parse(i)}const r=new th(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new OK(r,this.manager).parse($t)}}class OK{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Qn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new NK().parse(i);return this.parseScene(i,s,r),Si}parseConnections(){const e=new Map;return"Connections"in $t&&$t.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in $t.Objects){const r=$t.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=c}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in $t.Objects){const r=$t.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?Co:On,r.wrapT=a===0?Co:On,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=Qn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Yt):(l.setPath(this.textureLoader.path),o=l.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Yt):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in $t.Objects){const r=$t.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Qn.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new Ld;break;case"lambert":a=new MM;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new Ld;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Xe().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Xe().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Xe().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Xe().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Xe().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Xe().fromArray(e.SpecularColor.value));const s=this;return Qn.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&("colorSpace"in i.map?i.map.colorSpace="srgb":i.map.encoding=3001);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&("colorSpace"in i.emissiveMap?i.emissiveMap.colorSpace="srgb":i.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=Oc,"colorSpace"in i.envMap?i.envMap.colorSpace="srgb":i.envMap.encoding=3001);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&("colorSpace"in i.specularMap?i.specularMap.colorSpace="srgb":i.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in $t.Objects&&t in $t.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Qn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in $t.Objects){const r=$t.Objects.Deformer;for(const i in r){const s=r[i],o=Qn.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new tt().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Qn.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){Si=new Gs;const i=this.parseModels(e.skeletons,t,r),s=$t.Objects.Model,o=this;i.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),Qn.get(l.ID).parents.forEach(function(f){const p=i.get(f.ID);p!==void 0&&p.add(l)}),l.parent===null&&Si.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),Si.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=rk(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new kK().parse();Si.children.length===1&&Si.children[0].isGroup&&(Si.children[0].animations=a,Si=Si.children[0]),Si.animations=a}parseModels(e,t,r){const i=new Map,s=$t.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=Qn.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,r);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new kf;break;case"Null":default:u=new Gs;break}u.name=l.attrName?Wt.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),i.set(a,u)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const f=s;s=new kf,s.matrixWorld.copy(c.transformLink),s.name=i?Wt.sanitizeNodeName(i):"",s.ID=r,l.bones[u]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=$t.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Vt;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,l=r.AspectHeight.value);const c=a/l;let u=45;r.FieldOfView!==void 0&&(u=r.FieldOfView.value);const f=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new Rn(u,c,s,o),f!==null&&t.setFocalLength(f);break;case 1:t=new vs(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new Vt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=$t.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Vt;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new Xe().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new _p(s,o,a,l);break;case 1:t=new j0(s,o);break;case 2:let c=Math.PI/3;r.InnerAngle!==void 0&&(c=Jr.degToRad(r.InnerAngle.value));let u=0;r.OuterAngle!==void 0&&(u=Jr.degToRad(r.OuterAngle.value),u=Math.max(u,1)),t=new W0(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new _p(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&a.push(r.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new Ld({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new C0(s,o),i.normalizeSkinWeights()):i=new bn(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new Or({color:3342591,linewidth:1});return new To(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=ik(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Qn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=$t.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Si.add(e.target)):e.lookAt(new G().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Qn.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;Qn.get(c).parents.forEach(function(f){r.has(f.ID)&&r.get(f.ID).bind(new Qf(o.bones),i[f.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in $t.Objects){const t=$t.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new tt().fromArray(s.Matrix.a)}):e[i.Node]=new tt().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in $t&&"AmbientColor"in $t.GlobalSettings){const e=$t.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new Xe(t,r,i);Si.add(new IM(s,1))}}}}class NK{parse(e){const t=new Map;if("Geometry"in $t.Objects){const r=$t.Objects.Geometry;for(const i in r){const s=Qn.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(f){return $t.Objects.Model[f.ID]});if(o.length===0)return;const a=e.children.reduce(function(f,p){return i[p.ID]!==void 0&&(f=i[p.ID]),f},null);e.children.forEach(function(f){r.morphTargets[f.ID]!==void 0&&s.push(r.morphTargets[f.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=ik(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=rk(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,r,i){const s=new Tt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new ot(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new ot(a.colors,3)),t&&(s.setAttribute("skinIndex",new A0(a.weightsIndices,4)),s.setAttribute("skinWeight",new ot(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new Lt().getNormalMatrix(i),u=new ot(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){let f="uv"+(u+1).toString();u===0&&(f="uv"),s.setAttribute(f,new ot(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(f,p){f!==c&&(s.addGroup(u,p-u,c),c=f,u=p)}),s.groups.length>0){const f=s.groups[s.groups.length-1],p=f.start+f.count;p!==a.materialIndex.length&&s.addGroup(p,a.materialIndex.length-p,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],l=[],c=[],u=[],f=[];const p=this;return e.vertexIndices.forEach(function(m,v){let _,y=!1;m<0&&(m=m^-1,y=!0);let g=[],w=[];if(o.push(m*3,m*3+1,m*3+2),e.color){const S=fv(v,r,m,e.color);l.push(S[0],S[1],S[2])}if(e.skeleton){if(e.weightTable[m]!==void 0&&e.weightTable[m].forEach(function(S){w.push(S.weight),g.push(S.id)}),w.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const S=[0,0,0,0],E=[0,0,0,0];w.forEach(function(P,b){let R=P,L=g[b];E.forEach(function(I,C,O){if(R>I){O[C]=R,R=I;const V=S[C];S[C]=L,L=V}})}),g=S,w=E}for(;w.length<4;)w.push(0),g.push(0);for(let S=0;S<4;++S)u.push(w[S]),f.push(g[S])}if(e.normal){const S=fv(v,r,m,e.normal);a.push(S[0],S[1],S[2])}e.material&&e.material.mappingType!=="AllSame"&&(_=fv(v,r,m,e.material)[0]),e.uv&&e.uv.forEach(function(S,E){const P=fv(v,r,m,S);c[E]===void 0&&(c[E]=[]),c[E].push(P[0]),c[E].push(P[1])}),i++,y&&(p.genFace(t,e,o,_,a,l,c,u,f,i),r++,i=0,o=[],a=[],l=[],c=[],u=[],f=[])}),t}genFace(e,t,r,i,s,o,a,l,c,u){for(let f=2;f<u;f++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(f-1)*3]]),e.vertex.push(t.vertexPositions[r[(f-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(f-1)*3+2]]),e.vertex.push(t.vertexPositions[r[f*3]]),e.vertex.push(t.vertexPositions[r[f*3+1]]),e.vertex.push(t.vertexPositions[r[f*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(f-1)*4]),e.vertexWeights.push(l[(f-1)*4+1]),e.vertexWeights.push(l[(f-1)*4+2]),e.vertexWeights.push(l[(f-1)*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(f-1)*4]),e.weightsIndices.push(c[(f-1)*4+1]),e.weightsIndices.push(c[(f-1)*4+2]),e.weightsIndices.push(c[(f-1)*4+3]),e.weightsIndices.push(c[f*4]),e.weightsIndices.push(c[f*4+1]),e.weightsIndices.push(c[f*4+2]),e.weightsIndices.push(c[f*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(f-1)*3]),e.colors.push(o[(f-1)*3+1]),e.colors.push(o[(f-1)*3+2]),e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(f-1)*3]),e.normal.push(s[(f-1)*3+1]),e.normal.push(s[(f-1)*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),t.uv&&t.uv.forEach(function(p,m){e.uvs[m]===void 0&&(e.uvs[m]=[]),e.uvs[m].push(a[m][0]),e.uvs[m].push(a[m][1]),e.uvs[m].push(a[m][(f-1)*2]),e.uvs[m].push(a[m][(f-1)*2+1]),e.uvs[m].push(a[m][f*2]),e.uvs[m].push(a[m][f*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const l=$t.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let v=0;v<l.length;v++){const _=l[v]*3;u[_]=a[v*3],u[_+1]=a[v*3+1],u[_+2]=a[v*3+2]}const f={vertexIndices:o,vertexPositions:u},p=this.genBuffers(f),m=new ot(p.vertex,3);m.name=s||r.attrName,m.applyMatrix4(i),e.morphAttributes.position.push(m)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(GI===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Tt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Tt;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let f=0,p=o.length;f<p;f+=4)s.push(new rn().fromArray(o,f));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,l=i.length-1-a;for(let f=0;f<r;++f)s.push(s[f])}const u=new GI(r,i,s,a,l).getPoints(s.length*12);return new Tt().setFromPoints(u)}}class kK{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if($t.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=$t.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=$t.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(GK),values:t[r].KeyValueFloat.a},s=Qn.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=$t.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=Qn.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const f=Qn.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(f!==void 0){const p=$t.Objects.Model[f.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const m={modelName:p.attrName?Wt.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Si.traverse(function(v){v.ID===p.id&&(m.transform=v.matrix,v.userData.transformData&&(m.eulerOrder=v.userData.transformData.eulerOrder))}),m.transform||(m.transform=new tt),"PreRotation"in p&&(m.preRotation=p.PreRotation.value),"PostRotation"in p&&(m.postRotation=p.PostRotation.value),s[c]=m}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const f=Qn.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,p=Qn.get(f).parents[0].ID,m=Qn.get(p).parents[0].ID,v=Qn.get(m).parents[0].ID,_=$t.Objects.Model[v],y={modelName:_.attrName?Wt.sanitizeNodeName(_.attrName):"",morphName:$t.Objects.Deformer[f].attrName};s[c]=y}s[c][u.attr]=u}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=$t.Objects.AnimationStack,r={};for(const i in t){const s=Qn.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new zc(e.name,-1,t)}generateTracks(e){const t=[];let r=new G,i=new Wn,s=new G;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new Ar().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new pl(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Jr.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Jr.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Jr.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,r);i!==void 0&&(i=i.map(Jr.degToRad),i.push(o),i=new Ar().fromArray(i),i=new Wn().setFromEuler(i)),s!==void 0&&(s=s.map(Jr.degToRad),s.push(o),s=new Ar().fromArray(s),s=new Wn().setFromEuler(s).invert());const c=new Wn,u=new Ar,f=[];for(let p=0;p<l.length;p+=3)u.set(l[p],l[p+1],l[p+2],o),c.setFromEuler(u),i!==void 0&&c.premultiply(i),s!==void 0&&c.multiply(s),c.toArray(f,p/3*4);return new dl(e+".quaternion",a,f)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=Si.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new hl(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),i[0]=u}else s.push(i[0]);if(a!==-1){const u=t.y.values[a];s.push(u),i[1]=u}else s.push(i[1]);if(l!==-1){const u=t.z.values[l];s.push(u),i[2]=u}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let l=r+a;const c=e.times[t-1],f=(e.times[t]-c)/o;let p=c+f;const m=[],v=[];for(;p<e.times[t];)m.push(p),p+=f,v.push(l),l+=a;e.times=jI(e.times,t,m),e.values=jI(e.values,t,v)}}}}class FK{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new nk,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):c?t.parseNodeProperty(i,c,r[++s]):u?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(p){return p.trim().replace(/^"/,"")}),i="connections",s=[c,u],WK(s,f),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=Xw(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Xw(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],l=i[3];let c=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=Xw(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class UK{parse(e){const t=new VI(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new nk;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const l=[];for(let p=0;p<s;p++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,r,p)}return r.propertyList=l,typeof c=="number"&&(r.id=c),u!==""&&(r.attrName=u),f!==""&&(r.attrType=f),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=gd(new Uint8Array(e.getArrayBuffer(o))),l=new VI(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class VI{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),zf(new Uint8Array(t))}}class nk{add(e,t){this[e]=t}}function zK(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===sk(n,0,e.length)}function HK(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function WI(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function GK(n){return n/46186158e3}const VK=[];function fv(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return jK(VK,r.buffer,s,o)}const $w=new Ar,Uu=new G;function rk(n){const e=new tt,t=new tt,r=new tt,i=new tt,s=new tt,o=new tt,a=new tt,l=new tt,c=new tt,u=new tt,f=new tt,p=new tt,m=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Uu.fromArray(n.translation)),n.preRotation){const C=n.preRotation.map(Jr.degToRad);C.push(n.eulerOrder),t.makeRotationFromEuler($w.fromArray(C))}if(n.rotation){const C=n.rotation.map(Jr.degToRad);C.push(n.eulerOrder),r.makeRotationFromEuler($w.fromArray(C))}if(n.postRotation){const C=n.postRotation.map(Jr.degToRad);C.push(n.eulerOrder),i.makeRotationFromEuler($w.fromArray(C)),i.invert()}n.scale&&s.scale(Uu.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Uu.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(Uu.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Uu.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(Uu.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(f.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const v=t.clone().multiply(r).multiply(i),_=new tt;_.extractRotation(u);const y=new tt;y.copyPosition(u);const g=y.clone().invert().multiply(u),w=_.clone().invert().multiply(g),S=s,E=new tt;if(m===0)E.copy(_).multiply(v).multiply(w).multiply(S);else if(m===1)E.copy(_).multiply(w).multiply(v).multiply(S);else{const O=new tt().scale(new G().setFromMatrixScale(f)).clone().invert(),V=w.clone().multiply(O);E.copy(_).multiply(v).multiply(V).multiply(S)}const P=c.clone().invert(),b=o.clone().invert();let R=e.clone().multiply(l).multiply(c).multiply(t).multiply(r).multiply(i).multiply(P).multiply(a).multiply(o).multiply(s).multiply(b);const L=new tt().copyPosition(R),I=u.clone().multiply(L);return p.copyPosition(I),R=p.clone().multiply(E),R.premultiply(u.invert()),R}function ik(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function Xw(n){return n.split(",").map(function(t){return parseFloat(t)})}function sk(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),zf(new Uint8Array(n,e,t))}function WK(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function jK(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function jI(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class $K extends RM{constructor(e){super(e),this.type=Ir}parse(e){const o=function(L,I){switch(L){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},u=`
`,f=function(L,I,C){I=I||1024;let V=L.pos,$=-1,Q=0,ie="",ee=String.fromCharCode.apply(null,new Uint16Array(L.subarray(V,V+128)));for(;0>($=ee.indexOf(u))&&Q<I&&V<L.byteLength;)ie+=ee,Q+=ee.length,V+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(L.subarray(V,V+128)));return-1<$?(L.pos+=Q+$+1,ie+ee.slice(0,$)):!1},p=function(L){const I=/^#\?(\S+)/,C=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*FORMAT=(\S+)\s*$/,$=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Q={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ie,ee;for((L.pos>=L.byteLength||!(ie=f(L)))&&o(1,"no header found"),(ee=ie.match(I))||o(3,"bad initial token"),Q.valid|=1,Q.programtype=ee[1],Q.string+=ie+`
`;ie=f(L),ie!==!1;){if(Q.string+=ie+`
`,ie.charAt(0)==="#"){Q.comments+=ie+`
`;continue}if((ee=ie.match(C))&&(Q.gamma=parseFloat(ee[1])),(ee=ie.match(O))&&(Q.exposure=parseFloat(ee[1])),(ee=ie.match(V))&&(Q.valid|=2,Q.format=ee[1]),(ee=ie.match($))&&(Q.valid|=4,Q.height=parseInt(ee[1],10),Q.width=parseInt(ee[2],10)),Q.valid&2&&Q.valid&4)break}return Q.valid&2||o(3,"missing format specifier"),Q.valid&4||o(3,"missing image size specifier"),Q},m=function(L,I,C){const O=I;if(O<8||O>32767||L[0]!==2||L[1]!==2||L[2]&128)return new Uint8Array(L);O!==(L[2]<<8|L[3])&&o(3,"wrong scanline width");const V=new Uint8Array(4*I*C);V.length||o(4,"unable to allocate buffer space");let $=0,Q=0;const ie=4*O,ee=new Uint8Array(4),fe=new Uint8Array(ie);let k=C;for(;k>0&&Q<L.byteLength;){Q+4>L.byteLength&&o(1),ee[0]=L[Q++],ee[1]=L[Q++],ee[2]=L[Q++],ee[3]=L[Q++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=O)&&o(3,"bad rgbe scanline format");let Y=0,Z;for(;Y<ie&&Q<L.byteLength;){Z=L[Q++];const ye=Z>128;if(ye&&(Z-=128),(Z===0||Y+Z>ie)&&o(3,"bad scanline data"),ye){const Ue=L[Q++];for(let he=0;he<Z;he++)fe[Y++]=Ue}else fe.set(L.subarray(Q,Q+Z),Y),Y+=Z,Q+=Z}const ae=O;for(let ye=0;ye<ae;ye++){let Ue=0;V[$]=fe[ye+Ue],Ue+=O,V[$+1]=fe[ye+Ue],Ue+=O,V[$+2]=fe[ye+Ue],Ue+=O,V[$+3]=fe[ye+Ue],$+=4}k--}return V},v=function(L,I,C,O){const V=L[I+3],$=Math.pow(2,V-128)/255;C[O+0]=L[I+0]*$,C[O+1]=L[I+1]*$,C[O+2]=L[I+2]*$,C[O+3]=1},_=function(L,I,C,O){const V=L[I+3],$=Math.pow(2,V-128)/255;C[O+0]=mc.toHalfFloat(Math.min(L[I+0]*$,65504)),C[O+1]=mc.toHalfFloat(Math.min(L[I+1]*$,65504)),C[O+2]=mc.toHalfFloat(Math.min(L[I+2]*$,65504)),C[O+3]=mc.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const g=p(y),w=g.width,S=g.height,E=m(y.subarray(y.pos),w,S);let P,b,R;switch(this.type){case Vn:R=E.length/4;const L=new Float32Array(R*4);for(let C=0;C<R;C++)v(E,C*4,L,C*4);P=L,b=Vn;break;case Ir:R=E.length/4;const I=new Uint16Array(R*4);for(let C=0;C<R;C++)_(E,C*4,I,C*4);P=I,b=Ir;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:S,data:P,header:g.string,gamma:g.gamma,exposure:g.exposure,type:b}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case Vn:case Ir:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=un,o.magFilter=un,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const td="colorSpace"in new Yt;class XK extends RM{constructor(e){super(e),this.type=Ir}parse(e){const I=Math.pow(2.7182818,2.2);function C(N,H){for(var T=0,z=0;z<65536;++z)(z==0||N[z>>3]&1<<(z&7))&&(H[T++]=z);for(var W=T-1;T<65536;)H[T++]=0;return W}function O(N){for(var H=0;H<16384;H++)N[H]={},N[H].len=0,N[H].lit=0,N[H].p=null}const V={l:0,c:0,lc:0};function $(N,H,T,z,W){for(;T<N;)H=H<<8|re(z,W),T+=8;T-=N,V.l=H>>T&(1<<N)-1,V.c=H,V.lc=T}const Q=new Array(59);function ie(N){for(var H=0;H<=58;++H)Q[H]=0;for(var H=0;H<65537;++H)Q[N[H]]+=1;for(var T=0,H=58;H>0;--H){var z=T+Q[H]>>1;Q[H]=T,T=z}for(var H=0;H<65537;++H){var W=N[H];W>0&&(N[H]=W|Q[W]++<<6)}}function ee(N,H,T,z,W,j,K){for(var ce=T,me=0,ve=0;W<=j;W++){if(ce.value-T.value>z)return!1;$(6,me,ve,N,ce);var _e=V.l;if(me=V.c,ve=V.lc,K[W]=_e,_e==63){if(ce.value-T.value>z)throw"Something wrong with hufUnpackEncTable";$(8,me,ve,N,ce);var we=V.l+6;if(me=V.c,ve=V.lc,W+we>j+1)throw"Something wrong with hufUnpackEncTable";for(;we--;)K[W++]=0;W--}else if(_e>=59){var we=_e-59+2;if(W+we>j+1)throw"Something wrong with hufUnpackEncTable";for(;we--;)K[W++]=0;W--}}ie(K)}function fe(N){return N&63}function k(N){return N>>6}function Y(N,H,T,z){for(;H<=T;H++){var W=k(N[H]),j=fe(N[H]);if(W>>j)throw"Invalid table entry";if(j>14){var K=z[W>>j-14];if(K.len)throw"Invalid table entry";if(K.lit++,K.p){var ce=K.p;K.p=new Array(K.lit);for(var me=0;me<K.lit-1;++me)K.p[me]=ce[me]}else K.p=new Array(1);K.p[K.lit-1]=H}else if(j)for(var ve=0,me=1<<14-j;me>0;me--){var K=z[(W<<14-j)+ve];if(K.len||K.p)throw"Invalid table entry";K.len=j,K.lit=H,ve++}}return!0}const Z={c:0,lc:0};function ae(N,H,T,z){N=N<<8|re(T,z),H+=8,Z.c=N,Z.lc=H}const ye={c:0,lc:0};function Ue(N,H,T,z,W,j,K,ce,me,ve){if(N==H){z<8&&(ae(T,z,W,K),T=Z.c,z=Z.lc),z-=8;var _e=T>>z,_e=new Uint8Array([_e])[0];if(me.value+_e>ve)return!1;for(var we=ce[me.value-1];_e-- >0;)ce[me.value++]=we}else if(me.value<ve)ce[me.value++]=N;else return!1;ye.c=T,ye.lc=z}function he(N){return N&65535}function Te(N){var H=he(N);return H>32767?H-65536:H}const Me={a:0,b:0};function Be(N,H){var T=Te(N),z=Te(H),W=z,j=T+(W&1)+(W>>1),K=j,ce=j-W;Me.a=K,Me.b=ce}function at(N,H){var T=he(N),z=he(H),W=T-(z>>1)&65535,j=z+W-32768&65535;Me.a=j,Me.b=W}function wt(N,H,T,z,W,j,K){for(var ce=K<16384,me=T>W?W:T,ve=1,_e;ve<=me;)ve<<=1;for(ve>>=1,_e=ve,ve>>=1;ve>=1;){for(var we=0,Ze=we+j*(W-_e),De=j*ve,je=j*_e,st=z*ve,ct=z*_e,bt,ut,ke,gt;we<=Ze;we+=je){for(var dt=we,jt=we+z*(T-_e);dt<=jt;dt+=ct){var It=dt+st,Qt=dt+De,tr=Qt+st;ce?(Be(N[dt+H],N[Qt+H]),bt=Me.a,ke=Me.b,Be(N[It+H],N[tr+H]),ut=Me.a,gt=Me.b,Be(bt,ut),N[dt+H]=Me.a,N[It+H]=Me.b,Be(ke,gt),N[Qt+H]=Me.a,N[tr+H]=Me.b):(at(N[dt+H],N[Qt+H]),bt=Me.a,ke=Me.b,at(N[It+H],N[tr+H]),ut=Me.a,gt=Me.b,at(bt,ut),N[dt+H]=Me.a,N[It+H]=Me.b,at(ke,gt),N[Qt+H]=Me.a,N[tr+H]=Me.b)}if(T&ve){var Qt=dt+De;ce?Be(N[dt+H],N[Qt+H]):at(N[dt+H],N[Qt+H]),bt=Me.a,N[Qt+H]=Me.b,N[dt+H]=bt}}if(W&ve)for(var dt=we,jt=we+z*(T-_e);dt<=jt;dt+=ct){var It=dt+st;ce?Be(N[dt+H],N[It+H]):at(N[dt+H],N[It+H]),bt=Me.a,N[It+H]=Me.b,N[dt+H]=bt}_e=ve,ve>>=1}return we}function mt(N,H,T,z,W,j,K,ce,me,ve){for(var _e=0,we=0,Ze=ce,De=Math.trunc(W.value+(j+7)/8);W.value<De;)for(ae(_e,we,T,W),_e=Z.c,we=Z.lc;we>=14;){var je=_e>>we-14&16383,st=H[je];if(st.len)we-=st.len,Ue(st.lit,K,_e,we,T,z,W,me,ve,Ze),_e=ye.c,we=ye.lc;else{if(!st.p)throw"hufDecode issues";var ct;for(ct=0;ct<st.lit;ct++){for(var bt=fe(N[st.p[ct]]);we<bt&&W.value<De;)ae(_e,we,T,W),_e=Z.c,we=Z.lc;if(we>=bt&&k(N[st.p[ct]])==(_e>>we-bt&(1<<bt)-1)){we-=bt,Ue(st.p[ct],K,_e,we,T,z,W,me,ve,Ze),_e=ye.c,we=ye.lc;break}}if(ct==st.lit)throw"hufDecode issues"}}var ut=8-j&7;for(_e>>=ut,we-=ut;we>0;){var st=H[_e<<14-we&16383];if(st.len)we-=st.len,Ue(st.lit,K,_e,we,T,z,W,me,ve,Ze),_e=ye.c,we=ye.lc;else throw"hufDecode issues"}return!0}function te(N,H,T,z,W,j){var K={value:0},ce=T.value,me=He(H,T),ve=He(H,T);T.value+=4;var _e=He(H,T);if(T.value+=4,me<0||me>=65537||ve<0||ve>=65537)throw"Something wrong with HUF_ENCSIZE";var we=new Array(65537),Ze=new Array(16384);O(Ze);var De=z-(T.value-ce);if(ee(N,H,T,De,me,ve,we),_e>8*(z-(T.value-ce)))throw"Something wrong with hufUncompress";Y(we,me,ve,Ze),mt(we,Ze,N,H,T,_e,ve,j,W,K)}function Ie(N,H,T){for(var z=0;z<T;++z)H[z]=N[H[z]]}function Se(N){for(var H=1;H<N.length;H++){var T=N[H-1]+N[H]-128;N[H]=T}}function Ne(N,H){for(var T=0,z=Math.floor((N.length+1)/2),W=0,j=N.length-1;!(W>j||(H[W++]=N[T++],W>j));)H[W++]=N[z++]}function Le(N){for(var H=N.byteLength,T=new Array,z=0,W=new DataView(N);H>0;){var j=W.getInt8(z++);if(j<0){var K=-j;H-=K+1;for(var ce=0;ce<K;ce++)T.push(W.getUint8(z++))}else{var K=j;H-=2;for(var me=W.getUint8(z++),ce=0;ce<K+1;ce++)T.push(me)}}return T}function Oe(N,H,T,z,W,j){var It=new DataView(j.buffer),K=T[N.idx[0]].width,ce=T[N.idx[0]].height,me=3,ve=Math.floor(K/8),_e=Math.ceil(K/8),we=Math.ceil(ce/8),Ze=K-(_e-1)*8,De=ce-(we-1)*8,je={value:0},st=new Array(me),ct=new Array(me),bt=new Array(me),ut=new Array(me),ke=new Array(me);for(let Zt=0;Zt<me;++Zt)ke[Zt]=H[N.idx[Zt]],st[Zt]=Zt<1?0:st[Zt-1]+_e*we,ct[Zt]=new Float32Array(64),bt[Zt]=new Uint16Array(64),ut[Zt]=new Uint16Array(_e*64);for(let Zt=0;Zt<we;++Zt){var gt=8;Zt==we-1&&(gt=De);var dt=8;for(let nn=0;nn<_e;++nn){nn==_e-1&&(dt=Ze);for(let en=0;en<me;++en)bt[en].fill(0),bt[en][0]=W[st[en]++],qe(je,z,bt[en]),Ye(bt[en],ct[en]),xt(ct[en]);J(ct);for(let en=0;en<me;++en)U(ct[en],ut[en],nn*64)}let on=0;for(let nn=0;nn<me;++nn){const en=T[N.idx[nn]].type;for(let gn=8*Zt;gn<8*Zt+gt;++gn){on=ke[nn][gn];for(let Lo=0;Lo<ve;++Lo){const Zr=Lo*64+(gn&7)*8;It.setUint16(on+0*2*en,ut[nn][Zr+0],!0),It.setUint16(on+1*2*en,ut[nn][Zr+1],!0),It.setUint16(on+2*2*en,ut[nn][Zr+2],!0),It.setUint16(on+3*2*en,ut[nn][Zr+3],!0),It.setUint16(on+4*2*en,ut[nn][Zr+4],!0),It.setUint16(on+5*2*en,ut[nn][Zr+5],!0),It.setUint16(on+6*2*en,ut[nn][Zr+6],!0),It.setUint16(on+7*2*en,ut[nn][Zr+7],!0),on+=8*2*en}}if(ve!=_e)for(let gn=8*Zt;gn<8*Zt+gt;++gn){const Lo=ke[nn][gn]+8*ve*2*en,Zr=ve*64+(gn&7)*8;for(let io=0;io<dt;++io)It.setUint16(Lo+io*2*en,ut[nn][Zr+io],!0)}}}for(var jt=new Uint16Array(K),It=new DataView(j.buffer),Qt=0;Qt<me;++Qt){T[N.idx[Qt]].decoded=!0;var tr=T[N.idx[Qt]].type;if(T[Qt].type==2)for(var Ht=0;Ht<ce;++Ht){const Zt=ke[Qt][Ht];for(var yn=0;yn<K;++yn)jt[yn]=It.getUint16(Zt+yn*2*tr,!0);for(var yn=0;yn<K;++yn)It.setFloat32(Zt+yn*2*tr,se(jt[yn]),!0)}}}function qe(N,H,T){for(var z,W=1;W<64;)z=H[N.value],z==65280?W=64:z>>8==255?W+=z&255:(T[W]=z,W++),N.value++}function Ye(N,H){H[0]=se(N[0]),H[1]=se(N[1]),H[2]=se(N[5]),H[3]=se(N[6]),H[4]=se(N[14]),H[5]=se(N[15]),H[6]=se(N[27]),H[7]=se(N[28]),H[8]=se(N[2]),H[9]=se(N[4]),H[10]=se(N[7]),H[11]=se(N[13]),H[12]=se(N[16]),H[13]=se(N[26]),H[14]=se(N[29]),H[15]=se(N[42]),H[16]=se(N[3]),H[17]=se(N[8]),H[18]=se(N[12]),H[19]=se(N[17]),H[20]=se(N[25]),H[21]=se(N[30]),H[22]=se(N[41]),H[23]=se(N[43]),H[24]=se(N[9]),H[25]=se(N[11]),H[26]=se(N[18]),H[27]=se(N[24]),H[28]=se(N[31]),H[29]=se(N[40]),H[30]=se(N[44]),H[31]=se(N[53]),H[32]=se(N[10]),H[33]=se(N[19]),H[34]=se(N[23]),H[35]=se(N[32]),H[36]=se(N[39]),H[37]=se(N[45]),H[38]=se(N[52]),H[39]=se(N[54]),H[40]=se(N[20]),H[41]=se(N[22]),H[42]=se(N[33]),H[43]=se(N[38]),H[44]=se(N[46]),H[45]=se(N[51]),H[46]=se(N[55]),H[47]=se(N[60]),H[48]=se(N[21]),H[49]=se(N[34]),H[50]=se(N[37]),H[51]=se(N[47]),H[52]=se(N[50]),H[53]=se(N[56]),H[54]=se(N[59]),H[55]=se(N[61]),H[56]=se(N[35]),H[57]=se(N[36]),H[58]=se(N[48]),H[59]=se(N[49]),H[60]=se(N[57]),H[61]=se(N[58]),H[62]=se(N[62]),H[63]=se(N[63])}function xt(N){const H=.5*Math.cos(.7853975),T=.5*Math.cos(3.14159/16),z=.5*Math.cos(3.14159/8),W=.5*Math.cos(3*3.14159/16),j=.5*Math.cos(5*3.14159/16),K=.5*Math.cos(3*3.14159/8),ce=.5*Math.cos(7*3.14159/16);for(var me=new Array(4),ve=new Array(4),_e=new Array(4),we=new Array(4),Ze=0;Ze<8;++Ze){var De=Ze*8;me[0]=z*N[De+2],me[1]=K*N[De+2],me[2]=z*N[De+6],me[3]=K*N[De+6],ve[0]=T*N[De+1]+W*N[De+3]+j*N[De+5]+ce*N[De+7],ve[1]=W*N[De+1]-ce*N[De+3]-T*N[De+5]-j*N[De+7],ve[2]=j*N[De+1]-T*N[De+3]+ce*N[De+5]+W*N[De+7],ve[3]=ce*N[De+1]-j*N[De+3]+W*N[De+5]-T*N[De+7],_e[0]=H*(N[De+0]+N[De+4]),_e[3]=H*(N[De+0]-N[De+4]),_e[1]=me[0]+me[3],_e[2]=me[1]-me[2],we[0]=_e[0]+_e[1],we[1]=_e[3]+_e[2],we[2]=_e[3]-_e[2],we[3]=_e[0]-_e[1],N[De+0]=we[0]+ve[0],N[De+1]=we[1]+ve[1],N[De+2]=we[2]+ve[2],N[De+3]=we[3]+ve[3],N[De+4]=we[3]-ve[3],N[De+5]=we[2]-ve[2],N[De+6]=we[1]-ve[1],N[De+7]=we[0]-ve[0]}for(var je=0;je<8;++je)me[0]=z*N[16+je],me[1]=K*N[16+je],me[2]=z*N[48+je],me[3]=K*N[48+je],ve[0]=T*N[8+je]+W*N[24+je]+j*N[40+je]+ce*N[56+je],ve[1]=W*N[8+je]-ce*N[24+je]-T*N[40+je]-j*N[56+je],ve[2]=j*N[8+je]-T*N[24+je]+ce*N[40+je]+W*N[56+je],ve[3]=ce*N[8+je]-j*N[24+je]+W*N[40+je]-T*N[56+je],_e[0]=H*(N[je]+N[32+je]),_e[3]=H*(N[je]-N[32+je]),_e[1]=me[0]+me[3],_e[2]=me[1]-me[2],we[0]=_e[0]+_e[1],we[1]=_e[3]+_e[2],we[2]=_e[3]-_e[2],we[3]=_e[0]-_e[1],N[0+je]=we[0]+ve[0],N[8+je]=we[1]+ve[1],N[16+je]=we[2]+ve[2],N[24+je]=we[3]+ve[3],N[32+je]=we[3]-ve[3],N[40+je]=we[2]-ve[2],N[48+je]=we[1]-ve[1],N[56+je]=we[0]-ve[0]}function J(N){for(var H=0;H<64;++H){var T=N[0][H],z=N[1][H],W=N[2][H];N[0][H]=T+1.5747*W,N[1][H]=T-.1873*z-.4682*W,N[2][H]=T+1.8556*z}}function U(N,H,T){for(var z=0;z<64;++z)H[T+z]=mc.toHalfFloat(pe(N[z]))}function pe(N){return N<=1?Math.sign(N)*Math.pow(Math.abs(N),2.2):Math.sign(N)*Math.pow(I,Math.abs(N)-1)}function le(N){return new DataView(N.array.buffer,N.offset.value,N.size)}function de(N){var H=N.viewer.buffer.slice(N.offset.value,N.offset.value+N.size),T=new Uint8Array(Le(H)),z=new Uint8Array(T.length);return Se(T),Ne(T,z),new DataView(z.buffer)}function Re(N){var H=N.array.slice(N.offset.value,N.offset.value+N.size),T=gd(H),z=new Uint8Array(T.length);return Se(T),Ne(T,z),new DataView(z.buffer)}function Qe(N){for(var H=N.viewer,T={value:N.offset.value},z=new Uint16Array(N.width*N.scanlineBlockSize*(N.channels*N.type)),W=new Uint8Array(8192),j=0,K=new Array(N.channels),ce=0;ce<N.channels;ce++)K[ce]={},K[ce].start=j,K[ce].end=K[ce].start,K[ce].nx=N.width,K[ce].ny=N.lines,K[ce].size=N.type,j+=K[ce].nx*K[ce].ny*K[ce].size;var me=Pe(H,T),ve=Pe(H,T);if(ve>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(me<=ve)for(var ce=0;ce<ve-me+1;ce++)W[ce+me]=be(H,T);var _e=new Uint16Array(65536),we=C(W,_e),Ze=He(H,T);te(N.array,H,T,Ze,z,j);for(var ce=0;ce<N.channels;++ce)for(var De=K[ce],je=0;je<K[ce].size;++je)wt(z,De.start+je,De.nx,De.size,De.ny,De.nx*De.size,we);Ie(_e,z,j);for(var st=0,ct=new Uint8Array(z.buffer.byteLength),bt=0;bt<N.lines;bt++)for(var ut=0;ut<N.channels;ut++){var De=K[ut],ke=De.nx*De.size,gt=new Uint8Array(z.buffer,De.end*2,ke*2);ct.set(gt,st),st+=ke*2,De.end+=ke}return new DataView(ct.buffer)}function ze(N){var H=N.array.slice(N.offset.value,N.offset.value+N.size),T=gd(H);const z=N.lines*N.channels*N.width,W=N.type==1?new Uint16Array(z):new Uint32Array(z);let j=0,K=0;const ce=new Array(4);for(let me=0;me<N.lines;me++)for(let ve=0;ve<N.channels;ve++){let _e=0;switch(N.type){case 1:ce[0]=j,ce[1]=ce[0]+N.width,j=ce[1]+N.width;for(let we=0;we<N.width;++we){const Ze=T[ce[0]++]<<8|T[ce[1]++];_e+=Ze,W[K]=_e,K++}break;case 2:ce[0]=j,ce[1]=ce[0]+N.width,ce[2]=ce[1]+N.width,j=ce[2]+N.width;for(let we=0;we<N.width;++we){const Ze=T[ce[0]++]<<24|T[ce[1]++]<<16|T[ce[2]++]<<8;_e+=Ze,W[K]=_e,K++}break}}return new DataView(W.buffer)}function Je(N){var H=N.viewer,T={value:N.offset.value},z=new Uint8Array(N.width*N.lines*(N.channels*N.type*2)),W={version:We(H,T),unknownUncompressedSize:We(H,T),unknownCompressedSize:We(H,T),acCompressedSize:We(H,T),dcCompressedSize:We(H,T),rleCompressedSize:We(H,T),rleUncompressedSize:We(H,T),rleRawSize:We(H,T),totalAcUncompressedCount:We(H,T),totalDcUncompressedCount:We(H,T),acCompression:We(H,T)};if(W.version<2)throw"EXRLoader.parse: "+Nr.compression+" version "+W.version+" is unsupported";for(var j=new Array,K=Pe(H,T)-2;K>0;){var ce=yt(H.buffer,T),me=be(H,T),ve=me>>2&3,_e=(me>>4)-1,we=new Int8Array([_e])[0],Ze=be(H,T);j.push({name:ce,index:we,type:Ze,compression:ve}),K-=ce.length+3}for(var De=Nr.channels,je=new Array(N.channels),st=0;st<N.channels;++st){var ct=je[st]={},bt=De[st];ct.name=bt.name,ct.compression=0,ct.decoded=!1,ct.type=bt.pixelType,ct.pLinear=bt.pLinear,ct.width=N.width,ct.height=N.lines}for(var ut={idx:new Array(3)},ke=0;ke<N.channels;++ke)for(var ct=je[ke],st=0;st<j.length;++st){var gt=j[st];ct.name==gt.name&&(ct.compression=gt.compression,gt.index>=0&&(ut.idx[gt.index]=ke),ct.offset=ke)}if(W.acCompressedSize>0)switch(W.acCompression){case 0:var It=new Uint16Array(W.totalAcUncompressedCount);te(N.array,H,T,W.acCompressedSize,It,W.totalAcUncompressedCount);break;case 1:var dt=N.array.slice(T.value,T.value+W.totalAcUncompressedCount),jt=gd(dt),It=new Uint16Array(jt.buffer);T.value+=W.totalAcUncompressedCount;break}if(W.dcCompressedSize>0){var Qt={array:N.array,offset:T,size:W.dcCompressedSize},tr=new Uint16Array(Re(Qt).buffer);T.value+=W.dcCompressedSize}if(W.rleRawSize>0){var dt=N.array.slice(T.value,T.value+W.rleCompressedSize),jt=gd(dt),Ht=Le(jt.buffer);T.value+=W.rleCompressedSize}for(var yn=0,Zt=new Array(je.length),st=0;st<Zt.length;++st)Zt[st]=new Array;for(var on=0;on<N.lines;++on)for(var nn=0;nn<je.length;++nn)Zt[nn].push(yn),yn+=je[nn].width*N.type*2;Oe(ut,Zt,je,It,tr,z);for(var st=0;st<je.length;++st){var ct=je[st];if(!ct.decoded)switch(ct.compression){case 2:for(var en=0,gn=0,on=0;on<N.lines;++on){for(var Lo=Zt[st][en],Zr=0;Zr<ct.width;++Zr){for(var io=0;io<2*ct.type;++io)z[Lo++]=Ht[gn+io*ct.width*ct.height];gn++}en++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(z.buffer)}function yt(N,H){for(var T=new Uint8Array(N),z=0;T[H.value+z]!=0;)z+=1;var W=new TextDecoder().decode(T.slice(H.value,H.value+z));return H.value=H.value+z+1,W}function Fe(N,H,T){var z=new TextDecoder().decode(new Uint8Array(N).slice(H.value,H.value+T));return H.value=H.value+T,z}function it(N,H){var T=pt(N,H),z=He(N,H);return[T,z]}function Rt(N,H){var T=He(N,H),z=He(N,H);return[T,z]}function pt(N,H){var T=N.getInt32(H.value,!0);return H.value=H.value+4,T}function He(N,H){var T=N.getUint32(H.value,!0);return H.value=H.value+4,T}function re(N,H){var T=N[H.value];return H.value=H.value+1,T}function be(N,H){var T=N.getUint8(H.value);return H.value=H.value+1,T}const We=function(N,H){let T;return"getBigInt64"in DataView.prototype?T=Number(N.getBigInt64(H.value,!0)):T=N.getUint32(H.value+4,!0)+Number(N.getUint32(H.value,!0)<<32),H.value+=8,T};function q(N,H){var T=N.getFloat32(H.value,!0);return H.value+=4,T}function Ve(N,H){return mc.toHalfFloat(q(N,H))}function se(N){var H=(N&31744)>>10,T=N&1023;return(N>>15?-1:1)*(H?H===31?T?NaN:1/0:Math.pow(2,H-15)*(1+T/1024):6103515625e-14*(T/1024))}function Pe(N,H){var T=N.getUint16(H.value,!0);return H.value+=2,T}function Ke(N,H){return se(Pe(N,H))}function St(N,H,T,z){for(var W=T.value,j=[];T.value<W+z-1;){var K=yt(H,T),ce=pt(N,T),me=be(N,T);T.value+=3;var ve=pt(N,T),_e=pt(N,T);j.push({name:K,pixelType:ce,pLinear:me,xSampling:ve,ySampling:_e})}return T.value+=1,j}function Pt(N,H){var T=q(N,H),z=q(N,H),W=q(N,H),j=q(N,H),K=q(N,H),ce=q(N,H),me=q(N,H),ve=q(N,H);return{redX:T,redY:z,greenX:W,greenY:j,blueX:K,blueY:ce,whiteX:me,whiteY:ve}}function Kt(N,H){var T=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],z=be(N,H);return T[z]}function dn(N,H){var T=He(N,H),z=He(N,H),W=He(N,H),j=He(N,H);return{xMin:T,yMin:z,xMax:W,yMax:j}}function zt(N,H){var T=["INCREASING_Y"],z=be(N,H);return T[z]}function Xn(N,H){var T=q(N,H),z=q(N,H);return[T,z]}function er(N,H){var T=q(N,H),z=q(N,H),W=q(N,H);return[T,z,W]}function Ts(N,H,T,z,W){if(z==="string"||z==="stringvector"||z==="iccProfile")return Fe(H,T,W);if(z==="chlist")return St(N,H,T,W);if(z==="chromaticities")return Pt(N,T);if(z==="compression")return Kt(N,T);if(z==="box2i")return dn(N,T);if(z==="lineOrder")return zt(N,T);if(z==="float")return q(N,T);if(z==="v2f")return Xn(N,T);if(z==="v3f")return er(N,T);if(z==="int")return pt(N,T);if(z==="rational")return it(N,T);if(z==="timecode")return Rt(N,T);if(z==="preview")return T.value+=W,"skipped";T.value+=W}function Tl(N,H,T){const z={};if(N.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";z.version=N.getUint8(4);const W=N.getUint8(5);z.spec={singleTile:!!(W&2),longName:!!(W&4),deepFormat:!!(W&8),multiPart:!!(W&16)},T.value=8;for(var j=!0;j;){var K=yt(H,T);if(K==0)j=!1;else{var ce=yt(H,T),me=He(N,T),ve=Ts(N,H,T,ce,me);ve===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ce}'.`):z[K]=ve}}if(W&-5)throw console.error("EXRHeader:",z),"THREE.EXRLoader: provided file is currently unsupported.";return z}function tu(N,H,T,z,W){const j={size:0,viewer:H,array:T,offset:z,width:N.dataWindow.xMax-N.dataWindow.xMin+1,height:N.dataWindow.yMax-N.dataWindow.yMin+1,channels:N.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:N.channels[0].pixelType,uncompress:null,getter:null,format:null,[td?"colorSpace":"encoding"]:null};switch(N.compression){case"NO_COMPRESSION":j.lines=1,j.uncompress=le;break;case"RLE_COMPRESSION":j.lines=1,j.uncompress=de;break;case"ZIPS_COMPRESSION":j.lines=1,j.uncompress=Re;break;case"ZIP_COMPRESSION":j.lines=16,j.uncompress=Re;break;case"PIZ_COMPRESSION":j.lines=32,j.uncompress=Qe;break;case"PXR24_COMPRESSION":j.lines=16,j.uncompress=ze;break;case"DWAA_COMPRESSION":j.lines=32,j.uncompress=Je;break;case"DWAB_COMPRESSION":j.lines=256,j.uncompress=Je;break;default:throw"EXRLoader.parse: "+N.compression+" is unsupported"}if(j.scanlineBlockSize=j.lines,j.type==1)switch(W){case Vn:j.getter=Ke,j.inputSize=2;break;case Ir:j.getter=Pe,j.inputSize=2;break}else if(j.type==2)switch(W){case Vn:j.getter=q,j.inputSize=4;break;case Ir:j.getter=Ve,j.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+j.type+" for "+N.compression+".";j.blockCount=(N.dataWindow.yMax+1)/j.scanlineBlockSize;for(var K=0;K<j.blockCount;K++)We(H,z);j.outputChannels=j.channels==3?4:j.channels;const ce=j.width*j.height*j.outputChannels;switch(W){case Vn:j.byteArray=new Float32Array(ce),j.channels<j.outputChannels&&j.byteArray.fill(1,0,ce);break;case Ir:j.byteArray=new Uint16Array(ce),j.channels<j.outputChannels&&j.byteArray.fill(15360,0,ce);break;default:console.error("THREE.EXRLoader: unsupported type: ",W);break}return j.bytesPerLine=j.width*j.inputSize*j.channels,j.outputChannels==4?j.format=or:j.format=_0,td?j.colorSpace="srgb-linear":j.encoding=3e3,j}const to=new DataView(e),no=new Uint8Array(e),ro={value:0},Nr=Tl(to,e,ro),Ft=tu(Nr,to,no,ro,this.type),Rl={value:0},hh={R:0,G:1,B:2,A:3,Y:0};for(let N=0;N<Ft.height/Ft.scanlineBlockSize;N++){const H=He(to,ro);Ft.size=He(to,ro),Ft.lines=H+Ft.scanlineBlockSize>Ft.height?Ft.height-H:Ft.scanlineBlockSize;const z=Ft.size<Ft.lines*Ft.bytesPerLine?Ft.uncompress(Ft):le(Ft);ro.value+=Ft.size;for(let W=0;W<Ft.scanlineBlockSize;W++){const j=W+N*Ft.scanlineBlockSize;if(j>=Ft.height)break;for(let K=0;K<Ft.channels;K++){const ce=hh[Nr.channels[K].name];for(let me=0;me<Ft.width;me++){Rl.value=(W*(Ft.channels*Ft.width)+K*Ft.width+me)*Ft.inputSize;const ve=(Ft.height-1-j)*(Ft.width*Ft.outputChannels)+me*Ft.outputChannels+ce;Ft.byteArray[ve]=Ft.getter(z,Rl)}}}}return{header:Nr,width:Ft.width,height:Ft.height,data:Ft.byteArray,format:Ft.format,[td?"colorSpace":"encoding"]:Ft[td?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){td?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=un,o.magFilter=un,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const Jw=new WeakMap;class JK extends br{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Mr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(Jw.has(e)){const l=Jw.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),Jw.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Tt;e.index&&t.setIndex(new tn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new tn(o,a))}return t}_loadLibrary(e,t){const r=new Mr(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=KK.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function KK(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(f,p,m,c),_=v.attributes.map(y=>y.array.buffer);v.index&&_.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},_)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{f.destroy(m),f.destroy(p)}});break}};function t(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const _={index:null,attributes:[]};for(const y in u){const g=self[f[y]];let w,S;if(c.useUniqueIDs)S=u[y],w=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[u[y]]),S===-1)continue;w=a.GetAttribute(p,S)}_.attributes.push(i(o,a,p,y,g,w))}return v===o.TRIANGULAR_MESH&&(_.index=r(o,a,p)),o.destroy(p),_}function r(o,a,l){const u=l.num_faces()*3,f=u*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,u,f){const p=f.num_components(),v=l.num_points()*p,_=v*u.BYTES_PER_ELEMENT,y=s(o,u),g=o._malloc(_);a.GetAttributeDataArrayForAllPoints(l,f,y,_,g);const w=new u(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:w,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let hv;const Kw=()=>{if(hv)return hv;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let v=0;v<f.length;++v){const _=f.charCodeAt(v);p[v]=_>96?_-71:_>64?_-65:_>47?_+4:_>46?63:62}let m=0;for(let v=0;v<f.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(f,p,m,v,_,y){const g=s.exports.sbrk,w=m+3&-4,S=g(w*v),E=g(_.length),P=new Uint8Array(s.exports.memory.buffer);P.set(_,E);const b=f(S,m,v,E,_.length);if(b===0&&y&&y(S,w,v),p.set(P.subarray(S,S+m*v)),g(S-g(0)),b!==0)throw new Error(`Malformed buffer data: ${b}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return hv={ready:o,supported:!0,decodeVertexBuffer(f,p,m,v,_){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,v,s.exports[c[_]])},decodeIndexBuffer(f,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,v)},decodeIndexSequence(f,p,m,v){l(s.exports.meshopt_decodeIndexSequence,f,p,m,v)},decodeGltfBuffer(f,p,m,v,_,y){l(s.exports[u[_]],f,p,m,v,s.exports[c[y]])}},hv},Yw=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function WM(n,e){const t=ci(s=>s.gl),r=bs(th,Yw(n)?Object.values(n):n);return B.useLayoutEffect(()=>{e==null||e(r)},[e]),B.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(r)?s=r:r instanceof Yt?s=[r]:Yw(r)&&(s=Object.values(r)),s.forEach(o=>{o instanceof Yt&&t.initTexture(o)})}},[t,r]),B.useMemo(()=>{if(Yw(n)){const s={};let o=0;for(const a in n)s[a]=r[o++];return console.log("keyed",s),s}else return r},[n,r])}WM.preload=n=>bs.preload(th,n);WM.clear=n=>bs.clear(th,n);let dv=null,ok="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function ak(n,e,t){return r=>{t&&t(r),n&&(dv||(dv=new JK),dv.setDecoderPath(typeof n=="string"?n:ok),r.setDRACOLoader(dv)),e&&r.setMeshoptDecoder(typeof Kw=="function"?Kw():Kw)}}function Qs(n,e=!0,t=!0,r){return bs(GM,n,ak(e,t,r))}Qs.preload=(n,e=!0,t=!0,r)=>bs.preload(GM,n,ak(e,t,r));Qs.clear=n=>bs.clear(GM,n);Qs.setDecoderPath=n=>{ok=n};const YK=B.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=ci(b=>b.invalidate),p=ci(b=>b.camera),m=ci(b=>b.gl),v=ci(b=>b.events),_=ci(b=>b.setEvents),y=ci(b=>b.set),g=ci(b=>b.get),w=ci(b=>b.performance),S=e||p,E=r||v.connected||m.domElement,P=B.useMemo(()=>new $J(S),[S]);return Ff(()=>{P.enabled&&P.update()},-1),B.useEffect(()=>(s&&P.connect(s===!0?E:s),P.connect(E),()=>void P.dispose()),[s,E,t,P,f]),B.useEffect(()=>{const b=I=>{f(),t&&w.regress(),o&&o(I)},R=I=>{a&&a(I)},L=I=>{l&&l(I)};return P.addEventListener("change",b),P.addEventListener("start",R),P.addEventListener("end",L),()=>{P.removeEventListener("start",R),P.removeEventListener("end",L),P.removeEventListener("change",b)}},[o,a,l,P,f,_]),B.useEffect(()=>{if(n){const b=g().controls;return y({controls:P}),()=>y({controls:b})}},[n,P]),B.createElement("primitive",Oy({ref:u,object:P,enableDamping:i},c))});function wp(n){return bs(VM,n)}wp.preload=n=>bs.preload(VM,n);wp.clear=n=>bs.clear(VM,n);const qK="modulepreload",QK=function(n){return"/"+n},$I={},wi=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(t.map(a=>{if(a=QK(a),a in $I)return;$I[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":qK,l||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function ZK(n,e){const t=B.useRef(),[r]=B.useState(()=>e?e instanceof Vt?{current:e}:e:t),[i]=B.useState(()=>new pN(void 0));B.useLayoutEffect(()=>{e&&(r.current=e instanceof Vt?e:e.current),i._root=r.current});const s=B.useRef({}),o=B.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(r.current)return s.current[l.name]||(s.current[l.name]=i.clipAction(l,r.current))},configurable:!0})),{ref:r,clips:n,actions:a,names:n.map(l=>l.name),mixer:i}},[n]);return Ff((a,l)=>i.update(l)),B.useEffect(()=>{const a=r.current;return()=>{s.current={},i.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&i.uncacheAction(l,a)})}},[n]),o}var lk={exports:{}},eY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tY=eY,nY=tY;function ck(){}function uk(){}uk.resetWarningCache=ck;var rY=function(){function n(r,i,s,o,a,l){if(l!==nY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:uk,resetWarningCache:ck};return t.PropTypes=t,t};lk.exports=rY();var fk=lk.exports;const _n=_l(fk),iY=3e3,sY=3001,hk=(n,e,t)=>{let r;switch(n){case Ki:r=new Uint8ClampedArray(e*t*4);break;case Ir:r=new Uint16Array(e*t*4);break;case ul:r=new Uint32Array(e*t*4);break;case KE:r=new Int8Array(e*t*4);break;case YE:r=new Int16Array(e*t*4);break;case y0:r=new Int32Array(e*t*4);break;case Vn:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let pv;const oY=(n,e,t,r)=>{if(pv!==void 0)return pv;const i=new Yi(1,1,r);e.setRenderTarget(i);const s=new bn(new El,new bi({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=hk(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),pv=o[0]!==0,pv};class jM{constructor(e){var t,r,i,s,o,a,l,c,u,f,p,m,v,_,y,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(S){throw this._renderer.setRenderTarget(null),S}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:or,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:un,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:un,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:On,wrapT:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapT:On};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=jM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Nf,this._camera=new vs,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!oY(this._type,this._renderer,this._camera,w)){let S;switch(this._type){case Ir:S=this._renderer.extensions.has("EXT_color_buffer_float")?Vn:void 0;break}S!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Vn}`),this._type=S):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new bn(new El,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Yi(this.width,this.height,w),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping:ll}static instantiateRenderer(){const e=new pM;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=hk(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Ao(this.toArray(),this.width,this.height,or,this._type,(e==null?void 0:e.mapping)||ll,(e==null?void 0:e.wrapS)||On,(e==null?void 0:e.wrapT)||On,(e==null?void 0:e.magFilter)||un,(e==null?void 0:e.minFilter)||un,(e==null?void 0:e.anisotropy)||1,As);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Bi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Yt&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Yt&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const aY=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,lY=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class cY extends Bi{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:aY,fragmentShader:lY,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new G(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new G().fromArray(t)},offsetSdr:{value:new G().fromArray(r)},gainMapMin:{value:new G().fromArray(i)},gainMapMax:{value:new G().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:wo,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class dk extends Error{}class pk extends Error{}const nd=(n,e,t)=>{var r;let i;const s=(r=n.attributes.getNamedItem(e))===null||r===void 0?void 0:r.nodeValue;if(s)i=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)i=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return i},uY=n=>{var e,t;let r;typeof TextDecoder<"u"?r=new TextDecoder().decode(n):r=n.toString();let i=r.indexOf("<x:xmpmeta");const s=new DOMParser;for(;i!==-1;){const o=r.indexOf("x:xmpmeta>",i);r.slice(i,o+10);const a=r.slice(i,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=nd(c,"hdrgm:GainMapMin","0"),f=nd(c,"hdrgm:GainMapMax"),p=nd(c,"hdrgm:Gamma","1"),m=nd(c,"hdrgm:OffsetSDR","0.015625"),v=nd(c,"hdrgm:OffsetHDR","0.015625");let _=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;_||(_="0");const y=(t=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!y)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(g=>parseFloat(g)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(f)?f.map(g=>parseFloat(g)):[parseFloat(f),parseFloat(f),parseFloat(f)],gamma:Array.isArray(p)?p.map(g=>parseFloat(g)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetSdr:Array.isArray(m)?m.map(g=>parseFloat(g)):[parseFloat(m),parseFloat(m),parseFloat(m)],offsetHdr:Array.isArray(v)?v.map(g=>parseFloat(g)):[parseFloat(v),parseFloat(v),parseFloat(v)],hdrCapacityMin:parseFloat(_),hdrCapacityMax:parseFloat(y)}}catch{}i=r.indexOf("<x:xmpmeta",o)}};class fY{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){r(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const f=u+4;let p;if(s.getUint16(f)===18761)p=!1;else if(s.getUint16(f)===19789)p=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!p)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(f+4,!p);if(m<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=f+m,_=s.getUint16(v,!p),y=v+2;let g=0;for(let P=y;P<y+12*_;P+=12)s.getUint16(P,!p)===45057&&(g=s.getUint32(P+8,!p));const S=v+2+_*12+4,E=[];for(let P=S;P<S+g*16;P+=16){const b={MPType:s.getUint32(P,!p),size:s.getUint32(P+4,!p),dataOffset:s.getUint32(P+8,!p),dependantImages:s.getUint32(P+12,!p),start:-1,end:-1,isFII:!1};b.dataOffset?(b.start=f+b.dataOffset,b.isFII=!1):(b.start=0,b.isFII=!0),b.end=b.start+b.size,E.push(b)}if(this.options.extractNonFII&&E.length){const P=new Blob([s]),b=[];for(const R of E){if(R.isFII&&!this.options.extractFII)continue;const L=P.slice(R.start,R.end+1,"image/jpeg");b.push(L)}t(b)}}}a+=2+s.getUint16(a+2)}})}}const hY=async n=>{const e=uY(n);if(!e)throw new pk("Gain map XMP metadata not found");const r=await new fY({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new dk("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},XI=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class mk extends br{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new V0}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new cY({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Yt,sdr:new Yt});return new jM({width:16,height:16,type:Ir,colorSpace:As,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?XI(s):Promise.resolve(void 0),XI(o)]);l=p[0],a=p[1],c=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const u=new Yt(l||new ImageData(2,2),ll,On,On,un,_1,or,Ki,1,As);u.flipY=c,u.needsUpdate=!0;const f=new Yt(a,ll,On,On,un,_1,or,Ki,1,Hi);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class dY extends mk{load([e,t,r],i,s,o){const a=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(I){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof o=="function"&&o(I),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let p=!0,m=0,v=0,_=!0,y=0,g=0,w=!0,S=0,E=0;const P=()=>{if(typeof s=="function"){const I=m+y+S,C=v+g+E,O=p&&_&&w;s(new ProgressEvent("progress",{lengthComputable:O,loaded:C,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const b=new Mr(this._internalLoadingManager);b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");l=I,await f()},I=>{p=I.lengthComputable,v=I.loaded,m=I.total,P()},I=>{this.manager.itemError(e),typeof o=="function"&&o(I)});const R=new Mr(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(t,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");c=I,await f()},I=>{_=I.lengthComputable,g=I.loaded,y=I.total,P()},I=>{this.manager.itemError(t),typeof o=="function"&&o(I)});const L=new Mr(this._internalLoadingManager);return L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(r,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");u=JSON.parse(I),await f()},I=>{w=I.lengthComputable,E=I.loaded,S=I.total,P()},I=>{this.manager.itemError(r),typeof o=="function"&&o(I)}),a}}class pY extends mk{load(e,t,r,i){const s=this.prepareQuadRenderer(),o=new Mr(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,f;try{const p=await hY(l);c=p.sdr,u=p.gainMap,f=p.metadata}catch(p){if(p instanceof pk||p instanceof dk)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw p}try{await this.render(s,f,c,u)}catch(p){this.manager.itemError(e),typeof i=="function"&&i(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const qw={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},mY="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",mv=n=>Array.isArray(n);function gk({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(t){if(!(t in qw))throw new Error("Preset must be one of: "+Object.keys(qw).join(", "));n=qw[t],e=mY}const c=mv(n)&&n.length===6,u=mv(n)&&n.length===3&&n.some(y=>y.endsWith("json")),f=mv(n)?n[0]:n;if(a=mv(n),l=c?"cube":u?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(s=f.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l==="cube"?rN:l==="hdr"?$K:l==="exr"?XK:l==="jpg"||l==="jpeg"?pY:l==="webp"?dY:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=ci(y=>y.gl),m=bs(o,a?[n]:n,y=>{(l==="webp"||l==="jpg"||l==="jpeg")&&y.setRenderer(p),y.setPath==null||y.setPath(e),i&&i(y)});let v=a?m[0]:m;if(l==="jpg"||l==="jpeg"||l==="webp"){var _;v=(_=v.renderTarget)==null?void 0:_.texture}return v.mapping=c?bo:Oc,"colorSpace"in v?v.colorSpace=r??c?"srgb":"srgb-linear":v.encoding=r??c?sY:iY,v}const gY=n=>n.current&&n.current.isScene,vY=n=>gY(n)?n.current:n;function $M(n,e,t,r,i={}){var s,o,a,l,c;i={backgroundBlurriness:(s=i.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=vY(e||t),f=u.background,p=u.environment,m={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(u.environment=r),n&&(u.background=r),Ga(u,i),()=>{n!=="only"&&(u.environment=p),n&&(u.background=f),Ga(u,m)}}function XM({scene:n,background:e=!1,map:t,...r}){const i=ci(s=>s.scene);return B.useLayoutEffect(()=>{if(t)return $M(e,n,i,t,r)}),null}function vk({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=gk(l),u=ci(f=>f.scene);return B.useLayoutEffect(()=>$M(n,e,u,c,{blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function yY({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:p,scene:m,files:v,path:_,preset:y=void 0,extensions:g}){const w=ci(L=>L.gl),S=ci(L=>L.scene),E=B.useRef(null),[P]=B.useState(()=>new Nf),b=B.useMemo(()=>{const L=new cM(r);return L.texture.type=Ir,L},[r]);B.useLayoutEffect(()=>(i===1&&E.current.update(w,P),$M(o,m,S,b.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:p})),[n,P,b.texture,m,S,o,i,w]);let R=1;return Ff(()=>{(i===1/0||R<i)&&(E.current.update(w,P),R++)}),B.createElement(B.Fragment,null,p7(B.createElement(B.Fragment,null,n,B.createElement("cubeCamera",{ref:E,args:[e,t,b]}),v||y?B.createElement(vk,{background:!0,files:v,preset:y,path:_,extensions:g}):s?B.createElement(XM,{background:!0,map:s,extensions:g}):null),P))}function _Y(n){var e,t,r,i;const s=gk(n),o=n.map||s;B.useMemo(()=>AN({GroundProjectedEnvImpl:GJ}),[]);const a=B.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return B.createElement(B.Fragment,null,B.createElement(XM,Oy({},n,{map:o})),B.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function xY(n){return n.ground?B.createElement(_Y,n):n.map?B.createElement(XM,n):n.children?B.createElement(yY,n):B.createElement(vk,n)}function wY(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function yk(...n){return e=>n.forEach(t=>wY(t,e))}function eu(...n){return B.useCallback(yk(...n),n)}var _k=B.forwardRef((n,e)=>{const{children:t,...r}=n,i=B.Children.toArray(t),s=i.find(SY);if(s){const o=s.props.children,a=i.map(l=>l===s?B.Children.count(o)>1?B.Children.only(null):B.isValidElement(o)?o.props.children:null:l);return F.jsx(uA,{...r,ref:e,children:B.isValidElement(o)?B.cloneElement(o,void 0,a):null})}return F.jsx(uA,{...r,ref:e,children:t})});_k.displayName="Slot";var uA=B.forwardRef((n,e)=>{const{children:t,...r}=n;if(B.isValidElement(t)){const i=EY(t);return B.cloneElement(t,{...AY(r,t.props),ref:e?yk(e,i):i})}return B.Children.count(t)>1?B.Children.only(null):null});uA.displayName="SlotClone";var xk=({children:n})=>F.jsx(F.Fragment,{children:n});function SY(n){return B.isValidElement(n)&&n.type===xk}function AY(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function EY(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var MY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Cl=MY.reduce((n,e)=>{const t=B.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?_k:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),F.jsx(a,{...o,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function bY(n,e){n&&Dp.flushSync(()=>n.dispatchEvent(e))}var Hc=globalThis!=null&&globalThis.document?B.useLayoutEffect:()=>{},CY="Portal",wk=B.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=B.useState(!1);Hc(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ZL.createPortal(F.jsx(Cl.div,{...r,ref:e}),o):null});wk.displayName=CY;var TY=wk,JI=Object.prototype.hasOwnProperty;function Sp(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Sp(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(JI.call(n,t)&&++r&&!JI.call(e,t)||!(t in e)||!Sp(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function J0(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var K0=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};K0.prototype._test=function(e){var t=this.fn;try{wf(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return wf(this.modifiers.slice(),t,this)(e)}catch{return!1}};K0.prototype._check=function(e){try{wf(this.modifiers.slice(),this.fn,this)(e)}catch{if(wf(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!wf(this.modifiers.slice(),this.fn,this)(e))throw null};K0.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){Ak(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function Sk(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function wf(n,e,t){if(n.length){var r=n.shift(),i=wf(n,e,t);return r.perform(i,t)}else return Sk(e)}function Ak(n,e,t){if(n.length){var r=n.shift(),i=Ak(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(Sk(e,"async")(s))}}var RY=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},JM=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Ro=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Ro.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new K0(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};Ro.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new RY(t,e.simple,e.async)),this};Ro.prototype._clone=function(){return new Ro(this.chain.slice(),this.nextRuleModifiers.slice())};Ro.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Ro.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new JM(r,e,i))}}),t};Ro.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new JM(t,e,r)}})};Ro.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){Ek(e,t.chain.slice(),r,i)})};function Ek(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){Ek(n,e,t,r)},function(s){r(new JM(i,n,s))})}else t(n)}var KI=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function PY(n,e){return e===void 0&&(e=!1),{simple:function(t){return KI(t,e)||n.check(t)===void 0},async:function(t){return KI(t,e)||n.testAsync(t)}}}function Ci(){return typeof Proxy<"u"?Mk(new Ro):fA(new Ro)}var Ap={};Ci.extend=function(n){Object.assign(Ap,n)};Ci.clearCustomRules=function(){Ap={}};function Mk(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=Mk(n._clone());if(r in ky)return i._applyModifier(ky[r],r);if(r in Ap)return i._applyRule(Ap[r],r);if(r in hA)return i._applyRule(hA[r],r)}})}function fA(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=fA(s._clone()),u=c._applyRule(i[o],o).apply(void 0,a);return u}}),s},t=e(hA,n),r=e(Ap,t);return Object.keys(ky).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=fA(r._clone());return s._applyModifier(ky[i],i)}})}),r}var ky={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return gv(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(gv(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&gv(e).every(n)}},async:function(n){return function(e){return Promise.all(gv(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return YI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return YI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function YI(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function gv(n){return typeof n=="string"?n.split(""):n}var hA={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||IY;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return zu("string")},boolean:function(){return zu("boolean")},undefined:function(){return zu("undefined")},null:function(){return zu("null")},array:function(){return zu("array")},object:function(){return zu("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return BY(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:PY};function zu(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function IY(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function BY(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var pn="colors",ri="sizes",ht="space",DY={gap:ht,gridGap:ht,columnGap:ht,gridColumnGap:ht,rowGap:ht,gridRowGap:ht,inset:ht,insetBlock:ht,insetBlockEnd:ht,insetBlockStart:ht,insetInline:ht,insetInlineEnd:ht,insetInlineStart:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,marginBlock:ht,marginBlockEnd:ht,marginBlockStart:ht,marginInline:ht,marginInlineEnd:ht,marginInlineStart:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,paddingBlock:ht,paddingBlockEnd:ht,paddingBlockStart:ht,paddingInline:ht,paddingInlineEnd:ht,paddingInlineStart:ht,top:ht,right:ht,bottom:ht,left:ht,scrollMargin:ht,scrollMarginTop:ht,scrollMarginRight:ht,scrollMarginBottom:ht,scrollMarginLeft:ht,scrollMarginX:ht,scrollMarginY:ht,scrollMarginBlock:ht,scrollMarginBlockEnd:ht,scrollMarginBlockStart:ht,scrollMarginInline:ht,scrollMarginInlineEnd:ht,scrollMarginInlineStart:ht,scrollPadding:ht,scrollPaddingTop:ht,scrollPaddingRight:ht,scrollPaddingBottom:ht,scrollPaddingLeft:ht,scrollPaddingX:ht,scrollPaddingY:ht,scrollPaddingBlock:ht,scrollPaddingBlockEnd:ht,scrollPaddingBlockStart:ht,scrollPaddingInline:ht,scrollPaddingInlineEnd:ht,scrollPaddingInlineStart:ht,fontSize:"fontSizes",background:pn,backgroundColor:pn,backgroundImage:pn,borderImage:pn,border:pn,borderBlock:pn,borderBlockEnd:pn,borderBlockStart:pn,borderBottom:pn,borderBottomColor:pn,borderColor:pn,borderInline:pn,borderInlineEnd:pn,borderInlineStart:pn,borderLeft:pn,borderLeftColor:pn,borderRight:pn,borderRightColor:pn,borderTop:pn,borderTopColor:pn,caretColor:pn,color:pn,columnRuleColor:pn,fill:pn,outline:pn,outlineColor:pn,stroke:pn,textDecorationColor:pn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:ri,minBlockSize:ri,maxBlockSize:ri,inlineSize:ri,minInlineSize:ri,maxInlineSize:ri,width:ri,minWidth:ri,maxWidth:ri,height:ri,minHeight:ri,maxHeight:ri,flexBasis:ri,gridTemplateColumns:ri,gridTemplateRows:ri,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},LY=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,nh=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,LY))(e);return i in n?n[i]:n[i]=t(e,...r)}},Cc=Symbol.for("sxs.internal"),KM=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),qI=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:OY}=Object.prototype,dA=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),NY=/\s+(?![^()]*\))/,Hu=n=>e=>n(...typeof e=="string"?String(e).split(NY):[e]),QI={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Hu((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:Hu((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:Hu((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:Hu((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:Hu((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:Hu((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},Qw=/([\d.]+)([^]*)/,kY=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,FY=(n,e)=>n in UY&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${dA(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${dA(n)}:${r}fit-content`)+s):String(e),UY={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},da=n=>n?n+"-":"",bk=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?da(e)+(a.includes("$")?"":da(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),zY=/\s*,\s*(?![^()]*\))/,HY=Object.prototype.toString,ff=(n,e,t,r,i)=>{let s,o,a;const l=(c,u,f)=>{let p,m;const v=_=>{for(p in _){const w=p.charCodeAt(0)===64,S=w&&Array.isArray(_[p])?_[p]:[_[p]];for(m of S){const E=/[A-Z]/.test(g=p)?g:g.replace(/-[^]/g,b=>b[1].toUpperCase()),P=typeof m=="object"&&m&&m.toString===HY&&(!r.utils[E]||!u.length);if(E in r.utils&&!P){const b=r.utils[E];if(b!==o){o=b,v(b(m)),o=null;continue}}else if(E in QI){const b=QI[E];if(b!==a){a=b,v(b(m)),a=null;continue}}if(w&&(y=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(b,R,L,I,C,O)=>{const V=Qw.test(R),$=.0625*(V?-1:1),[Q,ie]=V?[I,R]:[R,I];return"("+(L[0]==="="?"":L[0]===">"===V?"max-":"min-")+Q+":"+(L[0]!=="="&&L.length===1?ie.replace(Qw,(ee,fe,k)=>Number(fe)+$*(L===">"?1:-1)+k):ie)+(C?") and ("+(C[0]===">"?"min-":"max-")+Q+":"+(C.length===1?O.replace(Qw,(ee,fe,k)=>Number(fe)+$*(C===">"?-1:1)+k):O):"")+")"})),P){const b=w?f.concat(p):[...f],R=w?[...u]:kY(u,p.split(zY));s!==void 0&&i(ZI(...s)),s=void 0,l(m,R,b)}else s===void 0&&(s=[[],u,f]),p=w||p.charCodeAt(0)!==36?p:`--${da(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=P?m:typeof m=="number"?m&&E in GY?String(m)+"px":String(m):bk(FY(E,m??""),r.prefix,r.themeMap[E]),s[0].push(`${w?`${p} `:`${dA(p)}:`}${m}`)}}var y,g};v(c),s!==void 0&&i(ZI(...s)),s=void 0};l(n,e,t)},ZI=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,GY={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},eB=n=>String.fromCharCode(n+(n>25?39:97)),Tc=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=eB(t%52)+r;return eB(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),vd=["themed","global","styled","onevar","resonevar","allvar","inline"],VY=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},WY=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(n).styleSheets||[];for(const a of i)if(VY(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const f=Object(c[l+1]);if(f.type!==4)continue;++l;const{cssText:p}=u;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),v=vd[m[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[v]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=vd.length-1;a>=0;--a){const l=vd[a];if(!o[l]){const c=vd[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}jY(o[l])}};return r(),e},jY=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},rd=Symbol(),$Y=nh(),tB=(n,e)=>$Y(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[Cc]){r.type==null&&(r.type=i[Cc].type);for(const s of i[Cc].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(XY(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),JY(n,r,e)}),XY=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${da(i.prefix)}c-${Tc(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){u=l,f=p,OY.call(u,f)||(l[p]="undefined");const m=n[p];for(const v in m){const _={[p]:String(v)};String(v)==="undefined"&&c.push(p);const y=m[v],g=[_,y,!qI(y)];o.push(g)}}var u,f;if(typeof e=="object"&&e)for(const p of e){let{css:m,...v}=p;m=typeof m=="object"&&m||{};for(const y in v)v[y]=String(v[y]);const _=[v,m,!qI(m)];a.push(_)}return[s,r,o,a,l,c]},JY=(n,e,t)=>{const[r,i,s,o]=KY(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function p(){for(let m=0;m<p[rd].length;m++){const[v,_]=p[rd][m];f.rules[v].apply(_)}return p[rd]=[],null}return p[rd]=[],p.rules={},vd.forEach(m=>p.rules[m]={apply:v=>p[rd].push([m,v])}),p})(t):null,l=(a||t).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||YY;const{css:p,...m}=f,v={};for(const g in s)if(delete m[g],g in f){let w=f[g];typeof w=="object"&&w?v[g]={"@initial":s[g],...w}:(w=String(w),v[g]=w!=="undefined"||o.has(g)?w:s[g])}else v[g]=s[g];const _=new Set([...i]);for(const[g,w,S,E]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),ff(w,[`.${g}`],[],n,R=>{l.styled.apply(R)}));const P=nB(S,v,n.media),b=nB(E,v,n.media,!0);for(const R of P)if(R!==void 0)for(const[L,I,C]of R){const O=`${g}-${Tc(I)}-${L}`;_.add(O);const V=(C?t.rules.resonevar:t.rules.onevar).cache,$=C?l.resonevar:l.onevar;V.has(O)||(V.add(O),ff(I,[`.${O}`],[],n,Q=>{$.apply(Q)}))}for(const R of b)if(R!==void 0)for(const[L,I]of R){const C=`${g}-${Tc(I)}-${L}`;_.add(C),t.rules.allvar.cache.has(C)||(t.rules.allvar.cache.add(C),ff(I,[`.${C}`],[],n,O=>{l.allvar.apply(O)}))}}if(typeof p=="object"&&p){const g=`${r}-i${Tc(p)}-css`;_.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),ff(p,[`.${g}`],[],n,w=>{l.inline.apply(w)}))}for(const g of String(f.className||"").trim().split(/\s+/))g&&_.add(g);const y=m.className=[..._].join(" ");return{type:e.type,className:y,selector:c,props:m,toString:()=>y,deferredInjector:a}};return KM(u,{className:r,selector:c,[Cc]:e,toString:()=>(t.rules.styled.cache.has(r)||u(),r)})},KY=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,t,r,new Set(i)]},nB=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const f=s[l];let p=e[l];if(p!==f){if(typeof p!="object"||!p)continue e;{let m,v,_=0;for(const y in p){if(f===String(p[y])){if(y!=="@initial"){const g=y.slice(1);(v=v||[]).push(g in t?t[g]:y.replace(/^@media ?/,"")),u=!0}c+=_,m=!0}++_}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!m)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,u])}return i},YY={},qY=nh(),QY=(n,e)=>qY(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=Tc(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}ff(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return KM(r,{toString:r})}),ZY=nh(),eq=(n,e)=>ZY(n,()=>t=>{const r=`${da(n.prefix)}k-${Tc(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];ff(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return KM(i,{get name(){return i()},toString:i})}),tq=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+da(this.prefix)+da(this.scale)+this.token}toString(){return this.computedValue}},nq=nh(),rq=(n,e)=>nq(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${da(n.prefix)}t-${Tc(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${da(n.prefix)}${l}-${c}`,f=bk(String(r[l][c]),n.prefix,l);s[l][c]=new tq(c,f,l,n.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),iq=nh(),sq=nh(),oq=n=>{const e=(t=>{let r=!1;const i=iq(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...DY},utils:typeof s.utils=="object"&&s.utils||{}},f=WY(l),p={css:tB(u,f),globalCss:QY(u,f),keyframes:eq(u,f),createTheme:rq(u,f),reset(){f.reset(),p.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(p.theme=p.createTheme(c)),p});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>sq(t,()=>{const i=tB(t,r);return(...s)=>{const o=i(...s),a=o[Cc].type,l=ne.forwardRef((c,u)=>{const f=c&&c.as||a,{props:p,deferredInjector:m}=o(c);return delete p.as,p.ref=u,m?ne.createElement(ne.Fragment,null,ne.createElement(f,p),ne.createElement(m,null)):ne.createElement(f,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Cc]=o[Cc],l}}))(e),e};function Qo(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Ck(n,e=[]){let t=[];function r(s,o){const a=B.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:p,children:m,...v}=f,_=(p==null?void 0:p[n][l])||a,y=B.useMemo(()=>v,Object.values(v));return F.jsx(_.Provider,{value:y,children:m})}function u(f,p){const m=(p==null?void 0:p[n][l])||a,v=B.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>B.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return B.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,aq(i,...e)]}function aq(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return B.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function rh(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n}),B.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function lq(n,e=globalThis==null?void 0:globalThis.document){const t=rh(n);B.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var cq="DismissableLayer",pA="dismissableLayer.update",uq="dismissableLayer.pointerDownOutside",fq="dismissableLayer.focusOutside",rB,Tk=B.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rk=B.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=B.useContext(Tk),[u,f]=B.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=B.useState({}),v=eu(e,R=>f(R)),_=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=_.indexOf(y),w=u?_.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=w>=g,P=pq(R=>{const L=R.target,I=[...c.branches].some(C=>C.contains(L));!E||I||(i==null||i(R),o==null||o(R),R.defaultPrevented||a==null||a())},p),b=mq(R=>{const L=R.target;[...c.branches].some(C=>C.contains(L))||(s==null||s(R),o==null||o(R),R.defaultPrevented||a==null||a())},p);return lq(R=>{w===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&a&&(R.preventDefault(),a()))},p),B.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(rB=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),iB(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=rB)}},[u,p,t,c]),B.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),iB())},[u,c]),B.useEffect(()=>{const R=()=>m({});return document.addEventListener(pA,R),()=>document.removeEventListener(pA,R)},[]),F.jsx(Cl.div,{...l,ref:v,style:{pointerEvents:S?E?"auto":"none":void 0,...n.style},onFocusCapture:Qo(n.onFocusCapture,b.onFocusCapture),onBlurCapture:Qo(n.onBlurCapture,b.onBlurCapture),onPointerDownCapture:Qo(n.onPointerDownCapture,P.onPointerDownCapture)})});Rk.displayName=cq;var hq="DismissableLayerBranch",dq=B.forwardRef((n,e)=>{const t=B.useContext(Tk),r=B.useRef(null),i=eu(e,r);return B.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),F.jsx(Cl.div,{...n,ref:i})});dq.displayName=hq;function pq(n,e=globalThis==null?void 0:globalThis.document){const t=rh(n),r=B.useRef(!1),i=B.useRef(()=>{});return B.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){Pk(uq,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function mq(n,e=globalThis==null?void 0:globalThis.document){const t=rh(n),r=B.useRef(!1);return B.useEffect(()=>{const i=s=>{s.target&&!r.current&&Pk(fq,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iB(){const n=new CustomEvent(pA);document.dispatchEvent(n)}function Pk(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?bY(i,s):i.dispatchEvent(s)}var gq=Y2.useId||(()=>{}),vq=0;function yq(n){const[e,t]=B.useState(gq());return Hc(()=>{t(r=>r??String(vq++))},[n]),e?`radix-${e}`:""}const _q=["top","right","bottom","left"],yo=Math.min,Gi=Math.max,Fy=Math.round,vv=Math.floor,ml=n=>({x:n,y:n}),xq={left:"right",right:"left",bottom:"top",top:"bottom"},wq={start:"end",end:"start"};function mA(n,e,t){return Gi(n,yo(e,t))}function pa(n,e){return typeof n=="function"?n(e):n}function ma(n){return n.split("-")[0]}function ih(n){return n.split("-")[1]}function YM(n){return n==="x"?"y":"x"}function qM(n){return n==="y"?"height":"width"}function gl(n){return["top","bottom"].includes(ma(n))?"y":"x"}function QM(n){return YM(gl(n))}function Sq(n,e,t){t===void 0&&(t=!1);const r=ih(n),i=QM(n),s=qM(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Uy(o)),[o,Uy(o)]}function Aq(n){const e=Uy(n);return[gA(n),e,gA(e)]}function gA(n){return n.replace(/start|end/g,e=>wq[e])}function Eq(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Mq(n,e,t,r){const i=ih(n);let s=Eq(ma(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(gA)))),s}function Uy(n){return n.replace(/left|right|bottom|top/g,e=>xq[e])}function bq(n){return{top:0,right:0,bottom:0,left:0,...n}}function Ik(n){return typeof n!="number"?bq(n):{top:n,right:n,bottom:n,left:n}}function zy(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function sB(n,e,t){let{reference:r,floating:i}=n;const s=gl(e),o=QM(e),a=qM(o),l=ma(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(ih(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const Cq=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:f}=sB(c,r,l),p=r,m={},v=0;for(let _=0;_<a.length;_++){const{name:y,fn:g}=a[_],{x:w,y:S,data:E,reset:P}=await g({x:u,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});u=w??u,f=S??f,m={...m,[y]:{...m[y],...E}},P&&v<=50&&(v++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):P.rects),{x:u,y:f}=sB(c,p,l)),_=-1)}return{x:u,y:f,placement:p,strategy:i,middlewareData:m}};async function Ep(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=pa(e,n),v=Ik(m),y=a[p?f==="floating"?"reference":"floating":f],g=zy(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},P=zy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(g.top-P.top+v.top)/E.y,bottom:(P.bottom-g.bottom+v.bottom)/E.y,left:(g.left-P.left+v.left)/E.x,right:(P.right-g.right+v.right)/E.x}}const Tq=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=pa(n,e)||{};if(c==null)return{};const f=Ik(u),p={x:t,y:r},m=QM(i),v=qM(m),_=await o.getDimensions(c),y=m==="y",g=y?"top":"left",w=y?"bottom":"right",S=y?"clientHeight":"clientWidth",E=s.reference[v]+s.reference[m]-p[m]-s.floating[v],P=p[m]-s.reference[m],b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=b?b[S]:0;(!R||!await(o.isElement==null?void 0:o.isElement(b)))&&(R=a.floating[S]||s.floating[v]);const L=E/2-P/2,I=R/2-_[v]/2-1,C=yo(f[g],I),O=yo(f[w],I),V=C,$=R-_[v]-O,Q=R/2-_[v]/2+L,ie=mA(V,Q,$),ee=!l.arrow&&ih(i)!=null&&Q!==ie&&s.reference[v]/2-(Q<V?C:O)-_[v]/2<0,fe=ee?Q<V?Q-V:Q-$:0;return{[m]:p[m]+fe,data:{[m]:ie,centerOffset:Q-ie-fe,...ee&&{alignmentOffset:fe}},reset:ee}}}),Rq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:_=!0,...y}=pa(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=ma(i),w=gl(a),S=ma(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=p||(S||!_?[Uy(a)]:Aq(a)),b=v!=="none";!p&&b&&P.push(...Mq(a,_,v,E));const R=[a,...P],L=await Ep(e,y),I=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&I.push(L[g]),f){const Q=Sq(i,o,E);I.push(L[Q[0]],L[Q[1]])}if(C=[...C,{placement:i,overflows:I}],!I.every(Q=>Q<=0)){var O,V;const Q=(((O=s.flip)==null?void 0:O.index)||0)+1,ie=R[Q];if(ie)return{data:{index:Q,overflows:C},reset:{placement:ie}};let ee=(V=C.filter(fe=>fe.overflows[0]<=0).sort((fe,k)=>fe.overflows[1]-k.overflows[1])[0])==null?void 0:V.placement;if(!ee)switch(m){case"bestFit":{var $;const fe=($=C.filter(k=>{if(b){const Y=gl(k.placement);return Y===w||Y==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(Y=>Y>0).reduce((Y,Z)=>Y+Z,0)]).sort((k,Y)=>k[1]-Y[1])[0])==null?void 0:$[0];fe&&(ee=fe);break}case"initialPlacement":ee=a;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}};function oB(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function aB(n){return _q.some(e=>n[e]>=0)}const Pq=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=pa(n,e);switch(r){case"referenceHidden":{const s=await Ep(e,{...i,elementContext:"reference"}),o=oB(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aB(o)}}}case"escaped":{const s=await Ep(e,{...i,altBoundary:!0}),o=oB(s,t.floating);return{data:{escapedOffsets:o,escaped:aB(o)}}}default:return{}}}}};async function Iq(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ma(t),a=ih(t),l=gl(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=pa(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const Bq=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Iq(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Dq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:w}=y;return{x:g,y:w}}},...l}=pa(n,e),c={x:t,y:r},u=await Ep(e,l),f=gl(ma(i)),p=YM(f);let m=c[p],v=c[f];if(s){const y=p==="y"?"top":"left",g=p==="y"?"bottom":"right",w=m+u[y],S=m-u[g];m=mA(w,m,S)}if(o){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",w=v+u[y],S=v-u[g];v=mA(w,v,S)}const _=a.fn({...e,[p]:m,[f]:v});return{..._,data:{x:_.x-t,y:_.y-r}}}}},Lq=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=pa(n,e),u={x:t,y:r},f=gl(i),p=YM(f);let m=u[p],v=u[f];const _=pa(a,e),y=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const S=p==="y"?"height":"width",E=s.reference[p]-s.floating[S]+y.mainAxis,P=s.reference[p]+s.reference[S]-y.mainAxis;m<E?m=E:m>P&&(m=P)}if(c){var g,w;const S=p==="y"?"width":"height",E=["top","left"].includes(ma(i)),P=s.reference[f]-s.floating[S]+(E&&((g=o.offset)==null?void 0:g[f])||0)+(E?0:y.crossAxis),b=s.reference[f]+s.reference[S]+(E?0:((w=o.offset)==null?void 0:w[f])||0)-(E?y.crossAxis:0);v<P?v=P:v>b&&(v=b)}return{[p]:m,[f]:v}}}},Oq=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=pa(n,e),l=await Ep(e,a),c=ma(t),u=ih(t),f=gl(t)==="y",{width:p,height:m}=r.floating;let v,_;c==="top"||c==="bottom"?(v=c,_=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(_=c,v=u==="end"?"top":"bottom");const y=m-l.top-l.bottom,g=p-l.left-l.right,w=yo(m-l[v],y),S=yo(p-l[_],g),E=!e.middlewareData.shift;let P=w,b=S;if(f?b=u||E?yo(S,g):g:P=u||E?yo(w,y):y,E&&!u){const L=Gi(l.left,0),I=Gi(l.right,0),C=Gi(l.top,0),O=Gi(l.bottom,0);f?b=p-2*(L!==0||I!==0?L+I:Gi(l.left,l.right)):P=m-2*(C!==0||O!==0?C+O:Gi(l.top,l.bottom))}await o({...e,availableWidth:b,availableHeight:P});const R=await i.getDimensions(s.floating);return p!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function sh(n){return Bk(n)?(n.nodeName||"").toLowerCase():"#document"}function Xi(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function va(n){var e;return(e=(Bk(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Bk(n){return n instanceof Node||n instanceof Xi(n).Node}function Po(n){return n instanceof Element||n instanceof Xi(n).Element}function Io(n){return n instanceof HTMLElement||n instanceof Xi(n).HTMLElement}function lB(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Xi(n).ShadowRoot}function Yp(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Js(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function Nq(n){return["table","td","th"].includes(sh(n))}function Y0(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function ZM(n){const e=eb(),t=Js(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function kq(n){let e=vl(n);for(;Io(e)&&!Hf(e);){if(Y0(e))return null;if(ZM(e))return e;e=vl(e)}return null}function eb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hf(n){return["html","body","#document"].includes(sh(n))}function Js(n){return Xi(n).getComputedStyle(n)}function q0(n){return Po(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function vl(n){if(sh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||lB(n)&&n.host||va(n);return lB(e)?e.host:e}function Dk(n){const e=vl(n);return Hf(e)?n.ownerDocument?n.ownerDocument.body:n.body:Io(e)&&Yp(e)?e:Dk(e)}function Mp(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Dk(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Xi(i);return s?e.concat(o,o.visualViewport||[],Yp(i)?i:[],o.frameElement&&t?Mp(o.frameElement):[]):e.concat(i,Mp(i,[],t))}function Lk(n){const e=Js(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Io(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Fy(t)!==s||Fy(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function tb(n){return Po(n)?n:n.contextElement}function Sf(n){const e=tb(n);if(!Io(e))return ml(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Lk(e);let o=(s?Fy(t.width):t.width)/r,a=(s?Fy(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Fq=ml(0);function Ok(n){const e=Xi(n);return!eb()||!e.visualViewport?Fq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Uq(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Xi(n)?!1:e}function Gc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=tb(n);let o=ml(1);e&&(r?Po(r)&&(o=Sf(r)):o=Sf(n));const a=Uq(s,t,r)?Ok(s):ml(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const p=Xi(s),m=r&&Po(r)?Xi(r):r;let v=p,_=v.frameElement;for(;_&&r&&m!==v;){const y=Sf(_),g=_.getBoundingClientRect(),w=Js(_),S=g.left+(_.clientLeft+parseFloat(w.paddingLeft))*y.x,E=g.top+(_.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,f*=y.y,l+=S,c+=E,v=Xi(_),_=v.frameElement}}return zy({width:u,height:f,x:l,y:c})}function zq(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=va(r),a=e?Y0(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=ml(1);const u=ml(0),f=Io(r);if((f||!f&&!s)&&((sh(r)!=="body"||Yp(o))&&(l=q0(r)),Io(r))){const p=Gc(r);c=Sf(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function Hq(n){return Array.from(n.getClientRects())}function Nk(n){return Gc(va(n)).left+q0(n).scrollLeft}function Gq(n){const e=va(n),t=q0(n),r=n.ownerDocument.body,i=Gi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Gi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Nk(n);const a=-t.scrollTop;return Js(r).direction==="rtl"&&(o+=Gi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Vq(n,e){const t=Xi(n),r=va(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=eb();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Wq(n,e){const t=Gc(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Io(n)?Sf(n):ml(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function cB(n,e,t){let r;if(e==="viewport")r=Vq(n,t);else if(e==="document")r=Gq(va(n));else if(Po(e))r=Wq(e,t);else{const i=Ok(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return zy(r)}function kk(n,e){const t=vl(n);return t===e||!Po(t)||Hf(t)?!1:Js(t).position==="fixed"||kk(t,e)}function jq(n,e){const t=e.get(n);if(t)return t;let r=Mp(n,[],!1).filter(a=>Po(a)&&sh(a)!=="body"),i=null;const s=Js(n).position==="fixed";let o=s?vl(n):n;for(;Po(o)&&!Hf(o);){const a=Js(o),l=ZM(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Yp(o)&&!l&&kk(n,o))?r=r.filter(u=>u!==o):i=a,o=vl(o)}return e.set(n,r),r}function $q(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?Y0(e)?[]:jq(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=cB(e,u,i);return c.top=Gi(f.top,c.top),c.right=yo(f.right,c.right),c.bottom=yo(f.bottom,c.bottom),c.left=Gi(f.left,c.left),c},cB(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xq(n){const{width:e,height:t}=Lk(n);return{width:e,height:t}}function Jq(n,e,t){const r=Io(e),i=va(e),s=t==="fixed",o=Gc(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ml(0);if(r||!r&&!s)if((sh(e)!=="body"||Yp(i))&&(a=q0(e)),r){const f=Gc(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Nk(i));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function Zw(n){return Js(n).position==="static"}function uB(n,e){return!Io(n)||Js(n).position==="fixed"?null:e?e(n):n.offsetParent}function Fk(n,e){const t=Xi(n);if(Y0(n))return t;if(!Io(n)){let i=vl(n);for(;i&&!Hf(i);){if(Po(i)&&!Zw(i))return i;i=vl(i)}return t}let r=uB(n,e);for(;r&&Nq(r)&&Zw(r);)r=uB(r,e);return r&&Hf(r)&&Zw(r)&&!ZM(r)?t:r||kq(n)||t}const Kq=async function(n){const e=this.getOffsetParent||Fk,t=this.getDimensions,r=await t(n.floating);return{reference:Jq(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Yq(n){return Js(n).direction==="rtl"}const qq={convertOffsetParentRelativeRectToViewportRelativeRect:zq,getDocumentElement:va,getClippingRect:$q,getOffsetParent:Fk,getElementRects:Kq,getClientRects:Hq,getDimensions:Xq,getScale:Sf,isElement:Po,isRTL:Yq};function Qq(n,e){let t=null,r;const i=va(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:p}=n.getBoundingClientRect();if(a||e(),!f||!p)return;const m=vv(u),v=vv(i.clientWidth-(c+f)),_=vv(i.clientHeight-(u+p)),y=vv(c),w={rootMargin:-m+"px "+-v+"px "+-_+"px "+-y+"px",threshold:Gi(0,yo(1,l))||1};let S=!0;function E(P){const b=P[0].intersectionRatio;if(b!==l){if(!S)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(E,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(E,w)}t.observe(n)}return o(!0),s}function Zq(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=tb(n),u=i||s?[...c?Mp(c):[],...Mp(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const f=c&&a?Qq(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[w]=g;w&&w.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,_=l?Gc(n):null;l&&y();function y(){const g=Gc(n);_&&(g.x!==_.x||g.y!==_.y||g.width!==_.width||g.height!==_.height)&&t(),_=g,v=requestAnimationFrame(y)}return t(),()=>{var g;u.forEach(w=>{i&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),f==null||f(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const eQ=Bq,tQ=Dq,nQ=Rq,rQ=Oq,iQ=Pq,fB=Tq,sQ=Lq,oQ=(n,e,t)=>{const r=new Map,i={platform:qq,...t},s={...i.platform,_c:r};return Cq(n,e,{...i,platform:s})};var Jv=typeof document<"u"?B.useLayoutEffect:B.useEffect;function Hy(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Hy(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Hy(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Uk(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function hB(n,e){const t=Uk(n);return Math.round(e*t)/t}function dB(n){const e=B.useRef(n);return Jv(()=>{e.current=n}),e}function aQ(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=B.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=B.useState(r);Hy(p,r)||m(r);const[v,_]=B.useState(null),[y,g]=B.useState(null),w=B.useCallback(fe=>{fe!==b.current&&(b.current=fe,_(fe))},[]),S=B.useCallback(fe=>{fe!==R.current&&(R.current=fe,g(fe))},[]),E=s||v,P=o||y,b=B.useRef(null),R=B.useRef(null),L=B.useRef(u),I=l!=null,C=dB(l),O=dB(i),V=B.useCallback(()=>{if(!b.current||!R.current)return;const fe={placement:e,strategy:t,middleware:p};O.current&&(fe.platform=O.current),oQ(b.current,R.current,fe).then(k=>{const Y={...k,isPositioned:!0};$.current&&!Hy(L.current,Y)&&(L.current=Y,Dp.flushSync(()=>{f(Y)}))})},[p,e,t,O]);Jv(()=>{c===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,f(fe=>({...fe,isPositioned:!1})))},[c]);const $=B.useRef(!1);Jv(()=>($.current=!0,()=>{$.current=!1}),[]),Jv(()=>{if(E&&(b.current=E),P&&(R.current=P),E&&P){if(C.current)return C.current(E,P,V);V()}},[E,P,V,C,I]);const Q=B.useMemo(()=>({reference:b,floating:R,setReference:w,setFloating:S}),[w,S]),ie=B.useMemo(()=>({reference:E,floating:P}),[E,P]),ee=B.useMemo(()=>{const fe={position:t,left:0,top:0};if(!ie.floating)return fe;const k=hB(ie.floating,u.x),Y=hB(ie.floating,u.y);return a?{...fe,transform:"translate("+k+"px, "+Y+"px)",...Uk(ie.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:k,top:Y}},[t,a,ie.floating,u.x,u.y]);return B.useMemo(()=>({...u,update:V,refs:Q,elements:ie,floatingStyles:ee}),[u,V,Q,ie,ee])}const lQ=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?fB({element:r.current,padding:i}).fn(t):{}:r?fB({element:r,padding:i}).fn(t):{}}}},cQ=(n,e)=>({...eQ(n),options:[n,e]}),uQ=(n,e)=>({...tQ(n),options:[n,e]}),fQ=(n,e)=>({...sQ(n),options:[n,e]}),hQ=(n,e)=>({...nQ(n),options:[n,e]}),dQ=(n,e)=>({...rQ(n),options:[n,e]}),pQ=(n,e)=>({...iQ(n),options:[n,e]}),mQ=(n,e)=>({...lQ(n),options:[n,e]});var gQ="Arrow",zk=B.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return F.jsx(Cl.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:F.jsx("polygon",{points:"0,0 30,0 15,10"})})});zk.displayName=gQ;var vQ=zk;function yQ(n){const[e,t]=B.useState(void 0);return Hc(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var nb="Popper",[Hk,Gk]=Ck(nb),[_Q,Vk]=Hk(nb),Wk=n=>{const{__scopePopper:e,children:t}=n,[r,i]=B.useState(null);return F.jsx(_Q,{scope:e,anchor:r,onAnchorChange:i,children:t})};Wk.displayName=nb;var jk="PopperAnchor",$k=B.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Vk(jk,t),o=B.useRef(null),a=eu(e,o);return B.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:F.jsx(Cl.div,{...i,ref:a})});$k.displayName=jk;var rb="PopperContent",[xQ,wQ]=Hk(rb),Xk=B.forwardRef((n,e)=>{var Be,at,wt,mt,te,Ie;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:v,..._}=n,y=Vk(rb,t),[g,w]=B.useState(null),S=eu(e,Se=>w(Se)),[E,P]=B.useState(null),b=yQ(E),R=(b==null?void 0:b.width)??0,L=(b==null?void 0:b.height)??0,I=r+(s!=="center"?"-"+s:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],V=O.length>0,$={padding:C,boundary:O.filter(AQ),altBoundary:V},{refs:Q,floatingStyles:ie,placement:ee,isPositioned:fe,middlewareData:k}=aQ({strategy:"fixed",placement:I,whileElementsMounted:(...Se)=>Zq(...Se,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[cQ({mainAxis:i+L,alignmentAxis:o}),l&&uQ({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?fQ():void 0,...$}),l&&hQ({...$}),dQ({...$,apply:({elements:Se,rects:Ne,availableWidth:Le,availableHeight:Oe})=>{const{width:qe,height:Ye}=Ne.reference,xt=Se.floating.style;xt.setProperty("--radix-popper-available-width",`${Le}px`),xt.setProperty("--radix-popper-available-height",`${Oe}px`),xt.setProperty("--radix-popper-anchor-width",`${qe}px`),xt.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),E&&mQ({element:E,padding:a}),EQ({arrowWidth:R,arrowHeight:L}),p&&pQ({strategy:"referenceHidden",...$})]}),[Y,Z]=Yk(ee),ae=rh(v);Hc(()=>{fe&&(ae==null||ae())},[fe,ae]);const ye=(Be=k.arrow)==null?void 0:Be.x,Ue=(at=k.arrow)==null?void 0:at.y,he=((wt=k.arrow)==null?void 0:wt.centerOffset)!==0,[Te,Me]=B.useState();return Hc(()=>{g&&Me(window.getComputedStyle(g).zIndex)},[g]),F.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:fe?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[(mt=k.transformOrigin)==null?void 0:mt.x,(te=k.transformOrigin)==null?void 0:te.y].join(" "),...((Ie=k.hide)==null?void 0:Ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:F.jsx(xQ,{scope:t,placedSide:Y,onArrowChange:P,arrowX:ye,arrowY:Ue,shouldHideArrow:he,children:F.jsx(Cl.div,{"data-side":Y,"data-align":Z,..._,ref:S,style:{..._.style,animation:fe?void 0:"none"}})})})});Xk.displayName=rb;var Jk="PopperArrow",SQ={top:"bottom",right:"left",bottom:"top",left:"right"},Kk=B.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=wQ(Jk,r),o=SQ[s.placedSide];return F.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:F.jsx(vQ,{...i,ref:t,style:{...i.style,display:"block"}})})});Kk.displayName=Jk;function AQ(n){return n!==null}var EQ=n=>({name:"transformOrigin",options:n,fn(e){var y,g,w;const{placement:t,rects:r,middlewareData:i}=e,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=Yk(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((g=i.arrow)==null?void 0:g.x)??0)+a/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let v="",_="";return c==="bottom"?(v=o?f:`${p}px`,_=`${-l}px`):c==="top"?(v=o?f:`${p}px`,_=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,_=o?f:`${m}px`):c==="left"&&(v=`${r.floating.width+l}px`,_=o?f:`${m}px`),{data:{x:v,y:_}}}});function Yk(n){const[e,t="center"]=n.split("-");return[e,t]}var MQ=Wk,bQ=$k,CQ=Xk,TQ=Kk;function RQ(n,e){return B.useReducer((t,r)=>e[t][r]??t,n)}var qk=n=>{const{present:e,children:t}=n,r=PQ(e),i=typeof t=="function"?t({present:r.isPresent}):B.Children.only(t),s=eu(r.ref,IQ(i));return typeof t=="function"||r.isPresent?B.cloneElement(i,{ref:s}):null};qk.displayName="Presence";function PQ(n){const[e,t]=B.useState(),r=B.useRef({}),i=B.useRef(n),s=B.useRef("none"),o=n?"mounted":"unmounted",[a,l]=RQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return B.useEffect(()=>{const c=yv(r.current);s.current=a==="mounted"?c:"none"},[a]),Hc(()=>{const c=r.current,u=i.current;if(u!==n){const p=s.current,m=yv(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Hc(()=>{if(e){const c=f=>{const m=yv(r.current).includes(f.animationName);f.target===e&&m&&Dp.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=yv(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:B.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function yv(n){return(n==null?void 0:n.animationName)||"none"}function IQ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function BQ({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=DQ({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=rh(t),l=B.useCallback(c=>{if(s){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else i(c)},[s,n,i,a]);return[o,l]}function DQ({defaultProp:n,onChange:e}){const t=B.useState(n),[r]=t,i=B.useRef(r),s=rh(e);return B.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}var LQ="VisuallyHidden",Qk=B.forwardRef((n,e)=>F.jsx(Cl.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Qk.displayName=LQ;var OQ=Qk,[Q0,Rce]=Ck("Tooltip",[Gk]),Z0=Gk(),NQ="TooltipProvider",vA="tooltip.open",[Pce,ib]=Q0(NQ),e_="Tooltip",[kQ,t_]=Q0(e_),Zk=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=ib(e_,n.__scopeTooltip),c=Z0(e),[u,f]=B.useState(null),p=yq(),m=B.useRef(0),v=o??l.disableHoverableContent,_=a??l.delayDuration,y=B.useRef(!1),[g=!1,w]=BQ({prop:r,defaultProp:i,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(vA))):l.onClose(),s==null||s(R)}}),S=B.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),E=B.useCallback(()=>{window.clearTimeout(m.current),y.current=!1,w(!0)},[w]),P=B.useCallback(()=>{window.clearTimeout(m.current),w(!1)},[w]),b=B.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,w(!0)},_)},[_,w]);return B.useEffect(()=>()=>window.clearTimeout(m.current),[]),F.jsx(MQ,{...c,children:F.jsx(kQ,{scope:e,contentId:p,open:g,stateAttribute:S,trigger:u,onTriggerChange:f,onTriggerEnter:B.useCallback(()=>{l.isOpenDelayed?b():E()},[l.isOpenDelayed,b,E]),onTriggerLeave:B.useCallback(()=>{v?P():window.clearTimeout(m.current)},[P,v]),onOpen:E,onClose:P,disableHoverableContent:v,children:t})})};Zk.displayName=e_;var yA="TooltipTrigger",eF=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=t_(yA,t),s=ib(yA,t),o=Z0(t),a=B.useRef(null),l=eu(e,a,i.onTriggerChange),c=B.useRef(!1),u=B.useRef(!1),f=B.useCallback(()=>c.current=!1,[]);return B.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),F.jsx(bQ,{asChild:!0,...o,children:F.jsx(Cl.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Qo(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Qo(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Qo(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Qo(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:Qo(n.onBlur,i.onClose),onClick:Qo(n.onClick,i.onClose)})})});eF.displayName=yA;var FQ="TooltipPortal",[Ice,UQ]=Q0(FQ,{forceMount:void 0}),Gf="TooltipContent",tF=B.forwardRef((n,e)=>{const t=UQ(Gf,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=t_(Gf,n.__scopeTooltip);return F.jsx(qk,{present:r||o.open,children:o.disableHoverableContent?F.jsx(nF,{side:i,...s,ref:e}):F.jsx(zQ,{side:i,...s,ref:e})})}),zQ=B.forwardRef((n,e)=>{const t=t_(Gf,n.__scopeTooltip),r=ib(Gf,n.__scopeTooltip),i=B.useRef(null),s=eu(e,i),[o,a]=B.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:f}=r,p=B.useCallback(()=>{a(null),f(!1)},[f]),m=B.useCallback((v,_)=>{const y=v.currentTarget,g={x:v.clientX,y:v.clientY},w=VQ(g,y.getBoundingClientRect()),S=WQ(g,w),E=jQ(_.getBoundingClientRect()),P=XQ([...S,...E]);a(P),f(!0)},[f]);return B.useEffect(()=>()=>p(),[p]),B.useEffect(()=>{if(l&&u){const v=y=>m(y,u),_=y=>m(y,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",_)}}},[l,u,m,p]),B.useEffect(()=>{if(o){const v=_=>{const y=_.target,g={x:_.clientX,y:_.clientY},w=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),S=!$Q(g,o);w?p():S&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,p]),F.jsx(nF,{...n,ref:s})}),[HQ,GQ]=Q0(e_,{isInside:!1}),nF=B.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=t_(Gf,t),c=Z0(t),{onClose:u}=l;return B.useEffect(()=>(document.addEventListener(vA,u),()=>document.removeEventListener(vA,u)),[u]),B.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),F.jsx(Rk,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:F.jsxs(CQ,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[F.jsx(xk,{children:r}),F.jsx(HQ,{scope:t,isInside:!0,children:F.jsx(OQ,{id:l.contentId,role:"tooltip",children:i||r})})]})})});tF.displayName=Gf;var rF="TooltipArrow",iF=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Z0(t);return GQ(rF,t).isInside?null:F.jsx(TQ,{...i,...r,ref:e})});iF.displayName=rF;function VQ(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function WQ(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function jQ(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function $Q(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function XQ(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),JQ(e)}function JQ(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var KQ=Zk,YQ=eF,qQ=tF,QQ=iF;function ZQ(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function mn(n,e){if(n==null)return{};var t=ZQ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Bn;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Bn||(Bn={}));const eZ={[Bn.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Bn.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Bn.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Bn.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Bn.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Bn.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Bn.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Bn.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Bn.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Bn.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Bn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function sF(n,e,...t){const[r,...i]=eZ[e](...t);console[n]("LEVA: "+r,...i)}const ta=sF.bind(null,"warn"),tZ=sF.bind(null,"log"),nZ=["value"],rZ=["schema"],iZ=["value"],oF=[],Vc={};function pB(n){let{value:e}=n,t=mn(n,nZ);for(let r of oF){const i=r(e,t);if(i)return i}}function ya(n,e){let{schema:t}=e,r=mn(e,rZ);if(n in Vc){ta(Bn.ALREADY_REGISTERED_TYPE,n);return}oF.push((i,s)=>t(i,s)&&n),Vc[n]=r}function eS(n,e,t,r){const{normalize:i}=Vc[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=mn(e,iZ);return{value:s,settings:o}}function sZ(n,e,t,r,i,s){const{sanitize:o}=Vc[n];return o?o(e,t,r,i,s):e}function mB(n,e,t){const{format:r}=Vc[n];return r?r(e,t):e}function oZ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Mt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(t),!0).forEach(function(r){oZ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const yl=(n,e,t)=>n>t?t:n<e?e:n,aZ=n=>{if(n===""||typeof n=="number")return n;try{const e=Ua(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},lZ=Math.log(10);function vB(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/lZ)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const Gy=(n,e,t)=>t===e?0:(yl(n,e,t)-e)/(t-e),Vy=(n,e,t)=>n*(t-e)+e,cZ=()=>"_"+Math.random().toString(36).substr(2,9),yB=/\(([0-9+\-*/^ .]+)\)/,_B=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,xB=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,wB=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,SB=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,AB=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Ua(n){if(isNaN(Number(n)))if(yB.test(n)){const e=n.replace(yB,(t,r)=>String(Ua(r)));return Ua(e)}else if(_B.test(n)){const e=n.replace(_B,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Ua(e)}else if(xB.test(n)){const e=n.replace(xB,(t,r,i)=>String(Number(r)*Number(i)));return Ua(e)}else if(wB.test(n)){const e=n.replace(wB,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Ua(e)}else if(SB.test(n)){const e=n.replace(SB,(t,r,i)=>String(Number(r)+Number(i)));return Ua(e)}else if(AB.test(n)){const e=n.replace(AB,(t,r,i)=>String(Number(r)-Number(i)));return Ua(e)}else return Number(n);return Number(n)}function uZ(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function fZ(n,e){const t=Mt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function hZ(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function aF(n){return Object.prototype.toString.call(n)==="[object Object]"}const dZ=n=>aF(n)&&Object.keys(n).length===0;let js;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(js||(js={}));let Ks;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Ks||(Ks={}));const pZ=["type","__customInput"],mZ=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],gZ=["type"];function lF(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:Mt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:P,__customInput:b}=n,R=mn(n,pZ);return lF(b,e,R,P)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:f,onChange:p,onEditStart:m,onEditEnd:v,transient:_}=n,y=mn(n,mZ),g=Mt({render:o,key:e,label:a??e,hint:f,transient:_??!!p,onEditStart:m,onEditEnd:v,disabled:u,optional:l,order:c},t);let{type:w}=y,S=mn(y,gZ);if(w=r??w,w in js)return{type:w,input:S,options:g};let E;return r&&aF(S)&&"value"in S?E=S.value:E=dZ(S)?void 0:S,{type:w,input:E,options:Mt(Mt({},g),{},{onChange:p,optional:(i=g.optional)!==null&&i!==void 0?i:!1,disabled:(s=g.disabled)!==null&&s!==void 0?s:!1})}}function vZ(n,e,t,r){const i=lF(n,e),{type:s,input:o,options:a}=i;if(s)return s in js?i:{type:s,input:eS(s,o,t,r),options:a};let l=pB(o);return l?{type:l,input:eS(l,o,t,r),options:a}:(l=pB({value:o}),l?{type:l,input:eS(l,{value:o},t,r),options:a}:!1)}function EB(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=cF({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const yZ=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function cF({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=sZ(n,o,t,e,i,s)}catch(l){throw new yZ(`The value \`${r}\` did not result in a correct value.`,e,l)}return Sp(a,e)?e:a}const uF=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},fF=n=>n.shiftKey?5:n.altKey?1/5:1;function _Z(n,e){const t=console.error;console.error=()=>{},ZL.render(n,e),console.error=t}const xZ=["value"],wZ=["min","max"],SZ=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},hF=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=yl(i,e,t);return r?s+r:s},AZ=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},dF=n=>{let{value:e}=n,t=mn(n,xZ);const{min:r=-1/0,max:i=1/0}=t,s=mn(t,wZ);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=yl(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const c=l?vB(l)*10:vB(o);l=l||c/10;const u=Math.round(yl(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:Mt({initialValue:o,step:l,pad:u,min:r,max:i,suffix:a},s)}},pF=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var mF=Object.freeze({__proto__:null,schema:SZ,sanitize:hF,format:AZ,normalize:dF,sanitizeStep:pF});function jn(){return jn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jn.apply(this,arguments)}const gF=B.createContext({});function Qr(){return B.useContext(gF)}const sb=B.createContext(null),vF=B.createContext(null),yF=B.createContext(null);function qp(){return B.useContext(vF)}function EZ(){return B.useContext(yF)}const _F=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function _v(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const id={$inputStyle:()=>n=>_v(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>_v(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>_v(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>_v(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Et,css:Bce,createTheme:MZ,globalCss:bZ,keyframes:Dce}=oq({prefix:"leva",theme:_F(),utils:Mt(Mt({},id),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":id.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":id.$focusStyle()(n)}),$hover:n=>({"&:hover":id.$hoverStyle()(n)}),$active:n=>({"&:active":id.$activeStyle()(n)})})}),CZ=bZ({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function TZ(n){const e=_F();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=MZ(e);return{theme:e,className:t.className}}function la(n,e){const{theme:t}=B.useContext(sb);if(!(n in t)||!(e in t[n]))return ta(Bn.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const xF=Et("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),wF=Et("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${xF}`]:{paddingLeft:0}}),RZ=Et(wF,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),PZ=Et("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),IZ=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],BZ=["onUpdate"];function ob(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=mn(n,IZ);const{id:f,emitOnEditStart:p,emitOnEditEnd:m,disabled:v}=Qr(),_=a||f,y=B.useRef(null),g=c>0,w=g?"textarea":"input",S=B.useCallback(b=>R=>{const L=R.currentTarget.value;b(L)},[]);ne.useEffect(()=>{const b=y.current,R=S(L=>{r(L),m()});return b==null||b.addEventListener("blur",R),()=>b==null?void 0:b.removeEventListener("blur",R)},[S,r,m]);const E=B.useCallback(b=>{b.key==="Enter"&&S(r)(b)},[S,r]),P=Object.assign({as:w},g?{rows:c}:{},u);return ne.createElement(PZ,{textArea:g},e&&typeof e=="string"?ne.createElement(wF,null,e):e,ne.createElement(xF,jn({levaType:o,ref:y,id:_,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:S(i),onFocus:()=>p(),onKeyPress:E,onKeyDown:s,disabled:v},P)))}function DZ(n){let{onUpdate:e}=n,t=mn(n,BZ);const r=B.useCallback(s=>e(aZ(s)),[e]),i=B.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return ne.createElement(ob,jn({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const Wy=Et("div",{}),_A=Et("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),LZ=Et("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${_A}::after`]:{opacity:.6},[`${Wy}:hover > & + ${_A}::after`]:{opacity:.6},[`${Wy}:hover > & > svg`]:{opacity:1}}),SF=Et("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Wy}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),AF=Et("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${SF} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),EF=Et(AF,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),OZ=Et("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),NZ=Et("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),xA=Et("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),kZ=Et("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${xA}`]:{pointerEvents:"auto"}}}}}),MF=Et("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),FZ=Et("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),UZ=Et(QQ,{fill:"$toolTipBackground"});function ab({children:n}){const{className:e}=B.useContext(sb);return ne.createElement(TY,{className:e},n)}const zZ=["align"];function HZ(){const{id:n,disable:e,disabled:t}=Qr();return ne.createElement(ne.Fragment,null,ne.createElement(NZ,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),ne.createElement("label",{htmlFor:n+"__disable"}))}function GZ(n){const{id:e,optional:t,hint:r}=Qr(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return ne.createElement(ne.Fragment,null,t&&ne.createElement(HZ,null),r!==void 0?ne.createElement(KQ,null,ne.createElement(YQ,{asChild:!0},ne.createElement(xA,jn({},i,n))),ne.createElement(qQ,{side:"top",sideOffset:2},ne.createElement(FZ,null,r,ne.createElement(UZ,null)))):ne.createElement(xA,jn({},i,s,n)))}function Zs(n){let{align:e}=n,t=mn(n,zZ);const{value:r,label:i,key:s,disabled:o}=Qr(),{hideCopyButton:a}=EZ(),l=!a&&s!==void 0,[c,u]=B.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{ta(Bn.CLIPBOARD_ERROR,{[s]:r})}};return ne.createElement(OZ,{align:e,onPointerLeave:()=>u(!1)},ne.createElement(GZ,t),l&&!o&&ne.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ne.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),ne.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):ne.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ne.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),ne.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const VZ=["toggled"],WZ=Et("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function lb(n){let{toggled:e}=n,t=mn(n,VZ);return ne.createElement(WZ,jn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),ne.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const jZ=["input"];function Cs(n){let{input:e}=n,t=mn(n,jZ);return e?ne.createElement(EF,t):ne.createElement(AF,t)}function bF({value:n,type:e,settings:t,setValue:r}){const[i,s]=B.useState(mB(e,n,t)),o=B.useRef(n),a=B.useRef(t);a.current=t;const l=B.useCallback(u=>s(mB(e,u,a.current)),[e]),c=B.useCallback(u=>{try{r(u)}catch(f){const{type:p,previousValue:m}=f;if(p!=="LEVA_ERROR")throw f;l(m)}},[l,r]);return B.useEffect(()=>{Sp(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:c}}function Qp(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=Qr();return bJ(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function $Z(n){const e=B.useRef(null),t=B.useRef(null),r=B.useRef(!1);return B.useEffect(()=>{const i=uF(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),B.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function CF(){const n=B.useRef(null),e=B.useRef({x:0,y:0}),t=B.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const XZ=["__refCount"],tS=(n,e)=>{if(!n[e])return null;const t=n[e];return mn(t,XZ)};function JZ(n){const e=qp(),[t,r]=B.useState(tS(e.getData(),n)),i=B.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=B.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=B.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=B.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=B.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return B.useEffect(()=>{r(tS(e.getData(),n));const c=e.useStore.subscribe(u=>tS(u.data,n),r,{equalityFn:J0});return()=>c()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const KZ=Et("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),TF=Et("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),wA=Et("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),RF=Et("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),PF=Et("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function YZ({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=B.useRef(null),a=B.useRef(null),l=B.useRef(0),c=la("sizes","scrubberWidth"),u=Qp(({event:p,first:m,xy:[v],movement:[_],memo:y})=>{if(m){const{width:w,left:S}=o.current.getBoundingClientRect();l.current=w-parseFloat(c),y=(p==null?void 0:p.target)===a.current?n:Vy((v-S)/w,e,t)}const g=y+Vy(_/l.current,0,t-e);return r(pF(g,{step:i,initialValue:s})),y}),f=Gy(n,e,t);return ne.createElement(RF,jn({ref:o},u()),ne.createElement(TF,null,ne.createElement(PF,{style:{left:0,right:`${(1-f)*100}%`}})),ne.createElement(wA,{ref:a,style:{left:`calc(${f} * (100% - ${c}))`}}))}const qZ=ne.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=B.useState(!1),o=Qp(({active:a,delta:[l],event:c,memo:u=0})=>(s(a),u+=l/2,Math.abs(u)>=1&&(e(f=>parseFloat(f)+Math.floor(u)*t*fF(c)),u=0),u));return ne.createElement(RZ,jn({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function IF({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&ne.createElement(qZ,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return ne.createElement(DZ,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function QZ(){const n=Qr(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,e),ne.createElement(KZ,{hasRange:l},l&&ne.createElement(YZ,jn({value:parseFloat(t),onDrag:r},i)),ne.createElement(IF,jn({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:ZZ}=mF,eee=mn(mF,["sanitizeStep"]);var tee=Mt({component:QZ},eee);const nee=(n,e)=>Ci().schema({options:Ci().passesAnyOf(Ci().object(),Ci().array())}).test(e),ree=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},iee=(n,{values:e})=>e.indexOf(n),see=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var oee=Object.freeze({__proto__:null,schema:nee,sanitize:ree,format:iee,normalize:see});const aee=Et("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),SA=Et("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),lee=Et("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${SA}:focus + &`]:{$focusStyle:""},[`${SA}:hover + &`]:{$hoverStyle:""}});function cee({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=B.useRef();return e===a[n]&&(l.current=o[n]),ne.createElement(aee,null,ne.createElement(SA,{id:r,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>ne.createElement("option",{key:c,value:u},c))),ne.createElement(lee,null,l.current),ne.createElement(lb,{toggled:!0}))}function uee(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=Qr();return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,n),ne.createElement(cee,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var fee=Mt({component:uee},oee);const hee=n=>Ci().string().test(n),dee=n=>{if(typeof n!="string")throw Error("Invalid string");return n},pee=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var mee=Object.freeze({__proto__:null,schema:hee,sanitize:dee,normalize:pee});const gee=["displayValue","onUpdate","onChange","editable"],vee=Et("div",{whiteSpace:"pre-wrap"});function yee(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=mn(n,gee);return i?ne.createElement(ob,jn({value:e,onUpdate:t,onChange:r},s)):ne.createElement(vee,null,e)}function _ee(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=Qr();return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,n),ne.createElement(yee,jn({displayValue:t,onUpdate:r,onChange:i},e)))}var xee=Mt({component:_ee},mee);const wee=n=>Ci().boolean().test(n),See=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var Aee=Object.freeze({__proto__:null,schema:wee,sanitize:See});const Eee=Et("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Mee({value:n,onUpdate:e,id:t,disabled:r}){return ne.createElement(Eee,null,ne.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),ne.createElement("label",{htmlFor:t},ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ne.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function bee(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=Qr();return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,n),ne.createElement(Mee,{value:e,onUpdate:t,id:i,disabled:r}))}var Cee=Mt({component:bee},Aee);const Tee=["locked"];function Ree({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=B.useRef(n[t]);o.current=n[t];const a=B.useCallback(c=>i({[t]:cF({type:"NUMBER",value:o.current,settings:r},c)}),[i,r,t]),l=bF({type:"NUMBER",value:n[t],settings:r,setValue:a});return ne.createElement(IF,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const Pee=Et("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Iee(n){let{locked:e}=n,t=mn(n,Tee);return ne.createElement("svg",jn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?ne.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):ne.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function cb({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=Qr(),{lock:o,locked:a}=t;return ne.createElement(Pee,{withLock:o},o&&ne.createElement(Iee,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>ne.createElement(Ree,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const BF=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=dF(Mt({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},Bee=["lock"],Dee=["value"];function Lee(n){const e=Ci().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function Oee(n){return Array.isArray(n)?"array":"object"}function Nd(n,e,t){return Oee(n)===e?n:e==="array"?Object.values(n):hZ(n,t)}const Nee=(n,e,t)=>{const r=Nd(n,"object",e.keys);for(let o in r)r[o]=hF(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Nd(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=o[a],u=c!==0?l/c:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*u}else s=Mt(Mt({},o),r)}return Nd(s,e.format,e.keys)},kee=(n,e)=>Nd(n,"object",e.keys),Fee=n=>!!n&&("step"in n||"min"in n||"max"in n);function Uee(n,e,t=[]){const{lock:r=!1}=e,i=mn(e,Bee),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Nd(n,"object",o),l=Fee(i)?o.reduce((u,f)=>Object.assign(u,{[f]:i}),{}):i,c=BF(a,l);return{value:s==="array"?n:a,settings:Mt(Mt({},c),{},{format:s,keys:o,lock:r,locked:!1})}}function DF(n){return{schema:Lee(n.length),normalize:e=>{let{value:t}=e,r=mn(e,Dee);return Uee(t,r,n)},format:(e,t)=>kee(e,t),sanitize:(e,t,r)=>Nee(e,t,r)}}var zee={grad:.9,turn:360,rad:360/(2*Math.PI)},Xo=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Sr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},ys=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},LF=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},MB=function(n){return{r:ys(n.r,0,255),g:ys(n.g,0,255),b:ys(n.b,0,255),a:ys(n.a)}},nS=function(n){return{r:Sr(n.r),g:Sr(n.g),b:Sr(n.b),a:Sr(n.a,3)}},Hee=/^#([0-9a-f]{3,8})$/i,xv=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},OF=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},NF=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},bB=function(n){return{h:LF(n.h),s:ys(n.s,0,100),l:ys(n.l,0,100),a:ys(n.a)}},CB=function(n){return{h:Sr(n.h),s:Sr(n.s),l:Sr(n.l),a:Sr(n.a,3)}},TB=function(n){return NF((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},kd=function(n){return{h:(e=OF(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},Gee=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Vee=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wee=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jee=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,AA={string:[[function(n){var e=Hee.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Sr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Sr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=Wee.exec(n)||jee.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:MB({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=Gee.exec(n)||Vee.exec(n);if(!e)return null;var t,r,i=bB({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(zee[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return TB(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Xo(e)&&Xo(t)&&Xo(r)?MB({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Xo(e)||!Xo(t)||!Xo(r))return null;var o=bB({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return TB(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Xo(e)||!Xo(t)||!Xo(r))return null;var o=function(a){return{h:LF(a.h),s:ys(a.s,0,100),v:ys(a.v,0,100),a:ys(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return NF(o)},"hsv"]]},RB=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},kF=function(n){return typeof n=="string"?RB(n.trim(),AA.string):typeof n=="object"&&n!==null?RB(n,AA.object):[null,void 0]},$ee=function(n){return kF(n)[1]},rS=function(n,e){var t=kd(n);return{h:t.h,s:ys(t.s+100*e,0,100),l:t.l,a:t.a}},iS=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},PB=function(n,e){var t=kd(n);return{h:t.h,s:t.s,l:ys(t.l+100*e,0,100),a:t.a}},EA=function(){function n(e){this.parsed=kF(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Sr(iS(this.rgba),2)},n.prototype.isDark=function(){return iS(this.rgba)<.5},n.prototype.isLight=function(){return iS(this.rgba)>=.5},n.prototype.toHex=function(){return e=nS(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?xv(Sr(255*s)):"","#"+xv(t)+xv(r)+xv(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return nS(this.rgba)},n.prototype.toRgbString=function(){return e=nS(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return CB(kd(this.rgba))},n.prototype.toHslString=function(){return e=CB(kd(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=OF(this.rgba),{h:Sr(e.h),s:Sr(e.s),v:Sr(e.v),a:Sr(e.a,3)};var e},n.prototype.invert=function(){return li({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),li(rS(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),li(rS(this.rgba,-e))},n.prototype.grayscale=function(){return li(rS(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),li(PB(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),li(PB(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?li({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Sr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=kd(this.rgba);return typeof e=="number"?li({h:e,s:t.s,l:t.l,a:t.a}):Sr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===li(e).toHex()},n}(),li=function(n){return n instanceof EA?n:new EA(n)},IB=[],Xee=function(n){n.forEach(function(e){IB.indexOf(e)<0&&(e(EA,AA),IB.push(e))})};function Jee(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),f=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var v in t){var _=(a=u,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));_<f&&(f=_,p=v)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function oh(){return(oh=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function ub(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function MA(n){var e=B.useRef(n),t=B.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var Vf=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Fd=function(n){return"touches"in n},bA=function(n){return n&&n.ownerDocument.defaultView||self},BB=function(n,e,t){var r=n.getBoundingClientRect(),i=Fd(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:Vf((i.pageX-(r.left+bA(n).pageXOffset))/r.width),top:Vf((i.pageY-(r.top+bA(n).pageYOffset))/r.height)}},DB=function(n){!Fd(n)&&n.preventDefault()},fb=ne.memo(function(n){var e=n.onMove,t=n.onKey,r=ub(n,["onMove","onKey"]),i=B.useRef(null),s=MA(e),o=MA(t),a=B.useRef(null),l=B.useRef(!1),c=B.useMemo(function(){var m=function(y){DB(y),(Fd(y)?y.touches.length>0:y.buttons>0)&&i.current?s(BB(i.current,y,a.current)):_(!1)},v=function(){return _(!1)};function _(y){var g=l.current,w=bA(i.current),S=y?w.addEventListener:w.removeEventListener;S(g?"touchmove":"mousemove",m),S(g?"touchend":"mouseup",v)}return[function(y){var g=y.nativeEvent,w=i.current;if(w&&(DB(g),!function(E,P){return P&&!Fd(E)}(g,l.current)&&w)){if(Fd(g)){l.current=!0;var S=g.changedTouches||[];S.length&&(a.current=S[0].identifier)}w.focus(),s(BB(w,g,a.current)),_(!0)}},function(y){var g=y.which||y.keyCode;g<37||g>40||(y.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},_]},[o,s]),u=c[0],f=c[1],p=c[2];return B.useEffect(function(){return p},[p]),ne.createElement("div",oh({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),Zp=function(n){return n.filter(Boolean).join(" ")},hb=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=Zp(["react-colorful__pointer",n.className]);return ne.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},ne.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},fi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},FF=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:fi(n.h),s:fi(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:fi(i/2),a:fi(r,2)}},CA=function(n){var e=FF(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},sS=function(n){var e=FF(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},UF=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:fi(255*[r,a,o,o,l,r][c]),g:fi(255*[l,r,r,a,o,o][c]),b:fi(255*[o,o,l,r,r,a][c]),a:fi(i,2)}},zF=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:fi(60*(a<0?a+6:a)),s:fi(s?o/s*100:0),v:fi(s/255*100),a:i}},HF=ne.memo(function(n){var e=n.hue,t=n.onChange,r=Zp(["react-colorful__hue",n.className]);return ne.createElement("div",{className:r},ne.createElement(fb,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:Vf(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":fi(e),"aria-valuemax":"360","aria-valuemin":"0"},ne.createElement(hb,{className:"react-colorful__hue-pointer",left:e/360,color:CA({h:e,s:100,v:100,a:1})})))}),GF=ne.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:CA({h:e.h,s:100,v:100,a:1})};return ne.createElement("div",{className:"react-colorful__saturation",style:r},ne.createElement(fb,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:Vf(e.s+100*i.left,0,100),v:Vf(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+fi(e.s)+"%, Brightness "+fi(e.v)+"%"},ne.createElement(hb,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:CA(e)})))}),db=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function VF(n,e,t){var r=MA(t),i=B.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=B.useRef({color:e,hsva:s});B.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),B.useEffect(function(){var c;db(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,n,r]);var l=B.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var Kee=typeof window<"u"?B.useLayoutEffect:B.useEffect,Yee=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},LB=new Map,WF=function(n){Kee(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!LB.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,LB.set(e,t);var r=Yee();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},qee=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=ub(n,["className","colorModel","color","onChange"]),a=B.useRef(null);WF(a);var l=VF(t,i,s),c=l[0],u=l[1],f=Zp(["react-colorful",e]);return ne.createElement("div",oh({},o,{ref:a,className:f}),ne.createElement(GF,{hsva:c,onChange:u}),ne.createElement(HF,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},Qee=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+sS(Object.assign({},t,{a:0}))+", "+sS(Object.assign({},t,{a:1}))+")"},s=Zp(["react-colorful__alpha",e]),o=fi(100*t.a);return ne.createElement("div",{className:s},ne.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),ne.createElement(fb,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Vf(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},ne.createElement(hb,{className:"react-colorful__alpha-pointer",left:t.a,color:sS(t)})))},Zee=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=ub(n,["className","colorModel","color","onChange"]),a=B.useRef(null);WF(a);var l=VF(t,i,s),c=l[0],u=l[1],f=Zp(["react-colorful",e]);return ne.createElement("div",oh({},o,{ref:a,className:f}),ne.createElement(GF,{hsva:c,onChange:u}),ne.createElement(HF,{hue:c.h,onChange:u}),ne.createElement(Qee,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},ete={defaultColor:{r:0,g:0,b:0,a:1},toHsva:zF,fromHsva:UF,equal:db},tte=function(n){return ne.createElement(Zee,oh({},n,{colorModel:ete}))},nte={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return zF({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=UF(n)).r,g:e.g,b:e.b};var e},equal:db},rte=function(n){return ne.createElement(qee,oh({},n,{colorModel:nte}))};function ah(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function lh(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ite(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function ste(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(ite(arguments[e]));return n}var ote=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function em(n,e){var t=ate(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function ate(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=ote.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var lte=[".DS_Store","Thumbs.db"];function cte(n){return ah(this,void 0,void 0,function(){return lh(this,function(e){return jy(n)&&ute(n)?[2,pte(n.dataTransfer,n.type)]:fte(n)?[2,hte(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,dte(n)]:[2,[]]})})}function ute(n){return jy(n.dataTransfer)}function fte(n){return jy(n)&&jy(n.target)}function jy(n){return typeof n=="object"&&n!==null}function hte(n){return TA(n.target.files).map(function(e){return em(e)})}function dte(n){return ah(this,void 0,void 0,function(){var e;return lh(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return em(r)})]}})})}function pte(n,e){return ah(this,void 0,void 0,function(){var t,r;return lh(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=TA(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(mte))]):[3,2];case 1:return r=i.sent(),[2,OB(jF(r))];case 2:return[2,OB(TA(n.files).map(function(s){return em(s)}))]}})})}function OB(n){return n.filter(function(e){return lte.indexOf(e.name)===-1})}function TA(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function mte(n){if(typeof n.webkitGetAsEntry!="function")return NB(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?$F(e):NB(n)}function jF(n){return n.reduce(function(e,t){return ste(e,Array.isArray(t)?jF(t):[t])},[])}function NB(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=em(e);return Promise.resolve(t)}function gte(n){return ah(this,void 0,void 0,function(){return lh(this,function(e){return[2,n.isDirectory?$F(n):vte(n)]})})}function $F(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return ah(o,void 0,void 0,function(){var l,c,u;return lh(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return c=f.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(gte)),i.push(u),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function vte(n){return ah(this,void 0,void 0,function(){return lh(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=em(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var yte=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function kB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function FB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kB(Object(t),!0).forEach(function(r){XF(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function XF(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UB(n,e){return Ste(n)||wte(n,e)||xte(n,e)||_te()}function _te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xte(n,e){if(n){if(typeof n=="string")return zB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zB(n,e)}}function zB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function wte(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Ste(n){if(Array.isArray(n))return n}var Ate="file-invalid-type",Ete="file-too-large",Mte="file-too-small",bte="too-many-files",Cte=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Ate,message:"File type must be ".concat(t)}},HB=function(e){return{code:Ete,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},GB=function(e){return{code:Mte,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Tte={code:bte,message:"Too many files"};function JF(n,e){var t=n.type==="application/x-moz-file"||yte(n,e);return[t,t?null:Cte(e)]}function KF(n,e,t){if(sd(n.size))if(sd(e)&&sd(t)){if(n.size>t)return[!1,HB(t)];if(n.size<e)return[!1,GB(e)]}else{if(sd(e)&&n.size<e)return[!1,GB(e)];if(sd(t)&&n.size>t)return[!1,HB(t)]}return[!0,null]}function sd(n){return n!=null}function Rte(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=JF(a,t),c=UB(l,1),u=c[0],f=KF(a,r,i),p=UB(f,1),m=p[0];return u&&m})}function $y(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function wv(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function VB(n){n.preventDefault()}function Pte(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Ite(n){return n.indexOf("Edge/")!==-1}function Bte(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Pte(n)||Ite(n)}function po(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!$y(r)&&a&&a.apply(void 0,[r].concat(s)),$y(r)})}}function Dte(){return"showOpenFilePicker"in window}function Lte(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return FB(FB({},e),{},XF({},t,[]))},{}):{}}]}function Ote(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Nte(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var kte=["children"],Fte=["open"],Ute=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zte=["refKey","onChange","onClick"];function Hte(n){return Wte(n)||Vte(n)||YF(n)||Gte()}function Gte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Wte(n){if(Array.isArray(n))return RA(n)}function oS(n,e){return Xte(n)||$te(n,e)||YF(n,e)||jte()}function jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YF(n,e){if(n){if(typeof n=="string")return RA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return RA(n,e)}}function RA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function $te(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Xte(n){if(Array.isArray(n))return n}function WB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function In(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(t),!0).forEach(function(r){PA(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xy(n,e){if(n==null)return{};var t=Jte(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Jte(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var pb=B.forwardRef(function(n,e){var t=n.children,r=Xy(n,kte),i=QF(r),s=i.open,o=Xy(i,Fte);return B.useImperativeHandle(e,function(){return{open:s}},[s]),ne.createElement(B.Fragment,null,t(In(In({},o),{},{open:s})))});pb.displayName="Dropzone";var qF={disabled:!1,getFilesFromEvent:cte,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};pb.defaultProps=qF;pb.propTypes={children:_n.func,accept:_n.oneOfType([_n.string,_n.arrayOf(_n.string)]),multiple:_n.bool,preventDropOnDocument:_n.bool,noClick:_n.bool,noKeyboard:_n.bool,noDrag:_n.bool,noDragEventsBubbling:_n.bool,minSize:_n.number,maxSize:_n.number,maxFiles:_n.number,disabled:_n.bool,getFilesFromEvent:_n.func,onFileDialogCancel:_n.func,onFileDialogOpen:_n.func,useFsAccessApi:_n.bool,onDragEnter:_n.func,onDragLeave:_n.func,onDragOver:_n.func,onDrop:_n.func,onDropAccepted:_n.func,onDropRejected:_n.func,validator:_n.func};var IA={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function QF(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=In(In({},qF),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,_=e.onFileDialogCancel,y=e.onFileDialogOpen,g=e.useFsAccessApi,w=e.preventDropOnDocument,S=e.noClick,E=e.noKeyboard,P=e.noDrag,b=e.noDragEventsBubbling,R=e.validator,L=B.useMemo(function(){return typeof y=="function"?y:jB},[y]),I=B.useMemo(function(){return typeof _=="function"?_:jB},[_]),C=B.useRef(null),O=B.useRef(null),V=B.useReducer(Kte,IA),$=oS(V,2),Q=$[0],ie=$[1],ee=Q.isFocused,fe=Q.isFileDialogActive,k=Q.draggedFiles,Y=B.useRef(typeof window<"u"&&window.isSecureContext&&g&&Dte()),Z=function(){!Y.current&&fe&&setTimeout(function(){if(O.current){var de=O.current.files;de.length||(ie({type:"closeDialog"}),I())}},300)};B.useEffect(function(){return window.addEventListener("focus",Z,!1),function(){window.removeEventListener("focus",Z,!1)}},[O,fe,I,Y]);var ae=B.useRef([]),ye=function(de){C.current&&C.current.contains(de.target)||(de.preventDefault(),ae.current=[])};B.useEffect(function(){return w&&(document.addEventListener("dragover",VB,!1),document.addEventListener("drop",ye,!1)),function(){w&&(document.removeEventListener("dragover",VB),document.removeEventListener("drop",ye))}},[C,w]);var Ue=B.useCallback(function(le){le.preventDefault(),le.persist(),Oe(le),ae.current=[].concat(Hte(ae.current),[le.target]),wv(le)&&Promise.resolve(i(le)).then(function(de){$y(le)&&!b||(ie({draggedFiles:de,isDragActive:!0,type:"setDraggedFiles"}),c&&c(le))})},[i,c,b]),he=B.useCallback(function(le){le.preventDefault(),le.persist(),Oe(le);var de=wv(le);if(de&&le.dataTransfer)try{le.dataTransfer.dropEffect="copy"}catch{}return de&&f&&f(le),!1},[f,b]),Te=B.useCallback(function(le){le.preventDefault(),le.persist(),Oe(le);var de=ae.current.filter(function(Qe){return C.current&&C.current.contains(Qe)}),Re=de.indexOf(le.target);Re!==-1&&de.splice(Re,1),ae.current=de,!(de.length>0)&&(ie({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),wv(le)&&u&&u(le))},[C,u,b]),Me=B.useCallback(function(le,de){var Re=[],Qe=[];le.forEach(function(ze){var Je=JF(ze,t),yt=oS(Je,2),Fe=yt[0],it=yt[1],Rt=KF(ze,o,s),pt=oS(Rt,2),He=pt[0],re=pt[1],be=R?R(ze):null;if(Fe&&He&&!be)Re.push(ze);else{var We=[it,re];be&&(We=We.concat(be)),Qe.push({file:ze,errors:We.filter(function(q){return q})})}}),(!a&&Re.length>1||a&&l>=1&&Re.length>l)&&(Re.forEach(function(ze){Qe.push({file:ze,errors:[Tte]})}),Re.splice(0)),ie({acceptedFiles:Re,fileRejections:Qe,type:"setFiles"}),p&&p(Re,Qe,de),Qe.length>0&&v&&v(Qe,de),Re.length>0&&m&&m(Re,de)},[ie,a,t,o,s,l,p,m,v,R]),Be=B.useCallback(function(le){le.preventDefault(),le.persist(),Oe(le),ae.current=[],wv(le)&&Promise.resolve(i(le)).then(function(de){$y(le)&&!b||Me(de,le)}),ie({type:"reset"})},[i,Me,b]),at=B.useCallback(function(){if(Y.current){ie({type:"openDialog"}),L();var le={multiple:a,types:Lte(t)};window.showOpenFilePicker(le).then(function(de){return i(de)}).then(function(de){Me(de,null),ie({type:"closeDialog"})}).catch(function(de){Ote(de)?(I(de),ie({type:"closeDialog"})):Nte(de)&&(Y.current=!1,O.current&&(O.current.value=null,O.current.click()))});return}O.current&&(ie({type:"openDialog"}),L(),O.current.value=null,O.current.click())},[ie,L,I,g,Me,t,a]),wt=B.useCallback(function(le){!C.current||!C.current.isEqualNode(le.target)||(le.key===" "||le.key==="Enter"||le.keyCode===32||le.keyCode===13)&&(le.preventDefault(),at())},[C,at]),mt=B.useCallback(function(){ie({type:"focus"})},[]),te=B.useCallback(function(){ie({type:"blur"})},[]),Ie=B.useCallback(function(){S||(Bte()?setTimeout(at,0):at())},[S,at]),Se=function(de){return r?null:de},Ne=function(de){return E?null:Se(de)},Le=function(de){return P?null:Se(de)},Oe=function(de){b&&de.stopPropagation()},qe=B.useMemo(function(){return function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=le.refKey,Re=de===void 0?"ref":de,Qe=le.role,ze=le.onKeyDown,Je=le.onFocus,yt=le.onBlur,Fe=le.onClick,it=le.onDragEnter,Rt=le.onDragOver,pt=le.onDragLeave,He=le.onDrop,re=Xy(le,Ute);return In(In(PA({onKeyDown:Ne(po(ze,wt)),onFocus:Ne(po(Je,mt)),onBlur:Ne(po(yt,te)),onClick:Se(po(Fe,Ie)),onDragEnter:Le(po(it,Ue)),onDragOver:Le(po(Rt,he)),onDragLeave:Le(po(pt,Te)),onDrop:Le(po(He,Be)),role:typeof Qe=="string"&&Qe!==""?Qe:"button"},Re,C),!r&&!E?{tabIndex:0}:{}),re)}},[C,wt,mt,te,Ie,Ue,he,Te,Be,E,P,r]),Ye=B.useCallback(function(le){le.stopPropagation()},[]),xt=B.useMemo(function(){return function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=le.refKey,Re=de===void 0?"ref":de,Qe=le.onChange,ze=le.onClick,Je=Xy(le,zte),yt=PA({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Se(po(Qe,Be)),onClick:Se(po(ze,Ye)),tabIndex:-1},Re,O);return In(In({},yt),Je)}},[O,t,a,Be,r]),J=k.length,U=J>0&&Rte({files:k,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),pe=J>0&&!U;return In(In({},Q),{},{isDragAccept:U,isDragReject:pe,isFocused:ee&&!r,getRootProps:qe,getInputProps:xt,rootRef:C,inputRef:O,open:Se(at)})}function Kte(n,e){switch(e.type){case"focus":return In(In({},n),{},{isFocused:!0});case"blur":return In(In({},n),{},{isFocused:!1});case"openDialog":return In(In({},IA),{},{isFileDialogActive:!0});case"closeDialog":return In(In({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return In(In({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return In(In({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return In({},IA);default:return n}}function jB(){}function Yte(n){let e;const t=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=u?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!f(p,v)){const _=p;c(p=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const qte=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),$B=qte?B.useEffect:B.useLayoutEffect;function Qte(n){const e=typeof n=="function"?Yte(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=B.useReducer(y=>y+1,0),o=e.getState(),a=B.useRef(o),l=B.useRef(r),c=B.useRef(i),u=B.useRef(!1),f=B.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(f.current,p)),$B(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=B.useRef(o);$B(()=>{const y=()=>{try{const w=e.getState(),S=l.current(w);c.current(f.current,S)||(a.current=w,f.current=S,s())}catch{u.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const _=m?p:f.current;return B.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const Zte=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());c=p=>{const m=o(p);if(!u(f,m)){const v=f;a(f=m,v)}},l!=null&&l.fireImmediately&&a(f,f)}return i(c)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ene=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var tne=ene;function XB(n){return tne(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var ZF=function(e){var t,r;return!(XB(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,XB(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var nne=ZF,mb=function(e){return nne(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var rne=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},ine=mb,sne=rne;function eU(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];BA(i)&&sne(i,one,n)}return n}function one(n,e){if(ane(e)){var t=this[e];BA(n)&&BA(t)?eU(t,n):this[e]=n}}function BA(n){return ine(n)&&!Array.isArray(n)}function ane(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var lne=eU;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var cne=function(n,e,t,r,i){if(!une(n)||!e)return n;if(e=Sv(e),t&&(e+="."+Sv(t)),r&&(e+="."+Sv(r)),i&&(e+="."+Sv(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function une(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Sv(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var fne=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(r[c]=o[c])}return r},hne=mb,dne=fne,pne=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");JB(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];gne(t)&&(t=vne(t)),JB(t)&&(mne(n,t),dne(n,t))}return n};function mne(n,e){for(var t in e)yne(e,t)&&(n[t]=e[t])}function gne(n){return n&&typeof n=="string"}function vne(n){var e={};for(var t in n)e[t]=n[t];return e}function JB(n){return n&&typeof n=="object"||hne(n)}function yne(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var _ne=pne,xne=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=_ne({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],c=r.sep,u=n.length,f=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<u;){var v=n[f],_=n[f+1],y={val:v,idx:f,arr:l,str:n};if(o.push(y),v==="\\"){y.val=Sne(r,n,f)===!0?v+_:_,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,f++;continue}if(s&&s[v]){a.push(v);var g=m(),w=f+1;if(n.indexOf(g,w+1)!==-1)for(;a.length&&w<u;){var S=n[++w];if(S==="\\"){S++;continue}if(i.indexOf(S)!==-1){w=DA(n,S,w+1);continue}if(g=m(),a.length&&n.indexOf(g,w+1)===-1)break;if(s[S]){a.push(S);continue}g===S&&a.pop()}if(p=w,p===-1){l[l.length-1]+=v;continue}v=n.slice(f,p+1),y.val=v,y.idx=f=p}if(i.indexOf(v)!==-1){if(p=DA(n,v,f+1),p===-1){l[l.length-1]+=v;continue}wne(v,r)===!0?v=n.slice(f,p+1):v=n.slice(f+1,p),y.val=v,y.idx=f=p}if(typeof t=="function"&&(t(y,o),v=y.val,f=y.idx),y.val===c&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function DA(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?DA(n,e,i+1):i}function wne(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function Sne(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Ane=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},KB=Ane,Ene=function(e){KB(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];KB(i)&&Mne(e,i)}return e};function Mne(n,e){for(var t in e)bne(e,t)&&(n[t]=e[t])}function bne(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Cne=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Tne=xne,Rne=Ene,YB=ZF,qB=Cne,Pne=function(n,e,t){if(!qB(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=Tne(e,{sep:".",brackets:!0}).filter(Ine),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){qB(o[a])||(o[a]={}),o=o[a];continue}YB(o[a])&&YB(t)?o[a]=Rne({},o[a],t):o[a]=t}return n};function Ine(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var aS=mb,QB=lne,Bne=cne,ZB=Pne,Dne=function(e,t,r){if(!aS(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return QB.apply(null,arguments);if(typeof r=="string")return ZB(e,t,r),e;var i=Bne(e,t);return aS(r)&&aS(i)&&(r=QB({},i,r)),ZB(e,t,r),e};const Lne=_l(Dne),gb=(...n)=>n.filter(Boolean).join(".");function One(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Nne(n,e){return Object.entries(uZ(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function kne(n,e){const t=B.useRef();return Sp(n,t.current)||(t.current=n),t.current}function tU(n,e){return B.useMemo(n,kne(e))}function Fne(n){const e=B.useRef(null),t=B.useRef(null),r=B.useRef(!0);return B.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),B.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const Une=n=>{const[e,t]=B.useState(n.getVisiblePaths());return B.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:J0});return()=>r()},[n]),e};function zne(n,e,t){return n.useStore(i=>{const s=Mt(Mt({},t),i.data);return Nne(s,e)},J0)}function nU(n=3){const e=B.useRef(null),t=B.useRef(null),[r,i]=B.useState(!1),s=B.useCallback(()=>i(!0),[]),o=B.useCallback(()=>i(!1),[]);return B.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}Xee([Jee]);const Hne={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Ci.extend({color:()=>n=>li(n).isValid()});const Gne=n=>Ci().color().test(n);function rU(n,{format:e,hasAlpha:t,isString:r}){const i=Hne[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?fZ(s,["a"]):s}const iU=(n,e)=>{const t=li(n);if(!t.isValid())throw Error("Invalid color");return rU(t,e)},Vne=(n,e)=>rU(li(n),Mt(Mt({},e),{},{isString:!0,format:"hex"})),Wne=({value:n})=>{const e=$ee(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:iU(n,i),settings:i}};var jne=Object.freeze({__proto__:null,schema:Gne,sanitize:iU,format:Vne,normalize:Wne});const $ne=Et("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Xne=Et("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Jne=Et("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function e2(n,e){return e!=="rgb"?li(n).toRgb():n}function Kne({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Qr(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:f,hide:p}=nU(),m=B.useRef(0),[v,_]=B.useState(()=>e2(n,o)),y=a?tte:rte,g=()=>{_(e2(n,o)),f(),i()},w=()=>{p(),s(),window.clearTimeout(m.current)},S=()=>{m.current=window.setTimeout(w,500)};return B.useEffect(()=>()=>window.clearTimeout(m.current),[]),ne.createElement(ne.Fragment,null,ne.createElement($ne,{ref:l,active:u,onClick:()=>g(),style:{color:e}}),u&&ne.createElement(ab,null,ne.createElement(MF,{onPointerUp:w}),ne.createElement(Jne,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:E=>E.buttons===0&&S()},ne.createElement(y,{color:v,onChange:r}))))}function Yne(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=Qr();return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,t),ne.createElement(Xne,null,ne.createElement(Kne,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),ne.createElement(ob,{value:e,onChange:r,onUpdate:i})))}var qne=Mt({component:Yne},jne);function Qne(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Qr();return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,n),ne.createElement(cb,{value:e,settings:r,onUpdate:t}))}var Zne=Mt({component:Qne},DF(["x","y","z"]));const ere=Et("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),tre=Et("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function nre({value:n,settings:e,onUpdate:t}){const r=B.useRef(),i=B.useRef(0),s=B.useRef(0),o=B.useRef(1),[a,l]=B.useState(!1),[c,u]=B.useState(!1),[f,p]=CF(),m=B.useRef(null),v=B.useRef(null);B.useLayoutEffect(()=>{if(a){const{top:V,left:$,width:Q,height:ie}=m.current.getBoundingClientRect();v.current.style.left=$+Q/2+"px",v.current.style.top=V+ie/2+"px"}},[a]);const{keys:[_,y],joystick:g}=e,w=g==="invertY"?1:-1,{[_]:{step:S},[y]:{step:E}}=e,P=la("sizes","joystickWidth"),b=la("sizes","joystickHeight"),R=parseFloat(P)*.8/2,L=parseFloat(b)*.8/2,I=B.useCallback(()=>{r.current||(u(!0),i.current&&p({x:i.current*R}),s.current&&p({y:s.current*-L}),r.current=window.setInterval(()=>{t(V=>{const $=S*i.current*o.current,Q=w*E*s.current*o.current;return Array.isArray(V)?{[_]:V[0]+$,[y]:V[1]+Q}:{[_]:V[_]+$,[y]:V[y]+Q}})},16))},[R,L,t,p,S,E,_,y,w]),C=B.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);B.useEffect(()=>{function V($){o.current=fF($)}return window.addEventListener("keydown",V),window.addEventListener("keyup",V),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",V),window.removeEventListener("keyup",V)}},[]);const O=Qp(({first:V,active:$,delta:[Q,ie],movement:[ee,fe]})=>{V&&l(!0);const k=yl(ee,-R,R),Y=yl(fe,-L,L);i.current=Math.abs(ee)>Math.abs(k)?Math.sign(ee-k):0,s.current=Math.abs(fe)>Math.abs(Y)?Math.sign(Y-fe):0;let Z=n[_],ae=n[y];$?(i.current||(Z+=Q*S*o.current,p({x:k})),s.current||(ae-=w*ie*E*o.current,p({y:Y})),i.current||s.current?I():C(),t({[_]:Z,[y]:ae})):(l(!1),i.current=0,s.current=0,p({x:0,y:0}),C())});return ne.createElement(ere,jn({ref:m},O()),a&&ne.createElement(ab,null,ne.createElement(tre,{ref:v,isOutOfBounds:c},ne.createElement("div",null),ne.createElement("span",{ref:f}))))}const rre=Et("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function ire(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Qr();return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,n),ne.createElement(rre,{withJoystick:!!r.joystick},r.joystick&&ne.createElement(nre,{value:e,settings:r,onUpdate:t}),ne.createElement(cb,{value:e,settings:r,onUpdate:t})))}const sre=["joystick"],sU=DF(["x","y"]),ore=n=>{let{joystick:e=!0}=n,t=mn(n,sre);const{value:r,settings:i}=sU.normalize(t);return{value:r,settings:Mt(Mt({},i),{},{joystick:e})}};var are=Mt(Mt({component:ire},sU),{},{normalize:ore});const lre=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},cre=(n,e)=>typeof e=="object"&&"image"in e,ure=({image:n})=>({value:n});var fre=Object.freeze({__proto__:null,sanitize:lre,schema:cre,normalize:ure});const hre=Et("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),dre=Et("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),pre=Et("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),mre=Et("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),gre=Et("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),vre=Et("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function yre(){const{label:n,value:e,onUpdate:t,disabled:r}=Qr(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=nU(),c=B.useCallback(v=>{v.length&&t(v[0])},[t]),u=B.useCallback(v=>{v.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:p,isDragAccept:m}=QF({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,n),ne.createElement(hre,null,ne.createElement(pre,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&ne.createElement(ab,null,ne.createElement(MF,{onPointerUp:l,style:{cursor:"pointer"}}),ne.createElement(mre,{ref:s,style:{backgroundImage:`url(${e})`}})),ne.createElement(dre,f({isDragAccept:m}),ne.createElement("input",p()),ne.createElement(gre,null,m?"drop image":"click or drop")),ne.createElement(vre,{onClick:u,disabled:!e})))}var _re=Mt({component:yre},fre);const t2=Ci().number(),xre=(n,e)=>Ci().array().length(2).every.number().test(n)&&Ci().schema({min:t2,max:t2}).test(e),Jy=n=>({min:n[0],max:n[1]}),oU=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?Jy(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=Mt(Mt({},s),i);return[yl(Number(o),e,Math.max(e,a)),yl(Number(a),Math.min(t,o),t)]},wre=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=BF(Jy(n),{min:r,max:r}),s=[e,t],o=Mt(Mt({},i),{},{bounds:s});return{value:oU(Jy(n),o,n),settings:o}};var Sre=Object.freeze({__proto__:null,schema:xre,format:Jy,sanitize:oU,normalize:wre});const Are=["value","bounds","onDrag"],Ere=["bounds"],Mre=Et("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function bre(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=mn(n,Are);const o=B.useRef(null),a=B.useRef(null),l=B.useRef(null),c=B.useRef(0),u=la("sizes","scrubberWidth"),f=Qp(({event:v,first:_,xy:[y],movement:[g],memo:w={}})=>{if(_){const{width:E,left:P}=o.current.getBoundingClientRect();c.current=E-parseFloat(u);const b=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;w.pos=Vy((y-P)/E,t,r);const R=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=R<0||R===0&&w.pos<=e.min?"min":"max",b&&(w.pos=e[w.key])}const S=w.pos+Vy(g/c.current,0,r-t);return i({[w.key]:ZZ(S,s[w.key])}),w}),p=`calc(${Gy(e.min,t,r)} * (100% - ${u} - 8px) + 4px)`,m=`calc(${1-Gy(e.max,t,r)} * (100% - ${u} - 8px) + 4px)`;return ne.createElement(RF,jn({ref:o},f()),ne.createElement(TF,null,ne.createElement(PF,{style:{left:p,right:m}})),ne.createElement(wA,{position:"left",ref:a,style:{left:p}}),ne.createElement(wA,{position:"right",ref:l,style:{right:m}}))}function Cre(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Qr(),i=mn(r,Ere);return ne.createElement(ne.Fragment,null,ne.createElement(Cs,{input:!0},ne.createElement(Zs,null,n),ne.createElement(Mre,null,ne.createElement(bre,jn({value:e},r,{onDrag:t})),ne.createElement(cb,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var Tre=Mt({component:Cre},Sre);const Rre=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},Pre=["type","value"],Ire=["onChange","transient","onEditStart","onEditEnd"],Bre=function(){const e=Qte(Zte(()=>({data:{}}))),t=Rre();this.storeId=cZ(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([u,f])=>{f.render&&a.some(p=>p.indexOf(u)===0)&&!f.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(f=>u.indexOf(f)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in js&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{let p=c[u];if(p){const{type:m,value:v}=f,_=mn(f,Pre);m!==p.type?ta(Bn.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,_),p.__refCount++)}else c[u]=Mt(Mt({},f),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return EB(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=Mt(Mt({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{try{EB(c[u],f,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{ta(Bn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Mt(Mt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Mt(Mt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,f])=>{if(u==="")return ta(Bn.EMPTY_KEY);let p=gb(a,u);if(f.type===js.FOLDER){const m=s(f.schema,p,l);Object.assign(c,m),p in r||(r[p]=f.settings)}else if(u in l)ta(Bn.DUPLICATE_KEYS,u,p,l[u].path);else{const m=vZ(f,u,p,c);if(m){const{type:v,options:_,input:y}=m,{onChange:g,transient:w,onEditStart:S,onEditEnd:E}=_,P=mn(_,Ire);c[p]=Mt(Mt(Mt({type:v},P),y),{},{fromPanel:!0}),l[u]={path:p,onChange:g,transient:w,onEditStart:S,onEditEnd:E}}else ta(Bn.UNKNOWN_INPUT,p,f)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},aU=new Bre,Dre={collapsed:!1};function Lre(n,e){return{type:js.FOLDER,schema:n,settings:Mt(Mt({},Dre),e)}}const n2=n=>"__levaInput"in n,Ore=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=One(i);(!r||s.toLowerCase().indexOf(r)>-1)&&Lne(t,o,{[s]:{__levaInput:!0,path:i}})}),t},Nre=["type","label","path","valueKey","value","settings","setValue","disabled"];function kre(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,c=mn(n,Nre);const{displayValue:u,onChange:f,onUpdate:p}=bF({type:e,value:s,settings:o,setValue:a}),m=Vc[e].component;return m?ne.createElement(gF.Provider,{value:Mt({key:i,path:r,id:""+r,label:t,displayValue:u,value:s,onChange:f,onUpdate:p,settings:o,setValue:a,disabled:l},c)},ne.createElement(kZ,{disabled:l},ne.createElement(m,null))):(ta(Bn.NO_COMPONENT_FOR_TYPE,e,r),null)}const Fre=Et("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Ure({onClick:n,settings:e,label:t}){const r=qp();return ne.createElement(Cs,null,ne.createElement(Fre,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const zre=Et("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Hre=Et("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Gre=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function Vre(n){const{label:e,opts:t}=Gre(n),r=qp();return ne.createElement(Cs,{input:!!e},e&&ne.createElement(Zs,null,e),ne.createElement(zre,null,Object.entries(t).map(([i,s])=>ne.createElement(Hre,{key:i,onClick:()=>s(r.get)},i))))}const Wre=Et("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),lU=100;function jre(n,e){n.push(e),n.length>lU&&n.shift()}const $re=B.forwardRef(function({initialValue:n},e){const t=la("colors","highlight3"),r=la("colors","elevation2"),i=la("colors","highlight1"),[s,o]=B.useMemo(()=>[li(i).alpha(.4).toRgbString(),li(i).alpha(.1).toRgbString()],[i]),a=B.useRef([n]),l=B.useRef(n),c=B.useRef(n),u=B.useRef(),f=B.useCallback((v,_)=>{if(!v)return;const{width:y,height:g}=v,w=new Path2D,S=y/lU,E=g*.05;for(let R=0;R<a.current.length;R++){const L=Gy(a.current[R],l.current,c.current),I=S*R,C=g-L*(g-E*2)-E;w.lineTo(I,C)}_.clearRect(0,0,y,g);const P=new Path2D(w);P.lineTo(S*(a.current.length+1),g),P.lineTo(0,g),P.lineTo(0,0);const b=_.createLinearGradient(0,0,0,g);b.addColorStop(0,s),b.addColorStop(1,o),_.fillStyle=b,_.fill(P),_.strokeStyle=r,_.lineJoin="round",_.lineWidth=14,_.stroke(w),_.strokeStyle=t,_.lineWidth=2,_.stroke(w)},[t,r,s,o]),[p,m]=$Z(f);return B.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(c.current===void 0||v>c.current)&&(c.current=v),jre(a.current,v),u.current=requestAnimationFrame(()=>f(p.current,m.current))}}),[p,m,f]),B.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),ne.createElement(Wre,{ref:p})}),r2=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),Xre=B.forwardRef(function({initialValue:n},e){const[t,r]=B.useState(r2(n));return B.useImperativeHandle(e,()=>({frame:i=>r(r2(i))}),[]),ne.createElement("div",null,t)});function i2(n){return typeof n=="function"?n():n.current}function Jre({label:n,objectOrFn:e,settings:t}){const r=B.useRef(),i=B.useRef(i2(e));return B.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(i2(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),ne.createElement(Cs,{input:!0},ne.createElement(Zs,{align:"top"},n),t.graph?ne.createElement($re,{ref:r,initialValue:i.current}):ne.createElement(Xre,{ref:r,initialValue:i.current}))}const Kre=["type","label","key"],Yre={[js.BUTTON]:Ure,[js.BUTTON_GROUP]:Vre,[js.MONITOR]:Jre},qre=ne.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=JZ(n);if(!e)return null;const{type:l,label:c,key:u}=e,f=mn(e,Kre);if(l in js){const p=Yre[l];return ne.createElement(p,jn({label:c,path:n},f))}return l in Vc?ne.createElement(kre,jn({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(tZ(Bn.UNSUPPORTED_INPUT,l,n),null)});function Qre({toggle:n,toggled:e,name:t}){return ne.createElement(LZ,{onClick:()=>n()},ne.createElement(lb,{toggled:e}),ne.createElement("div",null,t))}const Zre=({name:n,path:e,tree:t})=>{const r=qp(),i=gb(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=B.useState(!s),c=B.useRef(null),u=la("colors","folderWidgetColor"),f=la("colors","folderTextColor");return B.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,u,f]),ne.createElement(Wy,{ref:c},ne.createElement(Qre,{name:n,toggled:a,toggle:()=>l(p=>!p)}),ne.createElement(cU,{parent:i,tree:t,toggled:a}))},cU=ne.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=Fne(s),l=qp(),c=([f,p])=>{var m;return(n2(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(gb(r,f)).order)||0},u=Object.entries(i).sort((f,p)=>c(f)-c(p));return ne.createElement(_A,{ref:o,isRoot:n,fill:e,flat:t},ne.createElement(SF,{ref:a,isRoot:n,toggled:s},u.map(([f,p])=>n2(p)?ne.createElement(qre,{key:p.path,valueKey:p.valueKey,path:p.path}):ne.createElement(Zre,{key:f,name:f,path:r,tree:p}))))}),eie=Et("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${EF}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),uU=40,Ky=Et("i",{$flexCenter:"",width:uU,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),tie=Et("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),nie=Et("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Ky}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),rie=Et("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),iie=Et("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:uU}}}}),sie=ne.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=B.useState(""),s=B.useMemo(()=>uF(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return B.useEffect(()=>{s(r)},[r,s]),ne.createElement(ne.Fragment,null,ne.createElement(rie,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),ne.createElement(Ky,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function oie({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,f]=B.useState(!1),p=B.useRef(null);B.useEffect(()=>{var v,_;u?(v=p.current)===null||v===void 0||v.focus():(_=p.current)===null||_===void 0||_.blur()},[u]);const m=Qp(({offset:[v,_],first:y,last:g})=>{e({x:v,y:_}),y&&t({x:v,y:_}),g&&r({x:v,y:_})},{filterTaps:!0,from:({offset:[v,_]})=>[(c==null?void 0:c.x)||v,(c==null?void 0:c.y)||_]});return B.useEffect(()=>{const v=_=>{_.key==="L"&&_.shiftKey&&_.metaKey&&f(y=>!y)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),ne.createElement(ne.Fragment,null,ne.createElement(tie,{mode:a?"drag":void 0},ne.createElement(Ky,{active:!s,onClick:()=>i()},ne.createElement(lb,{toggled:s,width:12,height:8})),ne.createElement(iie,jn({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?ne.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},ne.createElement("circle",{cx:"2",cy:"2",r:"2"}),ne.createElement("circle",{cx:"14",cy:"2",r:"2"}),ne.createElement("circle",{cx:"26",cy:"2",r:"2"}),ne.createElement("circle",{cx:"2",cy:"12",r:"2"}),ne.createElement("circle",{cx:"14",cy:"12",r:"2"}),ne.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&ne.createElement(Ky,{active:u,onClick:()=>f(v=>!v)},ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},ne.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),ne.createElement(nie,{toggled:u},ne.createElement(sie,{ref:p,setFilter:n,toggle:i})))}const aie=["store","hidden","theme","collapsed"];function lie(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=mn(n,aie);const o=tU(()=>TZ(r),[r]),[a,l]=B.useState(!i),c=typeof i=="object"?!i.collapsed:a,u=B.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||t?null:ne.createElement(sb.Provider,{value:o},ne.createElement(cie,jn({store:e},s,{toggled:c,setToggle:u,rootClass:o.className})))}const cie=ne.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,f;const p=Une(n),[m,v]=B.useState(""),_=B.useMemo(()=>Ore(p,m),[p,m]),[y,g]=CF(),w=i||p.length>0,S=typeof o=="object"&&o.title||void 0,E=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,P=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,b=typeof o=="object"&&o.position||void 0,R=typeof o=="object"&&o.onDrag||void 0,L=typeof o=="object"&&o.onDragStart||void 0,I=typeof o=="object"&&o.onDragEnd||void 0;return ne.useEffect(()=>{g({x:b==null?void 0:b.x,y:b==null?void 0:b.y})},[b,g]),CZ(),ne.createElement(yF.Provider,{value:{hideCopyButton:a}},ne.createElement(eie,{ref:y,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:w?"block":"none"}},o&&ne.createElement(oie,{onDrag:C=>{g(C),R==null||R(C)},onDragStart:C=>L==null?void 0:L(C),onDragEnd:C=>I==null?void 0:I(C),setFilter:v,toggle:C=>c(O=>C??!O),toggled:l,title:S,drag:E,filterEnabled:P,from:b}),w&&ne.createElement(vF.Provider,{value:n},ne.createElement(cU,{isRoot:!0,fill:t,flat:r,tree:_,toggled:l}))))}),uie=["isRoot"];let Yy=!1,_c=null;function fie(n){let{isRoot:e=!1}=n,t=mn(n,uie);return B.useEffect(()=>(Yy=!0,!e&&_c&&(_c.remove(),_c=null),()=>{e||(Yy=!1)}),[e]),ne.createElement(lie,jn({store:aU},t))}function hie(n){B.useEffect(()=>{n&&!Yy&&(_c||(_c=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(_c),_Z(ne.createElement(fie,{isRoot:!0}),_c))),Yy=!0)},[n])}function die(n,e,t,r,i){let s,o,a,l,c;return typeof n=="string"?(o=n,s=e,Array.isArray(t)&&(c=t)):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function pie(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=die(n,e,t),u=typeof o=="function",f=B.useRef(!1),p=B.useRef(!0),m=tU(()=>{f.current=!0;const O=typeof o=="function"?o():o;return s?{[s]:Lre(O,a)}:O},c),v=!(l!=null&&l.store);hie(v);const[_]=B.useState(()=>(l==null?void 0:l.store)||aU),[y,g]=B.useMemo(()=>_.getDataFromSchema(m),[_,m]),[w,S,E,P,b]=B.useMemo(()=>{const O=[],V=[],$={},Q={},ie={};return Object.values(g).forEach(({path:ee,onChange:fe,onEditStart:k,onEditEnd:Y,transient:Z})=>{O.push(ee),fe?($[ee]=fe,Z||V.push(ee)):V.push(ee),k&&(Q[ee]=k),Y&&(ie[ee]=Y)}),[O,V,$,Q,ie]},[g]),R=B.useMemo(()=>_.orderPaths(w),[w,_]),L=zne(_,S,y),I=B.useCallback(O=>{const V=Object.entries(O).reduce(($,[Q,ie])=>Object.assign($,{[g[Q].path]:ie}),{});_.set(V,!1)},[_,g]),C=B.useCallback(O=>_.get(g[O].path),[_,g]);return B.useEffect(()=>{const O=!p.current&&f.current;return _.addData(y,O),p.current=!1,f.current=!1,()=>_.disposePaths(R)},[_,R,y]),B.useEffect(()=>{const O=[];return Object.entries(E).forEach(([V,$])=>{$(_.get(V),V,Mt({initial:!0,get:_.get},_.getInput(V)));const Q=_.useStore.subscribe(ie=>{const ee=ie.data[V];return[ee.disabled?void 0:ee.value,ee]},([ie,ee])=>$(ie,V,Mt({initial:!1,get:_.get},ee)),{equalityFn:J0});O.push(Q)}),()=>O.forEach(V=>V())},[_,E]),B.useEffect(()=>{const O=[];return Object.entries(P).forEach(([V,$])=>O.push(_.subscribeToEditStart(V,$))),Object.entries(b).forEach(([V,$])=>O.push(_.subscribeToEditEnd(V,$))),()=>O.forEach(V=>V())},[P,b,_]),u?[L,I,C]:L}ya(Ks.SELECT,fee);ya(Ks.IMAGE,_re);ya(Ks.NUMBER,tee);ya(Ks.COLOR,qne);ya(Ks.STRING,xee);ya(Ks.BOOLEAN,Cee);ya(Ks.INTERVAL,Tre);ya(Ks.VECTOR3D,Zne);ya(Ks.VECTOR2D,are);const Kv={"Type To Sit":"/animations/Type To Sit.fbx",Typing:"/animations/Typing.fbx",Victory:"/animations/Victory.fbx","Wave Hip Hop Dance":"/animations/Wave Hip Hop Dance.fbx",Waving:"/animations/Waving.fbx","Asking Question":"/animations/Asking Question.fbx","Having A Meeting":"/animations/Having A Meeting.fbx","Hip Hop Dancing":"/animations/Hip Hop Dancing.fbx",Idle:"/animations/Idle.fbx","Seated Idle":"/animations/Seated Idle.fbx","Sit To Stand":"/animations/Sit To Stand.fbx","Sit To Type":"/animations/Sit To Type.fbx","Sitting Clap":"/animations/Sitting Clap.fbx","Sitting Disapproval":"/animations/Sitting Disapproval.fbx","Sitting Idle":"/animations/Sitting Idle.fbx","Sitting Talking":"/animations/Sitting Talking.fbx","Sitting Thumbs Up":"/animations/Sitting Thumbs Up.fbx","Sitting Victory":"/animations/Sitting Victory.fbx","Stand To Sit":"/animations/Stand To Sit.fbx","Standing Greeting":"/animations/Standing Greeting.fbx"},s2=["Sitting Talking","Sitting Idle","Having A Meeting"];Object.values(Kv).forEach(n=>{wp.preload(n)});const Ql={0:"viseme_sil",1:"viseme_PP",2:"viseme_aa",3:"viseme_aa",4:"viseme_E",5:"viseme_RR",6:"viseme_I",7:"viseme_U",8:"viseme_O",9:"viseme_aa",10:"viseme_O",11:"viseme_I",12:"viseme_sil",13:"viseme_RR",14:"viseme_nn",15:"viseme_SS",16:"viseme_CH",17:"viseme_TH",18:"viseme_FF",19:"viseme_DD",20:"viseme_kk",21:"viseme_PP"};function mie(n){const{playAudio:e,headFollow:t,smoothMorphTarget:r,morphTargetSmoothing:i,animationName:s}=pie({playAudio:!0,headFollow:!0,smoothMorphTarget:!0,morphTargetSmoothing:.5,animationName:{value:"Sitting Talking",options:Object.keys(Kv)}});let o=B.useMemo(()=>{let g=n.response.speechData.audioFilePath;return g||(g=""),g=g.replace(/\\/g,"/"),g=g.split("/").pop(),g=`/temp/audio/${g}`,console.log("Received response: ",n.response.response),new Audio(g)},[n.response]),a=B.useMemo(()=>{let g=n.response.speechData.visemes;return g||[]},[n.response]);Ff(()=>{let g=o.currentTime;if(o.paused||o.ended){p("Sitting Idle");return}Object.values(Ql).forEach(w=>{r?(l.Wolf3D_Head.morphTargetInfluences[l.Wolf3D_Head.morphTargetDictionary[w]]=Jr.lerp(l.Wolf3D_Head.morphTargetInfluences[l.Wolf3D_Head.morphTargetDictionary[w]],0,i),l.Wolf3D_Teeth.morphTargetInfluences[l.Wolf3D_Teeth.morphTargetDictionary[w]]=Jr.lerp(l.Wolf3D_Teeth.morphTargetInfluences[l.Wolf3D_Teeth.morphTargetDictionary[w]],0,i)):(l.Wolf3D_Head.morphTargetInfluences[l.Wolf3D_Head.morphTargetDictionary[w]]=0,l.Wolf3D_Teeth.morphTargetInfluences[l.Wolf3D_Teeth.morphTargetDictionary[w]]=0)});for(let w=0;w<a.length;w++){let S=a[w].visemeId,E=a[w].audioOffset/1e3,P=a[w+1]?a[w+1].audioOffset/1e3:0;if(g>=E&&g<P){r?(l.Wolf3D_Head.morphTargetInfluences[l.Wolf3D_Head.morphTargetDictionary[Ql[S]]]=Jr.lerp(l.Wolf3D_Head.morphTargetInfluences[l.Wolf3D_Head.morphTargetDictionary[Ql[S]]],1,i),l.Wolf3D_Teeth.morphTargetInfluences[l.Wolf3D_Teeth.morphTargetDictionary[Ql[S]]]=Jr.lerp(l.Wolf3D_Teeth.morphTargetInfluences[l.Wolf3D_Teeth.morphTargetDictionary[Ql[S]]],1,i)):(l.Wolf3D_Head.morphTargetInfluences[l.Wolf3D_Head.morphTargetDictionary[Ql[S]]]=1,l.Wolf3D_Teeth.morphTargetInfluences[l.Wolf3D_Teeth.morphTargetDictionary[Ql[S]]]=1),Math.random()<.1&&(l.EyeLeft.morphTargetInfluences[l.EyeLeft.morphTargetDictionary.blink]=1,l.EyeRight.morphTargetInfluences[l.EyeRight.morphTargetDictionary.blink]=1);break}}},[o]);const{nodes:l,materials:c}=Qs("/models/6505ad3b7a4b5e00b4da04e8.glb"),{animations:u}=wp("/animations/Sitting Idle.fbx"),[f,p]=B.useState("Sitting Idle");u[0].name="Sitting Idle";const m=B.useRef();let v=Object.values(Kv),_=[];for(let g=0;g<v.length;g++){let{animations:w}=wp(v[g]);w[0].name=Object.keys(Kv)[g],_.push(w[0])}const{actions:y}=ZK([u[0],..._],m);return B.useEffect(()=>{l.Wolf3D_Head.morphTargetInfluences[l.Wolf3D_Head.morphTargetDictionary.viseme_I]=1,l.Wolf3D_Teeth.morphTargetInfluences[l.Wolf3D_Teeth.morphTargetDictionary.viseme_I]=1,e?(console.log("play",o),o.play(),p(s2[Math.floor(Math.random()*s2.length)])):(p("Sitting Idle"),o.pause())},[n.response,o,e]),B.useEffect(()=>{if(y[f])return y[f].reset().fadeIn(.5).play(),()=>y[f].fadeOut(.5);console.error(`Animation "${f}" not found.`)},[f]),Ff(g=>{t&&m.current.getObjectByName("Head").lookAt(g.camera.position)}),F.jsxs("group",{...n,dispose:null,ref:m,children:[F.jsx("primitive",{object:l.Hips}),F.jsx("skinnedMesh",{geometry:l.Wolf3D_Body.geometry,material:c.Wolf3D_Body,skeleton:l.Wolf3D_Body.skeleton}),F.jsx("skinnedMesh",{geometry:l.Wolf3D_Outfit_Bottom.geometry,material:c.Wolf3D_Outfit_Bottom,skeleton:l.Wolf3D_Outfit_Bottom.skeleton}),F.jsx("skinnedMesh",{geometry:l.Wolf3D_Outfit_Footwear.geometry,material:new sl({color:new Xe(0)}),skeleton:l.Wolf3D_Outfit_Footwear.skeleton}),F.jsx("skinnedMesh",{geometry:l.Wolf3D_Outfit_Top.geometry,material:new sl({color:new Xe("#18F3E9")}),skeleton:l.Wolf3D_Outfit_Top.skeleton}),F.jsx("skinnedMesh",{geometry:l.Wolf3D_Hair.geometry,material:new sl({color:new Xe(0)}),skeleton:l.Wolf3D_Hair.skeleton}),F.jsx("skinnedMesh",{name:"EyeLeft",geometry:l.EyeLeft.geometry,material:c.Wolf3D_Eye,skeleton:l.EyeLeft.skeleton,morphTargetDictionary:l.EyeLeft.morphTargetDictionary,morphTargetInfluences:l.EyeLeft.morphTargetInfluences}),F.jsx("skinnedMesh",{name:"EyeRight",geometry:l.EyeRight.geometry,material:c.Wolf3D_Eye,skeleton:l.EyeRight.skeleton,morphTargetDictionary:l.EyeRight.morphTargetDictionary,morphTargetInfluences:l.EyeRight.morphTargetInfluences}),F.jsx("skinnedMesh",{name:"Wolf3D_Head",geometry:l.Wolf3D_Head.geometry,material:c.Wolf3D_Skin,skeleton:l.Wolf3D_Head.skeleton,morphTargetDictionary:l.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:l.Wolf3D_Head.morphTargetInfluences}),F.jsx("skinnedMesh",{name:"Wolf3D_Teeth",geometry:l.Wolf3D_Teeth.geometry,material:c.Wolf3D_Teeth,skeleton:l.Wolf3D_Teeth.skeleton,morphTargetDictionary:l.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:l.Wolf3D_Teeth.morphTargetInfluences})]})}Qs.preload("/models/6505ad3b7a4b5e00b4da04e8.glb");function gie(n){const{nodes:e,materials:t}=Qs("/models/office_chair.glb");return F.jsx("group",{...n,dispose:null,children:F.jsx("group",{position:[-.005,0,.002],rotation:[-Math.PI/2,0,0],scale:.967,children:F.jsx("group",{rotation:[Math.PI/2,0,0],children:F.jsxs("group",{scale:.01,children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Leg_LP4_lambert1_0.geometry,material:t.lambert1,position:[-3.462,0,10.655],rotation:[-Math.PI,Math.PI/5,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Leg_LP1_lambert1_0.geometry,material:t.lambert1}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Wheel_LP_lambert1_0.geometry,material:t.lambert1,position:[-58.139,0,48.659],rotation:[-Math.PI,.114,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pCylinder25_lambert1_0.geometry,material:t.lambert1,position:[-58.139,0,48.659],rotation:[-Math.PI,.114,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ChairBack_LP_lambert1_0.geometry,material:t.lambert1}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ChairSeat_LP4_lambert1_0.geometry,material:t.lambert1}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pCylinder26_lambert1_0.geometry,material:t.lambert1,position:[31.27,0,-31.948],rotation:[0,.895,0]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Wheel_LP1_lambert1_0.geometry,material:t.lambert1,position:[31.27,0,-31.948],rotation:[0,.895,0]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Leg_LP5_lambert1_0.geometry,material:t.lambert1,position:[-5.602,0,4.07],rotation:[0,1.257,0]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Underside_LP_lambert1_0.geometry,material:t.lambert1}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pCube38_lambert1_0.geometry,material:t.lambert1}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Wheel_LP2_lambert1_0.geometry,material:t.lambert1,position:[-3.632,0,3.211],rotation:[0,1.2,0]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pCylinder27_lambert1_0.geometry,material:t.lambert1,position:[-3.632,0,3.211],rotation:[0,1.2,0]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pCube37_lambert1_0.geometry,material:t.lambert1,position:[-33.983,64.178,-14.779],scale:[.061,.036,.062]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pCylinder28_lambert1_0.geometry,material:t.lambert1,position:[-26.088,0,-16.813],rotation:[-Math.PI,.492,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Wheel_LP3_lambert1_0.geometry,material:t.lambert1,position:[-26.088,0,-16.813],rotation:[-Math.PI,.492,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Leg_LP3_lambert1_0.geometry,material:t.lambert1,position:[3.463,0,10.655],rotation:[-Math.PI,-Math.PI/5,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pCylinder29_lambert1_0.geometry,material:t.lambert1,position:[-64.369,0,-4.511],rotation:[-Math.PI,.495,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Wheel_LP4_lambert1_0.geometry,material:t.lambert1,position:[-64.369,0,-4.511],rotation:[-Math.PI,.495,-Math.PI]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Leg_LP2_lambert1_0.geometry,material:t.lambert1,position:[5.602,0,4.07],rotation:[0,-1.257,0]})]})})})})}Qs.preload("/models/office_chair.glb");function vie(n){const{nodes:e,materials:t}=Qs("/models/low_poly_gaming_desk.glb");return F.jsx("group",{...n,dispose:null,children:F.jsx("group",{rotation:[-Math.PI/2,0,3.5],scale:.315,children:F.jsxs("group",{rotation:[Math.PI/2,0,0],children:[F.jsxs("group",{position:[-1.145,-2.841,-1.506],scale:[1,1,.876],children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_4.geometry,material:t["Material.003"]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_5.geometry,material:t.Plastic})]}),F.jsxs("group",{position:[-.913,.552,-1.553],scale:[.523,.1,.339],children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_7.geometry,material:t[7355608]}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_8.geometry,material:t.black}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_9.geometry,material:t.blue_light})]}),F.jsxs("group",{position:[-.899,.474,-.429],rotation:[0,0,-Math.PI],scale:[-1.405,.024,.421],children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_11.geometry,material:t.blue_light}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_12.geometry,material:t.black})]}),F.jsxs("group",{position:[.793,.465,-.781],scale:[.114,.107,.204],children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_14.geometry,material:t.black}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_15.geometry,material:t.blue_light})]}),F.jsxs("group",{position:[-2.962,1.463,-1.59],scale:[.438,1,1.09],children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_17.geometry,material:t.black}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_18.geometry,material:t.blue_light}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_19.geometry,material:t.Plastic})]}),F.jsxs("group",{position:[.888,1.043,-1.684],rotation:[-1.702,0,Math.PI/2],scale:[-.235,.037,.235],children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_21.geometry,material:t.black}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_22.geometry,material:t.blue})]}),F.jsxs("group",{position:[.71,.474,-.754],scale:.576,children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_24.geometry,material:t.Plastic}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_25.geometry,material:t.blue_light})]})]})})})}Qs.preload("/low_poly_gaming_desk.glb");function yie(n){const{nodes:e,materials:t}=Qs("/models/minimalistic_modern_office.glb");return F.jsx("group",{...n,dispose:null,children:F.jsx("group",{rotation:[-Math.PI/2,0,4],scale:.2,children:F.jsx("group",{rotation:[Math.PI/2,1,0],scale:.01,children:F.jsxs("group",{rotation:[-Math.PI/2,Math.PI/2,0],scale:[310,1130,310],children:[F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Minimalistic_Modern_Office_Glass_0.geometry,material:t.Glass}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Minimalistic_Modern_Office_Structure_0.geometry,material:t.Structure}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Minimalistic_Modern_Office_Plants_0.geometry,material:t.Plants}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Minimalistic_Modern_Office_Plants_0_1.geometry,material:t.Plants}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Minimalistic_Modern_Office_Lights_0.geometry,material:t.Lights}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Minimalistic_Modern_Office_LightEmission_0.geometry,material:t.LightEmission}),F.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Carpet_Carpet_0.geometry,material:t.Carpet,position:[1.001,0,2.439],rotation:[0,-Math.PI/2,0],scale:[1.39,.463,1.39]})]})})})})}Qs.preload("/minimalistic_modern_office.glb");const _ie=({response:n})=>{const e=B.useRef(),t=WM("textures/home.jpg"),r=ci(p=>p.viewport),i=r.width*3.5,s=r.height*3,o={avatarPosition:[-2,-2,2],avatarScale:1,deskPosition:[-2,-2,2],deskScale:1,tablePosition:[-2,-1.5,2],tableScale:1,roomPosition:[-2.5,-1.2,1],roomScale:1},a={avatarPosition:[-.8,-2.3,6],avatarScale:1.7,deskPosition:[-.9,-2.5,5],deskScale:2,tablePosition:[-.8,-1.5,6],tableScale:1.4,roomPosition:[-.9,-1.2,3],roomScale:1.8},[l,c]=B.useState(o),[u,f]=B.useState(0);return B.useEffect(()=>{let _;const y=g=>{_||(_=g);const w=g-_;if(w>=3e3){const S=Math.min((w-3e3)/8e3,1);f(S)}w<11e3&&requestAnimationFrame(y)};requestAnimationFrame(y)},[]),Ff(()=>{const p=(m,v,_)=>Array.isArray(m)?m.map((y,g)=>y+(v[g]-y)*_):m+(v-m)*_;c({avatarPosition:p(o.avatarPosition,a.avatarPosition,u),avatarScale:p(o.avatarScale,a.avatarScale,u),deskPosition:p(o.deskPosition,a.deskPosition,u),deskScale:p(o.deskScale,a.deskScale,u),tablePosition:p(o.tablePosition,a.tablePosition,u),tableScale:p(o.tableScale,a.tableScale,u),roomPosition:p(o.roomPosition,a.roomPosition,u),roomScale:p(o.roomScale,a.roomScale,u)})}),F.jsxs(F.Fragment,{children:[F.jsx(YK,{enableZoom:!1,minPolarAngle:Math.PI/2,maxPolarAngle:Math.PI/1.9,minAzimuthAngle:-Math.PI/8,maxAzimuthAngle:Math.PI/8,target:[0,-.9,9],ref:e}),F.jsx(mie,{position:l.avatarPosition,scale:l.avatarScale,response:n}),F.jsx(gie,{position:l.deskPosition,scale:l.deskScale}),F.jsx(vie,{position:l.tablePosition,scale:l.tableScale}),F.jsx(yie,{position:l.roomPosition,scale:l.roomScale}),F.jsx(xY,{preset:"sunset"}),F.jsxs("mesh",{children:[F.jsx("planeGeometry",{args:[i,s]}),F.jsx("meshBasicMaterial",{map:t})]})]})},Bo=Object.create(null);Bo.open="0";Bo.close="1";Bo.ping="2";Bo.pong="3";Bo.message="4";Bo.upgrade="5";Bo.noop="6";const Yv=Object.create(null);Object.keys(Bo).forEach(n=>{Yv[Bo[n]]=n});const LA={type:"error",data:"parser error"},fU=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",hU=typeof ArrayBuffer=="function",dU=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,vb=({type:n,data:e},t,r)=>fU&&e instanceof Blob?t?r(e):o2(e,r):hU&&(e instanceof ArrayBuffer||dU(e))?t?r(e):o2(new Blob([e]),r):r(Bo[n]+(e||"")),o2=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function a2(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let lS;function xie(n,e){if(fU&&n.data instanceof Blob)return n.data.arrayBuffer().then(a2).then(e);if(hU&&(n.data instanceof ArrayBuffer||dU(n.data)))return e(a2(n.data));vb(n,!1,t=>{lS||(lS=new TextEncoder),e(lS.encode(t))})}const l2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<l2.length;n++)yd[l2.charCodeAt(n)]=n;const wie=n=>{let e=n.length*.75,t=n.length,r,i=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<t;r+=4)s=yd[n.charCodeAt(r)],o=yd[n.charCodeAt(r+1)],a=yd[n.charCodeAt(r+2)],l=yd[n.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},Sie=typeof ArrayBuffer=="function",yb=(n,e)=>{if(typeof n!="string")return{type:"message",data:pU(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Aie(n.substring(1),e)}:Yv[t]?n.length>1?{type:Yv[t],data:n.substring(1)}:{type:Yv[t]}:LA},Aie=(n,e)=>{if(Sie){const t=wie(n);return pU(t,e)}else return{base64:!0,data:n}},pU=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},mU="",Eie=(n,e)=>{const t=n.length,r=new Array(t);let i=0;n.forEach((s,o)=>{vb(s,!1,a=>{r[o]=a,++i===t&&e(r.join(mU))})})},Mie=(n,e)=>{const t=n.split(mU),r=[];for(let i=0;i<t.length;i++){const s=yb(t[i],e);if(r.push(s),s.type==="error")break}return r};function bie(){return new TransformStream({transform(n,e){xie(n,t=>{const r=t.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let cS;function Av(n){return n.reduce((e,t)=>e+t.length,0)}function Ev(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)t[i]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function Cie(n,e){cS||(cS=new TextDecoder);const t=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(r===0){if(Av(t)<1)break;const l=Ev(t,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Av(t)<2)break;const l=Ev(t,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Av(t)<8)break;const l=Ev(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(LA);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Av(t)<i)break;const l=Ev(t,i);a.enqueue(yb(s?l:cS.decode(l),e)),r=0}if(i===0||i>n){a.enqueue(LA);break}}}})}const gU=4;function ar(n){if(n)return Tie(n)}function Tie(n){for(var e in ar.prototype)n[e]=ar.prototype[e];return n}ar.prototype.on=ar.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};ar.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};ar.prototype.off=ar.prototype.removeListener=ar.prototype.removeAllListeners=ar.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,i=0;i<t.length;i++)if(r=t[i],r===e||r.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this};ar.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,i=t.length;r<i;++r)t[r].apply(this,e)}return this};ar.prototype.emitReserved=ar.prototype.emit;ar.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};ar.prototype.hasListeners=function(n){return!!this.listeners(n).length};const hs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function vU(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const Rie=hs.setTimeout,Pie=hs.clearTimeout;function n_(n,e){e.useNativeTimers?(n.setTimeoutFn=Rie.bind(hs),n.clearTimeoutFn=Pie.bind(hs)):(n.setTimeoutFn=hs.setTimeout.bind(hs),n.clearTimeoutFn=hs.clearTimeout.bind(hs))}const Iie=1.33;function Bie(n){return typeof n=="string"?Die(n):Math.ceil((n.byteLength||n.size)*Iie)}function Die(n){let e=0,t=0;for(let r=0,i=n.length;r<i;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function Lie(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Oie(n){let e={},t=n.split("&");for(let r=0,i=t.length;r<i;r++){let s=t[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Nie extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class _b extends ar{constructor(e){super(),this.writable=!1,n_(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new Nie(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=yb(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Lie(e);return t.length?"?"+t:""}}const yU="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),OA=64,kie={};let c2=0,Mv=0,u2;function f2(n){let e="";do e=yU[n%OA]+e,n=Math.floor(n/OA);while(n>0);return e}function _U(){const n=f2(+new Date);return n!==u2?(c2=0,u2=n):n+"."+f2(c2++)}for(;Mv<OA;Mv++)kie[yU[Mv]]=Mv;let xU=!1;try{xU=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Fie=xU;function wU(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Fie))return new XMLHttpRequest}catch{}if(!e)try{return new hs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Uie(){}const zie=function(){return new wU({xdomain:!1}).responseType!=null}();class Hie extends _b{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const t=e&&e.forceBase64;this.supportsBinary=zie&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Mie(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Eie(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=_U()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Af(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}let Af=class qv extends ar{constructor(e,t){super(),n_(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=t.data!==void 0?t.data:null,this.create()}create(){var e;const t=vU(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const r=this.xhr=new wU(t);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=qv.requestsCount++,qv.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Uie,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete qv.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Af.requestsCount=0;Af.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",h2);else if(typeof addEventListener=="function"){const n="onpagehide"in hs?"pagehide":"unload";addEventListener(n,h2,!1)}}function h2(){for(let n in Af.requests)Af.requests.hasOwnProperty(n)&&Af.requests[n].abort()}const xb=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),bv=hs.WebSocket||hs.MozWebSocket,d2=!0,Gie="arraybuffer",p2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Vie extends _b{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=p2?{}:vU(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=d2&&!p2?t?new bv(e,t):new bv(e):new bv(e,t,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;vb(r,this.supportsBinary,s=>{const o={};try{d2&&this.ws.send(s)}catch{}i&&xb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=_U()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!bv}}class Wie extends _b{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const t=Cie(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=bie();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;this.writer.write(r).then(()=>{i&&xb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const jie={websocket:Vie,webtransport:Wie,polling:Hie},$ie=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Xie=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function NA(n){if(n.length>2e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let i=$ie.exec(n||""),s={},o=14;for(;o--;)s[Xie[o]]=i[o]||"";return t!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Jie(s,s.path),s.queryKey=Kie(s,s.query),s}function Jie(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Kie(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(t[i]=s)}),t}let SU=class $u extends ar{constructor(e,t={}){super(),this.binaryType=Gie,this.writeBuffer=[],e&&typeof e=="object"&&(t=e,e=null),e?(e=NA(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=NA(t.host).host),n_(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Oie(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=gU,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new jie[e](r)}open(){let e;if(this.opts.rememberUpgrade&&$u.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),r=!1;$u.priorWebsocketSuccess=!1;const i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;$u.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=t.name,this.emitReserved("upgradeError",p)}}))};function s(){r||(r=!0,u(),t.close(),t=null)}const o=f=>{const p=new Error("probe error: "+f);p.transport=t.name,s(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){t&&f.name!==t.name&&s()}const u=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onOpen(){if(this.readyState="open",$u.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(t+=Bie(i)),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,i){if(typeof t=="function"&&(i=t,t=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){$u.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}};SU.protocol=gU;function Yie(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=NA(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}const qie=typeof ArrayBuffer=="function",Qie=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,AU=Object.prototype.toString,Zie=typeof Blob=="function"||typeof Blob<"u"&&AU.call(Blob)==="[object BlobConstructor]",ese=typeof File=="function"||typeof File<"u"&&AU.call(File)==="[object FileConstructor]";function wb(n){return qie&&(n instanceof ArrayBuffer||Qie(n))||Zie&&n instanceof Blob||ese&&n instanceof File}function Qv(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(Qv(n[t]))return!0;return!1}if(wb(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Qv(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Qv(n[t]))return!0;return!1}function tse(n){const e=[],t=n.data,r=n;return r.data=kA(t,e),r.attachments=e.length,{packet:r,buffers:e}}function kA(n,e){if(!n)return n;if(wb(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=kA(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=kA(n[r],e));return t}return n}function nse(n,e){return n.data=FA(n.data,e),delete n.attachments,n}function FA(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=FA(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=FA(n[t],e));return n}const rse=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ise=5;var qt;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(qt||(qt={}));class sse{constructor(e){this.replacer=e}encode(e){return(e.type===qt.EVENT||e.type===qt.ACK)&&Qv(e)?this.encodeAsBinary({type:e.type===qt.EVENT?qt.BINARY_EVENT:qt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===qt.BINARY_EVENT||e.type===qt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=tse(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}function m2(n){return Object.prototype.toString.call(n)==="[object Object]"}class Sb extends ar{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===qt.BINARY_EVENT;r||t.type===qt.BINARY_ACK?(t.type=r?qt.EVENT:qt.ACK,this.reconstructor=new ose(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(wb(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(qt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===qt.BINARY_EVENT||r.type===qt.BINARY_ACK){const s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(s,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(s,t)}else r.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const s=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(Sb.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case qt.CONNECT:return m2(t);case qt.DISCONNECT:return t===void 0;case qt.CONNECT_ERROR:return typeof t=="string"||m2(t);case qt.EVENT:case qt.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&rse.indexOf(t[0])===-1);case qt.ACK:case qt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ose{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=nse(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ase=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Sb,Encoder:sse,get PacketType(){return qt},protocol:ise},Symbol.toStringTag,{value:"Module"}));function Us(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const lse=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class EU extends ar{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Us(e,"open",this.onopen.bind(this)),Us(e,"packet",this.onpacket.bind(this)),Us(e,"error",this.onerror.bind(this)),Us(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(lse.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const r={type:qt.EVENT,data:t};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const o=this.ids++,a=t.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qt.EVENT:case qt.BINARY_EVENT:this.onevent(e);break;case qt.ACK:case qt.BINARY_ACK:this.onack(e);break;case qt.DISCONNECT:this.ondisconnect();break;case qt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:qt.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function ch(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}ch.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};ch.prototype.reset=function(){this.attempts=0};ch.prototype.setMin=function(n){this.ms=n};ch.prototype.setMax=function(n){this.max=n};ch.prototype.setJitter=function(n){this.jitter=n};class UA extends ar{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,n_(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ch({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||ase;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new SU(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Us(t,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Us(t,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Us(e,"ping",this.onping.bind(this)),Us(e,"data",this.ondata.bind(this)),Us(e,"error",this.onerror.bind(this)),Us(e,"close",this.onclose.bind(this)),Us(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){xb(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new EU(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const od={};function Zv(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=Yie(n,e.path||"/socket.io"),r=t.source,i=t.id,s=t.path,o=od[i]&&s in od[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new UA(r,e):(od[i]||(od[i]=new UA(r,e)),l=od[i]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(Zv,{Manager:UA,Socket:EU,io:Zv,connect:Zv});class cse{constructor(){this.socket=Zv("https://ai-interview-71dz.onrender.com")}async init(e){return this.socket.emit("init",e),await new Promise((r,i)=>{this.socket.on("responseInit",s=>{s?r(s):i(s)})})}async sendMessage(e){return this.socket.emit("message",{question:e}),await new Promise((r,i)=>{this.socket.on("responseMessage",s=>{s?r(s):i(s)})})}}const g2=new cse,use=(n,e,t)=>{const r=async()=>{try{return await g2.init(e),t(!0),!0}catch(a){return o(a),t(!1),!1}},i=async a=>{console.log("Sending message: ",a);const l=await g2.sendMessage(a);n(l)},[s,o]=B.useState(null);return{initChatbot:r,sendMessage:i,error:s}};var fse="Expected a function",v2=NaN,hse="[object Symbol]",dse=/^\s+|\s+$/g,pse=/^[-+]0x[0-9a-f]+$/i,mse=/^0b[01]+$/i,gse=/^0o[0-7]+$/i,vse=parseInt,yse=typeof ac=="object"&&ac&&ac.Object===Object&&ac,_se=typeof self=="object"&&self&&self.Object===Object&&self,xse=yse||_se||Function("return this")(),wse=Object.prototype,Sse=wse.toString,Ase=Math.max,Ese=Math.min,uS=function(){return xse.Date.now()};function Mse(n,e,t){var r,i,s,o,a,l,c=0,u=!1,f=!1,p=!0;if(typeof n!="function")throw new TypeError(fse);e=y2(e)||0,zA(t)&&(u=!!t.leading,f="maxWait"in t,s=f?Ase(y2(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function m(b){var R=r,L=i;return r=i=void 0,c=b,o=n.apply(L,R),o}function v(b){return c=b,a=setTimeout(g,e),u?m(b):o}function _(b){var R=b-l,L=b-c,I=e-R;return f?Ese(I,s-L):I}function y(b){var R=b-l,L=b-c;return l===void 0||R>=e||R<0||f&&L>=s}function g(){var b=uS();if(y(b))return w(b);a=setTimeout(g,_(b))}function w(b){return a=void 0,p&&r?m(b):(r=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function E(){return a===void 0?o:w(uS())}function P(){var b=uS(),R=y(b);if(r=arguments,i=this,l=b,R){if(a===void 0)return v(l);if(f)return a=setTimeout(g,e),m(l)}return a===void 0&&(a=setTimeout(g,e)),o}return P.cancel=S,P.flush=E,P}function zA(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function bse(n){return!!n&&typeof n=="object"}function Cse(n){return typeof n=="symbol"||bse(n)&&Sse.call(n)==hse}function y2(n){if(typeof n=="number")return n;if(Cse(n))return v2;if(zA(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=zA(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(dse,"");var t=mse.test(n);return t||gse.test(n)?vse(n.slice(2),t?2:8):pse.test(n)?v2:+n}var Tse=Mse;const Rse=_l(Tse),Pse=({settings:n,setSettings:e,visible:t,setVisible:r})=>{const i=B.useRef(null),[s,o]=B.useState(n),a=c=>{c.preventDefault();const u=new FormData(i.current),f=Object.fromEntries(u.entries());l(c.target.link_to_resume.value)?(e(f),r(!1)):(console.log("Invalid settings"),i.current.classList.add("invalid"))};function l(c){try{return new URL(c),c.slice(-4)!==".pdf"?(console.log("Invalid url"),!1):!0}catch{return console.log("Invalid url"),!1}}return F.jsxs("div",{className:"settingsContainer",children:[F.jsx("div",{className:"closeButton",onClick:()=>r(!1),children:F.jsx("i",{className:"fas fa-times",children:F.jsx("h3",{style:{fontSize:"20px",marginTop:"10px"},children:"X"})})}),F.jsx("h2",{style:{textAlign:"center"},children:"Settings"}),F.jsxs("form",{className:"settings",onSubmit:a,ref:i,children:[F.jsxs("div",{className:"setting",children:[F.jsx("label",{htmlFor:"job_title",children:"Job Title"}),F.jsx("input",{type:"text",name:"job_title",id:"job_title",value:s.job_title,required:!0,onChange:c=>o({...s,job_title:c.target.value})})]}),F.jsxs("div",{className:"setting",children:[F.jsx("label",{htmlFor:"company_name",children:"Company Name"}),F.jsx("input",{type:"text",name:"company_name",id:"company_name",value:s.company_name,required:!0,onChange:c=>o({...s,company_name:c.target.value})})]}),F.jsxs("div",{className:"setting",children:[F.jsx("label",{htmlFor:"interviewer_name",children:"Interviewer Name"}),F.jsx("input",{type:"text",name:"interviewer_name",id:"interviewer_name",value:s.interviewer_name,required:!0,onChange:c=>o({...s,interviewer_name:c.target.value})})]}),F.jsxs("div",{className:"setting",children:[F.jsx("label",{htmlFor:"link_to_resume",children:"Link to Resume"}),F.jsx("input",{type:"text",name:"link_to_resume",id:"link_to_resume",value:s.link_to_resume,onChange:c=>o({...s,link_to_resume:c.target.value})})]}),F.jsxs("div",{className:"setting",children:[F.jsx("label",{htmlFor:"resume",children:"Resume Title"}),F.jsxs("select",{name:"resume",id:"resume",value:s.resume_title,onChange:c=>o({...s,resume_title:c.target.value}),children:[F.jsx("option",{value:"skills",children:"Skills"}),F.jsx("option",{value:"project",children:"Project"}),F.jsx("option",{value:"hr",children:"HR"}),F.jsx("option",{value:"all",children:"All"})]})]}),F.jsx("div",{className:"setting__button",children:F.jsx("button",{className:"btn_outline",type:"submit",children:"Save"})})]})]})},Ise="/assets/mic-mlos1_Yv.png",Bse=({setResponse:n,isChatbotReady:e,setIsChatbotReady:t,response:r})=>{const i=new URLSearchParams(window.location.search);let s=i.get("showSettings")||!0;const[o,a]=B.useState(s),[l,c]=B.useState({job_title:i.get("job_title")||"Software Engineer",company_name:i.get("company_name")||"Google",interviewer_name:i.get("interviewer_name")||"Jeyachandran J",link_to_resume:"https://jeyachandranj.github.io/resume/Resume.pdf",resume_title:i.get("resume_title")||"all"}),{initChatbot:u,sendMessage:f,error:p}=use(n,l,t);B.useEffect(()=>{u().then(O=>{t(O)})},[l]);const[m,v]=B.useState(""),[_,y]=B.useState(!1),[g,w]=B.useState(0),[S,E]=B.useState([]),P=B.useRef(null),b=B.useRef(null);B.useEffect(()=>{"webkitSpeechRecognition"in window?(P.current=new window.webkitSpeechRecognition,P.current.continuous=!0,P.current.interimResults=!1,P.current.lang="en-US",P.current.onresult=O=>{const V=O.results[O.results.length-1][0].transcript.trim();console.log("Speech to Text:",V),v(V)},P.current.onerror=O=>{console.log("Speech recognition error:",O.error)}):console.log("Your browser does not support speech recognition.")},[]),B.useEffect(()=>{console.log("Updated speechText:",m)},[m]);const R=Rse(O=>{O&&(_&&I(),f(O))},500),L=()=>{y(!0),P.current&&P.current.start()},I=()=>{y(!1),P.current&&P.current.stop()},C=()=>{_?I():L()};return B.useEffect(()=>{_&&b.current&&b.current.focus()},[_]),B.useEffect(()=>{const O=V=>{V.key==="Enter"&&m!==""&&(R(m),v(""))};return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}},[m]),B.useEffect(()=>{if(r.response){const O=r.response.split(" "),V=[];for(let $=0;$<O.length;$+=5)V.push(O.slice($,$+5).join(" "));E(V),w(0)}},[r.response]),B.useEffect(()=>{if(S.length>0){const O=setInterval(()=>{w(V=>V+1<S.length?V+1:(clearInterval(O),E([]),V))},2500);return()=>clearInterval(O)}},[S]),F.jsxs("div",{className:"chatbotInputWrap",children:[S.length>0&&F.jsx("div",{className:"chatbotResponse",style:{border:"3px solid black",backgroundColor:"white",marginLeft:"220px",padding:"10px",fontSize:"20px",whiteSpace:"pre-wrap"},children:S[g]}),e?F.jsxs("section",{className:"chatbotInputContainer",children:[F.jsx("div",{className:"chatbotInput","data-listening":_,children:F.jsx("div",{className:"chatbotInput_container",children:F.jsxs("form",{onSubmit:O=>O.preventDefault(),className:"inputForm",children:[F.jsx("div",{className:"microphoneIcon",onClick:C,children:F.jsx("img",{src:Ise,style:{width:"100px",height:"100px",marginBottom:"50px"}})}),F.jsx("input",{value:m,ref:b,onChange:O=>v(O.target.value),style:{color:"black",fontSize:"30px"},placeholder:"Type a message..."}),F.jsx("div",{className:"settingsButton",onClick:()=>a(!0),children:F.jsx("i",{className:"fas fa-cog"})})]})})}),F.jsx("div",{className:"chatbotSettings","data-visible":o,children:F.jsx(Pse,{settings:l,setSettings:c,visible:o,setVisible:a})})]}):F.jsx(F.Fragment,{})]})},MU="/assets/loding-Betavs0Y.gif";function Dse(){const[n,e]=B.useState({response:"Hello, thank you for having me here today. I'm excited to learn more about this opportunity.",speechData:{audioFilePath:"",visemes:null}}),[t,r]=B.useState(!1);return F.jsxs("div",{className:"main-container","data-chatbot-ready":t,children:[!t&&F.jsx("div",{className:"loading-overlay",children:F.jsx("img",{src:MU,alt:"Loading...",className:"loading-gif"})}),F.jsxs("div",{className:"canvas-wrapper",children:[F.jsxs(D7,{shadows:!0,camera:{position:[0,0,8],fov:42},className:"canvas",children:[F.jsx("color",{attach:"background",args:["#ececec"]}),F.jsx(_ie,{response:n})]}),F.jsx(Bse,{setResponse:e,isChatbotReady:t,setIsChatbotReady:r,response:n})]})]})}function bU(n,e){return function(){return n.apply(e,arguments)}}const{toString:Lse}=Object.prototype,{getPrototypeOf:Ab}=Object,r_=(n=>e=>{const t=Lse.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),eo=n=>(n=n.toLowerCase(),e=>r_(e)===n),i_=n=>e=>typeof e===n,{isArray:uh}=Array,bp=i_("undefined");function Ose(n){return n!==null&&!bp(n)&&n.constructor!==null&&!bp(n.constructor)&&xs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const CU=eo("ArrayBuffer");function Nse(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&CU(n.buffer),e}const kse=i_("string"),xs=i_("function"),TU=i_("number"),s_=n=>n!==null&&typeof n=="object",Fse=n=>n===!0||n===!1,ey=n=>{if(r_(n)!=="object")return!1;const e=Ab(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Use=eo("Date"),zse=eo("File"),Hse=eo("Blob"),Gse=eo("FileList"),Vse=n=>s_(n)&&xs(n.pipe),Wse=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||xs(n.append)&&((e=r_(n))==="formdata"||e==="object"&&xs(n.toString)&&n.toString()==="[object FormData]"))},jse=eo("URLSearchParams"),[$se,Xse,Jse,Kse]=["ReadableStream","Request","Response","Headers"].map(eo),Yse=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tm(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),uh(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function RU(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const PU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,IU=n=>!bp(n)&&n!==PU;function HA(){const{caseless:n}=IU(this)&&this||{},e={},t=(r,i)=>{const s=n&&RU(e,i)||i;ey(e[s])&&ey(r)?e[s]=HA(e[s],r):ey(r)?e[s]=HA({},r):uh(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&tm(arguments[r],t);return e}const qse=(n,e,t,{allOwnKeys:r}={})=>(tm(e,(i,s)=>{t&&xs(i)?n[s]=bU(i,t):n[s]=i},{allOwnKeys:r}),n),Qse=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Zse=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},eoe=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&Ab(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},toe=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},noe=n=>{if(!n)return null;if(uh(n))return n;let e=n.length;if(!TU(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},roe=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Ab(Uint8Array)),ioe=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},soe=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},ooe=eo("HTMLFormElement"),aoe=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),_2=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),loe=eo("RegExp"),BU=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};tm(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},coe=n=>{BU(n,(e,t)=>{if(xs(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(xs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},uoe=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return uh(n)?r(n):r(String(n).split(e)),t},foe=()=>{},hoe=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,fS="abcdefghijklmnopqrstuvwxyz",x2="0123456789",DU={DIGIT:x2,ALPHA:fS,ALPHA_DIGIT:fS+fS.toUpperCase()+x2},doe=(n=16,e=DU.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function poe(n){return!!(n&&xs(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const moe=n=>{const e=new Array(10),t=(r,i)=>{if(s_(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=uh(r)?[]:{};return tm(r,(o,a)=>{const l=t(o,i+1);!bp(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},goe=eo("AsyncFunction"),voe=n=>n&&(s_(n)||xs(n))&&xs(n.then)&&xs(n.catch),Ae={isArray:uh,isArrayBuffer:CU,isBuffer:Ose,isFormData:Wse,isArrayBufferView:Nse,isString:kse,isNumber:TU,isBoolean:Fse,isObject:s_,isPlainObject:ey,isReadableStream:$se,isRequest:Xse,isResponse:Jse,isHeaders:Kse,isUndefined:bp,isDate:Use,isFile:zse,isBlob:Hse,isRegExp:loe,isFunction:xs,isStream:Vse,isURLSearchParams:jse,isTypedArray:roe,isFileList:Gse,forEach:tm,merge:HA,extend:qse,trim:Yse,stripBOM:Qse,inherits:Zse,toFlatObject:eoe,kindOf:r_,kindOfTest:eo,endsWith:toe,toArray:noe,forEachEntry:ioe,matchAll:soe,isHTMLForm:ooe,hasOwnProperty:_2,hasOwnProp:_2,reduceDescriptors:BU,freezeMethods:coe,toObjectSet:uoe,toCamelCase:aoe,noop:foe,toFiniteNumber:hoe,findKey:RU,global:PU,isContextDefined:IU,ALPHABET:DU,generateString:doe,isSpecCompliantForm:poe,toJSONObject:moe,isAsyncFn:goe,isThenable:voe};function Nt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}Ae.inherits(Nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ae.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const LU=Nt.prototype,OU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{OU[n]={value:n}});Object.defineProperties(Nt,OU);Object.defineProperty(LU,"isAxiosError",{value:!0});Nt.from=(n,e,t,r,i,s)=>{const o=Object.create(LU);return Ae.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Nt.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const yoe=null;function GA(n){return Ae.isPlainObject(n)||Ae.isArray(n)}function NU(n){return Ae.endsWith(n,"[]")?n.slice(0,-2):n}function w2(n,e,t){return n?n.concat(e).map(function(i,s){return i=NU(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function _oe(n){return Ae.isArray(n)&&!n.some(GA)}const xoe=Ae.toFlatObject(Ae,{},null,function(e){return/^is[A-Z]/.test(e)});function o_(n,e,t){if(!Ae.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Ae.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,y){return!Ae.isUndefined(y[_])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Ae.isSpecCompliantForm(e);if(!Ae.isFunction(i))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(Ae.isDate(v))return v.toISOString();if(!l&&Ae.isBlob(v))throw new Nt("Blob is not supported. Use a Buffer instead.");return Ae.isArrayBuffer(v)||Ae.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,_,y){let g=v;if(v&&!y&&typeof v=="object"){if(Ae.endsWith(_,"{}"))_=r?_:_.slice(0,-2),v=JSON.stringify(v);else if(Ae.isArray(v)&&_oe(v)||(Ae.isFileList(v)||Ae.endsWith(_,"[]"))&&(g=Ae.toArray(v)))return _=NU(_),g.forEach(function(S,E){!(Ae.isUndefined(S)||S===null)&&e.append(o===!0?w2([_],E,s):o===null?_:_+"[]",c(S))}),!1}return GA(v)?!0:(e.append(w2(y,_,s),c(v)),!1)}const f=[],p=Object.assign(xoe,{defaultVisitor:u,convertValue:c,isVisitable:GA});function m(v,_){if(!Ae.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(v),Ae.forEach(v,function(g,w){(!(Ae.isUndefined(g)||g===null)&&i.call(e,g,Ae.isString(w)?w.trim():w,_,p))===!0&&m(g,_?_.concat(w):[w])}),f.pop()}}if(!Ae.isObject(n))throw new TypeError("data must be an object");return m(n),e}function S2(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Eb(n,e){this._pairs=[],n&&o_(n,this,e)}const kU=Eb.prototype;kU.append=function(e,t){this._pairs.push([e,t])};kU.toString=function(e){const t=e?function(r){return e.call(this,r,S2)}:S2;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function woe(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function FU(n,e,t){if(!e)return n;const r=t&&t.encode||woe,i=t&&t.serialize;let s;if(i?s=i(e,t):s=Ae.isURLSearchParams(e)?e.toString():new Eb(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class A2{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ae.forEach(this.handlers,function(r){r!==null&&e(r)})}}const UU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Soe=typeof URLSearchParams<"u"?URLSearchParams:Eb,Aoe=typeof FormData<"u"?FormData:null,Eoe=typeof Blob<"u"?Blob:null,Moe={isBrowser:!0,classes:{URLSearchParams:Soe,FormData:Aoe,Blob:Eoe},protocols:["http","https","file","blob","url","data"]},Mb=typeof window<"u"&&typeof document<"u",boe=(n=>Mb&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),Coe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Toe=Mb&&window.location.href||"http://localhost",Roe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mb,hasStandardBrowserEnv:boe,hasStandardBrowserWebWorkerEnv:Coe,origin:Toe},Symbol.toStringTag,{value:"Module"})),$s={...Roe,...Moe};function Poe(n,e){return o_(n,new $s.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return $s.isNode&&Ae.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Ioe(n){return Ae.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Boe(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function zU(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&Ae.isArray(i)?i.length:o,l?(Ae.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Ae.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&Ae.isArray(i[o])&&(i[o]=Boe(i[o])),!a)}if(Ae.isFormData(n)&&Ae.isFunction(n.entries)){const t={};return Ae.forEachEntry(n,(r,i)=>{e(Ioe(r),i,t,0)}),t}return null}function Doe(n,e,t){if(Ae.isString(n))try{return(e||JSON.parse)(n),Ae.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const nm={transitional:UU,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ae.isObject(e);if(s&&Ae.isHTMLForm(e)&&(e=new FormData(e)),Ae.isFormData(e))return i?JSON.stringify(zU(e)):e;if(Ae.isArrayBuffer(e)||Ae.isBuffer(e)||Ae.isStream(e)||Ae.isFile(e)||Ae.isBlob(e)||Ae.isReadableStream(e))return e;if(Ae.isArrayBufferView(e))return e.buffer;if(Ae.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Poe(e,this.formSerializer).toString();if((a=Ae.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return o_(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),Doe(e)):e}],transformResponse:[function(e){const t=this.transitional||nm.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Ae.isResponse(e)||Ae.isReadableStream(e))return e;if(e&&Ae.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Nt.from(a,Nt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$s.classes.FormData,Blob:$s.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ae.forEach(["delete","get","head","post","put","patch"],n=>{nm.headers[n]={}});const Loe=Ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ooe=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&Loe[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},E2=Symbol("internals");function ad(n){return n&&String(n).trim().toLowerCase()}function ty(n){return n===!1||n==null?n:Ae.isArray(n)?n.map(ty):String(n)}function Noe(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const koe=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function hS(n,e,t,r,i){if(Ae.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!Ae.isString(e)){if(Ae.isString(r))return e.indexOf(r)!==-1;if(Ae.isRegExp(r))return r.test(e)}}function Foe(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Uoe(n,e){const t=Ae.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Ii{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,c){const u=ad(l);if(!u)throw new Error("header name must be a non-empty string");const f=Ae.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=ty(a))}const o=(a,l)=>Ae.forEach(a,(c,u)=>s(c,u,l));if(Ae.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Ae.isString(e)&&(e=e.trim())&&!koe(e))o(Ooe(e),t);else if(Ae.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=ad(e),e){const r=Ae.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return Noe(i);if(Ae.isFunction(t))return t.call(this,i,r);if(Ae.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ad(e),e){const r=Ae.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||hS(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=ad(o),o){const a=Ae.findKey(r,o);a&&(!t||hS(r,r[a],a,t))&&(delete r[a],i=!0)}}return Ae.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||hS(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return Ae.forEach(this,(i,s)=>{const o=Ae.findKey(r,s);if(o){t[o]=ty(i),delete t[s];return}const a=e?Foe(s):String(s).trim();a!==s&&delete t[s],t[a]=ty(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ae.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&Ae.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[E2]=this[E2]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ad(o);r[a]||(Uoe(i,o),r[a]=!0)}return Ae.isArray(e)?e.forEach(s):s(e),this}}Ii.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ae.reduceDescriptors(Ii.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Ae.freezeMethods(Ii);function dS(n,e){const t=this||nm,r=e||t,i=Ii.from(r.headers);let s=r.data;return Ae.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function HU(n){return!!(n&&n.__CANCEL__)}function fh(n,e,t){Nt.call(this,n??"canceled",Nt.ERR_CANCELED,e,t),this.name="CanceledError"}Ae.inherits(fh,Nt,{__CANCEL__:!0});function GU(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Nt("Request failed with status code "+t.status,[Nt.ERR_BAD_REQUEST,Nt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function zoe(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Hoe(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),t[i]=l,r[i]=c;let f=s,p=0;for(;f!==i;)p+=t[f++],f=f%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-o<e)return;const m=u&&c-u;return m?Math.round(p*1e3/m):void 0}}function Goe(n,e){let t=0;const r=1e3/e;let i=null;return function(){const o=this===!0,a=Date.now();if(o||a-t>r)return i&&(clearTimeout(i),i=null),t=a,n.apply(null,arguments);i||(i=setTimeout(()=>(i=null,t=Date.now(),n.apply(null,arguments)),r-(a-t)))}}const qy=(n,e,t=3)=>{let r=0;const i=Hoe(50,250);return Goe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null};f[e?"download":"upload"]=!0,n(f)},t)},Voe=$s.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=Ae.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),Woe=$s.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];Ae.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Ae.isString(r)&&o.push("path="+r),Ae.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function joe(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function $oe(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function VU(n,e){return n&&!joe(e)?$oe(n,e):e}const M2=n=>n instanceof Ii?{...n}:n;function Wc(n,e){e=e||{};const t={};function r(c,u,f){return Ae.isPlainObject(c)&&Ae.isPlainObject(u)?Ae.merge.call({caseless:f},c,u):Ae.isPlainObject(u)?Ae.merge({},u):Ae.isArray(u)?u.slice():u}function i(c,u,f){if(Ae.isUndefined(u)){if(!Ae.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function s(c,u){if(!Ae.isUndefined(u))return r(void 0,u)}function o(c,u){if(Ae.isUndefined(u)){if(!Ae.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in e)return r(c,u);if(f in n)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i(M2(c),M2(u),!0)};return Ae.forEach(Object.keys(Object.assign({},n,e)),function(u){const f=l[u]||i,p=f(n[u],e[u],u);Ae.isUndefined(p)&&f!==a||(t[u]=p)}),t}const WU=n=>{const e=Wc({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Ii.from(o),e.url=FU(VU(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Ae.isFormData(t)){if($s.hasStandardBrowserEnv||$s.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if($s.hasStandardBrowserEnv&&(r&&Ae.isFunction(r)&&(r=r(e)),r||r!==!1&&Voe(e.url))){const c=i&&s&&Woe.read(s);c&&o.set(i,c)}return e},Xoe=typeof XMLHttpRequest<"u",Joe=Xoe&&function(n){return new Promise(function(t,r){const i=WU(n);let s=i.data;const o=Ii.from(i.headers).normalize();let{responseType:a}=i,l;function c(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let u=new XMLHttpRequest;u.open(i.method.toUpperCase(),i.url,!0),u.timeout=i.timeout;function f(){if(!u)return;const m=Ii.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),_={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:n,request:u};GU(function(g){t(g),c()},function(g){r(g),c()},_),u=null}"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){u&&(r(new Nt("Request aborted",Nt.ECONNABORTED,i,u)),u=null)},u.onerror=function(){r(new Nt("Network Error",Nt.ERR_NETWORK,i,u)),u=null},u.ontimeout=function(){let v=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const _=i.transitional||UU;i.timeoutErrorMessage&&(v=i.timeoutErrorMessage),r(new Nt(v,_.clarifyTimeoutError?Nt.ETIMEDOUT:Nt.ECONNABORTED,i,u)),u=null},s===void 0&&o.setContentType(null),"setRequestHeader"in u&&Ae.forEach(o.toJSON(),function(v,_){u.setRequestHeader(_,v)}),Ae.isUndefined(i.withCredentials)||(u.withCredentials=!!i.withCredentials),a&&a!=="json"&&(u.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&u.addEventListener("progress",qy(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",qy(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=m=>{u&&(r(!m||m.type?new fh(null,n,u):m),u.abort(),u=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const p=zoe(i.url);if(p&&$s.protocols.indexOf(p)===-1){r(new Nt("Unsupported protocol "+p+":",Nt.ERR_BAD_REQUEST,n));return}u.send(s||null)})},Koe=(n,e)=>{let t=new AbortController,r;const i=function(l){if(!r){r=!0,o();const c=l instanceof Error?l:this.reason;t.abort(c instanceof Nt?c:new fh(c instanceof Error?c.message:c))}};let s=e&&setTimeout(()=>{i(new Nt(`timeout ${e} of ms exceeded`,Nt.ETIMEDOUT))},e);const o=()=>{n&&(s&&clearTimeout(s),s=null,n.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",i):l.unsubscribe(i))}),n=null)};n.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",i));const{signal:a}=t;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},Yoe=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},qoe=async function*(n,e,t){for await(const r of n)yield*Yoe(ArrayBuffer.isView(r)?r:await t(String(r)),e)},b2=(n,e,t,r,i)=>{const s=qoe(n,e,i);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:c}=await s.next();if(l){a.close(),r();return}let u=c.byteLength;t&&t(o+=u),a.enqueue(new Uint8Array(c))},cancel(a){return r(a),s.return()}},{highWaterMark:2})},C2=(n,e)=>{const t=n!=null;return r=>setTimeout(()=>e({lengthComputable:t,total:n,loaded:r}))},a_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jU=a_&&typeof ReadableStream=="function",VA=a_&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Qoe=jU&&(()=>{let n=!1;const e=new Request($s.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e})(),T2=64*1024,WA=jU&&!!(()=>{try{return Ae.isReadableStream(new Response("").body)}catch{}})(),Qy={stream:WA&&(n=>n.body)};a_&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Qy[e]&&(Qy[e]=Ae.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Nt(`Response type '${e}' is not supported`,Nt.ERR_NOT_SUPPORT,r)})})})(new Response);const Zoe=async n=>{if(n==null)return 0;if(Ae.isBlob(n))return n.size;if(Ae.isSpecCompliantForm(n))return(await new Request(n).arrayBuffer()).byteLength;if(Ae.isArrayBufferView(n))return n.byteLength;if(Ae.isURLSearchParams(n)&&(n=n+""),Ae.isString(n))return(await VA(n)).byteLength},eae=async(n,e)=>{const t=Ae.toFiniteNumber(n.getContentLength());return t??Zoe(e)},tae=a_&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:p}=WU(n);c=c?(c+"").toLowerCase():"text";let[m,v]=i||s||o?Koe([i,s],o):[],_,y;const g=()=>{!_&&setTimeout(()=>{m&&m.unsubscribe()}),_=!0};let w;try{if(l&&Qoe&&t!=="get"&&t!=="head"&&(w=await eae(u,r))!==0){let b=new Request(e,{method:"POST",body:r,duplex:"half"}),R;Ae.isFormData(r)&&(R=b.headers.get("content-type"))&&u.setContentType(R),b.body&&(r=b2(b.body,T2,C2(w,qy(l)),null,VA))}Ae.isString(f)||(f=f?"cors":"omit"),y=new Request(e,{...p,signal:m,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",withCredentials:f});let S=await fetch(y);const E=WA&&(c==="stream"||c==="response");if(WA&&(a||E)){const b={};["status","statusText","headers"].forEach(L=>{b[L]=S[L]});const R=Ae.toFiniteNumber(S.headers.get("content-length"));S=new Response(b2(S.body,T2,a&&C2(R,qy(a,!0)),E&&g,VA),b)}c=c||"text";let P=await Qy[Ae.findKey(Qy,c)||"text"](S,n);return!E&&g(),v&&v(),await new Promise((b,R)=>{GU(b,R,{data:P,headers:Ii.from(S.headers),status:S.status,statusText:S.statusText,config:n,request:y})})}catch(S){throw g(),S&&S.name==="TypeError"&&/fetch/i.test(S.message)?Object.assign(new Nt("Network Error",Nt.ERR_NETWORK,n,y),{cause:S.cause||S}):Nt.from(S,S&&S.code,n,y)}}),jA={http:yoe,xhr:Joe,fetch:tae};Ae.forEach(jA,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const R2=n=>`- ${n}`,nae=n=>Ae.isFunction(n)||n===null||n===!1,$U={getAdapter:n=>{n=Ae.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!nae(t)&&(r=jA[(o=String(t)).toLowerCase()],r===void 0))throw new Nt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(R2).join(`
`):" "+R2(s[0]):"as no adapter specified";throw new Nt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:jA};function pS(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new fh(null,n)}function P2(n){return pS(n),n.headers=Ii.from(n.headers),n.data=dS.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),$U.getAdapter(n.adapter||nm.adapter)(n).then(function(r){return pS(n),r.data=dS.call(n,n.transformResponse,r),r.headers=Ii.from(r.headers),r},function(r){return HU(r)||(pS(n),r&&r.response&&(r.response.data=dS.call(n,n.transformResponse,r.response),r.response.headers=Ii.from(r.response.headers))),Promise.reject(r)})}const XU="1.7.2",bb={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{bb[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const I2={};bb.transitional=function(e,t,r){function i(s,o){return"[Axios v"+XU+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Nt(i(o," has been removed"+(t?" in "+t:"")),Nt.ERR_DEPRECATED);return t&&!I2[o]&&(I2[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function rae(n,e,t){if(typeof n!="object")throw new Nt("options must be an object",Nt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Nt("option "+s+" must be "+l,Nt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Nt("Unknown option "+s,Nt.ERR_BAD_OPTION)}}const $A={assertOptions:rae,validators:bb},Fa=$A.validators;class Rc{constructor(e){this.defaults=e,this.interceptors={request:new A2,response:new A2}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Wc(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&$A.assertOptions(r,{silentJSONParsing:Fa.transitional(Fa.boolean),forcedJSONParsing:Fa.transitional(Fa.boolean),clarifyTimeoutError:Fa.transitional(Fa.boolean)},!1),i!=null&&(Ae.isFunction(i)?t.paramsSerializer={serialize:i}:$A.assertOptions(i,{encode:Fa.function,serialize:Fa.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Ae.merge(s.common,s[t.method]);s&&Ae.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),t.headers=Ii.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(t)===!1||(l=l&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let u,f=0,p;if(!l){const v=[P2.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,c),p=v.length,u=Promise.resolve(t);f<p;)u=u.then(v[f++],v[f++]);return u}p=a.length;let m=t;for(f=0;f<p;){const v=a[f++],_=a[f++];try{m=v(m)}catch(y){_.call(this,y);break}}try{u=P2.call(this,m)}catch(v){return Promise.reject(v)}for(f=0,p=c.length;f<p;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=Wc(this.defaults,e);const t=VU(e.baseURL,e.url);return FU(t,e.params,e.paramsSerializer)}}Ae.forEach(["delete","get","head","options"],function(e){Rc.prototype[e]=function(t,r){return this.request(Wc(r||{},{method:e,url:t,data:(r||{}).data}))}});Ae.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Wc(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Rc.prototype[e]=t(),Rc.prototype[e+"Form"]=t(!0)});class Cb{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new fh(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Cb(function(i){e=i}),cancel:e}}}function iae(n){return function(t){return n.apply(null,t)}}function sae(n){return Ae.isObject(n)&&n.isAxiosError===!0}const XA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(XA).forEach(([n,e])=>{XA[e]=n});function JU(n){const e=new Rc(n),t=bU(Rc.prototype.request,e);return Ae.extend(t,Rc.prototype,e,{allOwnKeys:!0}),Ae.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return JU(Wc(n,i))},t}const $n=JU(nm);$n.Axios=Rc;$n.CanceledError=fh;$n.CancelToken=Cb;$n.isCancel=HU;$n.VERSION=XU;$n.toFormData=o_;$n.AxiosError=Nt;$n.Cancel=$n.CanceledError;$n.all=function(e){return Promise.all(e)};$n.spread=iae;$n.isAxiosError=sae;$n.mergeConfig=Wc;$n.AxiosHeaders=Ii;$n.formToJSON=n=>zU(Ae.isHTMLForm(n)?new FormData(n):n);$n.getAdapter=$U.getAdapter;$n.HttpStatusCode=XA;$n.default=$n;const oae=({text:n})=>F.jsx("div",{className:"reading-body",children:F.jsxs("div",{className:"reading-container",children:[F.jsx("h1",{className:"reading-header",children:"Reading Comprehension"}),F.jsx("p",{className:"reading-paragraph",children:n})]})}),aae=({questions:n})=>{const[e,t]=B.useState(Array(n.questions.length).fill("")),[r,i]=B.useState(0),[s,o]=B.useState(!1);console.log("jjjjjjjjjjj");const a=(u,f)=>{const p=[...e];p[f]=u.target.value,t(p)},l=()=>{let u=0;n.questions.forEach((f,p)=>{f.answer===e[p]&&(u+=1)}),i(u),o(!0)},c=()=>{o(!1)};return F.jsxs("div",{className:"questions-container",children:[F.jsx("h2",{className:"questions-header",children:"Questions"}),Array.isArray(n.questions)&&n.questions.length>0?n.questions.map((u,f)=>F.jsxs("div",{className:"question-block",children:[F.jsxs("p",{className:"question-text",children:[F.jsxs("strong",{children:["Q",f+1,":"]})," ",u.question]}),F.jsx("div",{className:"options-container",children:Object.keys(u.options).map((p,m)=>F.jsxs("label",{className:"option-label",children:[F.jsx("input",{type:"radio",name:`question-${f}`,value:p,onChange:v=>a(v,f),checked:e[f]===p,className:"option-input"}),u.options[p]]},m))})]},f)):F.jsx("p",{children:"No questions available."}),F.jsx("button",{onClick:l,className:"submit-button",children:"Submit"}),s&&F.jsx("div",{className:"score-modal",style:{display:"flex"},children:F.jsxs("div",{className:"score-modal-content",children:[F.jsx("span",{className:"close-button",onClick:c,children:"×"}),F.jsxs("h3",{children:["Your Score: ",r," / ",n.questions.length]})]})})]})},lae=()=>{const[n,e]=B.useState(!0),[t,r]=B.useState(!1),[i,s]=B.useState(!1),[o,a]=B.useState(""),[l,c]=B.useState([]);return B.useEffect(()=>{(async()=>{try{const p=(await $n.post("https://ai-interview-71dz.onrender.com/generate-content")).data;a(p.paragraph),c(p.questions),e(!1),r(!0),setTimeout(()=>{r(!1),s(!0)},12e3)}catch(f){console.error("Error fetching data from backend",f)}})()},[]),F.jsx("div",{className:n?"page-center":"reading-background",children:n?F.jsx("img",{src:MU,alt:"Loading",className:"loading-img"}):F.jsxs(F.Fragment,{children:[t&&F.jsx(oae,{text:o}),i&&F.jsx(aae,{questions:l})]})})},cae=()=>{const[n,e]=B.useState(""),[t,r]=B.useState(""),[i,s]=B.useState(null),[o,a]=B.useState(!1);B.useEffect(()=>{l()},[]);const l=async()=>{try{const f=await $n.get("https://ai-interview-71dz.onrender.com/api/question");e(f.data.question)}catch(f){console.error("Error fetching question:",f)}},c=async f=>{f.preventDefault();try{const p=await $n.post("https://ai-interview-71dz.onrender.com/api/submit",{letter:t});s(p.data),a(!0)}catch(p){console.error("Error submitting letter:",p)}},u=()=>{a(!1)};return F.jsx("div",{className:"App",children:F.jsxs("div",{className:"bg",children:[F.jsx("h1",{children:"Writing Comprehension"}),n&&F.jsxs("p",{children:[F.jsx("strong",{children:"Question:"})," ",n]}),F.jsxs("form",{onSubmit:c,children:[F.jsx("textarea",{value:t,onChange:f=>r(f.target.value),placeholder:"Write your letter here..."}),F.jsx("button",{type:"submit",children:"Submit"})]}),o&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"overlay",onClick:u}),F.jsxs("div",{className:"feedback-popup",children:[F.jsx("button",{className:"close-button",onClick:u,children:"×"}),F.jsx("h2",{children:"Feedback"}),F.jsxs("p",{children:[F.jsx("strong",{children:"Grammar Mistakes:"})," ",i.grammarMistakes]}),F.jsxs("p",{children:[F.jsx("strong",{children:"Spelling Mistakes:"})," ",i.spellingMistakes]}),F.jsxs("p",{children:[F.jsx("strong",{children:"Total Marks:"})," ",i.totalMarks," / 25"]}),F.jsxs("p",{children:[F.jsx("strong",{children:"Feedback:"})," ",i.feedback]})]})]})]})})};var uae=function(e,t,r){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");typeof t=="function"&&(r=t,t={}),t=t||{},r=r||function(){},s.type=t.type||"text/javascript",s.charset=t.charset||"utf8",s.async="async"in t?!!t.async:!0,s.src=e,t.attrs&&fae(s,t.attrs),t.text&&(s.text=""+t.text);var o="onload"in s?B2:hae;o(s,r),s.onload||B2(s,r),i.appendChild(s)};function fae(n,e){for(var t in e)n.setAttribute(t,e[t])}function B2(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function hae(n,e){n.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,n))}}var dae=function(e){return pae(e)&&!mae(e)};function pae(n){return!!n&&typeof n=="object"}function mae(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||yae(n)}var gae=typeof Symbol=="function"&&Symbol.for,vae=gae?Symbol.for("react.element"):60103;function yae(n){return n.$$typeof===vae}function _ae(n){return Array.isArray(n)?[]:{}}function Cp(n,e){return e.clone!==!1&&e.isMergeableObject(n)?Wf(_ae(n),n,e):n}function xae(n,e,t){return n.concat(e).map(function(r){return Cp(r,t)})}function wae(n,e){if(!e.customMerge)return Wf;var t=e.customMerge(n);return typeof t=="function"?t:Wf}function Sae(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return Object.propertyIsEnumerable.call(n,e)}):[]}function D2(n){return Object.keys(n).concat(Sae(n))}function KU(n,e){try{return e in n}catch{return!1}}function Aae(n,e){return KU(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function Eae(n,e,t){var r={};return t.isMergeableObject(n)&&D2(n).forEach(function(i){r[i]=Cp(n[i],t)}),D2(e).forEach(function(i){Aae(n,i)||(KU(n,i)&&t.isMergeableObject(e[i])?r[i]=wae(i,t)(n[i],e[i],t):r[i]=Cp(e[i],t))}),r}function Wf(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||xae,t.isMergeableObject=t.isMergeableObject||dae,t.cloneUnlessOtherwiseSpecified=Cp;var r=Array.isArray(e),i=Array.isArray(n),s=r===i;return s?r?t.arrayMerge(n,e,t):Eae(n,e,t):Cp(e,t)}Wf.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Wf(r,i,t)},{})};var Mae=Wf,YU=Mae,bae=Object.create,l_=Object.defineProperty,Cae=Object.getOwnPropertyDescriptor,Tae=Object.getOwnPropertyNames,Rae=Object.getPrototypeOf,Pae=Object.prototype.hasOwnProperty,Iae=(n,e)=>{for(var t in e)l_(n,t,{get:e[t],enumerable:!0})},qU=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Tae(e))!Pae.call(n,i)&&i!==t&&l_(n,i,{get:()=>e[i],enumerable:!(r=Cae(e,i))||r.enumerable});return n},Tb=(n,e,t)=>(t=n!=null?bae(Rae(n)):{},qU(!n||!n.__esModule?l_(t,"default",{value:n,enumerable:!0}):t,n)),Bae=n=>qU(l_({},"__esModule",{value:!0}),n),QU={};Iae(QU,{callPlayer:()=>Jae,getConfig:()=>$ae,getSDK:()=>jae,isBlobUrl:()=>Yae,isMediaStream:()=>Kae,lazy:()=>Nae,omit:()=>Xae,parseEndTime:()=>Gae,parseStartTime:()=>Hae,queryString:()=>Wae,randomString:()=>Vae,supportsWebKitPresentationMode:()=>qae});var c_=Bae(QU),Dae=Tb(B),Lae=Tb(uae),Oae=Tb(YU);const Nae=n=>Dae.default.lazy(async()=>{const e=await n();return typeof e.default=="function"?e:e.default}),kae=/[?&#](?:start|t)=([0-9hms]+)/,Fae=/[?&#]end=([0-9hms]+)/,JA=/(\d+)(h|m|s)/g,Uae=/^\d+$/;function ZU(n,e){if(n instanceof Array)return;const t=n.match(e);if(t){const r=t[1];if(r.match(JA))return zae(r);if(Uae.test(r))return parseInt(r)}}function zae(n){let e=0,t=JA.exec(n);for(;t!==null;){const[,r,i]=t;i==="h"&&(e+=parseInt(r,10)*60*60),i==="m"&&(e+=parseInt(r,10)*60),i==="s"&&(e+=parseInt(r,10)),t=JA.exec(n)}return e}function Hae(n){return ZU(n,kae)}function Gae(n){return ZU(n,Fae)}function Vae(){return Math.random().toString(36).substr(2,5)}function Wae(n){return Object.keys(n).map(e=>`${e}=${n[e]}`).join("&")}function mS(n){return window[n]?window[n]:window.exports&&window.exports[n]?window.exports[n]:window.module&&window.module.exports&&window.module.exports[n]?window.module.exports[n]:null}const Gu={},jae=function(e,t,r=null,i=()=>!0,s=Lae.default){const o=mS(t);return o&&i(o)?Promise.resolve(o):new Promise((a,l)=>{if(Gu[e]){Gu[e].push({resolve:a,reject:l});return}Gu[e]=[{resolve:a,reject:l}];const c=u=>{Gu[e].forEach(f=>f.resolve(u))};if(r){const u=window[r];window[r]=function(){u&&u(),c(mS(t))}}s(e,u=>{u?(Gu[e].forEach(f=>f.reject(u)),Gu[e]=null):r||c(mS(t))})})};function $ae(n,e){return(0,Oae.default)(e.config,n.config)}function Xae(n,...e){const t=[].concat(...e),r={},i=Object.keys(n);for(const s of i)t.indexOf(s)===-1&&(r[s]=n[s]);return r}function Jae(n,...e){if(!this.player||!this.player[n]){let t=`ReactPlayer: ${this.constructor.displayName} player could not call %c${n}%c – `;return this.player?this.player[n]||(t+="The method was not available"):t+="The player was not available",console.warn(t,"font-weight: bold",""),null}return this.player[n](...e)}function Kae(n){return typeof window<"u"&&typeof window.MediaStream<"u"&&n instanceof window.MediaStream}function Yae(n){return/^blob:/.test(n)}function qae(n=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return n.webkitSupportsPresentationMode&&typeof n.webkitSetPresentationMode=="function"&&e}var Rb=Object.defineProperty,Qae=Object.getOwnPropertyDescriptor,Zae=Object.getOwnPropertyNames,ele=Object.prototype.hasOwnProperty,tle=(n,e)=>{for(var t in e)Rb(n,t,{get:e[t],enumerable:!0})},nle=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zae(e))!ele.call(n,i)&&i!==t&&Rb(n,i,{get:()=>e[i],enumerable:!(r=Qae(e,i))||r.enumerable});return n},rle=n=>nle(Rb({},"__esModule",{value:!0}),n),ez={};tle(ez,{AUDIO_EXTENSIONS:()=>Pb,DASH_EXTENSIONS:()=>pz,FLV_EXTENSIONS:()=>mz,HLS_EXTENSIONS:()=>Bb,MATCH_URL_DAILYMOTION:()=>uz,MATCH_URL_FACEBOOK:()=>iz,MATCH_URL_FACEBOOK_WATCH:()=>sz,MATCH_URL_KALTURA:()=>dz,MATCH_URL_MIXCLOUD:()=>fz,MATCH_URL_MUX:()=>rz,MATCH_URL_SOUNDCLOUD:()=>tz,MATCH_URL_STREAMABLE:()=>oz,MATCH_URL_TWITCH_CHANNEL:()=>cz,MATCH_URL_TWITCH_VIDEO:()=>lz,MATCH_URL_VIDYARD:()=>hz,MATCH_URL_VIMEO:()=>nz,MATCH_URL_WISTIA:()=>az,MATCH_URL_YOUTUBE:()=>KA,VIDEO_EXTENSIONS:()=>Ib,canPlay:()=>sle});var ile=rle(ez),L2=c_;const KA=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,tz=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,nz=/vimeo\.com\/(?!progressive_redirect).+/,rz=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,iz=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,sz=/^https?:\/\/fb\.watch\/.+$/,oz=/streamable\.com\/([a-z0-9]+)$/,az=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,lz=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,cz=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,uz=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,fz=/mixcloud\.com\/([^/]+\/[^/]+)/,hz=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,dz=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,Pb=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,Ib=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,Bb=/\.(m3u8)($|\?)/i,pz=/\.(mpd)($|\?)/i,mz=/\.(flv)($|\?)/i,YA=n=>{if(n instanceof Array){for(const e of n)if(typeof e=="string"&&YA(e)||YA(e.src))return!0;return!1}return(0,L2.isMediaStream)(n)||(0,L2.isBlobUrl)(n)?!0:Pb.test(n)||Ib.test(n)||Bb.test(n)||pz.test(n)||mz.test(n)},sle={youtube:n=>n instanceof Array?n.every(e=>KA.test(e)):KA.test(n),soundcloud:n=>tz.test(n)&&!Pb.test(n),vimeo:n=>nz.test(n)&&!Ib.test(n)&&!Bb.test(n),mux:n=>rz.test(n),facebook:n=>iz.test(n)||sz.test(n),streamable:n=>oz.test(n),wistia:n=>az.test(n),twitch:n=>lz.test(n)||cz.test(n),dailymotion:n=>uz.test(n),mixcloud:n=>fz.test(n),vidyard:n=>hz.test(n),kaltura:n=>dz.test(n),file:YA};var Db=Object.defineProperty,ole=Object.getOwnPropertyDescriptor,ale=Object.getOwnPropertyNames,lle=Object.prototype.hasOwnProperty,cle=(n,e)=>{for(var t in e)Db(n,t,{get:e[t],enumerable:!0})},ule=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ale(e))!lle.call(n,i)&&i!==t&&Db(n,i,{get:()=>e[i],enumerable:!(r=ole(e,i))||r.enumerable});return n},fle=n=>ule(Db({},"__esModule",{value:!0}),n),gz={};cle(gz,{default:()=>dle});var hle=fle(gz),_i=c_,ii=ile,dle=[{key:"youtube",name:"YouTube",canPlay:ii.canPlay.youtube,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./YouTube-Bv7RJSVe.js").then(n=>n.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:ii.canPlay.soundcloud,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./SoundCloud-C1VL_G6x.js").then(n=>n.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:ii.canPlay.vimeo,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Vimeo-jpvC6MN_.js").then(n=>n.V),[]))},{key:"mux",name:"Mux",canPlay:ii.canPlay.mux,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Mux-Dai8zIhX.js").then(n=>n.M),[]))},{key:"facebook",name:"Facebook",canPlay:ii.canPlay.facebook,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Facebook-CKPGIM9Y.js").then(n=>n.F),[]))},{key:"streamable",name:"Streamable",canPlay:ii.canPlay.streamable,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Streamable-C7Q0erYg.js").then(n=>n.S),[]))},{key:"wistia",name:"Wistia",canPlay:ii.canPlay.wistia,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Wistia-BtpPEPTS.js").then(n=>n.W),[]))},{key:"twitch",name:"Twitch",canPlay:ii.canPlay.twitch,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Twitch-CG-K-V7N.js").then(n=>n.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:ii.canPlay.dailymotion,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./DailyMotion-DDxqzmd6.js").then(n=>n.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:ii.canPlay.mixcloud,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Mixcloud-B8HPtcdk.js").then(n=>n.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:ii.canPlay.vidyard,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Vidyard-D9VQuuXM.js").then(n=>n.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:ii.canPlay.kaltura,lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./Kaltura-BUhC9t_S.js").then(n=>n.K),[]))},{key:"file",name:"FilePlayer",canPlay:ii.canPlay.file,canEnablePIP:n=>ii.canPlay.file(n)&&(document.pictureInPictureEnabled||(0,_i.supportsWebKitPresentationMode)())&&!ii.AUDIO_EXTENSIONS.test(n),lazyPlayer:(0,_i.lazy)(()=>wi(()=>import("./FilePlayer-C_-EUjWy.js").then(n=>n.F),[]))}],O2=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ple(n,e){return!!(n===e||O2(n)&&O2(e))}function mle(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!ple(n[t],e[t]))return!1;return!0}function gle(n,e){e===void 0&&(e=mle);var t,r=[],i,s=!1;function o(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return s&&t===this&&e(a,r)||(i=n.apply(this,a),s=!0,t=this,r=a),i}return o}const vle=Object.freeze(Object.defineProperty({__proto__:null,default:gle},Symbol.toStringTag,{value:"Module"})),yle=_H(vle);var _le=typeof Element<"u",xle=typeof Map=="function",wle=typeof Set=="function",Sle=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ny(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,r,i;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!ny(n[r],e[r]))return!1;return!0}var s;if(xle&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(s=n.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=n.entries();!(r=s.next()).done;)if(!ny(r.value[1],e.get(r.value[0])))return!1;return!0}if(wle&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(s=n.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Sle&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof e.valueOf=="function")return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof e.toString=="function")return n.toString()===e.toString();if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(_le&&n instanceof Element)return!1;for(r=t;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&n.$$typeof)&&!ny(n[i[r]],e[i[r]]))return!1;return!0}return n!==n&&e!==e}var vz=function(e,t){try{return ny(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},Ale=Object.create,u_=Object.defineProperty,Ele=Object.getOwnPropertyDescriptor,Mle=Object.getOwnPropertyNames,ble=Object.getPrototypeOf,Cle=Object.prototype.hasOwnProperty,Tle=(n,e)=>{for(var t in e)u_(n,t,{get:e[t],enumerable:!0})},yz=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Mle(e))!Cle.call(n,i)&&i!==t&&u_(n,i,{get:()=>e[i],enumerable:!(r=Ele(e,i))||r.enumerable});return n},Rle=(n,e,t)=>(t=n!=null?Ale(ble(n)):{},yz(!n||!n.__esModule?u_(t,"default",{value:n,enumerable:!0}):t,n)),Ple=n=>yz(u_({},"__esModule",{value:!0}),n),_z={};Tle(_z,{defaultProps:()=>Dle,propTypes:()=>Ble});var xz=Ple(_z),Ile=Rle(fk);const{string:Tr,bool:si,number:Vu,array:gS,oneOfType:ld,shape:Ui,object:$r,func:fr,node:N2}=Ile.default,Ble={url:ld([Tr,gS,$r]),playing:si,loop:si,controls:si,volume:Vu,muted:si,playbackRate:Vu,width:ld([Tr,Vu]),height:ld([Tr,Vu]),style:$r,progressInterval:Vu,playsinline:si,pip:si,stopOnUnmount:si,light:ld([si,Tr,$r]),playIcon:N2,previewTabIndex:Vu,previewAriaLabel:Tr,fallback:N2,oEmbedUrl:Tr,wrapper:ld([Tr,fr,Ui({render:fr.isRequired})]),config:Ui({soundcloud:Ui({options:$r}),youtube:Ui({playerVars:$r,embedOptions:$r,onUnstarted:fr}),facebook:Ui({appId:Tr,version:Tr,playerId:Tr,attributes:$r}),dailymotion:Ui({params:$r}),vimeo:Ui({playerOptions:$r,title:Tr}),mux:Ui({attributes:$r,version:Tr}),file:Ui({attributes:$r,tracks:gS,forceVideo:si,forceAudio:si,forceHLS:si,forceSafariHLS:si,forceDisableHls:si,forceDASH:si,forceFLV:si,hlsOptions:$r,hlsVersion:Tr,dashVersion:Tr,flvVersion:Tr}),wistia:Ui({options:$r,playerId:Tr,customControls:gS}),mixcloud:Ui({options:$r}),twitch:Ui({options:$r,playerId:Tr}),vidyard:Ui({options:$r})}),onReady:fr,onStart:fr,onPlay:fr,onPause:fr,onBuffer:fr,onBufferEnd:fr,onEnded:fr,onError:fr,onDuration:fr,onSeek:fr,onPlaybackRateChange:fr,onPlaybackQualityChange:fr,onProgress:fr,onClickPreview:fr,onEnablePIP:fr,onDisablePIP:fr},Rr=()=>{},Dle={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Rr},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Rr,onStart:Rr,onPlay:Rr,onPause:Rr,onBuffer:Rr,onBufferEnd:Rr,onEnded:Rr,onError:Rr,onDuration:Rr,onSeek:Rr,onPlaybackRateChange:Rr,onPlaybackQualityChange:Rr,onProgress:Rr,onClickPreview:Rr,onEnablePIP:Rr,onDisablePIP:Rr};var Lle=Object.create,rm=Object.defineProperty,Ole=Object.getOwnPropertyDescriptor,Nle=Object.getOwnPropertyNames,kle=Object.getPrototypeOf,Fle=Object.prototype.hasOwnProperty,Ule=(n,e,t)=>e in n?rm(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zle=(n,e)=>{for(var t in e)rm(n,t,{get:e[t],enumerable:!0})},wz=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Nle(e))!Fle.call(n,i)&&i!==t&&rm(n,i,{get:()=>e[i],enumerable:!(r=Ole(e,i))||r.enumerable});return n},Sz=(n,e,t)=>(t=n!=null?Lle(kle(n)):{},wz(!n||!n.__esModule?rm(t,"default",{value:n,enumerable:!0}):t,n)),Hle=n=>wz(rm({},"__esModule",{value:!0}),n),qn=(n,e,t)=>(Ule(n,typeof e!="symbol"?e+"":e,t),t),Az={};zle(Az,{default:()=>f_});var Gle=Hle(Az),k2=Sz(B),Vle=Sz(vz),Ez=xz,Wle=c_;const jle=5e3;class f_ extends k2.Component{constructor(){super(...arguments),qn(this,"mounted",!1),qn(this,"isReady",!1),qn(this,"isPlaying",!1),qn(this,"isLoading",!0),qn(this,"loadOnReady",null),qn(this,"startOnPlay",!0),qn(this,"seekOnPlay",null),qn(this,"onDurationCalled",!1),qn(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),qn(this,"getInternalPlayer",e=>this.player?this.player[e]:null),qn(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,t=this.getSecondsLoaded(),r=this.getDuration();if(r){const i={playedSeconds:e,played:e/r};t!==null&&(i.loadedSeconds=t,i.loaded=t/r),(i.playedSeconds!==this.prevPlayed||i.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(i),this.prevPlayed=i.playedSeconds,this.prevLoaded=i.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),qn(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:t,volume:r,muted:i}=this.props;e(),!i&&r!==null&&this.player.setVolume(r),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):t&&this.player.play(),this.handleDurationCheck()}),qn(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:t,playbackRate:r}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&r!==1&&this.player.setPlaybackRate(r),e(),this.startOnPlay=!1),t(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),qn(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),qn(this,"handleEnded",()=>{const{activePlayer:e,loop:t,onEnded:r}=this.props;e.loopOnEnded&&t&&this.seekTo(0),t||(this.isPlaying=!1,r())}),qn(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),qn(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),qn(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:t,playing:r,volume:i,muted:s,playbackRate:o,pip:a,loop:l,activePlayer:c,disableDeferredLoading:u}=this.props;if(!(0,Vle.default)(e.url,t)){if(this.isLoading&&!c.forceLoad&&!u&&!(0,Wle.isMediaStream)(t)){console.warn(`ReactPlayer: the attempt to load ${t} is being deferred until the player has loaded`),this.loadOnReady=t;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(t,this.isReady)}!e.playing&&r&&!this.isPlaying&&this.player.play(),e.playing&&!r&&this.isPlaying&&this.player.pause(),!e.pip&&a&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!a&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==i&&i!==null&&this.player.setVolume(i),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),i!==null&&setTimeout(()=>this.player.setVolume(i)))),e.playbackRate!==o&&this.player.setPlaybackRate&&this.player.setPlaybackRate(o),e.loop!==l&&this.player.setLoop&&this.player.setLoop(l)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,t,r){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},jle));return}if(t?t==="fraction":e>0&&e<1){const s=this.player.getDuration();if(!s){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(s*e,r);return}this.player.seekTo(e,r)}render(){const e=this.props.activePlayer;return e?k2.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}qn(f_,"displayName","Player");qn(f_,"propTypes",Ez.propTypes);qn(f_,"defaultProps",Ez.defaultProps);var $le=Object.create,im=Object.defineProperty,Xle=Object.getOwnPropertyDescriptor,Jle=Object.getOwnPropertyNames,Kle=Object.getPrototypeOf,Yle=Object.prototype.hasOwnProperty,qle=(n,e,t)=>e in n?im(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qle=(n,e)=>{for(var t in e)im(n,t,{get:e[t],enumerable:!0})},Mz=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Jle(e))!Yle.call(n,i)&&i!==t&&im(n,i,{get:()=>e[i],enumerable:!(r=Xle(e,i))||r.enumerable});return n},sm=(n,e,t)=>(t=n!=null?$le(Kle(n)):{},Mz(!n||!n.__esModule?im(t,"default",{value:n,enumerable:!0}):t,n)),Zle=n=>Mz(im({},"__esModule",{value:!0}),n),Yn=(n,e,t)=>(qle(n,typeof e!="symbol"?e+"":e,t),t),bz={};Qle(bz,{createReactPlayer:()=>lce});var ece=Zle(bz),Xu=sm(B),tce=sm(YU),vS=sm(yle),F2=sm(vz),_d=xz,Cz=c_,nce=sm(Gle);const rce=(0,Cz.lazy)(()=>wi(()=>import("./Preview-BgrnJRYi.js").then(n=>n.P),[])),ice=typeof window<"u"&&window.document&&typeof document<"u",sce=typeof ac<"u"&&ac.window&&ac.window.document,oce=Object.keys(_d.propTypes),ace=ice||sce?Xu.Suspense:()=>null,cd=[],lce=(n,e)=>{var t;return t=class extends Xu.Component{constructor(){super(...arguments),Yn(this,"state",{showPreview:!!this.props.light}),Yn(this,"references",{wrapper:r=>{this.wrapper=r},player:r=>{this.player=r}}),Yn(this,"handleClickPreview",r=>{this.setState({showPreview:!1}),this.props.onClickPreview(r)}),Yn(this,"showPreview",()=>{this.setState({showPreview:!0})}),Yn(this,"getDuration",()=>this.player?this.player.getDuration():null),Yn(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),Yn(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),Yn(this,"getInternalPlayer",(r="player")=>this.player?this.player.getInternalPlayer(r):null),Yn(this,"seekTo",(r,i,s)=>{if(!this.player)return null;this.player.seekTo(r,i,s)}),Yn(this,"handleReady",()=>{this.props.onReady(this)}),Yn(this,"getActivePlayer",(0,vS.default)(r=>{for(const i of[...cd,...n])if(i.canPlay(r))return i;return e||null})),Yn(this,"getConfig",(0,vS.default)((r,i)=>{const{config:s}=this.props;return tce.default.all([_d.defaultProps.config,_d.defaultProps.config[i]||{},s,s[i]||{}])})),Yn(this,"getAttributes",(0,vS.default)(r=>(0,Cz.omit)(this.props,oce))),Yn(this,"renderActivePlayer",r=>{if(!r)return null;const i=this.getActivePlayer(r);if(!i)return null;const s=this.getConfig(r,i.key);return Xu.default.createElement(nce.default,{...this.props,key:i.key,ref:this.references.player,config:s,activePlayer:i.lazyPlayer||i,onReady:this.handleReady})})}shouldComponentUpdate(r,i){return!(0,F2.default)(this.props,r)||!(0,F2.default)(this.state,i)}componentDidUpdate(r){const{light:i}=this.props;!r.light&&i&&this.setState({showPreview:!0}),r.light&&!i&&this.setState({showPreview:!1})}renderPreview(r){if(!r)return null;const{light:i,playIcon:s,previewTabIndex:o,oEmbedUrl:a,previewAriaLabel:l}=this.props;return Xu.default.createElement(rce,{url:r,light:i,playIcon:s,previewTabIndex:o,previewAriaLabel:l,oEmbedUrl:a,onClick:this.handleClickPreview})}render(){const{url:r,style:i,width:s,height:o,fallback:a,wrapper:l}=this.props,{showPreview:c}=this.state,u=this.getAttributes(r),f=typeof l=="string"?this.references.wrapper:void 0;return Xu.default.createElement(l,{ref:f,style:{...i,width:s,height:o},...u},Xu.default.createElement(ace,{fallback:a},c?this.renderPreview(r):this.renderActivePlayer(r)))}},Yn(t,"displayName","ReactPlayer"),Yn(t,"propTypes",_d.propTypes),Yn(t,"defaultProps",_d.defaultProps),Yn(t,"addCustomPlayer",r=>{cd.push(r)}),Yn(t,"removeCustomPlayers",()=>{cd.length=0}),Yn(t,"canPlay",r=>{for(const i of[...cd,...n])if(i.canPlay(r))return!0;return!1}),Yn(t,"canEnablePIP",r=>{for(const i of[...cd,...n])if(i.canEnablePIP&&i.canEnablePIP(r))return!0;return!1}),t};var cce=Object.create,h_=Object.defineProperty,uce=Object.getOwnPropertyDescriptor,fce=Object.getOwnPropertyNames,hce=Object.getPrototypeOf,dce=Object.prototype.hasOwnProperty,pce=(n,e)=>{for(var t in e)h_(n,t,{get:e[t],enumerable:!0})},Tz=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fce(e))!dce.call(n,i)&&i!==t&&h_(n,i,{get:()=>e[i],enumerable:!(r=uce(e,i))||r.enumerable});return n},mce=(n,e,t)=>(t=n!=null?cce(hce(n)):{},Tz(!n||!n.__esModule?h_(t,"default",{value:n,enumerable:!0}):t,n)),gce=n=>Tz(h_({},"__esModule",{value:!0}),n),Rz={};pce(Rz,{default:()=>xce});var vce=gce(Rz),qA=mce(hle),yce=ece;const _ce=qA.default[qA.default.length-1];var xce=(0,yce.createReactPlayer)(qA.default,_ce);const wce=_l(vce),U2=[{id:1,url:"https://youtu.be/BF3bXji-J7I?si=74PNseZhN3-qip7Q",subtitle:"The Fox and the Crow Early one morning, a fox is walking through the woods. He is hungry, and he is looking for something to eat. He sees a crow sitting on the highest branch of a tree. The crow has a piece of cheese in her beak. Mmm… I love cheese! thinks the fox. I think I’ve found my breakfast! But how can I get the cheese? He thinks and he thinks. Then he has a clever idea. I will make her talk! He sits at the bottom of the tree and looks up at the crow. Good morning, Miss Crow! he says. It’s a lovely day, isn’t it? The crow looks down at the fox. She says nothing. I said, good morning! says the fox. Did you hear me? Maybe you can't hear me up there... The crow is suspicious. She holds the cheese tightly in her beak and says nothing. Hmm. This is not so easy, thinks the fox. But he doesn’t give up. He smiles at the crow. You know… you really are the most beautiful bird, he says. Your feathers are so shiny! Your eyes are so intelligent! Your beak is so…umm… pointy! Everything about you is perfect! Still, the crow says nothing. So he fox says: Tell me, Miss Crow…is your voice ALSO magnificent? I hear that you have the most wonderful voice. Please sing for me! Just one song! Then I can tell everyone you really are the most incredible bird — the queen of all birds, in fact! This makes the crow feel good. She wants everyone to know she has a wonderful voice. She wants everyone to know that she is the queen of all birds. She smiles a little smile. Then she smiles a big smile. Then she opens her mouth to sing her best song for the fox. And… plop! The cheese drops out of her beak and falls straight into the mouth of the fox. He swallows it in one gulp. MMmmmmm! Thank you for the delicious breakfast, Miss Crow! laughs the fox as he walks away. Have a lovely day! Moral: Beware of flatterers. They often want something from you."},{id:2,url:"https://youtu.be/_6mlmRJHxNo?si=CwxD6t_3xXnMTvFf",subtitle:"The Oak Tree One hot day, two hikers are walking in the dry, brown hills. They have been walking all day, and they are tired and hungry. They see a tree in the distance. I am sooooo hungry! says one hiker. Do you think that’s an apple tree? I want a big, crunchy, red apple! Nah, that’s not an apple tree, says the other. It's a pear tree! Pears are my favorite. I want a sweet, juicy, yellow pear! But when they arrive at the tree, there are no apples. Or pears either! In fact, there is no fruit at all. Aw, boo! says one hiker. It’s a useless oak tree! Just then, the sky turns grey and it starts to rain. The two hikers run under the oak tree to stay dry. It rains and rains, but the oak tree is like a big umbrella. The hikers don't get wet. They wait under the oak tree for the rain to stop. Day turns into night. I’m cold, says one hiker. We should make a fire. Help me collect some wood! Luckily, there are many old branches under the oak tree. The two hikers collect the branches and make a nice campfire out of them. They sit beside the fire to warm themselves. I’m tired, says one hiker. We should sleep here tonight. Help me make a bed! The hikers make a bed out of soft, green oak leaves. They snuggle into the leaves and fall asleep. The rain falls and the wind blows, but the hikers are comfortable, warm and dry — under the useless oak tree. Moral: Sometimes the best gifts aren’t what we originally hoped for."},{id:3,url:"https://youtu.be/TgnjPudDyLk?si=1cBjcEhgqrsYVhoq",subtitle:"The Dog and his Bone A dog is walking down the street, when he sees a bone in a trash can. A bone! Yippee! How lucky for me! he thinks. He grabs the bone, and happily runs home. He runs past the train station and the school. He runs through the park. He runs onto a bridge. On the bridge, the dog looks down into the deep, still water below. There, he sees another dog with a bone in its mouth. Who is that dog? he wonders. What is he doing down there? The dog stares at the other dog. The other dog stares back. Where did that dog get such a BIG bone? the dog wonders. Why is his bone bigger than mine? The dog growls at the other dog. The other dog growls too. I want that big bone! he thinks. The greedy dog decides to steal the other dog's bone. He leaps off the bridge and into the water. Splash! But as soon as he hits the water, the other dog disappears. There was never any other dog. It was just his own reflection! The water is very deep and the dog is surprised. Woof woof woof! Help! he barks. And when he barks, his bone drops from his mouth — and sinks to the bottom of the water. The dog swims to shore. He is wet and cold, and now he has no bone at all. Moral: Be happy with what you have. If you're greedy, you might lose everything."},{id:4,url:"https://youtu.be/l0Z8A4u3CtI?si=rjL53V6SfyBJwkKS",subtitle:"The Wind and the Sun The wind and the sun are having a disagreement. I am the most powerful! says the wind. No, I am the most powerful! says the sun. I can blow trees to the ground! brags the wind. I can push ships across the ocean. I can make hurricanes and tornadoes! Is that right? replies the sun. Well, I can melt all the snow on the mountains. I can dry up an entire lake. I can make a sidewalk so hot that it cooks an egg! Just then, they see a man walking along the road in his winter jacket. Let’s have a contest to see who is more powerful, says the wind. Whoever can remove the man’s jacket first wins. The sun agrees. The wind goes first. He blows a gust of cold wind at the man. The man shivers and zips up his jacket. Brrr! What a cold and windy day! It starts to rain. The wind blows even harder and turns the rain into snow. Well look at that! It’s snowing! says the man. Snow wasn’t in the weather forecast today... He pulls his hood over his head. The wind blows his strongest gust towards the man, but the man’s jacket stays on. Hmm. It’s a bit fresh today… he says. A winter storm must be coming... He zips the jacket higher to cover his nose. Gah! This is impossible, says the wind. He stops blowing. My turn! says the sun. First the sun shines enough to stop the snow. The man unzips his hood. Then the sun pulls the clouds apart and gently shines down on the man. Suddenly, it is a beautiful spring day. Wow. The weather sure is strange around here! says the man. He unzips his jacket. The sun gently wiggles her fingers and increases the temperature. What strange weather. Now it feels like summer! the man says as he begins to sweat. Goodness me, it's so hot! He removes his winter jacket. He lies down on the grass for a nap in the warm sun. I win! says the sun, beaming. Moral: Sometimes warmth and gentleness can achieve more than strength and force."},{id:5,url:"https://youtu.be/1DeQVnSxcLk?si=fOduMSzLxqK8u0FR",subtitle:"The Girl and the Ice Cream Truck An original tale by TheFableCottage.com A girl sits at her bedroom window, looking down at the street. She is waiting for summer. She wants to eat ice cream and go swimming. She wants picnics and strawberries. She is tired of winter jackets and gloves. She is tired of grey skies and snow. Her mother says that summer is far away. Her father says that more snow is coming. Still, she sits at the window waiting for some sign that summer has arrived. Just then, she sees an ice cream truck driving down the street. An ice cream truck! That MUST mean it’s summer now! she squeals. She runs to her closet and puts on her bathing suit and her summer hat. She runs down the stairs and out the door and… CRUNCH! She looks down and sees her bare feet... ….in the icy grass. But…but… I saw an ice cream truck! she says, confused. She looks up just in time to see the ice cream truck turn the corner ... ... and pull into the auto repair shop. Moral: Don’t draw a conclusion based on a single observation; one ice cream truck does not make a summer!"},{id:6,url:"https://youtu.be/uLAGrLJFBt4?si=psCLHHqao7iRwRcC",subtitle:"Do not Trust anybody. Once a merchant was going through the forest with his camel. He left the camel in the forest, as it was sick and continued his journey all by himself. It ate whatever was available in the forest, recovered soon, and was happy. The Lion, Fox, and the Crow were living in unity in the same forest. They came to know about the camel and they inquired about it. The camel narrated the incident, and all four became good friends. One day, when the lion hunted an Elephant, it got hurt very badly. So, he stayed inside his den and could not come out. The Lion could not go out hunting. The other animals could not hunt, and all of them starved. The Lion called the Fox, the Crow, and the Camel. 'Mr. Fox, I am very hungry,' he said. 'Go in this direction and get me some food. Mr. Crow, you go in the other direction. Mr. Camel, you go in the opposite direction and get something. All three of you must come back with food. Okay, you can go now.' All three went in different directions but could not get any food. They met again together and took a decision. Accordingly, they stood in front of the Lion. The Lion said, 'I searched everywhere but could not get food to satisfy your hunger. So, I offer myself as food, and you can eat me.' 'No, My Lord,' said the Crow, 'I am too small. I will not be able to satisfy your hunger. You can kill and eat me.' 'No, Your Honor,' said the Fox, 'I am the last of the three, and I am the only one who can satisfy not only your hunger but the others' hunger as well. So, you kill and eat me.' Though each one gave their own ideas, as soon as the Camel gave his idea, the Lion and the Fox pounced on him immediately. Moral: Those who are cunning will always fulfill their wicked thoughts, however friendly you may be. If you trust others easily, you will naturally have to face unexpected difficulties. Even if it appears good at the first instance, when the time comes, the wicked person's nature will not change. Come on little bunnies… Give thumbs up for the video, share with your friends, and subscribe to our channel for more awesome videos."},{id:7,url:"https://youtu.be/17o2rPGryuk?si=jtRRpPBM1HWUOuYj",subtitle:"The Frightened Lion (A version of the tale by TheFableCottage.com) One night, Lion is getting ready for bed. He reads his favorite bedtime story and sings his favorite bedtime song. He turns on his night-light. Then — he hears a sound... Tap! … Tap! 'What’s that sound?' he whispers. Tap! … Tap! 'That sound… it’s coming from outside the window!' He climbs out of bed. He grabs a baseball bat and tip-toes towards the window. Tap! Tap! Tappity-tap! TAP! 'It’s a monster!' he thinks. He grabs his bicycle helmet and puts it on his head for protection. He hears the sound again... TAP! ... TAP! … Tappity-TAP! Lion panics. 'The monster is getting closer! It sounds like the BIGGEST, SCARIEST monster ever!' Tap! ... Tap! ... Tappity-tap! TAPPITY-TAP! TAPPITY-TAPPITY-TAPPITY…. TAP! 'EEEK!' Lion squeals. He runs away from the window and hides under the bed. He pulls a blanket over his head. He holds his baseball bat tightly in his hands, and… Tappity tap! ... A little frog jumps up on the window sill. The frog is wearing a tutu and tap shoes. She dances a little dance. Tap tap tappity tap! 'Hello Lion! Are you in there?' says the frog. She looks through the window and sees Lion hiding under the bed. Lion is wrapped in a blanket… wearing a bicycle helmet… and holding a baseball bat. He looks ridiculous. (And to be honest, he feels ridiculous too.) 'Ummm… I have some new dance moves to show you,' says the frog. 'But you look busy. I will come back later. See ya!' The frog hops down to the ground and happily dances away. Tap-TAP! Tappity-tappity-TAP! Moral: Sometimes our imaginations make things scarier than they really are."},{id:8,url:"https://youtu.be/11uM9tcJ7vM?si=vmsYGuMm3shwUq9F",subtitle:"The Fox and the Stork Retold and illustrated by Gerald McDermott. Long ago, there was a fox who lived in the forest. Fox liked to play tricks on his friends. One morning, Fox rowed his boat around the pond. He saw his friend Stork and said, 'Would you like to come to my house for dinner?' Fox asked. 'How kind of you to ask!' said Stork. 'Yes. I would like that.' The next day, Stork went to Fox’s house for dinner. She tapped on Fox’s door with her long bill. 'Come in,' said Fox. 'I made soup!' 'Wonderful!' said Stork. 'I like soup.' Fox and Stork sat down to eat. Fox didn’t put the soup in a bowl. He served it in a flat dish. Fox felt very smart. Stork couldn’t eat from the flat dish. All she could do was dip the tip of her long bill into the soup. Fox soon slurped it all up! Stork was still hungry, but she didn’t complain. 'Thank you for the dinner,' said Stork. 'Come to my house, and I’ll make dinner for you.' The next day, Fox rode his boat to Stork's house. 'I don't like to boast,' said Stork, 'but my soup is the best! I use greens that grow in my own garden.' 'Wonderful!' said Fox, 'Let's eat!' Stork served the soup in a tall jar. Fox couldn't get a drop! All he could do was lick the top of the jar. Stork dipped in her long bill and drank it all up. Fox moaned and groaned as he rowed home. 'I'm so hungry! This is my reward for tricking a friend!' At last, Fox saw that being kind to others is the right thing to do!"}];function Sce(){const[n,e]=B.useState(null),[t,r]=B.useState(!1),[i,s]=B.useState(null),[o,a]=B.useState(""),[l,c]=B.useState([]),[u,f]=B.useState(0),[p,m]=B.useState(!1),v=(w,S)=>{const E=[...l];E[S]=w.target.value,c(E)},_=()=>{let w=0;i.forEach((S,E)=>{S.answer===l[E]&&(w+=1)}),f(w),m(!0)},y=()=>{m(!1)},g=async w=>{try{const S=await fetch("https://ai-interview-71dz.onrender.com/listen-generate-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paragraph:w})});if(!S.ok)throw new Error("Failed to fetch questions");const E=await S.json();a(E.paragraph),s(E.questions.questions),r(!0)}catch(S){console.error("Error fetching questions:",S)}};return B.useEffect(()=>{(()=>{const S=Math.floor(Math.random()*U2.length);e(U2[S])})()},[]),B.useEffect(()=>{if(n){const w=setTimeout(()=>{g(n.subtitle)},3e4);return()=>clearTimeout(w)}},[n]),F.jsx("div",{className:"App",children:t?F.jsx("div",{className:"question-page",children:F.jsxs("div",{className:"questions-container",children:[F.jsx("h2",{className:"questions-header",children:"Questions"}),Array.isArray(i)&&i.length>0?i.map((w,S)=>F.jsxs("div",{className:"question-block",children:[F.jsxs("p",{className:"question-text",children:[F.jsxs("strong",{children:["Q",S+1,":"]})," ",w.question]}),F.jsx("div",{className:"options-container",children:Object.keys(w.options).map((E,P)=>F.jsxs("label",{className:"option-label",children:[F.jsx("input",{type:"radio",name:`question-${S}`,value:E,onChange:b=>v(b,S),checked:l[S]===E,className:"option-input"}),w.options[E]]},P))})]},S)):F.jsx("p",{children:"No questions available."}),F.jsx("button",{onClick:_,className:"submit-button",children:"Submit"}),p&&F.jsx("div",{className:"score-modal",style:{display:"flex"},children:F.jsxs("div",{className:"score-modal-content",children:[F.jsx("span",{className:"close-button",onClick:y,children:"×"}),F.jsxs("h3",{children:["Your Score: ",u," / ",i.length]})]})})]})}):F.jsxs(F.Fragment,{children:[F.jsx("h1",{children:"Listening Comprehension"}),n&&F.jsx("div",{className:"player-wrapper",style:{marginBottom:"20px"},children:F.jsx(wce,{className:"react-player",url:n.url,controls:!0,config:{youtube:{playerVars:{modestbranding:1,rel:0,showinfo:0}}},width:"100%",height:"700px"})})]})})}function Ace(){const n=Op();return F.jsxs("div",{className:"App",children:[F.jsx(W5,{}),F.jsxs(D5,{children:[F.jsx(tc,{path:"/",element:F.jsx($5,{})}),F.jsx(tc,{path:"/skills",element:F.jsx(q5,{})}),F.jsx(tc,{path:"/advance",element:F.jsx(Dse,{})}),F.jsx(tc,{path:"/read",element:F.jsx(lae,{})}),F.jsx(tc,{path:"/write",element:F.jsx(cae,{})}),F.jsx(tc,{path:"/listen",element:F.jsx(Sce,{})})]}),n.pathname!=="/advance"&&F.jsx(j5,{})]})}function Ece(){return F.jsx(z5,{children:F.jsx(Ace,{})})}yS.createRoot(document.getElementById("root")).render(F.jsx(ne.StrictMode,{children:F.jsx(Ece,{})}));export{wi as _,_l as g,ile as p,B as r,c_ as u};
